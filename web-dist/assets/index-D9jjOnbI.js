import{j as i,A as Yl,m as et,Z as ql,X as Qc,S as oa,T as Ll,a as wo,b as SM,R as Y1,D as jp,c as Un,C as q1,d as NM,e as Mg,f as Rm,g as Rc,h as jM,i as gc,k as Bl,l as Cp,G as G1,P as Tp,n as Mp,o as Ck,p as Iu,q as Pu,r as xc,s as bc,M as Ep,t as K1,u as Mn,v as CM,w as TM,x as MM,y as EM,z as Tk,B as yc,E as AM,F as DM,W as OM,H as RM,I as W1,J as zM,K as LM,L as cn,N as BM,O as IM,U as PM,Q as _M,V as Mk,Y as HM,_ as $M,$ as UM,a0 as VM,a1 as Ek,a2 as FM,a3 as YM,a4 as qM,a5 as GM,a6 as KM,a7 as WM,a8 as XM,a9 as QM,aa as JM,ab as ZM,ac as vc,ad as e3,ae as t3,af as r3,ag as Ak,ah as n3}from"./ui-CpSIYBYH.js";import{a as a3,c as s3,g as X1,d as P,r as M,R as Q1,b as Wf,e as J1,O as o3,u as Eg,f as l3,h as i3,N as Dk,i as c3}from"./react-CXlWHscv.js";import{c as Z1,R as la,B as zc,C as Il,X as Pl,Y as kc,T as ia,a as Lc,P as Xf,b as Qf,d as Jf,L as d3,e as u3,r as f3,w as h3}from"./charts-BMgs7fyw.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();var zm={exports:{}},ac={},Lm={exports:{}},Bm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ok;function m3(){return Ok||(Ok=1,(function(r){function e(B,W){var L=B.length;B.push(W);e:for(;0<L;){var H=L-1>>>1,Q=B[H];if(0<s(Q,W))B[H]=W,B[L]=Q,L=H;else break e}}function t(B){return B.length===0?null:B[0]}function n(B){if(B.length===0)return null;var W=B[0],L=B.pop();if(L!==W){B[0]=L;e:for(var H=0,Q=B.length,ue=Q>>>1;H<ue;){var Ae=2*(H+1)-1,me=B[Ae],be=Ae+1,$e=B[be];if(0>s(me,L))be<Q&&0>s($e,me)?(B[H]=$e,B[be]=L,H=be):(B[H]=me,B[Ae]=L,H=Ae);else if(be<Q&&0>s($e,L))B[H]=$e,B[be]=L,H=be;else break e}}return W}function s(B,W){var L=B.sortIndex-W.sortIndex;return L!==0?L:B.id-W.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var h=[],m=[],p=1,x=null,b=3,v=!1,k=!1,w=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function D(B){for(var W=t(m);W!==null;){if(W.callback===null)n(m);else if(W.startTime<=B)n(m),W.sortIndex=W.expirationTime,e(h,W);else break;W=t(m)}}function A(B){if(w=!1,D(B),!k)if(t(h)!==null)k=!0,Y||(Y=!0,he());else{var W=t(m);W!==null&&ve(A,W.startTime-B)}}var Y=!1,I=-1,$=5,ae=-1;function le(){return S?!0:!(r.unstable_now()-ae<$)}function ie(){if(S=!1,Y){var B=r.unstable_now();ae=B;var W=!0;try{e:{k=!1,w&&(w=!1,T(I),I=-1),v=!0;var L=b;try{t:{for(D(B),x=t(h);x!==null&&!(x.expirationTime>B&&le());){var H=x.callback;if(typeof H=="function"){x.callback=null,b=x.priorityLevel;var Q=H(x.expirationTime<=B);if(B=r.unstable_now(),typeof Q=="function"){x.callback=Q,D(B),W=!0;break t}x===t(h)&&n(h),D(B)}else n(h);x=t(h)}if(x!==null)W=!0;else{var ue=t(m);ue!==null&&ve(A,ue.startTime-B),W=!1}}break e}finally{x=null,b=L,v=!1}W=void 0}}finally{W?he():Y=!1}}}var he;if(typeof C=="function")he=function(){C(ie)};else if(typeof MessageChannel<"u"){var ye=new MessageChannel,fe=ye.port2;ye.port1.onmessage=ie,he=function(){fe.postMessage(null)}}else he=function(){N(ie,0)};function ve(B,W){I=N(function(){B(r.unstable_now())},W)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(B){B.callback=null},r.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<B?Math.floor(1e3/B):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(B){switch(b){case 1:case 2:case 3:var W=3;break;default:W=b}var L=b;b=W;try{return B()}finally{b=L}},r.unstable_requestPaint=function(){S=!0},r.unstable_runWithPriority=function(B,W){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var L=b;b=B;try{return W()}finally{b=L}},r.unstable_scheduleCallback=function(B,W,L){var H=r.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?H+L:H):L=H,B){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=L+Q,B={id:p++,callback:W,priorityLevel:B,startTime:L,expirationTime:Q,sortIndex:-1},L>H?(B.sortIndex=L,e(m,B),t(h)===null&&B===t(m)&&(w?(T(I),I=-1):w=!0,ve(A,L-H))):(B.sortIndex=Q,e(h,B),k||v||(k=!0,Y||(Y=!0,he()))),B},r.unstable_shouldYield=le,r.unstable_wrapCallback=function(B){var W=b;return function(){var L=b;b=W;try{return B.apply(this,arguments)}finally{b=L}}}})(Bm)),Bm}var Rk;function p3(){return Rk||(Rk=1,Lm.exports=m3()),Lm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zk;function g3(){if(zk)return ac;zk=1;var r=p3(),e=a3(),t=s3();function n(a){var o="https://react.dev/errors/"+a;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)o+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function l(a){var o=a,d=a;if(a.alternate)for(;o.return;)o=o.return;else{a=o;do o=a,(o.flags&4098)!==0&&(d=o.return),a=o.return;while(a)}return o.tag===3?d:null}function c(a){if(a.tag===13){var o=a.memoizedState;if(o===null&&(a=a.alternate,a!==null&&(o=a.memoizedState)),o!==null)return o.dehydrated}return null}function u(a){if(l(a)!==a)throw Error(n(188))}function h(a){var o=a.alternate;if(!o){if(o=l(a),o===null)throw Error(n(188));return o!==a?null:a}for(var d=a,f=o;;){var g=d.return;if(g===null)break;var y=g.alternate;if(y===null){if(f=g.return,f!==null){d=f;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===d)return u(g),a;if(y===f)return u(g),o;y=y.sibling}throw Error(n(188))}if(d.return!==f.return)d=g,f=y;else{for(var j=!1,E=g.child;E;){if(E===d){j=!0,d=g,f=y;break}if(E===f){j=!0,f=g,d=y;break}E=E.sibling}if(!j){for(E=y.child;E;){if(E===d){j=!0,d=y,f=g;break}if(E===f){j=!0,f=y,d=g;break}E=E.sibling}if(!j)throw Error(n(189))}}if(d.alternate!==f)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?a:o}function m(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a;for(a=a.child;a!==null;){if(o=m(a),o!==null)return o;a=a.sibling}return null}var p=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),N=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),C=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),Y=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),ie=Symbol.iterator;function he(a){return a===null||typeof a!="object"?null:(a=ie&&a[ie]||a["@@iterator"],typeof a=="function"?a:null)}var ye=Symbol.for("react.client.reference");function fe(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===ye?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case k:return"Fragment";case S:return"Profiler";case w:return"StrictMode";case A:return"Suspense";case Y:return"SuspenseList";case ae:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case v:return"Portal";case C:return(a.displayName||"Context")+".Provider";case T:return(a._context.displayName||"Context")+".Consumer";case D:var o=a.render;return a=a.displayName,a||(a=o.displayName||o.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case I:return o=a.displayName||null,o!==null?o:fe(a.type)||"Memo";case $:o=a._payload,a=a._init;try{return fe(a(o))}catch{}}return null}var ve=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},H=[],Q=-1;function ue(a){return{current:a}}function Ae(a){0>Q||(a.current=H[Q],H[Q]=null,Q--)}function me(a,o){Q++,H[Q]=a.current,a.current=o}var be=ue(null),$e=ue(null),_e=ue(null),de=ue(null);function ne(a,o){switch(me(_e,o),me($e,a),me(be,null),o.nodeType){case 9:case 11:a=(a=o.documentElement)&&(a=a.namespaceURI)?ek(a):0;break;default:if(a=o.tagName,o=o.namespaceURI)o=ek(o),a=tk(o,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Ae(be),me(be,a)}function ge(){Ae(be),Ae($e),Ae(_e)}function Z(a){a.memoizedState!==null&&me(de,a);var o=be.current,d=tk(o,a.type);o!==d&&(me($e,a),me(be,d))}function oe(a){$e.current===a&&(Ae(be),Ae($e)),de.current===a&&(Ae(de),Zi._currentValue=L)}var Le=Object.prototype.hasOwnProperty,Je=r.unstable_scheduleCallback,it=r.unstable_cancelCallback,zt=r.unstable_shouldYield,Yt=r.unstable_requestPaint,Et=r.unstable_now,te=r.unstable_getCurrentPriorityLevel,hn=r.unstable_ImmediatePriority,hr=r.unstable_UserBlockingPriority,St=r.unstable_NormalPriority,mr=r.unstable_LowPriority,Qe=r.unstable_IdlePriority,Wr=r.log,Wn=r.unstable_setDisableYieldValue,$t=null,Nt=null;function Nr(a){if(typeof Wr=="function"&&Wn(a),Nt&&typeof Nt.setStrictMode=="function")try{Nt.setStrictMode($t,a)}catch{}}var jr=Math.clz32?Math.clz32:xe,Xn=Math.log,G=Math.LN2;function xe(a){return a>>>=0,a===0?32:31-(Xn(a)/G|0)|0}var Ie=256,Ce=4194304;function Ge(a){var o=a&42;if(o!==0)return o;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Fe(a,o,d){var f=a.pendingLanes;if(f===0)return 0;var g=0,y=a.suspendedLanes,j=a.pingedLanes;a=a.warmLanes;var E=f&134217727;return E!==0?(f=E&~y,f!==0?g=Ge(f):(j&=E,j!==0?g=Ge(j):d||(d=E&~a,d!==0&&(g=Ge(d))))):(E=f&~y,E!==0?g=Ge(E):j!==0?g=Ge(j):d||(d=f&~a,d!==0&&(g=Ge(d)))),g===0?0:o!==0&&o!==g&&(o&y)===0&&(y=g&-g,d=o&-o,y>=d||y===32&&(d&4194048)!==0)?o:g}function Lt(a,o){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&o)===0}function Dn(a,o){switch(a){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hr(){var a=Ie;return Ie<<=1,(Ie&4194048)===0&&(Ie=256),a}function xa(){var a=Ce;return Ce<<=1,(Ce&62914560)===0&&(Ce=4194304),a}function At(a){for(var o=[],d=0;31>d;d++)o.push(a);return o}function Cr(a,o){a.pendingLanes|=o,o!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function nd(a,o,d,f,g,y){var j=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var E=a.entanglements,R=a.expirationTimes,V=a.hiddenUpdates;for(d=j&~d;0<d;){var X=31-jr(d),ee=1<<X;E[X]=0,R[X]=-1;var F=V[X];if(F!==null)for(V[X]=null,X=0;X<F.length;X++){var q=F[X];q!==null&&(q.lane&=-536870913)}d&=~ee}f!==0&&_o(a,f,0),y!==0&&g===0&&a.tag!==0&&(a.suspendedLanes|=y&~(j&~o))}function _o(a,o,d){a.pendingLanes|=o,a.suspendedLanes&=~o;var f=31-jr(o);a.entangledLanes|=o,a.entanglements[f]=a.entanglements[f]|1073741824|d&4194090}function ci(a,o){var d=a.entangledLanes|=o;for(a=a.entanglements;d;){var f=31-jr(d),g=1<<f;g&o|a[f]&o&&(a[f]|=o),d&=~g}}function Ka(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function di(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function ad(){var a=W.p;return a!==0?a:(a=window.event,a===void 0?32:vk(a.type))}function Ho(a,o){var d=W.p;try{return W.p=a,o()}finally{W.p=d}}var On=Math.random().toString(36).slice(2),O="__reactFiber$"+On,ce="__reactProps$"+On,Te="__reactContainer$"+On,Zt="__reactEvents$"+On,Tt="__reactListeners$"+On,Ze="__reactHandles$"+On,Rn="__reactResources$"+On,mn="__reactMarker$"+On;function Xr(a){delete a[O],delete a[ce],delete a[Zt],delete a[Tt],delete a[Ze]}function pr(a){var o=a[O];if(o)return o;for(var d=a.parentNode;d;){if(o=d[Te]||d[O]){if(d=o.alternate,o.child!==null||d!==null&&d.child!==null)for(a=sk(a);a!==null;){if(d=a[O])return d;a=sk(a)}return o}a=d,d=a.parentNode}return null}function $r(a){if(a=a[O]||a[Te]){var o=a.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return a}return null}function ui(a){var o=a.tag;if(o===5||o===26||o===27||o===6)return a.stateNode;throw Error(n(33))}function $o(a){var o=a[Rn];return o||(o=a[Rn]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function er(a){a[mn]=!0}var Vx=new Set,Fx={};function qs(a,o){Uo(a,o),Uo(a+"Capture",o)}function Uo(a,o){for(Fx[a]=o,a=0;a<o.length;a++)Vx.add(o[a])}var pC=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yx={},qx={};function gC(a){return Le.call(qx,a)?!0:Le.call(Yx,a)?!1:pC.test(a)?qx[a]=!0:(Yx[a]=!0,!1)}function sd(a,o,d){if(gC(o))if(d===null)a.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){a.removeAttribute(o);return}}a.setAttribute(o,""+d)}}function od(a,o,d){if(d===null)a.removeAttribute(o);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(o);return}a.setAttribute(o,""+d)}}function ba(a,o,d,f){if(f===null)a.removeAttribute(d);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(o,d,""+f)}}var Th,Gx;function Vo(a){if(Th===void 0)try{throw Error()}catch(d){var o=d.stack.trim().match(/\n( *(at )?)/);Th=o&&o[1]||"",Gx=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Th+a+Gx}var Mh=!1;function Eh(a,o){if(!a||Mh)return"";Mh=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(q){var F=q}Reflect.construct(a,[],ee)}else{try{ee.call()}catch(q){F=q}a.call(ee.prototype)}}else{try{throw Error()}catch(q){F=q}(ee=a())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(q){if(q&&F&&typeof q.stack=="string")return[q.stack,F.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var y=f.DetermineComponentFrameRoot(),j=y[0],E=y[1];if(j&&E){var R=j.split(`
`),V=E.split(`
`);for(g=f=0;f<R.length&&!R[f].includes("DetermineComponentFrameRoot");)f++;for(;g<V.length&&!V[g].includes("DetermineComponentFrameRoot");)g++;if(f===R.length||g===V.length)for(f=R.length-1,g=V.length-1;1<=f&&0<=g&&R[f]!==V[g];)g--;for(;1<=f&&0<=g;f--,g--)if(R[f]!==V[g]){if(f!==1||g!==1)do if(f--,g--,0>g||R[f]!==V[g]){var X=`
`+R[f].replace(" at new "," at ");return a.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",a.displayName)),X}while(1<=f&&0<=g);break}}}finally{Mh=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?Vo(d):""}function xC(a){switch(a.tag){case 26:case 27:case 5:return Vo(a.type);case 16:return Vo("Lazy");case 13:return Vo("Suspense");case 19:return Vo("SuspenseList");case 0:case 15:return Eh(a.type,!1);case 11:return Eh(a.type.render,!1);case 1:return Eh(a.type,!0);case 31:return Vo("Activity");default:return""}}function Kx(a){try{var o="";do o+=xC(a),a=a.return;while(a);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function pn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Wx(a){var o=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function bC(a){var o=Wx(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,o),f=""+a[o];if(!a.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var g=d.get,y=d.set;return Object.defineProperty(a,o,{configurable:!0,get:function(){return g.call(this)},set:function(j){f=""+j,y.call(this,j)}}),Object.defineProperty(a,o,{enumerable:d.enumerable}),{getValue:function(){return f},setValue:function(j){f=""+j},stopTracking:function(){a._valueTracker=null,delete a[o]}}}}function ld(a){a._valueTracker||(a._valueTracker=bC(a))}function Xx(a){if(!a)return!1;var o=a._valueTracker;if(!o)return!0;var d=o.getValue(),f="";return a&&(f=Wx(a)?a.checked?"true":"false":a.value),a=f,a!==d?(o.setValue(a),!0):!1}function id(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var yC=/[\n"\\]/g;function gn(a){return a.replace(yC,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Ah(a,o,d,f,g,y,j,E){a.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?a.type=j:a.removeAttribute("type"),o!=null?j==="number"?(o===0&&a.value===""||a.value!=o)&&(a.value=""+pn(o)):a.value!==""+pn(o)&&(a.value=""+pn(o)):j!=="submit"&&j!=="reset"||a.removeAttribute("value"),o!=null?Dh(a,j,pn(o)):d!=null?Dh(a,j,pn(d)):f!=null&&a.removeAttribute("value"),g==null&&y!=null&&(a.defaultChecked=!!y),g!=null&&(a.checked=g&&typeof g!="function"&&typeof g!="symbol"),E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?a.name=""+pn(E):a.removeAttribute("name")}function Qx(a,o,d,f,g,y,j,E){if(y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"&&(a.type=y),o!=null||d!=null){if(!(y!=="submit"&&y!=="reset"||o!=null))return;d=d!=null?""+pn(d):"",o=o!=null?""+pn(o):d,E||o===a.value||(a.value=o),a.defaultValue=o}f=f??g,f=typeof f!="function"&&typeof f!="symbol"&&!!f,a.checked=E?a.checked:!!f,a.defaultChecked=!!f,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(a.name=j)}function Dh(a,o,d){o==="number"&&id(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function Fo(a,o,d,f){if(a=a.options,o){o={};for(var g=0;g<d.length;g++)o["$"+d[g]]=!0;for(d=0;d<a.length;d++)g=o.hasOwnProperty("$"+a[d].value),a[d].selected!==g&&(a[d].selected=g),g&&f&&(a[d].defaultSelected=!0)}else{for(d=""+pn(d),o=null,g=0;g<a.length;g++){if(a[g].value===d){a[g].selected=!0,f&&(a[g].defaultSelected=!0);return}o!==null||a[g].disabled||(o=a[g])}o!==null&&(o.selected=!0)}}function Jx(a,o,d){if(o!=null&&(o=""+pn(o),o!==a.value&&(a.value=o),d==null)){a.defaultValue!==o&&(a.defaultValue=o);return}a.defaultValue=d!=null?""+pn(d):""}function Zx(a,o,d,f){if(o==null){if(f!=null){if(d!=null)throw Error(n(92));if(ve(f)){if(1<f.length)throw Error(n(93));f=f[0]}d=f}d==null&&(d=""),o=d}d=pn(o),a.defaultValue=d,f=a.textContent,f===d&&f!==""&&f!==null&&(a.value=f)}function Yo(a,o){if(o){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=o;return}}a.textContent=o}var vC=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function eb(a,o,d){var f=o.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?f?a.setProperty(o,""):o==="float"?a.cssFloat="":a[o]="":f?a.setProperty(o,d):typeof d!="number"||d===0||vC.has(o)?o==="float"?a.cssFloat=d:a[o]=(""+d).trim():a[o]=d+"px"}function tb(a,o,d){if(o!=null&&typeof o!="object")throw Error(n(62));if(a=a.style,d!=null){for(var f in d)!d.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?a.setProperty(f,""):f==="float"?a.cssFloat="":a[f]="");for(var g in o)f=o[g],o.hasOwnProperty(g)&&d[g]!==f&&eb(a,g,f)}else for(var y in o)o.hasOwnProperty(y)&&eb(a,y,o[y])}function Oh(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kC=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),wC=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function cd(a){return wC.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Rh=null;function zh(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var qo=null,Go=null;function rb(a){var o=$r(a);if(o&&(a=o.stateNode)){var d=a[ce]||null;e:switch(a=o.stateNode,o.type){case"input":if(Ah(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),o=d.name,d.type==="radio"&&o!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+gn(""+o)+'"][type="radio"]'),o=0;o<d.length;o++){var f=d[o];if(f!==a&&f.form===a.form){var g=f[ce]||null;if(!g)throw Error(n(90));Ah(f,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(o=0;o<d.length;o++)f=d[o],f.form===a.form&&Xx(f)}break e;case"textarea":Jx(a,d.value,d.defaultValue);break e;case"select":o=d.value,o!=null&&Fo(a,!!d.multiple,o,!1)}}}var Lh=!1;function nb(a,o,d){if(Lh)return a(o,d);Lh=!0;try{var f=a(o);return f}finally{if(Lh=!1,(qo!==null||Go!==null)&&(Kd(),qo&&(o=qo,a=Go,Go=qo=null,rb(o),a)))for(o=0;o<a.length;o++)rb(a[o])}}function fi(a,o){var d=a.stateNode;if(d===null)return null;var f=d[ce]||null;if(f===null)return null;d=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(a=a.type,f=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!f;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(n(231,o,typeof d));return d}var ya=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bh=!1;if(ya)try{var hi={};Object.defineProperty(hi,"passive",{get:function(){Bh=!0}}),window.addEventListener("test",hi,hi),window.removeEventListener("test",hi,hi)}catch{Bh=!1}var Wa=null,Ih=null,dd=null;function ab(){if(dd)return dd;var a,o=Ih,d=o.length,f,g="value"in Wa?Wa.value:Wa.textContent,y=g.length;for(a=0;a<d&&o[a]===g[a];a++);var j=d-a;for(f=1;f<=j&&o[d-f]===g[y-f];f++);return dd=g.slice(a,1<f?1-f:void 0)}function ud(a){var o=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&o===13&&(a=13)):a=o,a===10&&(a=13),32<=a||a===13?a:0}function fd(){return!0}function sb(){return!1}function Ur(a){function o(d,f,g,y,j){this._reactName=d,this._targetInst=g,this.type=f,this.nativeEvent=y,this.target=j,this.currentTarget=null;for(var E in a)a.hasOwnProperty(E)&&(d=a[E],this[E]=d?d(y):y[E]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?fd:sb,this.isPropagationStopped=sb,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=fd)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=fd)},persist:function(){},isPersistent:fd}),o}var Gs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hd=Ur(Gs),mi=p({},Gs,{view:0,detail:0}),SC=Ur(mi),Ph,_h,pi,md=p({},mi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$h,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==pi&&(pi&&a.type==="mousemove"?(Ph=a.screenX-pi.screenX,_h=a.screenY-pi.screenY):_h=Ph=0,pi=a),Ph)},movementY:function(a){return"movementY"in a?a.movementY:_h}}),ob=Ur(md),NC=p({},md,{dataTransfer:0}),jC=Ur(NC),CC=p({},mi,{relatedTarget:0}),Hh=Ur(CC),TC=p({},Gs,{animationName:0,elapsedTime:0,pseudoElement:0}),MC=Ur(TC),EC=p({},Gs,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),AC=Ur(EC),DC=p({},Gs,{data:0}),lb=Ur(DC),OC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},RC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LC(a){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(a):(a=zC[a])?!!o[a]:!1}function $h(){return LC}var BC=p({},mi,{key:function(a){if(a.key){var o=OC[a.key]||a.key;if(o!=="Unidentified")return o}return a.type==="keypress"?(a=ud(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?RC[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$h,charCode:function(a){return a.type==="keypress"?ud(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ud(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),IC=Ur(BC),PC=p({},md,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ib=Ur(PC),_C=p({},mi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$h}),HC=Ur(_C),$C=p({},Gs,{propertyName:0,elapsedTime:0,pseudoElement:0}),UC=Ur($C),VC=p({},md,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),FC=Ur(VC),YC=p({},Gs,{newState:0,oldState:0}),qC=Ur(YC),GC=[9,13,27,32],Uh=ya&&"CompositionEvent"in window,gi=null;ya&&"documentMode"in document&&(gi=document.documentMode);var KC=ya&&"TextEvent"in window&&!gi,cb=ya&&(!Uh||gi&&8<gi&&11>=gi),db=" ",ub=!1;function fb(a,o){switch(a){case"keyup":return GC.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hb(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ko=!1;function WC(a,o){switch(a){case"compositionend":return hb(o);case"keypress":return o.which!==32?null:(ub=!0,db);case"textInput":return a=o.data,a===db&&ub?null:a;default:return null}}function XC(a,o){if(Ko)return a==="compositionend"||!Uh&&fb(a,o)?(a=ab(),dd=Ih=Wa=null,Ko=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return cb&&o.locale!=="ko"?null:o.data;default:return null}}var QC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mb(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o==="input"?!!QC[a.type]:o==="textarea"}function pb(a,o,d,f){qo?Go?Go.push(f):Go=[f]:qo=f,o=eu(o,"onChange"),0<o.length&&(d=new hd("onChange","change",null,d,f),a.push({event:d,listeners:o}))}var xi=null,bi=null;function JC(a){Wv(a,0)}function pd(a){var o=ui(a);if(Xx(o))return a}function gb(a,o){if(a==="change")return o}var xb=!1;if(ya){var Vh;if(ya){var Fh="oninput"in document;if(!Fh){var bb=document.createElement("div");bb.setAttribute("oninput","return;"),Fh=typeof bb.oninput=="function"}Vh=Fh}else Vh=!1;xb=Vh&&(!document.documentMode||9<document.documentMode)}function yb(){xi&&(xi.detachEvent("onpropertychange",vb),bi=xi=null)}function vb(a){if(a.propertyName==="value"&&pd(bi)){var o=[];pb(o,bi,a,zh(a)),nb(JC,o)}}function ZC(a,o,d){a==="focusin"?(yb(),xi=o,bi=d,xi.attachEvent("onpropertychange",vb)):a==="focusout"&&yb()}function eT(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return pd(bi)}function tT(a,o){if(a==="click")return pd(o)}function rT(a,o){if(a==="input"||a==="change")return pd(o)}function nT(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var Qr=typeof Object.is=="function"?Object.is:nT;function yi(a,o){if(Qr(a,o))return!0;if(typeof a!="object"||a===null||typeof o!="object"||o===null)return!1;var d=Object.keys(a),f=Object.keys(o);if(d.length!==f.length)return!1;for(f=0;f<d.length;f++){var g=d[f];if(!Le.call(o,g)||!Qr(a[g],o[g]))return!1}return!0}function kb(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function wb(a,o){var d=kb(a);a=0;for(var f;d;){if(d.nodeType===3){if(f=a+d.textContent.length,a<=o&&f>=o)return{node:d,offset:o-a};a=f}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=kb(d)}}function Sb(a,o){return a&&o?a===o?!0:a&&a.nodeType===3?!1:o&&o.nodeType===3?Sb(a,o.parentNode):"contains"in a?a.contains(o):a.compareDocumentPosition?!!(a.compareDocumentPosition(o)&16):!1:!1}function Nb(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var o=id(a.document);o instanceof a.HTMLIFrameElement;){try{var d=typeof o.contentWindow.location.href=="string"}catch{d=!1}if(d)a=o.contentWindow;else break;o=id(a.document)}return o}function Yh(a){var o=a&&a.nodeName&&a.nodeName.toLowerCase();return o&&(o==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||o==="textarea"||a.contentEditable==="true")}var aT=ya&&"documentMode"in document&&11>=document.documentMode,Wo=null,qh=null,vi=null,Gh=!1;function jb(a,o,d){var f=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;Gh||Wo==null||Wo!==id(f)||(f=Wo,"selectionStart"in f&&Yh(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),vi&&yi(vi,f)||(vi=f,f=eu(qh,"onSelect"),0<f.length&&(o=new hd("onSelect","select",null,o,d),a.push({event:o,listeners:f}),o.target=Wo)))}function Ks(a,o){var d={};return d[a.toLowerCase()]=o.toLowerCase(),d["Webkit"+a]="webkit"+o,d["Moz"+a]="moz"+o,d}var Xo={animationend:Ks("Animation","AnimationEnd"),animationiteration:Ks("Animation","AnimationIteration"),animationstart:Ks("Animation","AnimationStart"),transitionrun:Ks("Transition","TransitionRun"),transitionstart:Ks("Transition","TransitionStart"),transitioncancel:Ks("Transition","TransitionCancel"),transitionend:Ks("Transition","TransitionEnd")},Kh={},Cb={};ya&&(Cb=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function Ws(a){if(Kh[a])return Kh[a];if(!Xo[a])return a;var o=Xo[a],d;for(d in o)if(o.hasOwnProperty(d)&&d in Cb)return Kh[a]=o[d];return a}var Tb=Ws("animationend"),Mb=Ws("animationiteration"),Eb=Ws("animationstart"),sT=Ws("transitionrun"),oT=Ws("transitionstart"),lT=Ws("transitioncancel"),Ab=Ws("transitionend"),Db=new Map,Wh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wh.push("scrollEnd");function zn(a,o){Db.set(a,o),qs(o,[a])}var Ob=new WeakMap;function xn(a,o){if(typeof a=="object"&&a!==null){var d=Ob.get(a);return d!==void 0?d:(o={value:a,source:o,stack:Kx(o)},Ob.set(a,o),o)}return{value:a,source:o,stack:Kx(o)}}var bn=[],Qo=0,Xh=0;function gd(){for(var a=Qo,o=Xh=Qo=0;o<a;){var d=bn[o];bn[o++]=null;var f=bn[o];bn[o++]=null;var g=bn[o];bn[o++]=null;var y=bn[o];if(bn[o++]=null,f!==null&&g!==null){var j=f.pending;j===null?g.next=g:(g.next=j.next,j.next=g),f.pending=g}y!==0&&Rb(d,g,y)}}function xd(a,o,d,f){bn[Qo++]=a,bn[Qo++]=o,bn[Qo++]=d,bn[Qo++]=f,Xh|=f,a.lanes|=f,a=a.alternate,a!==null&&(a.lanes|=f)}function Qh(a,o,d,f){return xd(a,o,d,f),bd(a)}function Jo(a,o){return xd(a,null,null,o),bd(a)}function Rb(a,o,d){a.lanes|=d;var f=a.alternate;f!==null&&(f.lanes|=d);for(var g=!1,y=a.return;y!==null;)y.childLanes|=d,f=y.alternate,f!==null&&(f.childLanes|=d),y.tag===22&&(a=y.stateNode,a===null||a._visibility&1||(g=!0)),a=y,y=y.return;return a.tag===3?(y=a.stateNode,g&&o!==null&&(g=31-jr(d),a=y.hiddenUpdates,f=a[g],f===null?a[g]=[o]:f.push(o),o.lane=d|536870912),y):null}function bd(a){if(50<Yi)throw Yi=0,nm=null,Error(n(185));for(var o=a.return;o!==null;)a=o,o=a.return;return a.tag===3?a.stateNode:null}var Zo={};function iT(a,o,d,f){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jr(a,o,d,f){return new iT(a,o,d,f)}function Jh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function va(a,o){var d=a.alternate;return d===null?(d=Jr(a.tag,o,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=o,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,o=a.dependencies,d.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function zb(a,o){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=o,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,o=d.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),a}function yd(a,o,d,f,g,y){var j=0;if(f=a,typeof a=="function")Jh(a)&&(j=1);else if(typeof a=="string")j=dM(a,d,be.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case ae:return a=Jr(31,d,o,g),a.elementType=ae,a.lanes=y,a;case k:return Xs(d.children,g,y,o);case w:j=8,g|=24;break;case S:return a=Jr(12,d,o,g|2),a.elementType=S,a.lanes=y,a;case A:return a=Jr(13,d,o,g),a.elementType=A,a.lanes=y,a;case Y:return a=Jr(19,d,o,g),a.elementType=Y,a.lanes=y,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case N:case C:j=10;break e;case T:j=9;break e;case D:j=11;break e;case I:j=14;break e;case $:j=16,f=null;break e}j=29,d=Error(n(130,a===null?"null":typeof a,"")),f=null}return o=Jr(j,d,o,g),o.elementType=a,o.type=f,o.lanes=y,o}function Xs(a,o,d,f){return a=Jr(7,a,f,o),a.lanes=d,a}function Zh(a,o,d){return a=Jr(6,a,null,o),a.lanes=d,a}function e0(a,o,d){return o=Jr(4,a.children!==null?a.children:[],a.key,o),o.lanes=d,o.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},o}var el=[],tl=0,vd=null,kd=0,yn=[],vn=0,Qs=null,ka=1,wa="";function Js(a,o){el[tl++]=kd,el[tl++]=vd,vd=a,kd=o}function Lb(a,o,d){yn[vn++]=ka,yn[vn++]=wa,yn[vn++]=Qs,Qs=a;var f=ka;a=wa;var g=32-jr(f)-1;f&=~(1<<g),d+=1;var y=32-jr(o)+g;if(30<y){var j=g-g%5;y=(f&(1<<j)-1).toString(32),f>>=j,g-=j,ka=1<<32-jr(o)+g|d<<g|f,wa=y+a}else ka=1<<y|d<<g|f,wa=a}function t0(a){a.return!==null&&(Js(a,1),Lb(a,1,0))}function r0(a){for(;a===vd;)vd=el[--tl],el[tl]=null,kd=el[--tl],el[tl]=null;for(;a===Qs;)Qs=yn[--vn],yn[vn]=null,wa=yn[--vn],yn[vn]=null,ka=yn[--vn],yn[vn]=null}var Rr=null,Bt=null,st=!1,Zs=null,Qn=!1,n0=Error(n(519));function eo(a){var o=Error(n(418,""));throw Si(xn(o,a)),n0}function Bb(a){var o=a.stateNode,d=a.type,f=a.memoizedProps;switch(o[O]=a,o[ce]=f,d){case"dialog":Xe("cancel",o),Xe("close",o);break;case"iframe":case"object":case"embed":Xe("load",o);break;case"video":case"audio":for(d=0;d<Gi.length;d++)Xe(Gi[d],o);break;case"source":Xe("error",o);break;case"img":case"image":case"link":Xe("error",o),Xe("load",o);break;case"details":Xe("toggle",o);break;case"input":Xe("invalid",o),Qx(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0),ld(o);break;case"select":Xe("invalid",o);break;case"textarea":Xe("invalid",o),Zx(o,f.value,f.defaultValue,f.children),ld(o)}d=f.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||o.textContent===""+d||f.suppressHydrationWarning===!0||Zv(o.textContent,d)?(f.popover!=null&&(Xe("beforetoggle",o),Xe("toggle",o)),f.onScroll!=null&&Xe("scroll",o),f.onScrollEnd!=null&&Xe("scrollend",o),f.onClick!=null&&(o.onclick=tu),o=!0):o=!1,o||eo(a)}function Ib(a){for(Rr=a.return;Rr;)switch(Rr.tag){case 5:case 13:Qn=!1;return;case 27:case 3:Qn=!0;return;default:Rr=Rr.return}}function ki(a){if(a!==Rr)return!1;if(!st)return Ib(a),st=!0,!1;var o=a.tag,d;if((d=o!==3&&o!==27)&&((d=o===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||ym(a.type,a.memoizedProps)),d=!d),d&&Bt&&eo(a),Ib(a),o===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(n(317));e:{for(a=a.nextSibling,o=0;a;){if(a.nodeType===8)if(d=a.data,d==="/$"){if(o===0){Bt=Bn(a.nextSibling);break e}o--}else d!=="$"&&d!=="$!"&&d!=="$?"||o++;a=a.nextSibling}Bt=null}}else o===27?(o=Bt,fs(a.type)?(a=Sm,Sm=null,Bt=a):Bt=o):Bt=Rr?Bn(a.stateNode.nextSibling):null;return!0}function wi(){Bt=Rr=null,st=!1}function Pb(){var a=Zs;return a!==null&&(Yr===null?Yr=a:Yr.push.apply(Yr,a),Zs=null),a}function Si(a){Zs===null?Zs=[a]:Zs.push(a)}var a0=ue(null),to=null,Sa=null;function Xa(a,o,d){me(a0,o._currentValue),o._currentValue=d}function Na(a){a._currentValue=a0.current,Ae(a0)}function s0(a,o,d){for(;a!==null;){var f=a.alternate;if((a.childLanes&o)!==o?(a.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),a===d)break;a=a.return}}function o0(a,o,d,f){var g=a.child;for(g!==null&&(g.return=a);g!==null;){var y=g.dependencies;if(y!==null){var j=g.child;y=y.firstContext;e:for(;y!==null;){var E=y;y=g;for(var R=0;R<o.length;R++)if(E.context===o[R]){y.lanes|=d,E=y.alternate,E!==null&&(E.lanes|=d),s0(y.return,d,a),f||(j=null);break e}y=E.next}}else if(g.tag===18){if(j=g.return,j===null)throw Error(n(341));j.lanes|=d,y=j.alternate,y!==null&&(y.lanes|=d),s0(j,d,a),j=null}else j=g.child;if(j!==null)j.return=g;else for(j=g;j!==null;){if(j===a){j=null;break}if(g=j.sibling,g!==null){g.return=j.return,j=g;break}j=j.return}g=j}}function Ni(a,o,d,f){a=null;for(var g=o,y=!1;g!==null;){if(!y){if((g.flags&524288)!==0)y=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var j=g.alternate;if(j===null)throw Error(n(387));if(j=j.memoizedProps,j!==null){var E=g.type;Qr(g.pendingProps.value,j.value)||(a!==null?a.push(E):a=[E])}}else if(g===de.current){if(j=g.alternate,j===null)throw Error(n(387));j.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(a!==null?a.push(Zi):a=[Zi])}g=g.return}a!==null&&o0(o,a,d,f),o.flags|=262144}function wd(a){for(a=a.firstContext;a!==null;){if(!Qr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function ro(a){to=a,Sa=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Tr(a){return _b(to,a)}function Sd(a,o){return to===null&&ro(a),_b(a,o)}function _b(a,o){var d=o._currentValue;if(o={context:o,memoizedValue:d,next:null},Sa===null){if(a===null)throw Error(n(308));Sa=o,a.dependencies={lanes:0,firstContext:o},a.flags|=524288}else Sa=Sa.next=o;return d}var cT=typeof AbortController<"u"?AbortController:function(){var a=[],o=this.signal={aborted:!1,addEventListener:function(d,f){a.push(f)}};this.abort=function(){o.aborted=!0,a.forEach(function(d){return d()})}},dT=r.unstable_scheduleCallback,uT=r.unstable_NormalPriority,Xt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function l0(){return{controller:new cT,data:new Map,refCount:0}}function ji(a){a.refCount--,a.refCount===0&&dT(uT,function(){a.controller.abort()})}var Ci=null,i0=0,rl=0,nl=null;function fT(a,o){if(Ci===null){var d=Ci=[];i0=0,rl=dm(),nl={status:"pending",value:void 0,then:function(f){d.push(f)}}}return i0++,o.then(Hb,Hb),o}function Hb(){if(--i0===0&&Ci!==null){nl!==null&&(nl.status="fulfilled");var a=Ci;Ci=null,rl=0,nl=null;for(var o=0;o<a.length;o++)(0,a[o])()}}function hT(a,o){var d=[],f={status:"pending",value:null,reason:null,then:function(g){d.push(g)}};return a.then(function(){f.status="fulfilled",f.value=o;for(var g=0;g<d.length;g++)(0,d[g])(o)},function(g){for(f.status="rejected",f.reason=g,g=0;g<d.length;g++)(0,d[g])(void 0)}),f}var $b=B.S;B.S=function(a,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&fT(a,o),$b!==null&&$b(a,o)};var no=ue(null);function c0(){var a=no.current;return a!==null?a:jt.pooledCache}function Nd(a,o){o===null?me(no,no.current):me(no,o.pool)}function Ub(){var a=c0();return a===null?null:{parent:Xt._currentValue,pool:a}}var Ti=Error(n(460)),Vb=Error(n(474)),jd=Error(n(542)),d0={then:function(){}};function Fb(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Cd(){}function Yb(a,o,d){switch(d=a[d],d===void 0?a.push(o):d!==o&&(o.then(Cd,Cd),o=d),o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Gb(a),a;default:if(typeof o.status=="string")o.then(Cd,Cd);else{if(a=jt,a!==null&&100<a.shellSuspendCounter)throw Error(n(482));a=o,a.status="pending",a.then(function(f){if(o.status==="pending"){var g=o;g.status="fulfilled",g.value=f}},function(f){if(o.status==="pending"){var g=o;g.status="rejected",g.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw a=o.reason,Gb(a),a}throw Mi=o,Ti}}var Mi=null;function qb(){if(Mi===null)throw Error(n(459));var a=Mi;return Mi=null,a}function Gb(a){if(a===Ti||a===jd)throw Error(n(483))}var Qa=!1;function u0(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function f0(a,o){a=a.updateQueue,o.updateQueue===a&&(o.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ja(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Za(a,o,d){var f=a.updateQueue;if(f===null)return null;if(f=f.shared,(ct&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,o=bd(a),Rb(a,null,d),o}return xd(a,f,o,d),bd(a)}function Ei(a,o,d){if(o=o.updateQueue,o!==null&&(o=o.shared,(d&4194048)!==0)){var f=o.lanes;f&=a.pendingLanes,d|=f,o.lanes=d,ci(a,d)}}function h0(a,o){var d=a.updateQueue,f=a.alternate;if(f!==null&&(f=f.updateQueue,d===f)){var g=null,y=null;if(d=d.firstBaseUpdate,d!==null){do{var j={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};y===null?g=y=j:y=y.next=j,d=d.next}while(d!==null);y===null?g=y=o:y=y.next=o}else g=y=o;d={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:f.shared,callbacks:f.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=o:a.next=o,d.lastBaseUpdate=o}var m0=!1;function Ai(){if(m0){var a=nl;if(a!==null)throw a}}function Di(a,o,d,f){m0=!1;var g=a.updateQueue;Qa=!1;var y=g.firstBaseUpdate,j=g.lastBaseUpdate,E=g.shared.pending;if(E!==null){g.shared.pending=null;var R=E,V=R.next;R.next=null,j===null?y=V:j.next=V,j=R;var X=a.alternate;X!==null&&(X=X.updateQueue,E=X.lastBaseUpdate,E!==j&&(E===null?X.firstBaseUpdate=V:E.next=V,X.lastBaseUpdate=R))}if(y!==null){var ee=g.baseState;j=0,X=V=R=null,E=y;do{var F=E.lane&-536870913,q=F!==E.lane;if(q?(tt&F)===F:(f&F)===F){F!==0&&F===rl&&(m0=!0),X!==null&&(X=X.next={lane:0,tag:E.tag,payload:E.payload,callback:null,next:null});e:{var Pe=a,ze=E;F=o;var pt=d;switch(ze.tag){case 1:if(Pe=ze.payload,typeof Pe=="function"){ee=Pe.call(pt,ee,F);break e}ee=Pe;break e;case 3:Pe.flags=Pe.flags&-65537|128;case 0:if(Pe=ze.payload,F=typeof Pe=="function"?Pe.call(pt,ee,F):Pe,F==null)break e;ee=p({},ee,F);break e;case 2:Qa=!0}}F=E.callback,F!==null&&(a.flags|=64,q&&(a.flags|=8192),q=g.callbacks,q===null?g.callbacks=[F]:q.push(F))}else q={lane:F,tag:E.tag,payload:E.payload,callback:E.callback,next:null},X===null?(V=X=q,R=ee):X=X.next=q,j|=F;if(E=E.next,E===null){if(E=g.shared.pending,E===null)break;q=E,E=q.next,q.next=null,g.lastBaseUpdate=q,g.shared.pending=null}}while(!0);X===null&&(R=ee),g.baseState=R,g.firstBaseUpdate=V,g.lastBaseUpdate=X,y===null&&(g.shared.lanes=0),is|=j,a.lanes=j,a.memoizedState=ee}}function Kb(a,o){if(typeof a!="function")throw Error(n(191,a));a.call(o)}function Wb(a,o){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)Kb(d[a],o)}var al=ue(null),Td=ue(0);function Xb(a,o){a=Da,me(Td,a),me(al,o),Da=a|o.baseLanes}function p0(){me(Td,Da),me(al,al.current)}function g0(){Da=Td.current,Ae(al),Ae(Td)}var es=0,Ye=null,ht=null,qt=null,Md=!1,sl=!1,ao=!1,Ed=0,Oi=0,ol=null,mT=0;function Ut(){throw Error(n(321))}function x0(a,o){if(o===null)return!1;for(var d=0;d<o.length&&d<a.length;d++)if(!Qr(a[d],o[d]))return!1;return!0}function b0(a,o,d,f,g,y){return es=y,Ye=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,B.H=a===null||a.memoizedState===null?Ry:zy,ao=!1,y=d(f,g),ao=!1,sl&&(y=Jb(o,d,f,g)),Qb(a),y}function Qb(a){B.H=Ld;var o=ht!==null&&ht.next!==null;if(es=0,qt=ht=Ye=null,Md=!1,Oi=0,ol=null,o)throw Error(n(300));a===null||tr||(a=a.dependencies,a!==null&&wd(a)&&(tr=!0))}function Jb(a,o,d,f){Ye=a;var g=0;do{if(sl&&(ol=null),Oi=0,sl=!1,25<=g)throw Error(n(301));if(g+=1,qt=ht=null,a.updateQueue!=null){var y=a.updateQueue;y.lastEffect=null,y.events=null,y.stores=null,y.memoCache!=null&&(y.memoCache.index=0)}B.H=kT,y=o(d,f)}while(sl);return y}function pT(){var a=B.H,o=a.useState()[0];return o=typeof o.then=="function"?Ri(o):o,a=a.useState()[0],(ht!==null?ht.memoizedState:null)!==a&&(Ye.flags|=1024),o}function y0(){var a=Ed!==0;return Ed=0,a}function v0(a,o,d){o.updateQueue=a.updateQueue,o.flags&=-2053,a.lanes&=~d}function k0(a){if(Md){for(a=a.memoizedState;a!==null;){var o=a.queue;o!==null&&(o.pending=null),a=a.next}Md=!1}es=0,qt=ht=Ye=null,sl=!1,Oi=Ed=0,ol=null}function Vr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?Ye.memoizedState=qt=a:qt=qt.next=a,qt}function Gt(){if(ht===null){var a=Ye.alternate;a=a!==null?a.memoizedState:null}else a=ht.next;var o=qt===null?Ye.memoizedState:qt.next;if(o!==null)qt=o,ht=a;else{if(a===null)throw Ye.alternate===null?Error(n(467)):Error(n(310));ht=a,a={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},qt===null?Ye.memoizedState=qt=a:qt=qt.next=a}return qt}function w0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ri(a){var o=Oi;return Oi+=1,ol===null&&(ol=[]),a=Yb(ol,a,o),o=Ye,(qt===null?o.memoizedState:qt.next)===null&&(o=o.alternate,B.H=o===null||o.memoizedState===null?Ry:zy),a}function Ad(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Ri(a);if(a.$$typeof===C)return Tr(a)}throw Error(n(438,String(a)))}function S0(a){var o=null,d=Ye.updateQueue;if(d!==null&&(o=d.memoCache),o==null){var f=Ye.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(g){return g.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),d===null&&(d=w0(),Ye.updateQueue=d),d.memoCache=o,d=o.data[o.index],d===void 0)for(d=o.data[o.index]=Array(a),f=0;f<a;f++)d[f]=le;return o.index++,d}function ja(a,o){return typeof o=="function"?o(a):o}function Dd(a){var o=Gt();return N0(o,ht,a)}function N0(a,o,d){var f=a.queue;if(f===null)throw Error(n(311));f.lastRenderedReducer=d;var g=a.baseQueue,y=f.pending;if(y!==null){if(g!==null){var j=g.next;g.next=y.next,y.next=j}o.baseQueue=g=y,f.pending=null}if(y=a.baseState,g===null)a.memoizedState=y;else{o=g.next;var E=j=null,R=null,V=o,X=!1;do{var ee=V.lane&-536870913;if(ee!==V.lane?(tt&ee)===ee:(es&ee)===ee){var F=V.revertLane;if(F===0)R!==null&&(R=R.next={lane:0,revertLane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),ee===rl&&(X=!0);else if((es&F)===F){V=V.next,F===rl&&(X=!0);continue}else ee={lane:0,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},R===null?(E=R=ee,j=y):R=R.next=ee,Ye.lanes|=F,is|=F;ee=V.action,ao&&d(y,ee),y=V.hasEagerState?V.eagerState:d(y,ee)}else F={lane:ee,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},R===null?(E=R=F,j=y):R=R.next=F,Ye.lanes|=ee,is|=ee;V=V.next}while(V!==null&&V!==o);if(R===null?j=y:R.next=E,!Qr(y,a.memoizedState)&&(tr=!0,X&&(d=nl,d!==null)))throw d;a.memoizedState=y,a.baseState=j,a.baseQueue=R,f.lastRenderedState=y}return g===null&&(f.lanes=0),[a.memoizedState,f.dispatch]}function j0(a){var o=Gt(),d=o.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=a;var f=d.dispatch,g=d.pending,y=o.memoizedState;if(g!==null){d.pending=null;var j=g=g.next;do y=a(y,j.action),j=j.next;while(j!==g);Qr(y,o.memoizedState)||(tr=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),d.lastRenderedState=y}return[y,f]}function Zb(a,o,d){var f=Ye,g=Gt(),y=st;if(y){if(d===void 0)throw Error(n(407));d=d()}else d=o();var j=!Qr((ht||g).memoizedState,d);j&&(g.memoizedState=d,tr=!0),g=g.queue;var E=ry.bind(null,f,g,a);if(zi(2048,8,E,[a]),g.getSnapshot!==o||j||qt!==null&&qt.memoizedState.tag&1){if(f.flags|=2048,ll(9,Od(),ty.bind(null,f,g,d,o),null),jt===null)throw Error(n(349));y||(es&124)!==0||ey(f,o,d)}return d}function ey(a,o,d){a.flags|=16384,a={getSnapshot:o,value:d},o=Ye.updateQueue,o===null?(o=w0(),Ye.updateQueue=o,o.stores=[a]):(d=o.stores,d===null?o.stores=[a]:d.push(a))}function ty(a,o,d,f){o.value=d,o.getSnapshot=f,ny(o)&&ay(a)}function ry(a,o,d){return d(function(){ny(o)&&ay(a)})}function ny(a){var o=a.getSnapshot;a=a.value;try{var d=o();return!Qr(a,d)}catch{return!0}}function ay(a){var o=Jo(a,2);o!==null&&nn(o,a,2)}function C0(a){var o=Vr();if(typeof a=="function"){var d=a;if(a=d(),ao){Nr(!0);try{d()}finally{Nr(!1)}}}return o.memoizedState=o.baseState=a,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:a},o}function sy(a,o,d,f){return a.baseState=d,N0(a,ht,typeof f=="function"?f:ja)}function gT(a,o,d,f,g){if(zd(a))throw Error(n(485));if(a=o.action,a!==null){var y={payload:g,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){y.listeners.push(j)}};B.T!==null?d(!0):y.isTransition=!1,f(y),d=o.pending,d===null?(y.next=o.pending=y,oy(o,y)):(y.next=d.next,o.pending=d.next=y)}}function oy(a,o){var d=o.action,f=o.payload,g=a.state;if(o.isTransition){var y=B.T,j={};B.T=j;try{var E=d(g,f),R=B.S;R!==null&&R(j,E),ly(a,o,E)}catch(V){T0(a,o,V)}finally{B.T=y}}else try{y=d(g,f),ly(a,o,y)}catch(V){T0(a,o,V)}}function ly(a,o,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(f){iy(a,o,f)},function(f){return T0(a,o,f)}):iy(a,o,d)}function iy(a,o,d){o.status="fulfilled",o.value=d,cy(o),a.state=d,o=a.pending,o!==null&&(d=o.next,d===o?a.pending=null:(d=d.next,o.next=d,oy(a,d)))}function T0(a,o,d){var f=a.pending;if(a.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=d,cy(o),o=o.next;while(o!==f)}a.action=null}function cy(a){a=a.listeners;for(var o=0;o<a.length;o++)(0,a[o])()}function dy(a,o){return o}function uy(a,o){if(st){var d=jt.formState;if(d!==null){e:{var f=Ye;if(st){if(Bt){t:{for(var g=Bt,y=Qn;g.nodeType!==8;){if(!y){g=null;break t}if(g=Bn(g.nextSibling),g===null){g=null;break t}}y=g.data,g=y==="F!"||y==="F"?g:null}if(g){Bt=Bn(g.nextSibling),f=g.data==="F!";break e}}eo(f)}f=!1}f&&(o=d[0])}}return d=Vr(),d.memoizedState=d.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dy,lastRenderedState:o},d.queue=f,d=Ay.bind(null,Ye,f),f.dispatch=d,f=C0(!1),y=O0.bind(null,Ye,!1,f.queue),f=Vr(),g={state:o,dispatch:null,action:a,pending:null},f.queue=g,d=gT.bind(null,Ye,g,y,d),g.dispatch=d,f.memoizedState=a,[o,d,!1]}function fy(a){var o=Gt();return hy(o,ht,a)}function hy(a,o,d){if(o=N0(a,o,dy)[0],a=Dd(ja)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=Ri(o)}catch(j){throw j===Ti?jd:j}else f=o;o=Gt();var g=o.queue,y=g.dispatch;return d!==o.memoizedState&&(Ye.flags|=2048,ll(9,Od(),xT.bind(null,g,d),null)),[f,y,a]}function xT(a,o){a.action=o}function my(a){var o=Gt(),d=ht;if(d!==null)return hy(o,d,a);Gt(),o=o.memoizedState,d=Gt();var f=d.queue.dispatch;return d.memoizedState=a,[o,f,!1]}function ll(a,o,d,f){return a={tag:a,create:d,deps:f,inst:o,next:null},o=Ye.updateQueue,o===null&&(o=w0(),Ye.updateQueue=o),d=o.lastEffect,d===null?o.lastEffect=a.next=a:(f=d.next,d.next=a,a.next=f,o.lastEffect=a),a}function Od(){return{destroy:void 0,resource:void 0}}function py(){return Gt().memoizedState}function Rd(a,o,d,f){var g=Vr();f=f===void 0?null:f,Ye.flags|=a,g.memoizedState=ll(1|o,Od(),d,f)}function zi(a,o,d,f){var g=Gt();f=f===void 0?null:f;var y=g.memoizedState.inst;ht!==null&&f!==null&&x0(f,ht.memoizedState.deps)?g.memoizedState=ll(o,y,d,f):(Ye.flags|=a,g.memoizedState=ll(1|o,y,d,f))}function gy(a,o){Rd(8390656,8,a,o)}function xy(a,o){zi(2048,8,a,o)}function by(a,o){return zi(4,2,a,o)}function yy(a,o){return zi(4,4,a,o)}function vy(a,o){if(typeof o=="function"){a=a();var d=o(a);return function(){typeof d=="function"?d():o(null)}}if(o!=null)return a=a(),o.current=a,function(){o.current=null}}function ky(a,o,d){d=d!=null?d.concat([a]):null,zi(4,4,vy.bind(null,o,a),d)}function M0(){}function wy(a,o){var d=Gt();o=o===void 0?null:o;var f=d.memoizedState;return o!==null&&x0(o,f[1])?f[0]:(d.memoizedState=[a,o],a)}function Sy(a,o){var d=Gt();o=o===void 0?null:o;var f=d.memoizedState;if(o!==null&&x0(o,f[1]))return f[0];if(f=a(),ao){Nr(!0);try{a()}finally{Nr(!1)}}return d.memoizedState=[f,o],f}function E0(a,o,d){return d===void 0||(es&1073741824)!==0?a.memoizedState=o:(a.memoizedState=d,a=Cv(),Ye.lanes|=a,is|=a,d)}function Ny(a,o,d,f){return Qr(d,o)?d:al.current!==null?(a=E0(a,d,f),Qr(a,o)||(tr=!0),a):(es&42)===0?(tr=!0,a.memoizedState=d):(a=Cv(),Ye.lanes|=a,is|=a,o)}function jy(a,o,d,f,g){var y=W.p;W.p=y!==0&&8>y?y:8;var j=B.T,E={};B.T=E,O0(a,!1,o,d);try{var R=g(),V=B.S;if(V!==null&&V(E,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var X=hT(R,f);Li(a,o,X,rn(a))}else Li(a,o,f,rn(a))}catch(ee){Li(a,o,{then:function(){},status:"rejected",reason:ee},rn())}finally{W.p=y,B.T=j}}function bT(){}function A0(a,o,d,f){if(a.tag!==5)throw Error(n(476));var g=Cy(a).queue;jy(a,g,o,L,d===null?bT:function(){return Ty(a),d(f)})}function Cy(a){var o=a.memoizedState;if(o!==null)return o;o={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:L},next:null};var d={};return o.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:d},next:null},a.memoizedState=o,a=a.alternate,a!==null&&(a.memoizedState=o),o}function Ty(a){var o=Cy(a).next.queue;Li(a,o,{},rn())}function D0(){return Tr(Zi)}function My(){return Gt().memoizedState}function Ey(){return Gt().memoizedState}function yT(a){for(var o=a.return;o!==null;){switch(o.tag){case 24:case 3:var d=rn();a=Ja(d);var f=Za(o,a,d);f!==null&&(nn(f,o,d),Ei(f,o,d)),o={cache:l0()},a.payload=o;return}o=o.return}}function vT(a,o,d){var f=rn();d={lane:f,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},zd(a)?Dy(o,d):(d=Qh(a,o,d,f),d!==null&&(nn(d,a,f),Oy(d,o,f)))}function Ay(a,o,d){var f=rn();Li(a,o,d,f)}function Li(a,o,d,f){var g={lane:f,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(zd(a))Dy(o,g);else{var y=a.alternate;if(a.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var j=o.lastRenderedState,E=y(j,d);if(g.hasEagerState=!0,g.eagerState=E,Qr(E,j))return xd(a,o,g,0),jt===null&&gd(),!1}catch{}finally{}if(d=Qh(a,o,g,f),d!==null)return nn(d,a,f),Oy(d,o,f),!0}return!1}function O0(a,o,d,f){if(f={lane:2,revertLane:dm(),action:f,hasEagerState:!1,eagerState:null,next:null},zd(a)){if(o)throw Error(n(479))}else o=Qh(a,d,f,2),o!==null&&nn(o,a,2)}function zd(a){var o=a.alternate;return a===Ye||o!==null&&o===Ye}function Dy(a,o){sl=Md=!0;var d=a.pending;d===null?o.next=o:(o.next=d.next,d.next=o),a.pending=o}function Oy(a,o,d){if((d&4194048)!==0){var f=o.lanes;f&=a.pendingLanes,d|=f,o.lanes=d,ci(a,d)}}var Ld={readContext:Tr,use:Ad,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut},Ry={readContext:Tr,use:Ad,useCallback:function(a,o){return Vr().memoizedState=[a,o===void 0?null:o],a},useContext:Tr,useEffect:gy,useImperativeHandle:function(a,o,d){d=d!=null?d.concat([a]):null,Rd(4194308,4,vy.bind(null,o,a),d)},useLayoutEffect:function(a,o){return Rd(4194308,4,a,o)},useInsertionEffect:function(a,o){Rd(4,2,a,o)},useMemo:function(a,o){var d=Vr();o=o===void 0?null:o;var f=a();if(ao){Nr(!0);try{a()}finally{Nr(!1)}}return d.memoizedState=[f,o],f},useReducer:function(a,o,d){var f=Vr();if(d!==void 0){var g=d(o);if(ao){Nr(!0);try{d(o)}finally{Nr(!1)}}}else g=o;return f.memoizedState=f.baseState=g,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:g},f.queue=a,a=a.dispatch=vT.bind(null,Ye,a),[f.memoizedState,a]},useRef:function(a){var o=Vr();return a={current:a},o.memoizedState=a},useState:function(a){a=C0(a);var o=a.queue,d=Ay.bind(null,Ye,o);return o.dispatch=d,[a.memoizedState,d]},useDebugValue:M0,useDeferredValue:function(a,o){var d=Vr();return E0(d,a,o)},useTransition:function(){var a=C0(!1);return a=jy.bind(null,Ye,a.queue,!0,!1),Vr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,o,d){var f=Ye,g=Vr();if(st){if(d===void 0)throw Error(n(407));d=d()}else{if(d=o(),jt===null)throw Error(n(349));(tt&124)!==0||ey(f,o,d)}g.memoizedState=d;var y={value:d,getSnapshot:o};return g.queue=y,gy(ry.bind(null,f,y,a),[a]),f.flags|=2048,ll(9,Od(),ty.bind(null,f,y,d,o),null),d},useId:function(){var a=Vr(),o=jt.identifierPrefix;if(st){var d=wa,f=ka;d=(f&~(1<<32-jr(f)-1)).toString(32)+d,o=""+o+"R"+d,d=Ed++,0<d&&(o+="H"+d.toString(32)),o+=""}else d=mT++,o=""+o+"r"+d.toString(32)+"";return a.memoizedState=o},useHostTransitionStatus:D0,useFormState:uy,useActionState:uy,useOptimistic:function(a){var o=Vr();o.memoizedState=o.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=d,o=O0.bind(null,Ye,!0,d),d.dispatch=o,[a,o]},useMemoCache:S0,useCacheRefresh:function(){return Vr().memoizedState=yT.bind(null,Ye)}},zy={readContext:Tr,use:Ad,useCallback:wy,useContext:Tr,useEffect:xy,useImperativeHandle:ky,useInsertionEffect:by,useLayoutEffect:yy,useMemo:Sy,useReducer:Dd,useRef:py,useState:function(){return Dd(ja)},useDebugValue:M0,useDeferredValue:function(a,o){var d=Gt();return Ny(d,ht.memoizedState,a,o)},useTransition:function(){var a=Dd(ja)[0],o=Gt().memoizedState;return[typeof a=="boolean"?a:Ri(a),o]},useSyncExternalStore:Zb,useId:My,useHostTransitionStatus:D0,useFormState:fy,useActionState:fy,useOptimistic:function(a,o){var d=Gt();return sy(d,ht,a,o)},useMemoCache:S0,useCacheRefresh:Ey},kT={readContext:Tr,use:Ad,useCallback:wy,useContext:Tr,useEffect:xy,useImperativeHandle:ky,useInsertionEffect:by,useLayoutEffect:yy,useMemo:Sy,useReducer:j0,useRef:py,useState:function(){return j0(ja)},useDebugValue:M0,useDeferredValue:function(a,o){var d=Gt();return ht===null?E0(d,a,o):Ny(d,ht.memoizedState,a,o)},useTransition:function(){var a=j0(ja)[0],o=Gt().memoizedState;return[typeof a=="boolean"?a:Ri(a),o]},useSyncExternalStore:Zb,useId:My,useHostTransitionStatus:D0,useFormState:my,useActionState:my,useOptimistic:function(a,o){var d=Gt();return ht!==null?sy(d,ht,a,o):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:S0,useCacheRefresh:Ey},il=null,Bi=0;function Bd(a){var o=Bi;return Bi+=1,il===null&&(il=[]),Yb(il,a,o)}function Ii(a,o){o=o.props.ref,a.ref=o!==void 0?o:null}function Id(a,o){throw o.$$typeof===x?Error(n(525)):(a=Object.prototype.toString.call(o),Error(n(31,a==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":a)))}function Ly(a){var o=a._init;return o(a._payload)}function By(a){function o(_,z){if(a){var U=_.deletions;U===null?(_.deletions=[z],_.flags|=16):U.push(z)}}function d(_,z){if(!a)return null;for(;z!==null;)o(_,z),z=z.sibling;return null}function f(_){for(var z=new Map;_!==null;)_.key!==null?z.set(_.key,_):z.set(_.index,_),_=_.sibling;return z}function g(_,z){return _=va(_,z),_.index=0,_.sibling=null,_}function y(_,z,U){return _.index=U,a?(U=_.alternate,U!==null?(U=U.index,U<z?(_.flags|=67108866,z):U):(_.flags|=67108866,z)):(_.flags|=1048576,z)}function j(_){return a&&_.alternate===null&&(_.flags|=67108866),_}function E(_,z,U,J){return z===null||z.tag!==6?(z=Zh(U,_.mode,J),z.return=_,z):(z=g(z,U),z.return=_,z)}function R(_,z,U,J){var ke=U.type;return ke===k?X(_,z,U.props.children,J,U.key):z!==null&&(z.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===$&&Ly(ke)===z.type)?(z=g(z,U.props),Ii(z,U),z.return=_,z):(z=yd(U.type,U.key,U.props,null,_.mode,J),Ii(z,U),z.return=_,z)}function V(_,z,U,J){return z===null||z.tag!==4||z.stateNode.containerInfo!==U.containerInfo||z.stateNode.implementation!==U.implementation?(z=e0(U,_.mode,J),z.return=_,z):(z=g(z,U.children||[]),z.return=_,z)}function X(_,z,U,J,ke){return z===null||z.tag!==7?(z=Xs(U,_.mode,J,ke),z.return=_,z):(z=g(z,U),z.return=_,z)}function ee(_,z,U){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=Zh(""+z,_.mode,U),z.return=_,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case b:return U=yd(z.type,z.key,z.props,null,_.mode,U),Ii(U,z),U.return=_,U;case v:return z=e0(z,_.mode,U),z.return=_,z;case $:var J=z._init;return z=J(z._payload),ee(_,z,U)}if(ve(z)||he(z))return z=Xs(z,_.mode,U,null),z.return=_,z;if(typeof z.then=="function")return ee(_,Bd(z),U);if(z.$$typeof===C)return ee(_,Sd(_,z),U);Id(_,z)}return null}function F(_,z,U,J){var ke=z!==null?z.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ke!==null?null:E(_,z,""+U,J);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case b:return U.key===ke?R(_,z,U,J):null;case v:return U.key===ke?V(_,z,U,J):null;case $:return ke=U._init,U=ke(U._payload),F(_,z,U,J)}if(ve(U)||he(U))return ke!==null?null:X(_,z,U,J,null);if(typeof U.then=="function")return F(_,z,Bd(U),J);if(U.$$typeof===C)return F(_,z,Sd(_,U),J);Id(_,U)}return null}function q(_,z,U,J,ke){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return _=_.get(U)||null,E(z,_,""+J,ke);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case b:return _=_.get(J.key===null?U:J.key)||null,R(z,_,J,ke);case v:return _=_.get(J.key===null?U:J.key)||null,V(z,_,J,ke);case $:var Ke=J._init;return J=Ke(J._payload),q(_,z,U,J,ke)}if(ve(J)||he(J))return _=_.get(U)||null,X(z,_,J,ke,null);if(typeof J.then=="function")return q(_,z,U,Bd(J),ke);if(J.$$typeof===C)return q(_,z,U,Sd(z,J),ke);Id(z,J)}return null}function Pe(_,z,U,J){for(var ke=null,Ke=null,Me=z,Be=z=0,nr=null;Me!==null&&Be<U.length;Be++){Me.index>Be?(nr=Me,Me=null):nr=Me.sibling;var nt=F(_,Me,U[Be],J);if(nt===null){Me===null&&(Me=nr);break}a&&Me&&nt.alternate===null&&o(_,Me),z=y(nt,z,Be),Ke===null?ke=nt:Ke.sibling=nt,Ke=nt,Me=nr}if(Be===U.length)return d(_,Me),st&&Js(_,Be),ke;if(Me===null){for(;Be<U.length;Be++)Me=ee(_,U[Be],J),Me!==null&&(z=y(Me,z,Be),Ke===null?ke=Me:Ke.sibling=Me,Ke=Me);return st&&Js(_,Be),ke}for(Me=f(Me);Be<U.length;Be++)nr=q(Me,_,Be,U[Be],J),nr!==null&&(a&&nr.alternate!==null&&Me.delete(nr.key===null?Be:nr.key),z=y(nr,z,Be),Ke===null?ke=nr:Ke.sibling=nr,Ke=nr);return a&&Me.forEach(function(xs){return o(_,xs)}),st&&Js(_,Be),ke}function ze(_,z,U,J){if(U==null)throw Error(n(151));for(var ke=null,Ke=null,Me=z,Be=z=0,nr=null,nt=U.next();Me!==null&&!nt.done;Be++,nt=U.next()){Me.index>Be?(nr=Me,Me=null):nr=Me.sibling;var xs=F(_,Me,nt.value,J);if(xs===null){Me===null&&(Me=nr);break}a&&Me&&xs.alternate===null&&o(_,Me),z=y(xs,z,Be),Ke===null?ke=xs:Ke.sibling=xs,Ke=xs,Me=nr}if(nt.done)return d(_,Me),st&&Js(_,Be),ke;if(Me===null){for(;!nt.done;Be++,nt=U.next())nt=ee(_,nt.value,J),nt!==null&&(z=y(nt,z,Be),Ke===null?ke=nt:Ke.sibling=nt,Ke=nt);return st&&Js(_,Be),ke}for(Me=f(Me);!nt.done;Be++,nt=U.next())nt=q(Me,_,Be,nt.value,J),nt!==null&&(a&&nt.alternate!==null&&Me.delete(nt.key===null?Be:nt.key),z=y(nt,z,Be),Ke===null?ke=nt:Ke.sibling=nt,Ke=nt);return a&&Me.forEach(function(wM){return o(_,wM)}),st&&Js(_,Be),ke}function pt(_,z,U,J){if(typeof U=="object"&&U!==null&&U.type===k&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case b:e:{for(var ke=U.key;z!==null;){if(z.key===ke){if(ke=U.type,ke===k){if(z.tag===7){d(_,z.sibling),J=g(z,U.props.children),J.return=_,_=J;break e}}else if(z.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===$&&Ly(ke)===z.type){d(_,z.sibling),J=g(z,U.props),Ii(J,U),J.return=_,_=J;break e}d(_,z);break}else o(_,z);z=z.sibling}U.type===k?(J=Xs(U.props.children,_.mode,J,U.key),J.return=_,_=J):(J=yd(U.type,U.key,U.props,null,_.mode,J),Ii(J,U),J.return=_,_=J)}return j(_);case v:e:{for(ke=U.key;z!==null;){if(z.key===ke)if(z.tag===4&&z.stateNode.containerInfo===U.containerInfo&&z.stateNode.implementation===U.implementation){d(_,z.sibling),J=g(z,U.children||[]),J.return=_,_=J;break e}else{d(_,z);break}else o(_,z);z=z.sibling}J=e0(U,_.mode,J),J.return=_,_=J}return j(_);case $:return ke=U._init,U=ke(U._payload),pt(_,z,U,J)}if(ve(U))return Pe(_,z,U,J);if(he(U)){if(ke=he(U),typeof ke!="function")throw Error(n(150));return U=ke.call(U),ze(_,z,U,J)}if(typeof U.then=="function")return pt(_,z,Bd(U),J);if(U.$$typeof===C)return pt(_,z,Sd(_,U),J);Id(_,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,z!==null&&z.tag===6?(d(_,z.sibling),J=g(z,U),J.return=_,_=J):(d(_,z),J=Zh(U,_.mode,J),J.return=_,_=J),j(_)):d(_,z)}return function(_,z,U,J){try{Bi=0;var ke=pt(_,z,U,J);return il=null,ke}catch(Me){if(Me===Ti||Me===jd)throw Me;var Ke=Jr(29,Me,null,_.mode);return Ke.lanes=J,Ke.return=_,Ke}finally{}}}var cl=By(!0),Iy=By(!1),kn=ue(null),Jn=null;function ts(a){var o=a.alternate;me(Qt,Qt.current&1),me(kn,a),Jn===null&&(o===null||al.current!==null||o.memoizedState!==null)&&(Jn=a)}function Py(a){if(a.tag===22){if(me(Qt,Qt.current),me(kn,a),Jn===null){var o=a.alternate;o!==null&&o.memoizedState!==null&&(Jn=a)}}else rs()}function rs(){me(Qt,Qt.current),me(kn,kn.current)}function Ca(a){Ae(kn),Jn===a&&(Jn=null),Ae(Qt)}var Qt=ue(0);function Pd(a){for(var o=a;o!==null;){if(o.tag===13){var d=o.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||wm(d)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function R0(a,o,d,f){o=a.memoizedState,d=d(f,o),d=d==null?o:p({},o,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var z0={enqueueSetState:function(a,o,d){a=a._reactInternals;var f=rn(),g=Ja(f);g.payload=o,d!=null&&(g.callback=d),o=Za(a,g,f),o!==null&&(nn(o,a,f),Ei(o,a,f))},enqueueReplaceState:function(a,o,d){a=a._reactInternals;var f=rn(),g=Ja(f);g.tag=1,g.payload=o,d!=null&&(g.callback=d),o=Za(a,g,f),o!==null&&(nn(o,a,f),Ei(o,a,f))},enqueueForceUpdate:function(a,o){a=a._reactInternals;var d=rn(),f=Ja(d);f.tag=2,o!=null&&(f.callback=o),o=Za(a,f,d),o!==null&&(nn(o,a,d),Ei(o,a,d))}};function _y(a,o,d,f,g,y,j){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(f,y,j):o.prototype&&o.prototype.isPureReactComponent?!yi(d,f)||!yi(g,y):!0}function Hy(a,o,d,f){a=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(d,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(d,f),o.state!==a&&z0.enqueueReplaceState(o,o.state,null)}function so(a,o){var d=o;if("ref"in o){d={};for(var f in o)f!=="ref"&&(d[f]=o[f])}if(a=a.defaultProps){d===o&&(d=p({},d));for(var g in a)d[g]===void 0&&(d[g]=a[g])}return d}var _d=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function $y(a){_d(a)}function Uy(a){console.error(a)}function Vy(a){_d(a)}function Hd(a,o){try{var d=a.onUncaughtError;d(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function Fy(a,o,d){try{var f=a.onCaughtError;f(d.value,{componentStack:d.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function L0(a,o,d){return d=Ja(d),d.tag=3,d.payload={element:null},d.callback=function(){Hd(a,o)},d}function Yy(a){return a=Ja(a),a.tag=3,a}function qy(a,o,d,f){var g=d.type.getDerivedStateFromError;if(typeof g=="function"){var y=f.value;a.payload=function(){return g(y)},a.callback=function(){Fy(o,d,f)}}var j=d.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(a.callback=function(){Fy(o,d,f),typeof g!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var E=f.stack;this.componentDidCatch(f.value,{componentStack:E!==null?E:""})})}function wT(a,o,d,f,g){if(d.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=d.alternate,o!==null&&Ni(o,d,g,!0),d=kn.current,d!==null){switch(d.tag){case 13:return Jn===null?sm():d.alternate===null&&It===0&&(It=3),d.flags&=-257,d.flags|=65536,d.lanes=g,f===d0?d.flags|=16384:(o=d.updateQueue,o===null?d.updateQueue=new Set([f]):o.add(f),lm(a,f,g)),!1;case 22:return d.flags|=65536,f===d0?d.flags|=16384:(o=d.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},d.updateQueue=o):(d=o.retryQueue,d===null?o.retryQueue=new Set([f]):d.add(f)),lm(a,f,g)),!1}throw Error(n(435,d.tag))}return lm(a,f,g),sm(),!1}if(st)return o=kn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=g,f!==n0&&(a=Error(n(422),{cause:f}),Si(xn(a,d)))):(f!==n0&&(o=Error(n(423),{cause:f}),Si(xn(o,d))),a=a.current.alternate,a.flags|=65536,g&=-g,a.lanes|=g,f=xn(f,d),g=L0(a.stateNode,f,g),h0(a,g),It!==4&&(It=2)),!1;var y=Error(n(520),{cause:f});if(y=xn(y,d),Fi===null?Fi=[y]:Fi.push(y),It!==4&&(It=2),o===null)return!0;f=xn(f,d),d=o;do{switch(d.tag){case 3:return d.flags|=65536,a=g&-g,d.lanes|=a,a=L0(d.stateNode,f,a),h0(d,a),!1;case 1:if(o=d.type,y=d.stateNode,(d.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(cs===null||!cs.has(y))))return d.flags|=65536,g&=-g,d.lanes|=g,g=Yy(g),qy(g,a,d,f),h0(d,g),!1}d=d.return}while(d!==null);return!1}var Gy=Error(n(461)),tr=!1;function gr(a,o,d,f){o.child=a===null?Iy(o,null,d,f):cl(o,a.child,d,f)}function Ky(a,o,d,f,g){d=d.render;var y=o.ref;if("ref"in f){var j={};for(var E in f)E!=="ref"&&(j[E]=f[E])}else j=f;return ro(o),f=b0(a,o,d,j,y,g),E=y0(),a!==null&&!tr?(v0(a,o,g),Ta(a,o,g)):(st&&E&&t0(o),o.flags|=1,gr(a,o,f,g),o.child)}function Wy(a,o,d,f,g){if(a===null){var y=d.type;return typeof y=="function"&&!Jh(y)&&y.defaultProps===void 0&&d.compare===null?(o.tag=15,o.type=y,Xy(a,o,y,f,g)):(a=yd(d.type,null,f,o,o.mode,g),a.ref=o.ref,a.return=o,o.child=a)}if(y=a.child,!V0(a,g)){var j=y.memoizedProps;if(d=d.compare,d=d!==null?d:yi,d(j,f)&&a.ref===o.ref)return Ta(a,o,g)}return o.flags|=1,a=va(y,f),a.ref=o.ref,a.return=o,o.child=a}function Xy(a,o,d,f,g){if(a!==null){var y=a.memoizedProps;if(yi(y,f)&&a.ref===o.ref)if(tr=!1,o.pendingProps=f=y,V0(a,g))(a.flags&131072)!==0&&(tr=!0);else return o.lanes=a.lanes,Ta(a,o,g)}return B0(a,o,d,f,g)}function Qy(a,o,d){var f=o.pendingProps,g=f.children,y=a!==null?a.memoizedState:null;if(f.mode==="hidden"){if((o.flags&128)!==0){if(f=y!==null?y.baseLanes|d:d,a!==null){for(g=o.child=a.child,y=0;g!==null;)y=y|g.lanes|g.childLanes,g=g.sibling;o.childLanes=y&~f}else o.childLanes=0,o.child=null;return Jy(a,o,f,d)}if((d&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},a!==null&&Nd(o,y!==null?y.cachePool:null),y!==null?Xb(o,y):p0(),Py(o);else return o.lanes=o.childLanes=536870912,Jy(a,o,y!==null?y.baseLanes|d:d,d)}else y!==null?(Nd(o,y.cachePool),Xb(o,y),rs(),o.memoizedState=null):(a!==null&&Nd(o,null),p0(),rs());return gr(a,o,g,d),o.child}function Jy(a,o,d,f){var g=c0();return g=g===null?null:{parent:Xt._currentValue,pool:g},o.memoizedState={baseLanes:d,cachePool:g},a!==null&&Nd(o,null),p0(),Py(o),a!==null&&Ni(a,o,f,!0),null}function $d(a,o){var d=o.ref;if(d===null)a!==null&&a.ref!==null&&(o.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(n(284));(a===null||a.ref!==d)&&(o.flags|=4194816)}}function B0(a,o,d,f,g){return ro(o),d=b0(a,o,d,f,void 0,g),f=y0(),a!==null&&!tr?(v0(a,o,g),Ta(a,o,g)):(st&&f&&t0(o),o.flags|=1,gr(a,o,d,g),o.child)}function Zy(a,o,d,f,g,y){return ro(o),o.updateQueue=null,d=Jb(o,f,d,g),Qb(a),f=y0(),a!==null&&!tr?(v0(a,o,y),Ta(a,o,y)):(st&&f&&t0(o),o.flags|=1,gr(a,o,d,y),o.child)}function ev(a,o,d,f,g){if(ro(o),o.stateNode===null){var y=Zo,j=d.contextType;typeof j=="object"&&j!==null&&(y=Tr(j)),y=new d(f,y),o.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,y.updater=z0,o.stateNode=y,y._reactInternals=o,y=o.stateNode,y.props=f,y.state=o.memoizedState,y.refs={},u0(o),j=d.contextType,y.context=typeof j=="object"&&j!==null?Tr(j):Zo,y.state=o.memoizedState,j=d.getDerivedStateFromProps,typeof j=="function"&&(R0(o,d,j,f),y.state=o.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(j=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),j!==y.state&&z0.enqueueReplaceState(y,y.state,null),Di(o,f,y,g),Ai(),y.state=o.memoizedState),typeof y.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(a===null){y=o.stateNode;var E=o.memoizedProps,R=so(d,E);y.props=R;var V=y.context,X=d.contextType;j=Zo,typeof X=="object"&&X!==null&&(j=Tr(X));var ee=d.getDerivedStateFromProps;X=typeof ee=="function"||typeof y.getSnapshotBeforeUpdate=="function",E=o.pendingProps!==E,X||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E||V!==j)&&Hy(o,y,f,j),Qa=!1;var F=o.memoizedState;y.state=F,Di(o,f,y,g),Ai(),V=o.memoizedState,E||F!==V||Qa?(typeof ee=="function"&&(R0(o,d,ee,f),V=o.memoizedState),(R=Qa||_y(o,d,R,f,F,V,j))?(X||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(o.flags|=4194308)):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=V),y.props=f,y.state=V,y.context=j,f=R):(typeof y.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{y=o.stateNode,f0(a,o),j=o.memoizedProps,X=so(d,j),y.props=X,ee=o.pendingProps,F=y.context,V=d.contextType,R=Zo,typeof V=="object"&&V!==null&&(R=Tr(V)),E=d.getDerivedStateFromProps,(V=typeof E=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(j!==ee||F!==R)&&Hy(o,y,f,R),Qa=!1,F=o.memoizedState,y.state=F,Di(o,f,y,g),Ai();var q=o.memoizedState;j!==ee||F!==q||Qa||a!==null&&a.dependencies!==null&&wd(a.dependencies)?(typeof E=="function"&&(R0(o,d,E,f),q=o.memoizedState),(X=Qa||_y(o,d,X,f,F,q,R)||a!==null&&a.dependencies!==null&&wd(a.dependencies))?(V||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(f,q,R),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(f,q,R)),typeof y.componentDidUpdate=="function"&&(o.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof y.componentDidUpdate!="function"||j===a.memoizedProps&&F===a.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||j===a.memoizedProps&&F===a.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=q),y.props=f,y.state=q,y.context=R,f=X):(typeof y.componentDidUpdate!="function"||j===a.memoizedProps&&F===a.memoizedState||(o.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||j===a.memoizedProps&&F===a.memoizedState||(o.flags|=1024),f=!1)}return y=f,$d(a,o),f=(o.flags&128)!==0,y||f?(y=o.stateNode,d=f&&typeof d.getDerivedStateFromError!="function"?null:y.render(),o.flags|=1,a!==null&&f?(o.child=cl(o,a.child,null,g),o.child=cl(o,null,d,g)):gr(a,o,d,g),o.memoizedState=y.state,a=o.child):a=Ta(a,o,g),a}function tv(a,o,d,f){return wi(),o.flags|=256,gr(a,o,d,f),o.child}var I0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function P0(a){return{baseLanes:a,cachePool:Ub()}}function _0(a,o,d){return a=a!==null?a.childLanes&~d:0,o&&(a|=wn),a}function rv(a,o,d){var f=o.pendingProps,g=!1,y=(o.flags&128)!==0,j;if((j=y)||(j=a!==null&&a.memoizedState===null?!1:(Qt.current&2)!==0),j&&(g=!0,o.flags&=-129),j=(o.flags&32)!==0,o.flags&=-33,a===null){if(st){if(g?ts(o):rs(),st){var E=Bt,R;if(R=E){e:{for(R=E,E=Qn;R.nodeType!==8;){if(!E){E=null;break e}if(R=Bn(R.nextSibling),R===null){E=null;break e}}E=R}E!==null?(o.memoizedState={dehydrated:E,treeContext:Qs!==null?{id:ka,overflow:wa}:null,retryLane:536870912,hydrationErrors:null},R=Jr(18,null,null,0),R.stateNode=E,R.return=o,o.child=R,Rr=o,Bt=null,R=!0):R=!1}R||eo(o)}if(E=o.memoizedState,E!==null&&(E=E.dehydrated,E!==null))return wm(E)?o.lanes=32:o.lanes=536870912,null;Ca(o)}return E=f.children,f=f.fallback,g?(rs(),g=o.mode,E=Ud({mode:"hidden",children:E},g),f=Xs(f,g,d,null),E.return=o,f.return=o,E.sibling=f,o.child=E,g=o.child,g.memoizedState=P0(d),g.childLanes=_0(a,j,d),o.memoizedState=I0,f):(ts(o),H0(o,E))}if(R=a.memoizedState,R!==null&&(E=R.dehydrated,E!==null)){if(y)o.flags&256?(ts(o),o.flags&=-257,o=$0(a,o,d)):o.memoizedState!==null?(rs(),o.child=a.child,o.flags|=128,o=null):(rs(),g=f.fallback,E=o.mode,f=Ud({mode:"visible",children:f.children},E),g=Xs(g,E,d,null),g.flags|=2,f.return=o,g.return=o,f.sibling=g,o.child=f,cl(o,a.child,null,d),f=o.child,f.memoizedState=P0(d),f.childLanes=_0(a,j,d),o.memoizedState=I0,o=g);else if(ts(o),wm(E)){if(j=E.nextSibling&&E.nextSibling.dataset,j)var V=j.dgst;j=V,f=Error(n(419)),f.stack="",f.digest=j,Si({value:f,source:null,stack:null}),o=$0(a,o,d)}else if(tr||Ni(a,o,d,!1),j=(d&a.childLanes)!==0,tr||j){if(j=jt,j!==null&&(f=d&-d,f=(f&42)!==0?1:Ka(f),f=(f&(j.suspendedLanes|d))!==0?0:f,f!==0&&f!==R.retryLane))throw R.retryLane=f,Jo(a,f),nn(j,a,f),Gy;E.data==="$?"||sm(),o=$0(a,o,d)}else E.data==="$?"?(o.flags|=192,o.child=a.child,o=null):(a=R.treeContext,Bt=Bn(E.nextSibling),Rr=o,st=!0,Zs=null,Qn=!1,a!==null&&(yn[vn++]=ka,yn[vn++]=wa,yn[vn++]=Qs,ka=a.id,wa=a.overflow,Qs=o),o=H0(o,f.children),o.flags|=4096);return o}return g?(rs(),g=f.fallback,E=o.mode,R=a.child,V=R.sibling,f=va(R,{mode:"hidden",children:f.children}),f.subtreeFlags=R.subtreeFlags&65011712,V!==null?g=va(V,g):(g=Xs(g,E,d,null),g.flags|=2),g.return=o,f.return=o,f.sibling=g,o.child=f,f=g,g=o.child,E=a.child.memoizedState,E===null?E=P0(d):(R=E.cachePool,R!==null?(V=Xt._currentValue,R=R.parent!==V?{parent:V,pool:V}:R):R=Ub(),E={baseLanes:E.baseLanes|d,cachePool:R}),g.memoizedState=E,g.childLanes=_0(a,j,d),o.memoizedState=I0,f):(ts(o),d=a.child,a=d.sibling,d=va(d,{mode:"visible",children:f.children}),d.return=o,d.sibling=null,a!==null&&(j=o.deletions,j===null?(o.deletions=[a],o.flags|=16):j.push(a)),o.child=d,o.memoizedState=null,d)}function H0(a,o){return o=Ud({mode:"visible",children:o},a.mode),o.return=a,a.child=o}function Ud(a,o){return a=Jr(22,a,null,o),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function $0(a,o,d){return cl(o,a.child,null,d),a=H0(o,o.pendingProps.children),a.flags|=2,o.memoizedState=null,a}function nv(a,o,d){a.lanes|=o;var f=a.alternate;f!==null&&(f.lanes|=o),s0(a.return,o,d)}function U0(a,o,d,f,g){var y=a.memoizedState;y===null?a.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:d,tailMode:g}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=d,y.tailMode=g)}function av(a,o,d){var f=o.pendingProps,g=f.revealOrder,y=f.tail;if(gr(a,o,f.children,d),f=Qt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=o.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&nv(a,d,o);else if(a.tag===19)nv(a,d,o);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}f&=1}switch(me(Qt,f),g){case"forwards":for(d=o.child,g=null;d!==null;)a=d.alternate,a!==null&&Pd(a)===null&&(g=d),d=d.sibling;d=g,d===null?(g=o.child,o.child=null):(g=d.sibling,d.sibling=null),U0(o,!1,g,d,y);break;case"backwards":for(d=null,g=o.child,o.child=null;g!==null;){if(a=g.alternate,a!==null&&Pd(a)===null){o.child=g;break}a=g.sibling,g.sibling=d,d=g,g=a}U0(o,!0,d,null,y);break;case"together":U0(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ta(a,o,d){if(a!==null&&(o.dependencies=a.dependencies),is|=o.lanes,(d&o.childLanes)===0)if(a!==null){if(Ni(a,o,d,!1),(d&o.childLanes)===0)return null}else return null;if(a!==null&&o.child!==a.child)throw Error(n(153));if(o.child!==null){for(a=o.child,d=va(a,a.pendingProps),o.child=d,d.return=o;a.sibling!==null;)a=a.sibling,d=d.sibling=va(a,a.pendingProps),d.return=o;d.sibling=null}return o.child}function V0(a,o){return(a.lanes&o)!==0?!0:(a=a.dependencies,!!(a!==null&&wd(a)))}function ST(a,o,d){switch(o.tag){case 3:ne(o,o.stateNode.containerInfo),Xa(o,Xt,a.memoizedState.cache),wi();break;case 27:case 5:Z(o);break;case 4:ne(o,o.stateNode.containerInfo);break;case 10:Xa(o,o.type,o.memoizedProps.value);break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(ts(o),o.flags|=128,null):(d&o.child.childLanes)!==0?rv(a,o,d):(ts(o),a=Ta(a,o,d),a!==null?a.sibling:null);ts(o);break;case 19:var g=(a.flags&128)!==0;if(f=(d&o.childLanes)!==0,f||(Ni(a,o,d,!1),f=(d&o.childLanes)!==0),g){if(f)return av(a,o,d);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),me(Qt,Qt.current),f)break;return null;case 22:case 23:return o.lanes=0,Qy(a,o,d);case 24:Xa(o,Xt,a.memoizedState.cache)}return Ta(a,o,d)}function sv(a,o,d){if(a!==null)if(a.memoizedProps!==o.pendingProps)tr=!0;else{if(!V0(a,d)&&(o.flags&128)===0)return tr=!1,ST(a,o,d);tr=(a.flags&131072)!==0}else tr=!1,st&&(o.flags&1048576)!==0&&Lb(o,kd,o.index);switch(o.lanes=0,o.tag){case 16:e:{a=o.pendingProps;var f=o.elementType,g=f._init;if(f=g(f._payload),o.type=f,typeof f=="function")Jh(f)?(a=so(f,a),o.tag=1,o=ev(null,o,f,a,d)):(o.tag=0,o=B0(null,o,f,a,d));else{if(f!=null){if(g=f.$$typeof,g===D){o.tag=11,o=Ky(null,o,f,a,d);break e}else if(g===I){o.tag=14,o=Wy(null,o,f,a,d);break e}}throw o=fe(f)||f,Error(n(306,o,""))}}return o;case 0:return B0(a,o,o.type,o.pendingProps,d);case 1:return f=o.type,g=so(f,o.pendingProps),ev(a,o,f,g,d);case 3:e:{if(ne(o,o.stateNode.containerInfo),a===null)throw Error(n(387));f=o.pendingProps;var y=o.memoizedState;g=y.element,f0(a,o),Di(o,f,null,d);var j=o.memoizedState;if(f=j.cache,Xa(o,Xt,f),f!==y.cache&&o0(o,[Xt],d,!0),Ai(),f=j.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:j.cache},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){o=tv(a,o,f,d);break e}else if(f!==g){g=xn(Error(n(424)),o),Si(g),o=tv(a,o,f,d);break e}else{switch(a=o.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Bt=Bn(a.firstChild),Rr=o,st=!0,Zs=null,Qn=!0,d=Iy(o,null,f,d),o.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(wi(),f===g){o=Ta(a,o,d);break e}gr(a,o,f,d)}o=o.child}return o;case 26:return $d(a,o),a===null?(d=ck(o.type,null,o.pendingProps,null))?o.memoizedState=d:st||(d=o.type,a=o.pendingProps,f=ru(_e.current).createElement(d),f[O]=o,f[ce]=a,br(f,d,a),er(f),o.stateNode=f):o.memoizedState=ck(o.type,a.memoizedProps,o.pendingProps,a.memoizedState),null;case 27:return Z(o),a===null&&st&&(f=o.stateNode=ok(o.type,o.pendingProps,_e.current),Rr=o,Qn=!0,g=Bt,fs(o.type)?(Sm=g,Bt=Bn(f.firstChild)):Bt=g),gr(a,o,o.pendingProps.children,d),$d(a,o),a===null&&(o.flags|=4194304),o.child;case 5:return a===null&&st&&((g=f=Bt)&&(f=QT(f,o.type,o.pendingProps,Qn),f!==null?(o.stateNode=f,Rr=o,Bt=Bn(f.firstChild),Qn=!1,g=!0):g=!1),g||eo(o)),Z(o),g=o.type,y=o.pendingProps,j=a!==null?a.memoizedProps:null,f=y.children,ym(g,y)?f=null:j!==null&&ym(g,j)&&(o.flags|=32),o.memoizedState!==null&&(g=b0(a,o,pT,null,null,d),Zi._currentValue=g),$d(a,o),gr(a,o,f,d),o.child;case 6:return a===null&&st&&((a=d=Bt)&&(d=JT(d,o.pendingProps,Qn),d!==null?(o.stateNode=d,Rr=o,Bt=null,a=!0):a=!1),a||eo(o)),null;case 13:return rv(a,o,d);case 4:return ne(o,o.stateNode.containerInfo),f=o.pendingProps,a===null?o.child=cl(o,null,f,d):gr(a,o,f,d),o.child;case 11:return Ky(a,o,o.type,o.pendingProps,d);case 7:return gr(a,o,o.pendingProps,d),o.child;case 8:return gr(a,o,o.pendingProps.children,d),o.child;case 12:return gr(a,o,o.pendingProps.children,d),o.child;case 10:return f=o.pendingProps,Xa(o,o.type,f.value),gr(a,o,f.children,d),o.child;case 9:return g=o.type._context,f=o.pendingProps.children,ro(o),g=Tr(g),f=f(g),o.flags|=1,gr(a,o,f,d),o.child;case 14:return Wy(a,o,o.type,o.pendingProps,d);case 15:return Xy(a,o,o.type,o.pendingProps,d);case 19:return av(a,o,d);case 31:return f=o.pendingProps,d=o.mode,f={mode:f.mode,children:f.children},a===null?(d=Ud(f,d),d.ref=o.ref,o.child=d,d.return=o,o=d):(d=va(a.child,f),d.ref=o.ref,o.child=d,d.return=o,o=d),o;case 22:return Qy(a,o,d);case 24:return ro(o),f=Tr(Xt),a===null?(g=c0(),g===null&&(g=jt,y=l0(),g.pooledCache=y,y.refCount++,y!==null&&(g.pooledCacheLanes|=d),g=y),o.memoizedState={parent:f,cache:g},u0(o),Xa(o,Xt,g)):((a.lanes&d)!==0&&(f0(a,o),Di(o,null,null,d),Ai()),g=a.memoizedState,y=o.memoizedState,g.parent!==f?(g={parent:f,cache:f},o.memoizedState=g,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=g),Xa(o,Xt,f)):(f=y.cache,Xa(o,Xt,f),f!==g.cache&&o0(o,[Xt],d,!0))),gr(a,o,o.pendingProps.children,d),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Ma(a){a.flags|=4}function ov(a,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!mk(o)){if(o=kn.current,o!==null&&((tt&4194048)===tt?Jn!==null:(tt&62914560)!==tt&&(tt&536870912)===0||o!==Jn))throw Mi=d0,Vb;a.flags|=8192}}function Vd(a,o){o!==null&&(a.flags|=4),a.flags&16384&&(o=a.tag!==22?xa():536870912,a.lanes|=o,hl|=o)}function Pi(a,o){if(!st)switch(a.tailMode){case"hidden":o=a.tail;for(var d=null;o!==null;)o.alternate!==null&&(d=o),o=o.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var f=null;d!==null;)d.alternate!==null&&(f=d),d=d.sibling;f===null?o||a.tail===null?a.tail=null:a.tail.sibling=null:f.sibling=null}}function Dt(a){var o=a.alternate!==null&&a.alternate.child===a.child,d=0,f=0;if(o)for(var g=a.child;g!==null;)d|=g.lanes|g.childLanes,f|=g.subtreeFlags&65011712,f|=g.flags&65011712,g.return=a,g=g.sibling;else for(g=a.child;g!==null;)d|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=a,g=g.sibling;return a.subtreeFlags|=f,a.childLanes=d,o}function NT(a,o,d){var f=o.pendingProps;switch(r0(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(o),null;case 1:return Dt(o),null;case 3:return d=o.stateNode,f=null,a!==null&&(f=a.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),Na(Xt),ge(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(ki(o)?Ma(o):a===null||a.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Pb())),Dt(o),null;case 26:return d=o.memoizedState,a===null?(Ma(o),d!==null?(Dt(o),ov(o,d)):(Dt(o),o.flags&=-16777217)):d?d!==a.memoizedState?(Ma(o),Dt(o),ov(o,d)):(Dt(o),o.flags&=-16777217):(a.memoizedProps!==f&&Ma(o),Dt(o),o.flags&=-16777217),null;case 27:oe(o),d=_e.current;var g=o.type;if(a!==null&&o.stateNode!=null)a.memoizedProps!==f&&Ma(o);else{if(!f){if(o.stateNode===null)throw Error(n(166));return Dt(o),null}a=be.current,ki(o)?Bb(o):(a=ok(g,f,d),o.stateNode=a,Ma(o))}return Dt(o),null;case 5:if(oe(o),d=o.type,a!==null&&o.stateNode!=null)a.memoizedProps!==f&&Ma(o);else{if(!f){if(o.stateNode===null)throw Error(n(166));return Dt(o),null}if(a=be.current,ki(o))Bb(o);else{switch(g=ru(_e.current),a){case 1:a=g.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:a=g.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":a=g.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":a=g.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":a=g.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof f.is=="string"?g.createElement("select",{is:f.is}):g.createElement("select"),f.multiple?a.multiple=!0:f.size&&(a.size=f.size);break;default:a=typeof f.is=="string"?g.createElement(d,{is:f.is}):g.createElement(d)}}a[O]=o,a[ce]=f;e:for(g=o.child;g!==null;){if(g.tag===5||g.tag===6)a.appendChild(g.stateNode);else if(g.tag!==4&&g.tag!==27&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===o)break e;for(;g.sibling===null;){if(g.return===null||g.return===o)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}o.stateNode=a;e:switch(br(a,d,f),d){case"button":case"input":case"select":case"textarea":a=!!f.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ma(o)}}return Dt(o),o.flags&=-16777217,null;case 6:if(a&&o.stateNode!=null)a.memoizedProps!==f&&Ma(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(n(166));if(a=_e.current,ki(o)){if(a=o.stateNode,d=o.memoizedProps,f=null,g=Rr,g!==null)switch(g.tag){case 27:case 5:f=g.memoizedProps}a[O]=o,a=!!(a.nodeValue===d||f!==null&&f.suppressHydrationWarning===!0||Zv(a.nodeValue,d)),a||eo(o)}else a=ru(a).createTextNode(f),a[O]=o,o.stateNode=a}return Dt(o),null;case 13:if(f=o.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(g=ki(o),f!==null&&f.dehydrated!==null){if(a===null){if(!g)throw Error(n(318));if(g=o.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(n(317));g[O]=o}else wi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Dt(o),g=!1}else g=Pb(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=g),g=!0;if(!g)return o.flags&256?(Ca(o),o):(Ca(o),null)}if(Ca(o),(o.flags&128)!==0)return o.lanes=d,o;if(d=f!==null,a=a!==null&&a.memoizedState!==null,d){f=o.child,g=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(g=f.alternate.memoizedState.cachePool.pool);var y=null;f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(y=f.memoizedState.cachePool.pool),y!==g&&(f.flags|=2048)}return d!==a&&d&&(o.child.flags|=8192),Vd(o,o.updateQueue),Dt(o),null;case 4:return ge(),a===null&&mm(o.stateNode.containerInfo),Dt(o),null;case 10:return Na(o.type),Dt(o),null;case 19:if(Ae(Qt),g=o.memoizedState,g===null)return Dt(o),null;if(f=(o.flags&128)!==0,y=g.rendering,y===null)if(f)Pi(g,!1);else{if(It!==0||a!==null&&(a.flags&128)!==0)for(a=o.child;a!==null;){if(y=Pd(a),y!==null){for(o.flags|=128,Pi(g,!1),a=y.updateQueue,o.updateQueue=a,Vd(o,a),o.subtreeFlags=0,a=d,d=o.child;d!==null;)zb(d,a),d=d.sibling;return me(Qt,Qt.current&1|2),o.child}a=a.sibling}g.tail!==null&&Et()>qd&&(o.flags|=128,f=!0,Pi(g,!1),o.lanes=4194304)}else{if(!f)if(a=Pd(y),a!==null){if(o.flags|=128,f=!0,a=a.updateQueue,o.updateQueue=a,Vd(o,a),Pi(g,!0),g.tail===null&&g.tailMode==="hidden"&&!y.alternate&&!st)return Dt(o),null}else 2*Et()-g.renderingStartTime>qd&&d!==536870912&&(o.flags|=128,f=!0,Pi(g,!1),o.lanes=4194304);g.isBackwards?(y.sibling=o.child,o.child=y):(a=g.last,a!==null?a.sibling=y:o.child=y,g.last=y)}return g.tail!==null?(o=g.tail,g.rendering=o,g.tail=o.sibling,g.renderingStartTime=Et(),o.sibling=null,a=Qt.current,me(Qt,f?a&1|2:a&1),o):(Dt(o),null);case 22:case 23:return Ca(o),g0(),f=o.memoizedState!==null,a!==null?a.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(d&536870912)!==0&&(o.flags&128)===0&&(Dt(o),o.subtreeFlags&6&&(o.flags|=8192)):Dt(o),d=o.updateQueue,d!==null&&Vd(o,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==d&&(o.flags|=2048),a!==null&&Ae(no),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),Na(Xt),Dt(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function jT(a,o){switch(r0(o),o.tag){case 1:return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 3:return Na(Xt),ge(),a=o.flags,(a&65536)!==0&&(a&128)===0?(o.flags=a&-65537|128,o):null;case 26:case 27:case 5:return oe(o),null;case 13:if(Ca(o),a=o.memoizedState,a!==null&&a.dehydrated!==null){if(o.alternate===null)throw Error(n(340));wi()}return a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 19:return Ae(Qt),null;case 4:return ge(),null;case 10:return Na(o.type),null;case 22:case 23:return Ca(o),g0(),a!==null&&Ae(no),a=o.flags,a&65536?(o.flags=a&-65537|128,o):null;case 24:return Na(Xt),null;case 25:return null;default:return null}}function lv(a,o){switch(r0(o),o.tag){case 3:Na(Xt),ge();break;case 26:case 27:case 5:oe(o);break;case 4:ge();break;case 13:Ca(o);break;case 19:Ae(Qt);break;case 10:Na(o.type);break;case 22:case 23:Ca(o),g0(),a!==null&&Ae(no);break;case 24:Na(Xt)}}function _i(a,o){try{var d=o.updateQueue,f=d!==null?d.lastEffect:null;if(f!==null){var g=f.next;d=g;do{if((d.tag&a)===a){f=void 0;var y=d.create,j=d.inst;f=y(),j.destroy=f}d=d.next}while(d!==g)}}catch(E){bt(o,o.return,E)}}function ns(a,o,d){try{var f=o.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var y=g.next;f=y;do{if((f.tag&a)===a){var j=f.inst,E=j.destroy;if(E!==void 0){j.destroy=void 0,g=o;var R=d,V=E;try{V()}catch(X){bt(g,R,X)}}}f=f.next}while(f!==y)}}catch(X){bt(o,o.return,X)}}function iv(a){var o=a.updateQueue;if(o!==null){var d=a.stateNode;try{Wb(o,d)}catch(f){bt(a,a.return,f)}}}function cv(a,o,d){d.props=so(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(f){bt(a,o,f)}}function Hi(a,o){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var f=a.stateNode;break;case 30:f=a.stateNode;break;default:f=a.stateNode}typeof d=="function"?a.refCleanup=d(f):d.current=f}}catch(g){bt(a,o,g)}}function Zn(a,o){var d=a.ref,f=a.refCleanup;if(d!==null)if(typeof f=="function")try{f()}catch(g){bt(a,o,g)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(g){bt(a,o,g)}else d.current=null}function dv(a){var o=a.type,d=a.memoizedProps,f=a.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":d.autoFocus&&f.focus();break e;case"img":d.src?f.src=d.src:d.srcSet&&(f.srcset=d.srcSet)}}catch(g){bt(a,a.return,g)}}function F0(a,o,d){try{var f=a.stateNode;qT(f,a.type,d,o),f[ce]=o}catch(g){bt(a,a.return,g)}}function uv(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&fs(a.type)||a.tag===4}function Y0(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||uv(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&fs(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function q0(a,o,d){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,o):(o=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,o.appendChild(a),d=d._reactRootContainer,d!=null||o.onclick!==null||(o.onclick=tu));else if(f!==4&&(f===27&&fs(a.type)&&(d=a.stateNode,o=null),a=a.child,a!==null))for(q0(a,o,d),a=a.sibling;a!==null;)q0(a,o,d),a=a.sibling}function Fd(a,o,d){var f=a.tag;if(f===5||f===6)a=a.stateNode,o?d.insertBefore(a,o):d.appendChild(a);else if(f!==4&&(f===27&&fs(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(Fd(a,o,d),a=a.sibling;a!==null;)Fd(a,o,d),a=a.sibling}function fv(a){var o=a.stateNode,d=a.memoizedProps;try{for(var f=a.type,g=o.attributes;g.length;)o.removeAttributeNode(g[0]);br(o,f,d),o[O]=a,o[ce]=d}catch(y){bt(a,a.return,y)}}var Ea=!1,Vt=!1,G0=!1,hv=typeof WeakSet=="function"?WeakSet:Set,rr=null;function CT(a,o){if(a=a.containerInfo,xm=iu,a=Nb(a),Yh(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var f=d.getSelection&&d.getSelection();if(f&&f.rangeCount!==0){d=f.anchorNode;var g=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{d.nodeType,y.nodeType}catch{d=null;break e}var j=0,E=-1,R=-1,V=0,X=0,ee=a,F=null;t:for(;;){for(var q;ee!==d||g!==0&&ee.nodeType!==3||(E=j+g),ee!==y||f!==0&&ee.nodeType!==3||(R=j+f),ee.nodeType===3&&(j+=ee.nodeValue.length),(q=ee.firstChild)!==null;)F=ee,ee=q;for(;;){if(ee===a)break t;if(F===d&&++V===g&&(E=j),F===y&&++X===f&&(R=j),(q=ee.nextSibling)!==null)break;ee=F,F=ee.parentNode}ee=q}d=E===-1||R===-1?null:{start:E,end:R}}else d=null}d=d||{start:0,end:0}}else d=null;for(bm={focusedElem:a,selectionRange:d},iu=!1,rr=o;rr!==null;)if(o=rr,a=o.child,(o.subtreeFlags&1024)!==0&&a!==null)a.return=o,rr=a;else for(;rr!==null;){switch(o=rr,y=o.alternate,a=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&y!==null){a=void 0,d=o,g=y.memoizedProps,y=y.memoizedState,f=d.stateNode;try{var Pe=so(d.type,g,d.elementType===d.type);a=f.getSnapshotBeforeUpdate(Pe,y),f.__reactInternalSnapshotBeforeUpdate=a}catch(ze){bt(d,d.return,ze)}}break;case 3:if((a&1024)!==0){if(a=o.stateNode.containerInfo,d=a.nodeType,d===9)km(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":km(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(n(163))}if(a=o.sibling,a!==null){a.return=o.return,rr=a;break}rr=o.return}}function mv(a,o,d){var f=d.flags;switch(d.tag){case 0:case 11:case 15:as(a,d),f&4&&_i(5,d);break;case 1:if(as(a,d),f&4)if(a=d.stateNode,o===null)try{a.componentDidMount()}catch(j){bt(d,d.return,j)}else{var g=so(d.type,o.memoizedProps);o=o.memoizedState;try{a.componentDidUpdate(g,o,a.__reactInternalSnapshotBeforeUpdate)}catch(j){bt(d,d.return,j)}}f&64&&iv(d),f&512&&Hi(d,d.return);break;case 3:if(as(a,d),f&64&&(a=d.updateQueue,a!==null)){if(o=null,d.child!==null)switch(d.child.tag){case 27:case 5:o=d.child.stateNode;break;case 1:o=d.child.stateNode}try{Wb(a,o)}catch(j){bt(d,d.return,j)}}break;case 27:o===null&&f&4&&fv(d);case 26:case 5:as(a,d),o===null&&f&4&&dv(d),f&512&&Hi(d,d.return);break;case 12:as(a,d);break;case 13:as(a,d),f&4&&xv(a,d),f&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=LT.bind(null,d),ZT(a,d))));break;case 22:if(f=d.memoizedState!==null||Ea,!f){o=o!==null&&o.memoizedState!==null||Vt,g=Ea;var y=Vt;Ea=f,(Vt=o)&&!y?ss(a,d,(d.subtreeFlags&8772)!==0):as(a,d),Ea=g,Vt=y}break;case 30:break;default:as(a,d)}}function pv(a){var o=a.alternate;o!==null&&(a.alternate=null,pv(o)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(o=a.stateNode,o!==null&&Xr(o)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Mt=null,Fr=!1;function Aa(a,o,d){for(d=d.child;d!==null;)gv(a,o,d),d=d.sibling}function gv(a,o,d){if(Nt&&typeof Nt.onCommitFiberUnmount=="function")try{Nt.onCommitFiberUnmount($t,d)}catch{}switch(d.tag){case 26:Vt||Zn(d,o),Aa(a,o,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Vt||Zn(d,o);var f=Mt,g=Fr;fs(d.type)&&(Mt=d.stateNode,Fr=!1),Aa(a,o,d),Wi(d.stateNode),Mt=f,Fr=g;break;case 5:Vt||Zn(d,o);case 6:if(f=Mt,g=Fr,Mt=null,Aa(a,o,d),Mt=f,Fr=g,Mt!==null)if(Fr)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(d.stateNode)}catch(y){bt(d,o,y)}else try{Mt.removeChild(d.stateNode)}catch(y){bt(d,o,y)}break;case 18:Mt!==null&&(Fr?(a=Mt,ak(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),nc(a)):ak(Mt,d.stateNode));break;case 4:f=Mt,g=Fr,Mt=d.stateNode.containerInfo,Fr=!0,Aa(a,o,d),Mt=f,Fr=g;break;case 0:case 11:case 14:case 15:Vt||ns(2,d,o),Vt||ns(4,d,o),Aa(a,o,d);break;case 1:Vt||(Zn(d,o),f=d.stateNode,typeof f.componentWillUnmount=="function"&&cv(d,o,f)),Aa(a,o,d);break;case 21:Aa(a,o,d);break;case 22:Vt=(f=Vt)||d.memoizedState!==null,Aa(a,o,d),Vt=f;break;default:Aa(a,o,d)}}function xv(a,o){if(o.memoizedState===null&&(a=o.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{nc(a)}catch(d){bt(o,o.return,d)}}function TT(a){switch(a.tag){case 13:case 19:var o=a.stateNode;return o===null&&(o=a.stateNode=new hv),o;case 22:return a=a.stateNode,o=a._retryCache,o===null&&(o=a._retryCache=new hv),o;default:throw Error(n(435,a.tag))}}function K0(a,o){var d=TT(a);o.forEach(function(f){var g=BT.bind(null,a,f);d.has(f)||(d.add(f),f.then(g,g))})}function Zr(a,o){var d=o.deletions;if(d!==null)for(var f=0;f<d.length;f++){var g=d[f],y=a,j=o,E=j;e:for(;E!==null;){switch(E.tag){case 27:if(fs(E.type)){Mt=E.stateNode,Fr=!1;break e}break;case 5:Mt=E.stateNode,Fr=!1;break e;case 3:case 4:Mt=E.stateNode.containerInfo,Fr=!0;break e}E=E.return}if(Mt===null)throw Error(n(160));gv(y,j,g),Mt=null,Fr=!1,y=g.alternate,y!==null&&(y.return=null),g.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)bv(o,a),o=o.sibling}var Ln=null;function bv(a,o){var d=a.alternate,f=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Zr(o,a),en(a),f&4&&(ns(3,a,a.return),_i(3,a),ns(5,a,a.return));break;case 1:Zr(o,a),en(a),f&512&&(Vt||d===null||Zn(d,d.return)),f&64&&Ea&&(a=a.updateQueue,a!==null&&(f=a.callbacks,f!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?f:d.concat(f))));break;case 26:var g=Ln;if(Zr(o,a),en(a),f&512&&(Vt||d===null||Zn(d,d.return)),f&4){var y=d!==null?d.memoizedState:null;if(f=a.memoizedState,d===null)if(f===null)if(a.stateNode===null){e:{f=a.type,d=a.memoizedProps,g=g.ownerDocument||g;t:switch(f){case"title":y=g.getElementsByTagName("title")[0],(!y||y[mn]||y[O]||y.namespaceURI==="http://www.w3.org/2000/svg"||y.hasAttribute("itemprop"))&&(y=g.createElement(f),g.head.insertBefore(y,g.querySelector("head > title"))),br(y,f,d),y[O]=a,er(y),f=y;break e;case"link":var j=fk("link","href",g).get(f+(d.href||""));if(j){for(var E=0;E<j.length;E++)if(y=j[E],y.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&y.getAttribute("rel")===(d.rel==null?null:d.rel)&&y.getAttribute("title")===(d.title==null?null:d.title)&&y.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){j.splice(E,1);break t}}y=g.createElement(f),br(y,f,d),g.head.appendChild(y);break;case"meta":if(j=fk("meta","content",g).get(f+(d.content||""))){for(E=0;E<j.length;E++)if(y=j[E],y.getAttribute("content")===(d.content==null?null:""+d.content)&&y.getAttribute("name")===(d.name==null?null:d.name)&&y.getAttribute("property")===(d.property==null?null:d.property)&&y.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&y.getAttribute("charset")===(d.charSet==null?null:d.charSet)){j.splice(E,1);break t}}y=g.createElement(f),br(y,f,d),g.head.appendChild(y);break;default:throw Error(n(468,f))}y[O]=a,er(y),f=y}a.stateNode=f}else hk(g,a.type,a.stateNode);else a.stateNode=uk(g,f,a.memoizedProps);else y!==f?(y===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):y.count--,f===null?hk(g,a.type,a.stateNode):uk(g,f,a.memoizedProps)):f===null&&a.stateNode!==null&&F0(a,a.memoizedProps,d.memoizedProps)}break;case 27:Zr(o,a),en(a),f&512&&(Vt||d===null||Zn(d,d.return)),d!==null&&f&4&&F0(a,a.memoizedProps,d.memoizedProps);break;case 5:if(Zr(o,a),en(a),f&512&&(Vt||d===null||Zn(d,d.return)),a.flags&32){g=a.stateNode;try{Yo(g,"")}catch(q){bt(a,a.return,q)}}f&4&&a.stateNode!=null&&(g=a.memoizedProps,F0(a,g,d!==null?d.memoizedProps:g)),f&1024&&(G0=!0);break;case 6:if(Zr(o,a),en(a),f&4){if(a.stateNode===null)throw Error(n(162));f=a.memoizedProps,d=a.stateNode;try{d.nodeValue=f}catch(q){bt(a,a.return,q)}}break;case 3:if(su=null,g=Ln,Ln=nu(o.containerInfo),Zr(o,a),Ln=g,en(a),f&4&&d!==null&&d.memoizedState.isDehydrated)try{nc(o.containerInfo)}catch(q){bt(a,a.return,q)}G0&&(G0=!1,yv(a));break;case 4:f=Ln,Ln=nu(a.stateNode.containerInfo),Zr(o,a),en(a),Ln=f;break;case 12:Zr(o,a),en(a);break;case 13:Zr(o,a),en(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(em=Et()),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,K0(a,f)));break;case 22:g=a.memoizedState!==null;var R=d!==null&&d.memoizedState!==null,V=Ea,X=Vt;if(Ea=V||g,Vt=X||R,Zr(o,a),Vt=X,Ea=V,en(a),f&8192)e:for(o=a.stateNode,o._visibility=g?o._visibility&-2:o._visibility|1,g&&(d===null||R||Ea||Vt||oo(a)),d=null,o=a;;){if(o.tag===5||o.tag===26){if(d===null){R=d=o;try{if(y=R.stateNode,g)j=y.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{E=R.stateNode;var ee=R.memoizedProps.style,F=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;E.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(q){bt(R,R.return,q)}}}else if(o.tag===6){if(d===null){R=o;try{R.stateNode.nodeValue=g?"":R.memoizedProps}catch(q){bt(R,R.return,q)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===a)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;d===o&&(d=null),o=o.return}d===o&&(d=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=a.updateQueue,f!==null&&(d=f.retryQueue,d!==null&&(f.retryQueue=null,K0(a,d))));break;case 19:Zr(o,a),en(a),f&4&&(f=a.updateQueue,f!==null&&(a.updateQueue=null,K0(a,f)));break;case 30:break;case 21:break;default:Zr(o,a),en(a)}}function en(a){var o=a.flags;if(o&2){try{for(var d,f=a.return;f!==null;){if(uv(f)){d=f;break}f=f.return}if(d==null)throw Error(n(160));switch(d.tag){case 27:var g=d.stateNode,y=Y0(a);Fd(a,y,g);break;case 5:var j=d.stateNode;d.flags&32&&(Yo(j,""),d.flags&=-33);var E=Y0(a);Fd(a,E,j);break;case 3:case 4:var R=d.stateNode.containerInfo,V=Y0(a);q0(a,V,R);break;default:throw Error(n(161))}}catch(X){bt(a,a.return,X)}a.flags&=-3}o&4096&&(a.flags&=-4097)}function yv(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var o=a;yv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),a=a.sibling}}function as(a,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)mv(a,o.alternate,o),o=o.sibling}function oo(a){for(a=a.child;a!==null;){var o=a;switch(o.tag){case 0:case 11:case 14:case 15:ns(4,o,o.return),oo(o);break;case 1:Zn(o,o.return);var d=o.stateNode;typeof d.componentWillUnmount=="function"&&cv(o,o.return,d),oo(o);break;case 27:Wi(o.stateNode);case 26:case 5:Zn(o,o.return),oo(o);break;case 22:o.memoizedState===null&&oo(o);break;case 30:oo(o);break;default:oo(o)}a=a.sibling}}function ss(a,o,d){for(d=d&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,g=a,y=o,j=y.flags;switch(y.tag){case 0:case 11:case 15:ss(g,y,d),_i(4,y);break;case 1:if(ss(g,y,d),f=y,g=f.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(V){bt(f,f.return,V)}if(f=y,g=f.updateQueue,g!==null){var E=f.stateNode;try{var R=g.shared.hiddenCallbacks;if(R!==null)for(g.shared.hiddenCallbacks=null,g=0;g<R.length;g++)Kb(R[g],E)}catch(V){bt(f,f.return,V)}}d&&j&64&&iv(y),Hi(y,y.return);break;case 27:fv(y);case 26:case 5:ss(g,y,d),d&&f===null&&j&4&&dv(y),Hi(y,y.return);break;case 12:ss(g,y,d);break;case 13:ss(g,y,d),d&&j&4&&xv(g,y);break;case 22:y.memoizedState===null&&ss(g,y,d),Hi(y,y.return);break;case 30:break;default:ss(g,y,d)}o=o.sibling}}function W0(a,o){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(a=o.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&ji(d))}function X0(a,o){a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&ji(a))}function ea(a,o,d,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)vv(a,o,d,f),o=o.sibling}function vv(a,o,d,f){var g=o.flags;switch(o.tag){case 0:case 11:case 15:ea(a,o,d,f),g&2048&&_i(9,o);break;case 1:ea(a,o,d,f);break;case 3:ea(a,o,d,f),g&2048&&(a=null,o.alternate!==null&&(a=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==a&&(o.refCount++,a!=null&&ji(a)));break;case 12:if(g&2048){ea(a,o,d,f),a=o.stateNode;try{var y=o.memoizedProps,j=y.id,E=y.onPostCommit;typeof E=="function"&&E(j,o.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(R){bt(o,o.return,R)}}else ea(a,o,d,f);break;case 13:ea(a,o,d,f);break;case 23:break;case 22:y=o.stateNode,j=o.alternate,o.memoizedState!==null?y._visibility&2?ea(a,o,d,f):$i(a,o):y._visibility&2?ea(a,o,d,f):(y._visibility|=2,dl(a,o,d,f,(o.subtreeFlags&10256)!==0)),g&2048&&W0(j,o);break;case 24:ea(a,o,d,f),g&2048&&X0(o.alternate,o);break;default:ea(a,o,d,f)}}function dl(a,o,d,f,g){for(g=g&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var y=a,j=o,E=d,R=f,V=j.flags;switch(j.tag){case 0:case 11:case 15:dl(y,j,E,R,g),_i(8,j);break;case 23:break;case 22:var X=j.stateNode;j.memoizedState!==null?X._visibility&2?dl(y,j,E,R,g):$i(y,j):(X._visibility|=2,dl(y,j,E,R,g)),g&&V&2048&&W0(j.alternate,j);break;case 24:dl(y,j,E,R,g),g&&V&2048&&X0(j.alternate,j);break;default:dl(y,j,E,R,g)}o=o.sibling}}function $i(a,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var d=a,f=o,g=f.flags;switch(f.tag){case 22:$i(d,f),g&2048&&W0(f.alternate,f);break;case 24:$i(d,f),g&2048&&X0(f.alternate,f);break;default:$i(d,f)}o=o.sibling}}var Ui=8192;function ul(a){if(a.subtreeFlags&Ui)for(a=a.child;a!==null;)kv(a),a=a.sibling}function kv(a){switch(a.tag){case 26:ul(a),a.flags&Ui&&a.memoizedState!==null&&fM(Ln,a.memoizedState,a.memoizedProps);break;case 5:ul(a);break;case 3:case 4:var o=Ln;Ln=nu(a.stateNode.containerInfo),ul(a),Ln=o;break;case 22:a.memoizedState===null&&(o=a.alternate,o!==null&&o.memoizedState!==null?(o=Ui,Ui=16777216,ul(a),Ui=o):ul(a));break;default:ul(a)}}function wv(a){var o=a.alternate;if(o!==null&&(a=o.child,a!==null)){o.child=null;do o=a.sibling,a.sibling=null,a=o;while(a!==null)}}function Vi(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var f=o[d];rr=f,Nv(f,a)}wv(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Sv(a),a=a.sibling}function Sv(a){switch(a.tag){case 0:case 11:case 15:Vi(a),a.flags&2048&&ns(9,a,a.return);break;case 3:Vi(a);break;case 12:Vi(a);break;case 22:var o=a.stateNode;a.memoizedState!==null&&o._visibility&2&&(a.return===null||a.return.tag!==13)?(o._visibility&=-3,Yd(a)):Vi(a);break;default:Vi(a)}}function Yd(a){var o=a.deletions;if((a.flags&16)!==0){if(o!==null)for(var d=0;d<o.length;d++){var f=o[d];rr=f,Nv(f,a)}wv(a)}for(a=a.child;a!==null;){switch(o=a,o.tag){case 0:case 11:case 15:ns(8,o,o.return),Yd(o);break;case 22:d=o.stateNode,d._visibility&2&&(d._visibility&=-3,Yd(o));break;default:Yd(o)}a=a.sibling}}function Nv(a,o){for(;rr!==null;){var d=rr;switch(d.tag){case 0:case 11:case 15:ns(8,d,o);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var f=d.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:ji(d.memoizedState.cache)}if(f=d.child,f!==null)f.return=d,rr=f;else e:for(d=a;rr!==null;){f=rr;var g=f.sibling,y=f.return;if(pv(f),f===d){rr=null;break e}if(g!==null){g.return=y,rr=g;break e}rr=y}}}var MT={getCacheForType:function(a){var o=Tr(Xt),d=o.data.get(a);return d===void 0&&(d=a(),o.data.set(a,d)),d}},ET=typeof WeakMap=="function"?WeakMap:Map,ct=0,jt=null,We=null,tt=0,dt=0,tn=null,ls=!1,fl=!1,Q0=!1,Da=0,It=0,is=0,lo=0,J0=0,wn=0,hl=0,Fi=null,Yr=null,Z0=!1,em=0,qd=1/0,Gd=null,cs=null,xr=0,ds=null,ml=null,pl=0,tm=0,rm=null,jv=null,Yi=0,nm=null;function rn(){if((ct&2)!==0&&tt!==0)return tt&-tt;if(B.T!==null){var a=rl;return a!==0?a:dm()}return ad()}function Cv(){wn===0&&(wn=(tt&536870912)===0||st?Hr():536870912);var a=kn.current;return a!==null&&(a.flags|=32),wn}function nn(a,o,d){(a===jt&&(dt===2||dt===9)||a.cancelPendingCommit!==null)&&(gl(a,0),us(a,tt,wn,!1)),Cr(a,d),((ct&2)===0||a!==jt)&&(a===jt&&((ct&2)===0&&(lo|=d),It===4&&us(a,tt,wn,!1)),ta(a))}function Tv(a,o,d){if((ct&6)!==0)throw Error(n(327));var f=!d&&(o&124)===0&&(o&a.expiredLanes)===0||Lt(a,o),g=f?OT(a,o):om(a,o,!0),y=f;do{if(g===0){fl&&!f&&us(a,o,0,!1);break}else{if(d=a.current.alternate,y&&!AT(d)){g=om(a,o,!1),y=!1;continue}if(g===2){if(y=o,a.errorRecoveryDisabledLanes&y)var j=0;else j=a.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){o=j;e:{var E=a;g=Fi;var R=E.current.memoizedState.isDehydrated;if(R&&(gl(E,j).flags|=256),j=om(E,j,!1),j!==2){if(Q0&&!R){E.errorRecoveryDisabledLanes|=y,lo|=y,g=4;break e}y=Yr,Yr=g,y!==null&&(Yr===null?Yr=y:Yr.push.apply(Yr,y))}g=j}if(y=!1,g!==2)continue}}if(g===1){gl(a,0),us(a,o,0,!0);break}e:{switch(f=a,y=g,y){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:us(f,o,wn,!ls);break e;case 2:Yr=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(g=em+300-Et(),10<g)){if(us(f,o,wn,!ls),Fe(f,0,!0)!==0)break e;f.timeoutHandle=rk(Mv.bind(null,f,d,Yr,Gd,Z0,o,wn,lo,hl,ls,y,2,-0,0),g);break e}Mv(f,d,Yr,Gd,Z0,o,wn,lo,hl,ls,y,0,-0,0)}}break}while(!0);ta(a)}function Mv(a,o,d,f,g,y,j,E,R,V,X,ee,F,q){if(a.timeoutHandle=-1,ee=o.subtreeFlags,(ee&8192||(ee&16785408)===16785408)&&(Ji={stylesheets:null,count:0,unsuspend:uM},kv(o),ee=hM(),ee!==null)){a.cancelPendingCommit=ee(Lv.bind(null,a,o,y,d,f,g,j,E,R,X,1,F,q)),us(a,y,j,!V);return}Lv(a,o,y,d,f,g,j,E,R)}function AT(a){for(var o=a;;){var d=o.tag;if((d===0||d===11||d===15)&&o.flags&16384&&(d=o.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var f=0;f<d.length;f++){var g=d[f],y=g.getSnapshot;g=g.value;try{if(!Qr(y(),g))return!1}catch{return!1}}if(d=o.child,o.subtreeFlags&16384&&d!==null)d.return=o,o=d;else{if(o===a)break;for(;o.sibling===null;){if(o.return===null||o.return===a)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function us(a,o,d,f){o&=~J0,o&=~lo,a.suspendedLanes|=o,a.pingedLanes&=~o,f&&(a.warmLanes|=o),f=a.expirationTimes;for(var g=o;0<g;){var y=31-jr(g),j=1<<y;f[y]=-1,g&=~j}d!==0&&_o(a,d,o)}function Kd(){return(ct&6)===0?(qi(0),!1):!0}function am(){if(We!==null){if(dt===0)var a=We.return;else a=We,Sa=to=null,k0(a),il=null,Bi=0,a=We;for(;a!==null;)lv(a.alternate,a),a=a.return;We=null}}function gl(a,o){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,KT(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),am(),jt=a,We=d=va(a.current,null),tt=o,dt=0,tn=null,ls=!1,fl=Lt(a,o),Q0=!1,hl=wn=J0=lo=is=It=0,Yr=Fi=null,Z0=!1,(o&8)!==0&&(o|=o&32);var f=a.entangledLanes;if(f!==0)for(a=a.entanglements,f&=o;0<f;){var g=31-jr(f),y=1<<g;o|=a[g],f&=~y}return Da=o,gd(),d}function Ev(a,o){Ye=null,B.H=Ld,o===Ti||o===jd?(o=qb(),dt=3):o===Vb?(o=qb(),dt=4):dt=o===Gy?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,tn=o,We===null&&(It=1,Hd(a,xn(o,a.current)))}function Av(){var a=B.H;return B.H=Ld,a===null?Ld:a}function Dv(){var a=B.A;return B.A=MT,a}function sm(){It=4,ls||(tt&4194048)!==tt&&kn.current!==null||(fl=!0),(is&134217727)===0&&(lo&134217727)===0||jt===null||us(jt,tt,wn,!1)}function om(a,o,d){var f=ct;ct|=2;var g=Av(),y=Dv();(jt!==a||tt!==o)&&(Gd=null,gl(a,o)),o=!1;var j=It;e:do try{if(dt!==0&&We!==null){var E=We,R=tn;switch(dt){case 8:am(),j=6;break e;case 3:case 2:case 9:case 6:kn.current===null&&(o=!0);var V=dt;if(dt=0,tn=null,xl(a,E,R,V),d&&fl){j=0;break e}break;default:V=dt,dt=0,tn=null,xl(a,E,R,V)}}DT(),j=It;break}catch(X){Ev(a,X)}while(!0);return o&&a.shellSuspendCounter++,Sa=to=null,ct=f,B.H=g,B.A=y,We===null&&(jt=null,tt=0,gd()),j}function DT(){for(;We!==null;)Ov(We)}function OT(a,o){var d=ct;ct|=2;var f=Av(),g=Dv();jt!==a||tt!==o?(Gd=null,qd=Et()+500,gl(a,o)):fl=Lt(a,o);e:do try{if(dt!==0&&We!==null){o=We;var y=tn;t:switch(dt){case 1:dt=0,tn=null,xl(a,o,y,1);break;case 2:case 9:if(Fb(y)){dt=0,tn=null,Rv(o);break}o=function(){dt!==2&&dt!==9||jt!==a||(dt=7),ta(a)},y.then(o,o);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:Fb(y)?(dt=0,tn=null,Rv(o)):(dt=0,tn=null,xl(a,o,y,7));break;case 5:var j=null;switch(We.tag){case 26:j=We.memoizedState;case 5:case 27:var E=We;if(!j||mk(j)){dt=0,tn=null;var R=E.sibling;if(R!==null)We=R;else{var V=E.return;V!==null?(We=V,Wd(V)):We=null}break t}}dt=0,tn=null,xl(a,o,y,5);break;case 6:dt=0,tn=null,xl(a,o,y,6);break;case 8:am(),It=6;break e;default:throw Error(n(462))}}RT();break}catch(X){Ev(a,X)}while(!0);return Sa=to=null,B.H=f,B.A=g,ct=d,We!==null?0:(jt=null,tt=0,gd(),It)}function RT(){for(;We!==null&&!zt();)Ov(We)}function Ov(a){var o=sv(a.alternate,a,Da);a.memoizedProps=a.pendingProps,o===null?Wd(a):We=o}function Rv(a){var o=a,d=o.alternate;switch(o.tag){case 15:case 0:o=Zy(d,o,o.pendingProps,o.type,void 0,tt);break;case 11:o=Zy(d,o,o.pendingProps,o.type.render,o.ref,tt);break;case 5:k0(o);default:lv(d,o),o=We=zb(o,Da),o=sv(d,o,Da)}a.memoizedProps=a.pendingProps,o===null?Wd(a):We=o}function xl(a,o,d,f){Sa=to=null,k0(o),il=null,Bi=0;var g=o.return;try{if(wT(a,g,o,d,tt)){It=1,Hd(a,xn(d,a.current)),We=null;return}}catch(y){if(g!==null)throw We=g,y;It=1,Hd(a,xn(d,a.current)),We=null;return}o.flags&32768?(st||f===1?a=!0:fl||(tt&536870912)!==0?a=!1:(ls=a=!0,(f===2||f===9||f===3||f===6)&&(f=kn.current,f!==null&&f.tag===13&&(f.flags|=16384))),zv(o,a)):Wd(o)}function Wd(a){var o=a;do{if((o.flags&32768)!==0){zv(o,ls);return}a=o.return;var d=NT(o.alternate,o,Da);if(d!==null){We=d;return}if(o=o.sibling,o!==null){We=o;return}We=o=a}while(o!==null);It===0&&(It=5)}function zv(a,o){do{var d=jT(a.alternate,a);if(d!==null){d.flags&=32767,We=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!o&&(a=a.sibling,a!==null)){We=a;return}We=a=d}while(a!==null);It=6,We=null}function Lv(a,o,d,f,g,y,j,E,R){a.cancelPendingCommit=null;do Xd();while(xr!==0);if((ct&6)!==0)throw Error(n(327));if(o!==null){if(o===a.current)throw Error(n(177));if(y=o.lanes|o.childLanes,y|=Xh,nd(a,d,y,j,E,R),a===jt&&(We=jt=null,tt=0),ml=o,ds=a,pl=d,tm=y,rm=g,jv=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,IT(St,function(){return Hv(),null})):(a.callbackNode=null,a.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=B.T,B.T=null,g=W.p,W.p=2,j=ct,ct|=4;try{CT(a,o,d)}finally{ct=j,W.p=g,B.T=f}}xr=1,Bv(),Iv(),Pv()}}function Bv(){if(xr===1){xr=0;var a=ds,o=ml,d=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||d){d=B.T,B.T=null;var f=W.p;W.p=2;var g=ct;ct|=4;try{bv(o,a);var y=bm,j=Nb(a.containerInfo),E=y.focusedElem,R=y.selectionRange;if(j!==E&&E&&E.ownerDocument&&Sb(E.ownerDocument.documentElement,E)){if(R!==null&&Yh(E)){var V=R.start,X=R.end;if(X===void 0&&(X=V),"selectionStart"in E)E.selectionStart=V,E.selectionEnd=Math.min(X,E.value.length);else{var ee=E.ownerDocument||document,F=ee&&ee.defaultView||window;if(F.getSelection){var q=F.getSelection(),Pe=E.textContent.length,ze=Math.min(R.start,Pe),pt=R.end===void 0?ze:Math.min(R.end,Pe);!q.extend&&ze>pt&&(j=pt,pt=ze,ze=j);var _=wb(E,ze),z=wb(E,pt);if(_&&z&&(q.rangeCount!==1||q.anchorNode!==_.node||q.anchorOffset!==_.offset||q.focusNode!==z.node||q.focusOffset!==z.offset)){var U=ee.createRange();U.setStart(_.node,_.offset),q.removeAllRanges(),ze>pt?(q.addRange(U),q.extend(z.node,z.offset)):(U.setEnd(z.node,z.offset),q.addRange(U))}}}}for(ee=[],q=E;q=q.parentNode;)q.nodeType===1&&ee.push({element:q,left:q.scrollLeft,top:q.scrollTop});for(typeof E.focus=="function"&&E.focus(),E=0;E<ee.length;E++){var J=ee[E];J.element.scrollLeft=J.left,J.element.scrollTop=J.top}}iu=!!xm,bm=xm=null}finally{ct=g,W.p=f,B.T=d}}a.current=o,xr=2}}function Iv(){if(xr===2){xr=0;var a=ds,o=ml,d=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||d){d=B.T,B.T=null;var f=W.p;W.p=2;var g=ct;ct|=4;try{mv(a,o.alternate,o)}finally{ct=g,W.p=f,B.T=d}}xr=3}}function Pv(){if(xr===4||xr===3){xr=0,Yt();var a=ds,o=ml,d=pl,f=jv;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?xr=5:(xr=0,ml=ds=null,_v(a,a.pendingLanes));var g=a.pendingLanes;if(g===0&&(cs=null),di(d),o=o.stateNode,Nt&&typeof Nt.onCommitFiberRoot=="function")try{Nt.onCommitFiberRoot($t,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=B.T,g=W.p,W.p=2,B.T=null;try{for(var y=a.onRecoverableError,j=0;j<f.length;j++){var E=f[j];y(E.value,{componentStack:E.stack})}}finally{B.T=o,W.p=g}}(pl&3)!==0&&Xd(),ta(a),g=a.pendingLanes,(d&4194090)!==0&&(g&42)!==0?a===nm?Yi++:(Yi=0,nm=a):Yi=0,qi(0)}}function _v(a,o){(a.pooledCacheLanes&=o)===0&&(o=a.pooledCache,o!=null&&(a.pooledCache=null,ji(o)))}function Xd(a){return Bv(),Iv(),Pv(),Hv()}function Hv(){if(xr!==5)return!1;var a=ds,o=tm;tm=0;var d=di(pl),f=B.T,g=W.p;try{W.p=32>d?32:d,B.T=null,d=rm,rm=null;var y=ds,j=pl;if(xr=0,ml=ds=null,pl=0,(ct&6)!==0)throw Error(n(331));var E=ct;if(ct|=4,Sv(y.current),vv(y,y.current,j,d),ct=E,qi(0,!1),Nt&&typeof Nt.onPostCommitFiberRoot=="function")try{Nt.onPostCommitFiberRoot($t,y)}catch{}return!0}finally{W.p=g,B.T=f,_v(a,o)}}function $v(a,o,d){o=xn(d,o),o=L0(a.stateNode,o,2),a=Za(a,o,2),a!==null&&(Cr(a,2),ta(a))}function bt(a,o,d){if(a.tag===3)$v(a,a,d);else for(;o!==null;){if(o.tag===3){$v(o,a,d);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(cs===null||!cs.has(f))){a=xn(d,a),d=Yy(2),f=Za(o,d,2),f!==null&&(qy(d,f,o,a),Cr(f,2),ta(f));break}}o=o.return}}function lm(a,o,d){var f=a.pingCache;if(f===null){f=a.pingCache=new ET;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(d)||(Q0=!0,g.add(d),a=zT.bind(null,a,o,d),o.then(a,a))}function zT(a,o,d){var f=a.pingCache;f!==null&&f.delete(o),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,jt===a&&(tt&d)===d&&(It===4||It===3&&(tt&62914560)===tt&&300>Et()-em?(ct&2)===0&&gl(a,0):J0|=d,hl===tt&&(hl=0)),ta(a)}function Uv(a,o){o===0&&(o=xa()),a=Jo(a,o),a!==null&&(Cr(a,o),ta(a))}function LT(a){var o=a.memoizedState,d=0;o!==null&&(d=o.retryLane),Uv(a,d)}function BT(a,o){var d=0;switch(a.tag){case 13:var f=a.stateNode,g=a.memoizedState;g!==null&&(d=g.retryLane);break;case 19:f=a.stateNode;break;case 22:f=a.stateNode._retryCache;break;default:throw Error(n(314))}f!==null&&f.delete(o),Uv(a,d)}function IT(a,o){return Je(a,o)}var Qd=null,bl=null,im=!1,Jd=!1,cm=!1,io=0;function ta(a){a!==bl&&a.next===null&&(bl===null?Qd=bl=a:bl=bl.next=a),Jd=!0,im||(im=!0,_T())}function qi(a,o){if(!cm&&Jd){cm=!0;do for(var d=!1,f=Qd;f!==null;){if(a!==0){var g=f.pendingLanes;if(g===0)var y=0;else{var j=f.suspendedLanes,E=f.pingedLanes;y=(1<<31-jr(42|a)+1)-1,y&=g&~(j&~E),y=y&201326741?y&201326741|1:y?y|2:0}y!==0&&(d=!0,qv(f,y))}else y=tt,y=Fe(f,f===jt?y:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(y&3)===0||Lt(f,y)||(d=!0,qv(f,y));f=f.next}while(d);cm=!1}}function PT(){Vv()}function Vv(){Jd=im=!1;var a=0;io!==0&&(GT()&&(a=io),io=0);for(var o=Et(),d=null,f=Qd;f!==null;){var g=f.next,y=Fv(f,o);y===0?(f.next=null,d===null?Qd=g:d.next=g,g===null&&(bl=d)):(d=f,(a!==0||(y&3)!==0)&&(Jd=!0)),f=g}qi(a)}function Fv(a,o){for(var d=a.suspendedLanes,f=a.pingedLanes,g=a.expirationTimes,y=a.pendingLanes&-62914561;0<y;){var j=31-jr(y),E=1<<j,R=g[j];R===-1?((E&d)===0||(E&f)!==0)&&(g[j]=Dn(E,o)):R<=o&&(a.expiredLanes|=E),y&=~E}if(o=jt,d=tt,d=Fe(a,a===o?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f=a.callbackNode,d===0||a===o&&(dt===2||dt===9)||a.cancelPendingCommit!==null)return f!==null&&f!==null&&it(f),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||Lt(a,d)){if(o=d&-d,o===a.callbackPriority)return o;switch(f!==null&&it(f),di(d)){case 2:case 8:d=hr;break;case 32:d=St;break;case 268435456:d=Qe;break;default:d=St}return f=Yv.bind(null,a),d=Je(d,f),a.callbackPriority=o,a.callbackNode=d,o}return f!==null&&f!==null&&it(f),a.callbackPriority=2,a.callbackNode=null,2}function Yv(a,o){if(xr!==0&&xr!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(Xd()&&a.callbackNode!==d)return null;var f=tt;return f=Fe(a,a===jt?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),f===0?null:(Tv(a,f,o),Fv(a,Et()),a.callbackNode!=null&&a.callbackNode===d?Yv.bind(null,a):null)}function qv(a,o){if(Xd())return null;Tv(a,o,!0)}function _T(){WT(function(){(ct&6)!==0?Je(hn,PT):Vv()})}function dm(){return io===0&&(io=Hr()),io}function Gv(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:cd(""+a)}function Kv(a,o){var d=o.ownerDocument.createElement("input");return d.name=o.name,d.value=o.value,a.id&&d.setAttribute("form",a.id),o.parentNode.insertBefore(d,o),a=new FormData(a),d.parentNode.removeChild(d),a}function HT(a,o,d,f,g){if(o==="submit"&&d&&d.stateNode===g){var y=Gv((g[ce]||null).action),j=f.submitter;j&&(o=(o=j[ce]||null)?Gv(o.formAction):j.getAttribute("formAction"),o!==null&&(y=o,j=null));var E=new hd("action","action",null,f,g);a.push({event:E,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(io!==0){var R=j?Kv(g,j):new FormData(g);A0(d,{pending:!0,data:R,method:g.method,action:y},null,R)}}else typeof y=="function"&&(E.preventDefault(),R=j?Kv(g,j):new FormData(g),A0(d,{pending:!0,data:R,method:g.method,action:y},y,R))},currentTarget:g}]})}}for(var um=0;um<Wh.length;um++){var fm=Wh[um],$T=fm.toLowerCase(),UT=fm[0].toUpperCase()+fm.slice(1);zn($T,"on"+UT)}zn(Tb,"onAnimationEnd"),zn(Mb,"onAnimationIteration"),zn(Eb,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(sT,"onTransitionRun"),zn(oT,"onTransitionStart"),zn(lT,"onTransitionCancel"),zn(Ab,"onTransitionEnd"),Uo("onMouseEnter",["mouseout","mouseover"]),Uo("onMouseLeave",["mouseout","mouseover"]),Uo("onPointerEnter",["pointerout","pointerover"]),Uo("onPointerLeave",["pointerout","pointerover"]),qs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qs("onBeforeInput",["compositionend","keypress","textInput","paste"]),qs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gi));function Wv(a,o){o=(o&4)!==0;for(var d=0;d<a.length;d++){var f=a[d],g=f.event;f=f.listeners;e:{var y=void 0;if(o)for(var j=f.length-1;0<=j;j--){var E=f[j],R=E.instance,V=E.currentTarget;if(E=E.listener,R!==y&&g.isPropagationStopped())break e;y=E,g.currentTarget=V;try{y(g)}catch(X){_d(X)}g.currentTarget=null,y=R}else for(j=0;j<f.length;j++){if(E=f[j],R=E.instance,V=E.currentTarget,E=E.listener,R!==y&&g.isPropagationStopped())break e;y=E,g.currentTarget=V;try{y(g)}catch(X){_d(X)}g.currentTarget=null,y=R}}}}function Xe(a,o){var d=o[Zt];d===void 0&&(d=o[Zt]=new Set);var f=a+"__bubble";d.has(f)||(Xv(o,a,2,!1),d.add(f))}function hm(a,o,d){var f=0;o&&(f|=4),Xv(d,a,f,o)}var Zd="_reactListening"+Math.random().toString(36).slice(2);function mm(a){if(!a[Zd]){a[Zd]=!0,Vx.forEach(function(d){d!=="selectionchange"&&(VT.has(d)||hm(d,!1,a),hm(d,!0,a))});var o=a.nodeType===9?a:a.ownerDocument;o===null||o[Zd]||(o[Zd]=!0,hm("selectionchange",!1,o))}}function Xv(a,o,d,f){switch(vk(o)){case 2:var g=gM;break;case 8:g=xM;break;default:g=Mm}d=g.bind(null,o,d,a),g=void 0,!Bh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?a.addEventListener(o,d,{capture:!0,passive:g}):a.addEventListener(o,d,!0):g!==void 0?a.addEventListener(o,d,{passive:g}):a.addEventListener(o,d,!1)}function pm(a,o,d,f,g){var y=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var j=f.tag;if(j===3||j===4){var E=f.stateNode.containerInfo;if(E===g)break;if(j===4)for(j=f.return;j!==null;){var R=j.tag;if((R===3||R===4)&&j.stateNode.containerInfo===g)return;j=j.return}for(;E!==null;){if(j=pr(E),j===null)return;if(R=j.tag,R===5||R===6||R===26||R===27){f=y=j;continue e}E=E.parentNode}}f=f.return}nb(function(){var V=y,X=zh(d),ee=[];e:{var F=Db.get(a);if(F!==void 0){var q=hd,Pe=a;switch(a){case"keypress":if(ud(d)===0)break e;case"keydown":case"keyup":q=IC;break;case"focusin":Pe="focus",q=Hh;break;case"focusout":Pe="blur",q=Hh;break;case"beforeblur":case"afterblur":q=Hh;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":q=ob;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":q=jC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":q=HC;break;case Tb:case Mb:case Eb:q=MC;break;case Ab:q=UC;break;case"scroll":case"scrollend":q=SC;break;case"wheel":q=FC;break;case"copy":case"cut":case"paste":q=AC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":q=ib;break;case"toggle":case"beforetoggle":q=qC}var ze=(o&4)!==0,pt=!ze&&(a==="scroll"||a==="scrollend"),_=ze?F!==null?F+"Capture":null:F;ze=[];for(var z=V,U;z!==null;){var J=z;if(U=J.stateNode,J=J.tag,J!==5&&J!==26&&J!==27||U===null||_===null||(J=fi(z,_),J!=null&&ze.push(Ki(z,J,U))),pt)break;z=z.return}0<ze.length&&(F=new q(F,Pe,null,d,X),ee.push({event:F,listeners:ze}))}}if((o&7)===0){e:{if(F=a==="mouseover"||a==="pointerover",q=a==="mouseout"||a==="pointerout",F&&d!==Rh&&(Pe=d.relatedTarget||d.fromElement)&&(pr(Pe)||Pe[Te]))break e;if((q||F)&&(F=X.window===X?X:(F=X.ownerDocument)?F.defaultView||F.parentWindow:window,q?(Pe=d.relatedTarget||d.toElement,q=V,Pe=Pe?pr(Pe):null,Pe!==null&&(pt=l(Pe),ze=Pe.tag,Pe!==pt||ze!==5&&ze!==27&&ze!==6)&&(Pe=null)):(q=null,Pe=V),q!==Pe)){if(ze=ob,J="onMouseLeave",_="onMouseEnter",z="mouse",(a==="pointerout"||a==="pointerover")&&(ze=ib,J="onPointerLeave",_="onPointerEnter",z="pointer"),pt=q==null?F:ui(q),U=Pe==null?F:ui(Pe),F=new ze(J,z+"leave",q,d,X),F.target=pt,F.relatedTarget=U,J=null,pr(X)===V&&(ze=new ze(_,z+"enter",Pe,d,X),ze.target=U,ze.relatedTarget=pt,J=ze),pt=J,q&&Pe)t:{for(ze=q,_=Pe,z=0,U=ze;U;U=yl(U))z++;for(U=0,J=_;J;J=yl(J))U++;for(;0<z-U;)ze=yl(ze),z--;for(;0<U-z;)_=yl(_),U--;for(;z--;){if(ze===_||_!==null&&ze===_.alternate)break t;ze=yl(ze),_=yl(_)}ze=null}else ze=null;q!==null&&Qv(ee,F,q,ze,!1),Pe!==null&&pt!==null&&Qv(ee,pt,Pe,ze,!0)}}e:{if(F=V?ui(V):window,q=F.nodeName&&F.nodeName.toLowerCase(),q==="select"||q==="input"&&F.type==="file")var ke=gb;else if(mb(F))if(xb)ke=rT;else{ke=eT;var Ke=ZC}else q=F.nodeName,!q||q.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?V&&Oh(V.elementType)&&(ke=gb):ke=tT;if(ke&&(ke=ke(a,V))){pb(ee,ke,d,X);break e}Ke&&Ke(a,F,V),a==="focusout"&&V&&F.type==="number"&&V.memoizedProps.value!=null&&Dh(F,"number",F.value)}switch(Ke=V?ui(V):window,a){case"focusin":(mb(Ke)||Ke.contentEditable==="true")&&(Wo=Ke,qh=V,vi=null);break;case"focusout":vi=qh=Wo=null;break;case"mousedown":Gh=!0;break;case"contextmenu":case"mouseup":case"dragend":Gh=!1,jb(ee,d,X);break;case"selectionchange":if(aT)break;case"keydown":case"keyup":jb(ee,d,X)}var Me;if(Uh)e:{switch(a){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Ko?fb(a,d)&&(Be="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(Be="onCompositionStart");Be&&(cb&&d.locale!=="ko"&&(Ko||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Ko&&(Me=ab()):(Wa=X,Ih="value"in Wa?Wa.value:Wa.textContent,Ko=!0)),Ke=eu(V,Be),0<Ke.length&&(Be=new lb(Be,a,null,d,X),ee.push({event:Be,listeners:Ke}),Me?Be.data=Me:(Me=hb(d),Me!==null&&(Be.data=Me)))),(Me=KC?WC(a,d):XC(a,d))&&(Be=eu(V,"onBeforeInput"),0<Be.length&&(Ke=new lb("onBeforeInput","beforeinput",null,d,X),ee.push({event:Ke,listeners:Be}),Ke.data=Me)),HT(ee,a,V,d,X)}Wv(ee,o)})}function Ki(a,o,d){return{instance:a,listener:o,currentTarget:d}}function eu(a,o){for(var d=o+"Capture",f=[];a!==null;){var g=a,y=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||y===null||(g=fi(a,d),g!=null&&f.unshift(Ki(a,g,y)),g=fi(a,o),g!=null&&f.push(Ki(a,g,y))),a.tag===3)return f;a=a.return}return[]}function yl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function Qv(a,o,d,f,g){for(var y=o._reactName,j=[];d!==null&&d!==f;){var E=d,R=E.alternate,V=E.stateNode;if(E=E.tag,R!==null&&R===f)break;E!==5&&E!==26&&E!==27||V===null||(R=V,g?(V=fi(d,y),V!=null&&j.unshift(Ki(d,V,R))):g||(V=fi(d,y),V!=null&&j.push(Ki(d,V,R)))),d=d.return}j.length!==0&&a.push({event:o,listeners:j})}var FT=/\r\n?/g,YT=/\u0000|\uFFFD/g;function Jv(a){return(typeof a=="string"?a:""+a).replace(FT,`
`).replace(YT,"")}function Zv(a,o){return o=Jv(o),Jv(a)===o}function tu(){}function mt(a,o,d,f,g,y){switch(d){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||Yo(a,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&Yo(a,""+f);break;case"className":od(a,"class",f);break;case"tabIndex":od(a,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":od(a,d,f);break;case"style":tb(a,f,y);break;case"data":if(o!=="object"){od(a,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||d!=="href")){a.removeAttribute(d);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(d);break}f=cd(""+f),a.setAttribute(d,f);break;case"action":case"formAction":if(typeof f=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof y=="function"&&(d==="formAction"?(o!=="input"&&mt(a,o,"name",g.name,g,null),mt(a,o,"formEncType",g.formEncType,g,null),mt(a,o,"formMethod",g.formMethod,g,null),mt(a,o,"formTarget",g.formTarget,g,null)):(mt(a,o,"encType",g.encType,g,null),mt(a,o,"method",g.method,g,null),mt(a,o,"target",g.target,g,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){a.removeAttribute(d);break}f=cd(""+f),a.setAttribute(d,f);break;case"onClick":f!=null&&(a.onclick=tu);break;case"onScroll":f!=null&&Xe("scroll",a);break;case"onScrollEnd":f!=null&&Xe("scrollend",a);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(d=f.__html,d!=null){if(g.children!=null)throw Error(n(60));a.innerHTML=d}}break;case"multiple":a.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":a.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){a.removeAttribute("xlink:href");break}d=cd(""+f),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(d,""+f):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":f===!0?a.setAttribute(d,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?a.setAttribute(d,f):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?a.setAttribute(d,f):a.removeAttribute(d);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?a.removeAttribute(d):a.setAttribute(d,f);break;case"popover":Xe("beforetoggle",a),Xe("toggle",a),sd(a,"popover",f);break;case"xlinkActuate":ba(a,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":ba(a,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":ba(a,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":ba(a,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":ba(a,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":ba(a,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":ba(a,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":ba(a,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":ba(a,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":sd(a,"is",f);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=kC.get(d)||d,sd(a,d,f))}}function gm(a,o,d,f,g,y){switch(d){case"style":tb(a,f,y);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(n(61));if(d=f.__html,d!=null){if(g.children!=null)throw Error(n(60));a.innerHTML=d}}break;case"children":typeof f=="string"?Yo(a,f):(typeof f=="number"||typeof f=="bigint")&&Yo(a,""+f);break;case"onScroll":f!=null&&Xe("scroll",a);break;case"onScrollEnd":f!=null&&Xe("scrollend",a);break;case"onClick":f!=null&&(a.onclick=tu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Fx.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(g=d.endsWith("Capture"),o=d.slice(2,g?d.length-7:void 0),y=a[ce]||null,y=y!=null?y[d]:null,typeof y=="function"&&a.removeEventListener(o,y,g),typeof f=="function")){typeof y!="function"&&y!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(o,f,g);break e}d in a?a[d]=f:f===!0?a.setAttribute(d,""):sd(a,d,f)}}}function br(a,o,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",a),Xe("load",a);var f=!1,g=!1,y;for(y in d)if(d.hasOwnProperty(y)){var j=d[y];if(j!=null)switch(y){case"src":f=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:mt(a,o,y,j,d,null)}}g&&mt(a,o,"srcSet",d.srcSet,d,null),f&&mt(a,o,"src",d.src,d,null);return;case"input":Xe("invalid",a);var E=y=j=g=null,R=null,V=null;for(f in d)if(d.hasOwnProperty(f)){var X=d[f];if(X!=null)switch(f){case"name":g=X;break;case"type":j=X;break;case"checked":R=X;break;case"defaultChecked":V=X;break;case"value":y=X;break;case"defaultValue":E=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(n(137,o));break;default:mt(a,o,f,X,d,null)}}Qx(a,y,E,R,V,j,g,!1),ld(a);return;case"select":Xe("invalid",a),f=j=y=null;for(g in d)if(d.hasOwnProperty(g)&&(E=d[g],E!=null))switch(g){case"value":y=E;break;case"defaultValue":j=E;break;case"multiple":f=E;default:mt(a,o,g,E,d,null)}o=y,d=j,a.multiple=!!f,o!=null?Fo(a,!!f,o,!1):d!=null&&Fo(a,!!f,d,!0);return;case"textarea":Xe("invalid",a),y=g=f=null;for(j in d)if(d.hasOwnProperty(j)&&(E=d[j],E!=null))switch(j){case"value":f=E;break;case"defaultValue":g=E;break;case"children":y=E;break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(n(91));break;default:mt(a,o,j,E,d,null)}Zx(a,f,g,y),ld(a);return;case"option":for(R in d)if(d.hasOwnProperty(R)&&(f=d[R],f!=null))switch(R){case"selected":a.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:mt(a,o,R,f,d,null)}return;case"dialog":Xe("beforetoggle",a),Xe("toggle",a),Xe("cancel",a),Xe("close",a);break;case"iframe":case"object":Xe("load",a);break;case"video":case"audio":for(f=0;f<Gi.length;f++)Xe(Gi[f],a);break;case"image":Xe("error",a),Xe("load",a);break;case"details":Xe("toggle",a);break;case"embed":case"source":case"link":Xe("error",a),Xe("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in d)if(d.hasOwnProperty(V)&&(f=d[V],f!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:mt(a,o,V,f,d,null)}return;default:if(Oh(o)){for(X in d)d.hasOwnProperty(X)&&(f=d[X],f!==void 0&&gm(a,o,X,f,d,void 0));return}}for(E in d)d.hasOwnProperty(E)&&(f=d[E],f!=null&&mt(a,o,E,f,d,null))}function qT(a,o,d,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,y=null,j=null,E=null,R=null,V=null,X=null;for(q in d){var ee=d[q];if(d.hasOwnProperty(q)&&ee!=null)switch(q){case"checked":break;case"value":break;case"defaultValue":R=ee;default:f.hasOwnProperty(q)||mt(a,o,q,null,f,ee)}}for(var F in f){var q=f[F];if(ee=d[F],f.hasOwnProperty(F)&&(q!=null||ee!=null))switch(F){case"type":y=q;break;case"name":g=q;break;case"checked":V=q;break;case"defaultChecked":X=q;break;case"value":j=q;break;case"defaultValue":E=q;break;case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(n(137,o));break;default:q!==ee&&mt(a,o,F,q,f,ee)}}Ah(a,j,E,R,V,X,y,g);return;case"select":q=j=E=F=null;for(y in d)if(R=d[y],d.hasOwnProperty(y)&&R!=null)switch(y){case"value":break;case"multiple":q=R;default:f.hasOwnProperty(y)||mt(a,o,y,null,f,R)}for(g in f)if(y=f[g],R=d[g],f.hasOwnProperty(g)&&(y!=null||R!=null))switch(g){case"value":F=y;break;case"defaultValue":E=y;break;case"multiple":j=y;default:y!==R&&mt(a,o,g,y,f,R)}o=E,d=j,f=q,F!=null?Fo(a,!!d,F,!1):!!f!=!!d&&(o!=null?Fo(a,!!d,o,!0):Fo(a,!!d,d?[]:"",!1));return;case"textarea":q=F=null;for(E in d)if(g=d[E],d.hasOwnProperty(E)&&g!=null&&!f.hasOwnProperty(E))switch(E){case"value":break;case"children":break;default:mt(a,o,E,null,f,g)}for(j in f)if(g=f[j],y=d[j],f.hasOwnProperty(j)&&(g!=null||y!=null))switch(j){case"value":F=g;break;case"defaultValue":q=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(n(91));break;default:g!==y&&mt(a,o,j,g,f,y)}Jx(a,F,q);return;case"option":for(var Pe in d)if(F=d[Pe],d.hasOwnProperty(Pe)&&F!=null&&!f.hasOwnProperty(Pe))switch(Pe){case"selected":a.selected=!1;break;default:mt(a,o,Pe,null,f,F)}for(R in f)if(F=f[R],q=d[R],f.hasOwnProperty(R)&&F!==q&&(F!=null||q!=null))switch(R){case"selected":a.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:mt(a,o,R,F,f,q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ze in d)F=d[ze],d.hasOwnProperty(ze)&&F!=null&&!f.hasOwnProperty(ze)&&mt(a,o,ze,null,f,F);for(V in f)if(F=f[V],q=d[V],f.hasOwnProperty(V)&&F!==q&&(F!=null||q!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(n(137,o));break;default:mt(a,o,V,F,f,q)}return;default:if(Oh(o)){for(var pt in d)F=d[pt],d.hasOwnProperty(pt)&&F!==void 0&&!f.hasOwnProperty(pt)&&gm(a,o,pt,void 0,f,F);for(X in f)F=f[X],q=d[X],!f.hasOwnProperty(X)||F===q||F===void 0&&q===void 0||gm(a,o,X,F,f,q);return}}for(var _ in d)F=d[_],d.hasOwnProperty(_)&&F!=null&&!f.hasOwnProperty(_)&&mt(a,o,_,null,f,F);for(ee in f)F=f[ee],q=d[ee],!f.hasOwnProperty(ee)||F===q||F==null&&q==null||mt(a,o,ee,F,f,q)}var xm=null,bm=null;function ru(a){return a.nodeType===9?a:a.ownerDocument}function ek(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function tk(a,o){if(a===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&o==="foreignObject"?0:a}function ym(a,o){return a==="textarea"||a==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var vm=null;function GT(){var a=window.event;return a&&a.type==="popstate"?a===vm?!1:(vm=a,!0):(vm=null,!1)}var rk=typeof setTimeout=="function"?setTimeout:void 0,KT=typeof clearTimeout=="function"?clearTimeout:void 0,nk=typeof Promise=="function"?Promise:void 0,WT=typeof queueMicrotask=="function"?queueMicrotask:typeof nk<"u"?function(a){return nk.resolve(null).then(a).catch(XT)}:rk;function XT(a){setTimeout(function(){throw a})}function fs(a){return a==="head"}function ak(a,o){var d=o,f=0,g=0;do{var y=d.nextSibling;if(a.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"){if(0<f&&8>f){d=f;var j=a.ownerDocument;if(d&1&&Wi(j.documentElement),d&2&&Wi(j.body),d&4)for(d=j.head,Wi(d),j=d.firstChild;j;){var E=j.nextSibling,R=j.nodeName;j[mn]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&j.rel.toLowerCase()==="stylesheet"||d.removeChild(j),j=E}}if(g===0){a.removeChild(y),nc(o);return}g--}else d==="$"||d==="$?"||d==="$!"?g++:f=d.charCodeAt(0)-48;else f=0;d=y}while(d);nc(o)}function km(a){var o=a.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var d=o;switch(o=o.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":km(d),Xr(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function QT(a,o,d,f){for(;a.nodeType===1;){var g=d;if(a.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(f){if(!a[mn])switch(o){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(y=a.getAttribute("rel"),y==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(y!==g.rel||a.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||a.getAttribute("title")!==(g.title==null?null:g.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(y=a.getAttribute("src"),(y!==(g.src==null?null:g.src)||a.getAttribute("type")!==(g.type==null?null:g.type)||a.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&y&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(o==="input"&&a.type==="hidden"){var y=g.name==null?null:""+g.name;if(g.type==="hidden"&&a.getAttribute("name")===y)return a}else return a;if(a=Bn(a.nextSibling),a===null)break}return null}function JT(a,o,d){if(o==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=Bn(a.nextSibling),a===null))return null;return a}function wm(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function ZT(a,o){var d=a.ownerDocument;if(a.data!=="$?"||d.readyState==="complete")o();else{var f=function(){o(),d.removeEventListener("DOMContentLoaded",f)};d.addEventListener("DOMContentLoaded",f),a._reactRetry=f}}function Bn(a){for(;a!=null;a=a.nextSibling){var o=a.nodeType;if(o===1||o===3)break;if(o===8){if(o=a.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return a}var Sm=null;function sk(a){a=a.previousSibling;for(var o=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(o===0)return a;o--}else d==="/$"&&o++}a=a.previousSibling}return null}function ok(a,o,d){switch(o=ru(d),a){case"html":if(a=o.documentElement,!a)throw Error(n(452));return a;case"head":if(a=o.head,!a)throw Error(n(453));return a;case"body":if(a=o.body,!a)throw Error(n(454));return a;default:throw Error(n(451))}}function Wi(a){for(var o=a.attributes;o.length;)a.removeAttributeNode(o[0]);Xr(a)}var Sn=new Map,lk=new Set;function nu(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Oa=W.d;W.d={f:eM,r:tM,D:rM,C:nM,L:aM,m:sM,X:lM,S:oM,M:iM};function eM(){var a=Oa.f(),o=Kd();return a||o}function tM(a){var o=$r(a);o!==null&&o.tag===5&&o.type==="form"?Ty(o):Oa.r(a)}var vl=typeof document>"u"?null:document;function ik(a,o,d){var f=vl;if(f&&typeof o=="string"&&o){var g=gn(o);g='link[rel="'+a+'"][href="'+g+'"]',typeof d=="string"&&(g+='[crossorigin="'+d+'"]'),lk.has(g)||(lk.add(g),a={rel:a,crossOrigin:d,href:o},f.querySelector(g)===null&&(o=f.createElement("link"),br(o,"link",a),er(o),f.head.appendChild(o)))}}function rM(a){Oa.D(a),ik("dns-prefetch",a,null)}function nM(a,o){Oa.C(a,o),ik("preconnect",a,o)}function aM(a,o,d){Oa.L(a,o,d);var f=vl;if(f&&a&&o){var g='link[rel="preload"][as="'+gn(o)+'"]';o==="image"&&d&&d.imageSrcSet?(g+='[imagesrcset="'+gn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(g+='[imagesizes="'+gn(d.imageSizes)+'"]')):g+='[href="'+gn(a)+'"]';var y=g;switch(o){case"style":y=kl(a);break;case"script":y=wl(a)}Sn.has(y)||(a=p({rel:"preload",href:o==="image"&&d&&d.imageSrcSet?void 0:a,as:o},d),Sn.set(y,a),f.querySelector(g)!==null||o==="style"&&f.querySelector(Xi(y))||o==="script"&&f.querySelector(Qi(y))||(o=f.createElement("link"),br(o,"link",a),er(o),f.head.appendChild(o)))}}function sM(a,o){Oa.m(a,o);var d=vl;if(d&&a){var f=o&&typeof o.as=="string"?o.as:"script",g='link[rel="modulepreload"][as="'+gn(f)+'"][href="'+gn(a)+'"]',y=g;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":y=wl(a)}if(!Sn.has(y)&&(a=p({rel:"modulepreload",href:a},o),Sn.set(y,a),d.querySelector(g)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(Qi(y)))return}f=d.createElement("link"),br(f,"link",a),er(f),d.head.appendChild(f)}}}function oM(a,o,d){Oa.S(a,o,d);var f=vl;if(f&&a){var g=$o(f).hoistableStyles,y=kl(a);o=o||"default";var j=g.get(y);if(!j){var E={loading:0,preload:null};if(j=f.querySelector(Xi(y)))E.loading=5;else{a=p({rel:"stylesheet",href:a,"data-precedence":o},d),(d=Sn.get(y))&&Nm(a,d);var R=j=f.createElement("link");er(R),br(R,"link",a),R._p=new Promise(function(V,X){R.onload=V,R.onerror=X}),R.addEventListener("load",function(){E.loading|=1}),R.addEventListener("error",function(){E.loading|=2}),E.loading|=4,au(j,o,f)}j={type:"stylesheet",instance:j,count:1,state:E},g.set(y,j)}}}function lM(a,o){Oa.X(a,o);var d=vl;if(d&&a){var f=$o(d).hoistableScripts,g=wl(a),y=f.get(g);y||(y=d.querySelector(Qi(g)),y||(a=p({src:a,async:!0},o),(o=Sn.get(g))&&jm(a,o),y=d.createElement("script"),er(y),br(y,"link",a),d.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(g,y))}}function iM(a,o){Oa.M(a,o);var d=vl;if(d&&a){var f=$o(d).hoistableScripts,g=wl(a),y=f.get(g);y||(y=d.querySelector(Qi(g)),y||(a=p({src:a,async:!0,type:"module"},o),(o=Sn.get(g))&&jm(a,o),y=d.createElement("script"),er(y),br(y,"link",a),d.head.appendChild(y)),y={type:"script",instance:y,count:1,state:null},f.set(g,y))}}function ck(a,o,d,f){var g=(g=_e.current)?nu(g):null;if(!g)throw Error(n(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(o=kl(d.href),d=$o(g).hoistableStyles,f=d.get(o),f||(f={type:"style",instance:null,count:0,state:null},d.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=kl(d.href);var y=$o(g).hoistableStyles,j=y.get(a);if(j||(g=g.ownerDocument||g,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},y.set(a,j),(y=g.querySelector(Xi(a)))&&!y._p&&(j.instance=y,j.state.loading=5),Sn.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},Sn.set(a,d),y||cM(g,a,d,j.state))),o&&f===null)throw Error(n(528,""));return j}if(o&&f!==null)throw Error(n(529,""));return null;case"script":return o=d.async,d=d.src,typeof d=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=wl(d),d=$o(g).hoistableScripts,f=d.get(o),f||(f={type:"script",instance:null,count:0,state:null},d.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,a))}}function kl(a){return'href="'+gn(a)+'"'}function Xi(a){return'link[rel="stylesheet"]['+a+"]"}function dk(a){return p({},a,{"data-precedence":a.precedence,precedence:null})}function cM(a,o,d,f){a.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=a.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),br(o,"link",d),er(o),a.head.appendChild(o))}function wl(a){return'[src="'+gn(a)+'"]'}function Qi(a){return"script[async]"+a}function uk(a,o,d){if(o.count++,o.instance===null)switch(o.type){case"style":var f=a.querySelector('style[data-href~="'+gn(d.href)+'"]');if(f)return o.instance=f,er(f),f;var g=p({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return f=(a.ownerDocument||a).createElement("style"),er(f),br(f,"style",g),au(f,d.precedence,a),o.instance=f;case"stylesheet":g=kl(d.href);var y=a.querySelector(Xi(g));if(y)return o.state.loading|=4,o.instance=y,er(y),y;f=dk(d),(g=Sn.get(g))&&Nm(f,g),y=(a.ownerDocument||a).createElement("link"),er(y);var j=y;return j._p=new Promise(function(E,R){j.onload=E,j.onerror=R}),br(y,"link",f),o.state.loading|=4,au(y,d.precedence,a),o.instance=y;case"script":return y=wl(d.src),(g=a.querySelector(Qi(y)))?(o.instance=g,er(g),g):(f=d,(g=Sn.get(y))&&(f=p({},d),jm(f,g)),a=a.ownerDocument||a,g=a.createElement("script"),er(g),br(g,"link",f),a.head.appendChild(g),o.instance=g);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,au(f,d.precedence,a));return o.instance}function au(a,o,d){for(var f=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=f.length?f[f.length-1]:null,y=g,j=0;j<f.length;j++){var E=f[j];if(E.dataset.precedence===o)y=E;else if(y!==g)break}y?y.parentNode.insertBefore(a,y.nextSibling):(o=d.nodeType===9?d.head:d,o.insertBefore(a,o.firstChild))}function Nm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.title==null&&(a.title=o.title)}function jm(a,o){a.crossOrigin==null&&(a.crossOrigin=o.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=o.referrerPolicy),a.integrity==null&&(a.integrity=o.integrity)}var su=null;function fk(a,o,d){if(su===null){var f=new Map,g=su=new Map;g.set(d,f)}else g=su,f=g.get(d),f||(f=new Map,g.set(d,f));if(f.has(a))return f;for(f.set(a,null),d=d.getElementsByTagName(a),g=0;g<d.length;g++){var y=d[g];if(!(y[mn]||y[O]||a==="link"&&y.getAttribute("rel")==="stylesheet")&&y.namespaceURI!=="http://www.w3.org/2000/svg"){var j=y.getAttribute(o)||"";j=a+j;var E=f.get(j);E?E.push(y):f.set(j,[y])}}return f}function hk(a,o,d){a=a.ownerDocument||a,a.head.insertBefore(d,o==="title"?a.querySelector("head > title"):null)}function dM(a,o,d){if(d===1||o.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return a=o.disabled,typeof o.precedence=="string"&&a==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function mk(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Ji=null;function uM(){}function fM(a,o,d){if(Ji===null)throw Error(n(475));var f=Ji;if(o.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var g=kl(d.href),y=a.querySelector(Xi(g));if(y){a=y._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(f.count++,f=ou.bind(f),a.then(f,f)),o.state.loading|=4,o.instance=y,er(y);return}y=a.ownerDocument||a,d=dk(d),(g=Sn.get(g))&&Nm(d,g),y=y.createElement("link"),er(y);var j=y;j._p=new Promise(function(E,R){j.onload=E,j.onerror=R}),br(y,"link",d),o.instance=y}f.stylesheets===null&&(f.stylesheets=new Map),f.stylesheets.set(o,a),(a=o.state.preload)&&(o.state.loading&3)===0&&(f.count++,o=ou.bind(f),a.addEventListener("load",o),a.addEventListener("error",o))}}function hM(){if(Ji===null)throw Error(n(475));var a=Ji;return a.stylesheets&&a.count===0&&Cm(a,a.stylesheets),0<a.count?function(o){var d=setTimeout(function(){if(a.stylesheets&&Cm(a,a.stylesheets),a.unsuspend){var f=a.unsuspend;a.unsuspend=null,f()}},6e4);return a.unsuspend=o,function(){a.unsuspend=null,clearTimeout(d)}}:null}function ou(){if(this.count--,this.count===0){if(this.stylesheets)Cm(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var lu=null;function Cm(a,o){a.stylesheets=null,a.unsuspend!==null&&(a.count++,lu=new Map,o.forEach(mM,a),lu=null,ou.call(a))}function mM(a,o){if(!(o.state.loading&4)){var d=lu.get(a);if(d)var f=d.get(null);else{d=new Map,lu.set(a,d);for(var g=a.querySelectorAll("link[data-precedence],style[data-precedence]"),y=0;y<g.length;y++){var j=g[y];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(d.set(j.dataset.precedence,j),f=j)}f&&d.set(null,f)}g=o.instance,j=g.getAttribute("data-precedence"),y=d.get(j)||f,y===f&&d.set(null,g),d.set(j,g),this.count++,f=ou.bind(this),g.addEventListener("load",f),g.addEventListener("error",f),y?y.parentNode.insertBefore(g,y.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(g,a.firstChild)),o.state.loading|=4}}var Zi={$$typeof:C,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function pM(a,o,d,f,g,y,j,E){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=At(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=At(0),this.hiddenUpdates=At(null),this.identifierPrefix=f,this.onUncaughtError=g,this.onCaughtError=y,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=E,this.incompleteTransitions=new Map}function pk(a,o,d,f,g,y,j,E,R,V,X,ee){return a=new pM(a,o,d,j,E,R,V,ee),o=1,y===!0&&(o|=24),y=Jr(3,null,null,o),a.current=y,y.stateNode=a,o=l0(),o.refCount++,a.pooledCache=o,o.refCount++,y.memoizedState={element:f,isDehydrated:d,cache:o},u0(y),a}function gk(a){return a?(a=Zo,a):Zo}function xk(a,o,d,f,g,y){g=gk(g),f.context===null?f.context=g:f.pendingContext=g,f=Ja(o),f.payload={element:d},y=y===void 0?null:y,y!==null&&(f.callback=y),d=Za(a,f,o),d!==null&&(nn(d,a,o),Ei(d,a,o))}function bk(a,o){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<o?d:o}}function Tm(a,o){bk(a,o),(a=a.alternate)&&bk(a,o)}function yk(a){if(a.tag===13){var o=Jo(a,67108864);o!==null&&nn(o,a,67108864),Tm(a,67108864)}}var iu=!0;function gM(a,o,d,f){var g=B.T;B.T=null;var y=W.p;try{W.p=2,Mm(a,o,d,f)}finally{W.p=y,B.T=g}}function xM(a,o,d,f){var g=B.T;B.T=null;var y=W.p;try{W.p=8,Mm(a,o,d,f)}finally{W.p=y,B.T=g}}function Mm(a,o,d,f){if(iu){var g=Em(f);if(g===null)pm(a,o,f,cu,d),kk(a,f);else if(yM(g,a,o,d,f))f.stopPropagation();else if(kk(a,f),o&4&&-1<bM.indexOf(a)){for(;g!==null;){var y=$r(g);if(y!==null)switch(y.tag){case 3:if(y=y.stateNode,y.current.memoizedState.isDehydrated){var j=Ge(y.pendingLanes);if(j!==0){var E=y;for(E.pendingLanes|=2,E.entangledLanes|=2;j;){var R=1<<31-jr(j);E.entanglements[1]|=R,j&=~R}ta(y),(ct&6)===0&&(qd=Et()+500,qi(0))}}break;case 13:E=Jo(y,2),E!==null&&nn(E,y,2),Kd(),Tm(y,2)}if(y=Em(f),y===null&&pm(a,o,f,cu,d),y===g)break;g=y}g!==null&&f.stopPropagation()}else pm(a,o,f,null,d)}}function Em(a){return a=zh(a),Am(a)}var cu=null;function Am(a){if(cu=null,a=pr(a),a!==null){var o=l(a);if(o===null)a=null;else{var d=o.tag;if(d===13){if(a=c(o),a!==null)return a;a=null}else if(d===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;a=null}else o!==a&&(a=null)}}return cu=a,null}function vk(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(te()){case hn:return 2;case hr:return 8;case St:case mr:return 32;case Qe:return 268435456;default:return 32}default:return 32}}var Dm=!1,hs=null,ms=null,ps=null,ec=new Map,tc=new Map,gs=[],bM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kk(a,o){switch(a){case"focusin":case"focusout":hs=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":ps=null;break;case"pointerover":case"pointerout":ec.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":tc.delete(o.pointerId)}}function rc(a,o,d,f,g,y){return a===null||a.nativeEvent!==y?(a={blockedOn:o,domEventName:d,eventSystemFlags:f,nativeEvent:y,targetContainers:[g]},o!==null&&(o=$r(o),o!==null&&yk(o)),a):(a.eventSystemFlags|=f,o=a.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),a)}function yM(a,o,d,f,g){switch(o){case"focusin":return hs=rc(hs,a,o,d,f,g),!0;case"dragenter":return ms=rc(ms,a,o,d,f,g),!0;case"mouseover":return ps=rc(ps,a,o,d,f,g),!0;case"pointerover":var y=g.pointerId;return ec.set(y,rc(ec.get(y)||null,a,o,d,f,g)),!0;case"gotpointercapture":return y=g.pointerId,tc.set(y,rc(tc.get(y)||null,a,o,d,f,g)),!0}return!1}function wk(a){var o=pr(a.target);if(o!==null){var d=l(o);if(d!==null){if(o=d.tag,o===13){if(o=c(d),o!==null){a.blockedOn=o,Ho(a.priority,function(){if(d.tag===13){var f=rn();f=Ka(f);var g=Jo(d,f);g!==null&&nn(g,d,f),Tm(d,f)}});return}}else if(o===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function du(a){if(a.blockedOn!==null)return!1;for(var o=a.targetContainers;0<o.length;){var d=Em(a.nativeEvent);if(d===null){d=a.nativeEvent;var f=new d.constructor(d.type,d);Rh=f,d.target.dispatchEvent(f),Rh=null}else return o=$r(d),o!==null&&yk(o),a.blockedOn=d,!1;o.shift()}return!0}function Sk(a,o,d){du(a)&&d.delete(o)}function vM(){Dm=!1,hs!==null&&du(hs)&&(hs=null),ms!==null&&du(ms)&&(ms=null),ps!==null&&du(ps)&&(ps=null),ec.forEach(Sk),tc.forEach(Sk)}function uu(a,o){a.blockedOn===o&&(a.blockedOn=null,Dm||(Dm=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,vM)))}var fu=null;function Nk(a){fu!==a&&(fu=a,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){fu===a&&(fu=null);for(var o=0;o<a.length;o+=3){var d=a[o],f=a[o+1],g=a[o+2];if(typeof f!="function"){if(Am(f||d)===null)continue;break}var y=$r(d);y!==null&&(a.splice(o,3),o-=3,A0(y,{pending:!0,data:g,method:d.method,action:f},f,g))}}))}function nc(a){function o(R){return uu(R,a)}hs!==null&&uu(hs,a),ms!==null&&uu(ms,a),ps!==null&&uu(ps,a),ec.forEach(o),tc.forEach(o);for(var d=0;d<gs.length;d++){var f=gs[d];f.blockedOn===a&&(f.blockedOn=null)}for(;0<gs.length&&(d=gs[0],d.blockedOn===null);)wk(d),d.blockedOn===null&&gs.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(f=0;f<d.length;f+=3){var g=d[f],y=d[f+1],j=g[ce]||null;if(typeof y=="function")j||Nk(d);else if(j){var E=null;if(y&&y.hasAttribute("formAction")){if(g=y,j=y[ce]||null)E=j.formAction;else if(Am(g)!==null)continue}else E=j.action;typeof E=="function"?d[f+1]=E:(d.splice(f,3),f-=3),Nk(d)}}}function Om(a){this._internalRoot=a}hu.prototype.render=Om.prototype.render=function(a){var o=this._internalRoot;if(o===null)throw Error(n(409));var d=o.current,f=rn();xk(d,f,a,o,null,null)},hu.prototype.unmount=Om.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var o=a.containerInfo;xk(a.current,2,null,a,null,null),Kd(),o[Te]=null}};function hu(a){this._internalRoot=a}hu.prototype.unstable_scheduleHydration=function(a){if(a){var o=ad();a={blockedOn:null,target:a,priority:o};for(var d=0;d<gs.length&&o!==0&&o<gs[d].priority;d++);gs.splice(d,0,a),d===0&&wk(a)}};var jk=e.version;if(jk!=="19.1.1")throw Error(n(527,jk,"19.1.1"));W.findDOMNode=function(a){var o=a._reactInternals;if(o===void 0)throw typeof a.render=="function"?Error(n(188)):(a=Object.keys(a).join(","),Error(n(268,a)));return a=h(o),a=a!==null?m(a):null,a=a===null?null:a.stateNode,a};var kM={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mu.isDisabled&&mu.supportsFiber)try{$t=mu.inject(kM),Nt=mu}catch{}}return ac.createRoot=function(a,o){if(!s(a))throw Error(n(299));var d=!1,f="",g=$y,y=Uy,j=Vy,E=null;return o!=null&&(o.unstable_strictMode===!0&&(d=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(y=o.onCaughtError),o.onRecoverableError!==void 0&&(j=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(E=o.unstable_transitionCallbacks)),o=pk(a,1,!1,null,null,d,f,g,y,j,E,null),a[Te]=o.current,mm(a),new Om(o)},ac.hydrateRoot=function(a,o,d){if(!s(a))throw Error(n(299));var f=!1,g="",y=$y,j=Uy,E=Vy,R=null,V=null;return d!=null&&(d.unstable_strictMode===!0&&(f=!0),d.identifierPrefix!==void 0&&(g=d.identifierPrefix),d.onUncaughtError!==void 0&&(y=d.onUncaughtError),d.onCaughtError!==void 0&&(j=d.onCaughtError),d.onRecoverableError!==void 0&&(E=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(R=d.unstable_transitionCallbacks),d.formState!==void 0&&(V=d.formState)),o=pk(a,1,!0,o,d??null,f,g,y,j,E,R,V),o.context=gk(null),d=o.current,f=rn(),f=Ka(f),g=Ja(f),g.callback=null,Za(d,g,f),d=f,o.current.lanes=d,Cr(o,d),ta(o),a[Te]=o.current,mm(a),new hu(o)},ac.version="19.1.1",ac}var Lk;function x3(){if(Lk)return zm.exports;Lk=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),zm.exports=g3(),zm.exports}var b3=x3();const y3=X1(b3),Bk=r=>{let e;const t=new Set,n=(m,p)=>{const x=typeof m=="function"?m(e):m;if(!Object.is(x,e)){const b=e;e=p??(typeof x!="object"||x===null)?x:Object.assign({},e,x),t.forEach(v=>v(e,b))}},s=()=>e,u={setState:n,getState:s,getInitialState:()=>h,subscribe:m=>(t.add(m),()=>t.delete(m))},h=e=r(n,s,u);return u},v3=(r=>r?Bk(r):Bk),k3=r=>r;function w3(r,e=k3){const t=P.useSyncExternalStore(r.subscribe,P.useCallback(()=>e(r.getState()),[r,e]),P.useCallback(()=>e(r.getInitialState()),[r,e]));return P.useDebugValue(t),t}const Ik=r=>{const e=v3(r),t=n=>w3(e,n);return Object.assign(t,e),t},An=(r=>r?Ik(r):Ik);function S3(r,e){let t;try{t=r()}catch{return}return{getItem:s=>{var l;const c=h=>h===null?null:JSON.parse(h,void 0),u=(l=t.getItem(s))!=null?l:null;return u instanceof Promise?u.then(c):c(u)},setItem:(s,l)=>t.setItem(s,JSON.stringify(l,void 0)),removeItem:s=>t.removeItem(s)}}const Ap=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(n){return Ap(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return Ap(n)(t)}}}},N3=(r,e)=>(t,n,s)=>{let l={storage:S3(()=>localStorage),partialize:w=>w,version:0,merge:(w,S)=>({...S,...w}),...e},c=!1;const u=new Set,h=new Set;let m=l.storage;if(!m)return r((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),t(...w)},n,s);const p=()=>{const w=l.partialize({...n()});return m.setItem(l.name,{state:w,version:l.version})},x=s.setState;s.setState=(w,S)=>(x(w,S),p());const b=r((...w)=>(t(...w),p()),n,s);s.getInitialState=()=>b;let v;const k=()=>{var w,S;if(!m)return;c=!1,u.forEach(T=>{var C;return T((C=n())!=null?C:b)});const N=((S=l.onRehydrateStorage)==null?void 0:S.call(l,(w=n())!=null?w:b))||void 0;return Ap(m.getItem.bind(m))(l.name).then(T=>{if(T)if(typeof T.version=="number"&&T.version!==l.version){if(l.migrate){const C=l.migrate(T.state,T.version);return C instanceof Promise?C.then(D=>[!0,D]):[!0,C]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,T.state];return[!1,void 0]}).then(T=>{var C;const[D,A]=T;if(v=l.merge(A,(C=n())!=null?C:b),t(v,!0),D)return p()}).then(()=>{N?.(v,void 0),v=n(),c=!0,h.forEach(T=>T(v))}).catch(T=>{N?.(void 0,T)})};return s.persist={setOptions:w=>{l={...l,...w},w.storage&&(m=w.storage)},clearStorage:()=>{m?.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>k(),hasHydrated:()=>c,onHydrate:w=>(u.add(w),()=>{u.delete(w)}),onFinishHydration:w=>(h.add(w),()=>{h.delete(w)})},l.skipHydration||k(),v||b},qn=N3,Gn={sky:["#0ea5e9","#22c55e","#f59e0b","#a78bfa","#ef4444"],violet:["#8b5cf6","#10b981","#f59e0b","#06b6d4","#ef4444"],emerald:["#10b981","#60a5fa","#f59e0b","#a78bfa","#ef4444"]},_r=An()(qn(r=>({palette:"sky",accent:60,compact:!1,font:"Inter",mode:"light",radius:16,textScale:1,setPalette:e=>r({palette:e}),setAccent:e=>r({accent:e}),setCompact:e=>r({compact:e}),setFont:e=>r({font:e}),setMode:e=>r({mode:e}),setRadius:e=>r({radius:e}),setTextScale:e=>r({textScale:e})}),{name:"aq:theme"})),$s=An()(qn(r=>({defaultRoute:"/",gradientsEnabled:!0,reducedMotion:!1,chartAnimation:"normal",confettiEnabled:!0,soundsEnabled:!1,weekStart:1,time24h:!0,dateFormat:"auto",autosaveSeconds:30,askBeforeLeave:!0,notificationsEnabled:!1,quietStart:"22:00",quietEnd:"07:00",preferredCurrency:"USD",gpaScale:"4-highest",gamificationEnabled:!1,showStreaks:!0,achievements:!0,challenges:!1,textbookDefaultStatus:"Ordered",textbookDefaultLinkMode:"file",pomodoroPosition:"draggable",pomodoroSize:"medium",pomodoroAutoHide:!1,set:e=>r(e)}),{name:"aq:settings"}));function Pk(r,e){if(typeof r=="function")return r(e);r!=null&&(r.current=e)}function eS(...r){return e=>{let t=!1;const n=r.map(s=>{const l=Pk(s,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let s=0;s<n.length;s++){const l=n[s];typeof l=="function"?l():Pk(r[s],null)}}}}function ft(...r){return M.useCallback(eS(...r),r)}function Gl(r){const e=C3(r),t=M.forwardRef((n,s)=>{const{children:l,...c}=n,u=M.Children.toArray(l),h=u.find(M3);if(h){const m=h.props.children,p=u.map(x=>x===h?M.Children.count(m)>1?M.Children.only(null):M.isValidElement(m)?m.props.children:null:x);return i.jsx(e,{...c,ref:s,children:M.isValidElement(m)?M.cloneElement(m,void 0,p):null})}return i.jsx(e,{...c,ref:s,children:l})});return t.displayName=`${r}.Slot`,t}var j3=Gl("Slot");function C3(r){const e=M.forwardRef((t,n)=>{const{children:s,...l}=t;if(M.isValidElement(s)){const c=A3(s),u=E3(l,s.props);return s.type!==M.Fragment&&(u.ref=n?eS(n,c):c),M.cloneElement(s,u)}return M.Children.count(s)>1?M.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var T3=Symbol("radix.slottable");function M3(r){return M.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===T3}function E3(r,e){const t={...e};for(const n in e){const s=r[n],l=e[n];/^on[A-Z]/.test(n)?s&&l?t[n]=(...u)=>{const h=l(...u);return s(...u),h}:s&&(t[n]=s):n==="style"?t[n]={...s,...l}:n==="className"&&(t[n]=[s,l].filter(Boolean).join(" "))}return{...r,...t}}function A3(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}const Ag="-",D3=r=>{const e=R3(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:c=>{const u=c.split(Ag);return u[0]===""&&u.length!==1&&u.shift(),tS(u,e)||O3(c)},getConflictingClassGroupIds:(c,u)=>{const h=t[c]||[];return u&&n[c]?[...h,...n[c]]:h}}},tS=(r,e)=>{if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),s=n?tS(r.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const l=r.join(Ag);return e.validators.find(({validator:c})=>c(l))?.classGroupId},_k=/^\[(.+)\]$/,O3=r=>{if(_k.test(r)){const e=_k.exec(r)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},R3=r=>{const{theme:e,classGroups:t}=r,n={nextPart:new Map,validators:[]};for(const s in t)Dp(t[s],n,s,e);return n},Dp=(r,e,t,n)=>{r.forEach(s=>{if(typeof s=="string"){const l=s===""?e:Hk(e,s);l.classGroupId=t;return}if(typeof s=="function"){if(z3(s)){Dp(s(n),e,t,n);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([l,c])=>{Dp(c,Hk(e,l),t,n)})})},Hk=(r,e)=>{let t=r;return e.split(Ag).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},z3=r=>r.isThemeGetter,L3=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const s=(l,c)=>{t.set(l,c),e++,e>r&&(e=0,n=t,t=new Map)};return{get(l){let c=t.get(l);if(c!==void 0)return c;if((c=n.get(l))!==void 0)return s(l,c),c},set(l,c){t.has(l)?t.set(l,c):s(l,c)}}},Op="!",Rp=":",B3=Rp.length,I3=r=>{const{prefix:e,experimentalParseClassName:t}=r;let n=s=>{const l=[];let c=0,u=0,h=0,m;for(let k=0;k<s.length;k++){let w=s[k];if(c===0&&u===0){if(w===Rp){l.push(s.slice(h,k)),h=k+B3;continue}if(w==="/"){m=k;continue}}w==="["?c++:w==="]"?c--:w==="("?u++:w===")"&&u--}const p=l.length===0?s:s.substring(h),x=P3(p),b=x!==p,v=m&&m>h?m-h:void 0;return{modifiers:l,hasImportantModifier:b,baseClassName:x,maybePostfixModifierPosition:v}};if(e){const s=e+Rp,l=n;n=c=>c.startsWith(s)?l(c.substring(s.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:c,maybePostfixModifierPosition:void 0}}if(t){const s=n;n=l=>t({className:l,parseClassName:s})}return n},P3=r=>r.endsWith(Op)?r.substring(0,r.length-1):r.startsWith(Op)?r.substring(1):r,_3=r=>{const e=Object.fromEntries(r.orderSensitiveModifiers.map(n=>[n,!0]));return n=>{if(n.length<=1)return n;const s=[];let l=[];return n.forEach(c=>{c[0]==="["||e[c]?(s.push(...l.sort(),c),l=[]):l.push(c)}),s.push(...l.sort()),s}},H3=r=>({cache:L3(r.cacheSize),parseClassName:I3(r),sortModifiers:_3(r),...D3(r)}),$3=/\s+/,U3=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:l}=e,c=[],u=r.trim().split($3);let h="";for(let m=u.length-1;m>=0;m-=1){const p=u[m],{isExternal:x,modifiers:b,hasImportantModifier:v,baseClassName:k,maybePostfixModifierPosition:w}=t(p);if(x){h=p+(h.length>0?" "+h:h);continue}let S=!!w,N=n(S?k.substring(0,w):k);if(!N){if(!S){h=p+(h.length>0?" "+h:h);continue}if(N=n(k),!N){h=p+(h.length>0?" "+h:h);continue}S=!1}const T=l(b).join(":"),C=v?T+Op:T,D=C+N;if(c.includes(D))continue;c.push(D);const A=s(N,S);for(let Y=0;Y<A.length;++Y){const I=A[Y];c.push(C+I)}h=p+(h.length>0?" "+h:h)}return h};function V3(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=rS(e))&&(n&&(n+=" "),n+=t);return n}const rS=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=rS(r[n]))&&(t&&(t+=" "),t+=e);return t};function F3(r,...e){let t,n,s,l=c;function c(h){const m=e.reduce((p,x)=>x(p),r());return t=H3(m),n=t.cache.get,s=t.cache.set,l=u,u(h)}function u(h){const m=n(h);if(m)return m;const p=U3(h,t);return s(h,p),p}return function(){return l(V3.apply(null,arguments))}}const Jt=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},nS=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,aS=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Y3=/^\d+\/\d+$/,q3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,G3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,K3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,W3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,X3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Sl=r=>Y3.test(r),qe=r=>!!r&&!Number.isNaN(Number(r)),bs=r=>!!r&&Number.isInteger(Number(r)),Im=r=>r.endsWith("%")&&qe(r.slice(0,-1)),Ra=r=>q3.test(r),Q3=()=>!0,J3=r=>G3.test(r)&&!K3.test(r),sS=()=>!1,Z3=r=>W3.test(r),eE=r=>X3.test(r),tE=r=>!we(r)&&!Se(r),rE=r=>ei(r,iS,sS),we=r=>nS.test(r),co=r=>ei(r,cS,J3),Pm=r=>ei(r,lE,qe),$k=r=>ei(r,oS,sS),nE=r=>ei(r,lS,eE),pu=r=>ei(r,dS,Z3),Se=r=>aS.test(r),sc=r=>ti(r,cS),aE=r=>ti(r,iE),Uk=r=>ti(r,oS),sE=r=>ti(r,iS),oE=r=>ti(r,lS),gu=r=>ti(r,dS,!0),ei=(r,e,t)=>{const n=nS.exec(r);return n?n[1]?e(n[1]):t(n[2]):!1},ti=(r,e,t=!1)=>{const n=aS.exec(r);return n?n[1]?e(n[1]):t:!1},oS=r=>r==="position"||r==="percentage",lS=r=>r==="image"||r==="url",iS=r=>r==="length"||r==="size"||r==="bg-size",cS=r=>r==="length",lE=r=>r==="number",iE=r=>r==="family-name",dS=r=>r==="shadow",cE=()=>{const r=Jt("color"),e=Jt("font"),t=Jt("text"),n=Jt("font-weight"),s=Jt("tracking"),l=Jt("leading"),c=Jt("breakpoint"),u=Jt("container"),h=Jt("spacing"),m=Jt("radius"),p=Jt("shadow"),x=Jt("inset-shadow"),b=Jt("text-shadow"),v=Jt("drop-shadow"),k=Jt("blur"),w=Jt("perspective"),S=Jt("aspect"),N=Jt("ease"),T=Jt("animate"),C=()=>["auto","avoid","all","avoid-page","page","left","right","column"],D=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],A=()=>[...D(),Se,we],Y=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto","contain","none"],$=()=>[Se,we,h],ae=()=>[Sl,"full","auto",...$()],le=()=>[bs,"none","subgrid",Se,we],ie=()=>["auto",{span:["full",bs,Se,we]},bs,Se,we],he=()=>[bs,"auto",Se,we],ye=()=>["auto","min","max","fr",Se,we],fe=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ve=()=>["start","end","center","stretch","center-safe","end-safe"],B=()=>["auto",...$()],W=()=>[Sl,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...$()],L=()=>[r,Se,we],H=()=>[...D(),Uk,$k,{position:[Se,we]}],Q=()=>["no-repeat",{repeat:["","x","y","space","round"]}],ue=()=>["auto","cover","contain",sE,rE,{size:[Se,we]}],Ae=()=>[Im,sc,co],me=()=>["","none","full",m,Se,we],be=()=>["",qe,sc,co],$e=()=>["solid","dashed","dotted","double"],_e=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],de=()=>[qe,Im,Uk,$k],ne=()=>["","none",k,Se,we],ge=()=>["none",qe,Se,we],Z=()=>["none",qe,Se,we],oe=()=>[qe,Se,we],Le=()=>[Sl,"full",...$()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Ra],breakpoint:[Ra],color:[Q3],container:[Ra],"drop-shadow":[Ra],ease:["in","out","in-out"],font:[tE],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Ra],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Ra],shadow:[Ra],spacing:["px",qe],text:[Ra],"text-shadow":[Ra],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Sl,we,Se,S]}],container:["container"],columns:[{columns:[qe,we,Se,u]}],"break-after":[{"break-after":C()}],"break-before":[{"break-before":C()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:A()}],overflow:[{overflow:Y()}],"overflow-x":[{"overflow-x":Y()}],"overflow-y":[{"overflow-y":Y()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:ae()}],"inset-x":[{"inset-x":ae()}],"inset-y":[{"inset-y":ae()}],start:[{start:ae()}],end:[{end:ae()}],top:[{top:ae()}],right:[{right:ae()}],bottom:[{bottom:ae()}],left:[{left:ae()}],visibility:["visible","invisible","collapse"],z:[{z:[bs,"auto",Se,we]}],basis:[{basis:[Sl,"full","auto",u,...$()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[qe,Sl,"auto","initial","none",we]}],grow:[{grow:["",qe,Se,we]}],shrink:[{shrink:["",qe,Se,we]}],order:[{order:[bs,"first","last","none",Se,we]}],"grid-cols":[{"grid-cols":le()}],"col-start-end":[{col:ie()}],"col-start":[{"col-start":he()}],"col-end":[{"col-end":he()}],"grid-rows":[{"grid-rows":le()}],"row-start-end":[{row:ie()}],"row-start":[{"row-start":he()}],"row-end":[{"row-end":he()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":ye()}],"auto-rows":[{"auto-rows":ye()}],gap:[{gap:$()}],"gap-x":[{"gap-x":$()}],"gap-y":[{"gap-y":$()}],"justify-content":[{justify:[...fe(),"normal"]}],"justify-items":[{"justify-items":[...ve(),"normal"]}],"justify-self":[{"justify-self":["auto",...ve()]}],"align-content":[{content:["normal",...fe()]}],"align-items":[{items:[...ve(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ve(),{baseline:["","last"]}]}],"place-content":[{"place-content":fe()}],"place-items":[{"place-items":[...ve(),"baseline"]}],"place-self":[{"place-self":["auto",...ve()]}],p:[{p:$()}],px:[{px:$()}],py:[{py:$()}],ps:[{ps:$()}],pe:[{pe:$()}],pt:[{pt:$()}],pr:[{pr:$()}],pb:[{pb:$()}],pl:[{pl:$()}],m:[{m:B()}],mx:[{mx:B()}],my:[{my:B()}],ms:[{ms:B()}],me:[{me:B()}],mt:[{mt:B()}],mr:[{mr:B()}],mb:[{mb:B()}],ml:[{ml:B()}],"space-x":[{"space-x":$()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":$()}],"space-y-reverse":["space-y-reverse"],size:[{size:W()}],w:[{w:[u,"screen",...W()]}],"min-w":[{"min-w":[u,"screen","none",...W()]}],"max-w":[{"max-w":[u,"screen","none","prose",{screen:[c]},...W()]}],h:[{h:["screen","lh",...W()]}],"min-h":[{"min-h":["screen","lh","none",...W()]}],"max-h":[{"max-h":["screen","lh",...W()]}],"font-size":[{text:["base",t,sc,co]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Se,Pm]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Im,we]}],"font-family":[{font:[aE,we,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Se,we]}],"line-clamp":[{"line-clamp":[qe,"none",Se,Pm]}],leading:[{leading:[l,...$()]}],"list-image":[{"list-image":["none",Se,we]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Se,we]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:L()}],"text-color":[{text:L()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...$e(),"wavy"]}],"text-decoration-thickness":[{decoration:[qe,"from-font","auto",Se,co]}],"text-decoration-color":[{decoration:L()}],"underline-offset":[{"underline-offset":[qe,"auto",Se,we]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Se,we]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Se,we]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:H()}],"bg-repeat":[{bg:Q()}],"bg-size":[{bg:ue()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},bs,Se,we],radial:["",Se,we],conic:[bs,Se,we]},oE,nE]}],"bg-color":[{bg:L()}],"gradient-from-pos":[{from:Ae()}],"gradient-via-pos":[{via:Ae()}],"gradient-to-pos":[{to:Ae()}],"gradient-from":[{from:L()}],"gradient-via":[{via:L()}],"gradient-to":[{to:L()}],rounded:[{rounded:me()}],"rounded-s":[{"rounded-s":me()}],"rounded-e":[{"rounded-e":me()}],"rounded-t":[{"rounded-t":me()}],"rounded-r":[{"rounded-r":me()}],"rounded-b":[{"rounded-b":me()}],"rounded-l":[{"rounded-l":me()}],"rounded-ss":[{"rounded-ss":me()}],"rounded-se":[{"rounded-se":me()}],"rounded-ee":[{"rounded-ee":me()}],"rounded-es":[{"rounded-es":me()}],"rounded-tl":[{"rounded-tl":me()}],"rounded-tr":[{"rounded-tr":me()}],"rounded-br":[{"rounded-br":me()}],"rounded-bl":[{"rounded-bl":me()}],"border-w":[{border:be()}],"border-w-x":[{"border-x":be()}],"border-w-y":[{"border-y":be()}],"border-w-s":[{"border-s":be()}],"border-w-e":[{"border-e":be()}],"border-w-t":[{"border-t":be()}],"border-w-r":[{"border-r":be()}],"border-w-b":[{"border-b":be()}],"border-w-l":[{"border-l":be()}],"divide-x":[{"divide-x":be()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":be()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...$e(),"hidden","none"]}],"divide-style":[{divide:[...$e(),"hidden","none"]}],"border-color":[{border:L()}],"border-color-x":[{"border-x":L()}],"border-color-y":[{"border-y":L()}],"border-color-s":[{"border-s":L()}],"border-color-e":[{"border-e":L()}],"border-color-t":[{"border-t":L()}],"border-color-r":[{"border-r":L()}],"border-color-b":[{"border-b":L()}],"border-color-l":[{"border-l":L()}],"divide-color":[{divide:L()}],"outline-style":[{outline:[...$e(),"none","hidden"]}],"outline-offset":[{"outline-offset":[qe,Se,we]}],"outline-w":[{outline:["",qe,sc,co]}],"outline-color":[{outline:L()}],shadow:[{shadow:["","none",p,gu,pu]}],"shadow-color":[{shadow:L()}],"inset-shadow":[{"inset-shadow":["none",x,gu,pu]}],"inset-shadow-color":[{"inset-shadow":L()}],"ring-w":[{ring:be()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:L()}],"ring-offset-w":[{"ring-offset":[qe,co]}],"ring-offset-color":[{"ring-offset":L()}],"inset-ring-w":[{"inset-ring":be()}],"inset-ring-color":[{"inset-ring":L()}],"text-shadow":[{"text-shadow":["none",b,gu,pu]}],"text-shadow-color":[{"text-shadow":L()}],opacity:[{opacity:[qe,Se,we]}],"mix-blend":[{"mix-blend":[..._e(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":_e()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[qe]}],"mask-image-linear-from-pos":[{"mask-linear-from":de()}],"mask-image-linear-to-pos":[{"mask-linear-to":de()}],"mask-image-linear-from-color":[{"mask-linear-from":L()}],"mask-image-linear-to-color":[{"mask-linear-to":L()}],"mask-image-t-from-pos":[{"mask-t-from":de()}],"mask-image-t-to-pos":[{"mask-t-to":de()}],"mask-image-t-from-color":[{"mask-t-from":L()}],"mask-image-t-to-color":[{"mask-t-to":L()}],"mask-image-r-from-pos":[{"mask-r-from":de()}],"mask-image-r-to-pos":[{"mask-r-to":de()}],"mask-image-r-from-color":[{"mask-r-from":L()}],"mask-image-r-to-color":[{"mask-r-to":L()}],"mask-image-b-from-pos":[{"mask-b-from":de()}],"mask-image-b-to-pos":[{"mask-b-to":de()}],"mask-image-b-from-color":[{"mask-b-from":L()}],"mask-image-b-to-color":[{"mask-b-to":L()}],"mask-image-l-from-pos":[{"mask-l-from":de()}],"mask-image-l-to-pos":[{"mask-l-to":de()}],"mask-image-l-from-color":[{"mask-l-from":L()}],"mask-image-l-to-color":[{"mask-l-to":L()}],"mask-image-x-from-pos":[{"mask-x-from":de()}],"mask-image-x-to-pos":[{"mask-x-to":de()}],"mask-image-x-from-color":[{"mask-x-from":L()}],"mask-image-x-to-color":[{"mask-x-to":L()}],"mask-image-y-from-pos":[{"mask-y-from":de()}],"mask-image-y-to-pos":[{"mask-y-to":de()}],"mask-image-y-from-color":[{"mask-y-from":L()}],"mask-image-y-to-color":[{"mask-y-to":L()}],"mask-image-radial":[{"mask-radial":[Se,we]}],"mask-image-radial-from-pos":[{"mask-radial-from":de()}],"mask-image-radial-to-pos":[{"mask-radial-to":de()}],"mask-image-radial-from-color":[{"mask-radial-from":L()}],"mask-image-radial-to-color":[{"mask-radial-to":L()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":D()}],"mask-image-conic-pos":[{"mask-conic":[qe]}],"mask-image-conic-from-pos":[{"mask-conic-from":de()}],"mask-image-conic-to-pos":[{"mask-conic-to":de()}],"mask-image-conic-from-color":[{"mask-conic-from":L()}],"mask-image-conic-to-color":[{"mask-conic-to":L()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:H()}],"mask-repeat":[{mask:Q()}],"mask-size":[{mask:ue()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Se,we]}],filter:[{filter:["","none",Se,we]}],blur:[{blur:ne()}],brightness:[{brightness:[qe,Se,we]}],contrast:[{contrast:[qe,Se,we]}],"drop-shadow":[{"drop-shadow":["","none",v,gu,pu]}],"drop-shadow-color":[{"drop-shadow":L()}],grayscale:[{grayscale:["",qe,Se,we]}],"hue-rotate":[{"hue-rotate":[qe,Se,we]}],invert:[{invert:["",qe,Se,we]}],saturate:[{saturate:[qe,Se,we]}],sepia:[{sepia:["",qe,Se,we]}],"backdrop-filter":[{"backdrop-filter":["","none",Se,we]}],"backdrop-blur":[{"backdrop-blur":ne()}],"backdrop-brightness":[{"backdrop-brightness":[qe,Se,we]}],"backdrop-contrast":[{"backdrop-contrast":[qe,Se,we]}],"backdrop-grayscale":[{"backdrop-grayscale":["",qe,Se,we]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[qe,Se,we]}],"backdrop-invert":[{"backdrop-invert":["",qe,Se,we]}],"backdrop-opacity":[{"backdrop-opacity":[qe,Se,we]}],"backdrop-saturate":[{"backdrop-saturate":[qe,Se,we]}],"backdrop-sepia":[{"backdrop-sepia":["",qe,Se,we]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":$()}],"border-spacing-x":[{"border-spacing-x":$()}],"border-spacing-y":[{"border-spacing-y":$()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Se,we]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[qe,"initial",Se,we]}],ease:[{ease:["linear","initial",N,Se,we]}],delay:[{delay:[qe,Se,we]}],animate:[{animate:["none",T,Se,we]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[w,Se,we]}],"perspective-origin":[{"perspective-origin":A()}],rotate:[{rotate:ge()}],"rotate-x":[{"rotate-x":ge()}],"rotate-y":[{"rotate-y":ge()}],"rotate-z":[{"rotate-z":ge()}],scale:[{scale:Z()}],"scale-x":[{"scale-x":Z()}],"scale-y":[{"scale-y":Z()}],"scale-z":[{"scale-z":Z()}],"scale-3d":["scale-3d"],skew:[{skew:oe()}],"skew-x":[{"skew-x":oe()}],"skew-y":[{"skew-y":oe()}],transform:[{transform:[Se,we,"","none","gpu","cpu"]}],"transform-origin":[{origin:A()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Le()}],"translate-x":[{"translate-x":Le()}],"translate-y":[{"translate-y":Le()}],"translate-z":[{"translate-z":Le()}],"translate-none":["translate-none"],accent:[{accent:L()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:L()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Se,we]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Se,we]}],fill:[{fill:["none",...L()]}],"stroke-w":[{stroke:[qe,sc,co,Pm]}],stroke:[{stroke:["none",...L()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},dE=F3(cE);function lt(...r){return dE(Z1(r))}class uE{sounds=new Map;backgroundMusic=null;enabled=!0;masterVolume=.7;backgroundMusicEnabled=!1;backgroundMusicVolume=.25;backgroundMusicInitialized=!1;hasUserInteracted=!1;backgroundMusicCooldown=!1;backgroundMusicTimeout=null;backgroundMusicConfig={src:"/sounds/Golden-Hour-background-sound.mp3",volume:.25,loop:!1};soundConfigs={hover:{src:"/sounds/hover-button-sound.mp3",volume:.3,preload:!0},click:{src:"/sounds/single-mouse-button-click-351381.mp3",volume:.5,preload:!0},taskComplete:{src:"/sounds/task-complete-sound.mp3",volume:.8,preload:!0},levelUp:{src:"/sounds/level-up-sound.mp3",volume:.9,preload:!0},badgeEarned:{src:"/sounds/badge-sound.mp3",volume:.8,preload:!0}};constructor(){this.initializeSounds(),this.initializeBackgroundMusic(),this.loadSettings(),this.syncWithSettingsStore(),console.log(" SoundService initialized"),document.addEventListener("click",this.handleFirstUserInteraction.bind(this),{once:!0}),document.addEventListener("keydown",this.handleFirstUserInteraction.bind(this),{once:!0})}handleFirstUserInteraction(){this.hasUserInteracted||(this.hasUserInteracted=!0,console.log(" First user interaction detected, attempting to start background music"),this.backgroundMusicEnabled&&this.enabled&&this.backgroundMusic&&this.backgroundMusic.paused&&this.playBackgroundMusic())}initializeSounds(){Object.entries(this.soundConfigs).forEach(([e,t])=>{try{const n=new Audio(t.src);n.volume=t.volume*this.masterVolume,n.preload=t.preload?"auto":"none",n.addEventListener("error",s=>{console.warn(`Failed to load sound: ${t.src}`,s)}),this.sounds.set(e,n)}catch(n){console.warn(`Failed to create audio for ${e}:`,n)}})}initializeBackgroundMusic(){try{console.log(" Initializing background music with config:",this.backgroundMusicConfig),this.backgroundMusic=new Audio(this.backgroundMusicConfig.src),this.backgroundMusic.loop=this.backgroundMusicConfig.loop,this.backgroundMusic.volume=this.backgroundMusicConfig.volume*this.masterVolume,this.backgroundMusic.preload="auto",console.log(" Background music audio element created:",{src:this.backgroundMusic.src,volume:this.backgroundMusic.volume,loop:this.backgroundMusic.loop}),this.backgroundMusic.addEventListener("error",e=>{console.error(` Failed to load background music: ${this.backgroundMusicConfig.src}`,e),console.error(" Audio element error details:",{error:this.backgroundMusic?.error,networkState:this.backgroundMusic?.networkState,readyState:this.backgroundMusic?.readyState})}),this.backgroundMusic.addEventListener("loadeddata",()=>{console.log(" Background music loaded successfully")}),this.backgroundMusic.addEventListener("loadedmetadata",()=>{console.log(" Background music metadata loaded:",{duration:this.backgroundMusic?.duration,volume:this.backgroundMusic?.volume})}),this.backgroundMusic.addEventListener("canplaythrough",()=>{console.log(" Background music can play through, checking if should auto-start:",{backgroundMusicEnabled:this.backgroundMusicEnabled,soundsEnabled:this.enabled,alreadyInitialized:this.backgroundMusicInitialized,hasUserInteracted:this.hasUserInteracted}),this.backgroundMusicEnabled&&this.enabled&&!this.backgroundMusicInitialized&&(!this.backgroundMusic||this.backgroundMusic.paused)&&(console.log(" Auto-starting background music..."),this.backgroundMusicInitialized=!0,this.playBackgroundMusic())})}catch(e){console.error(" Failed to initialize background music:",e)}}loadSettings(){try{const e=localStorage.getItem("aq:sound-settings");if(e){const t=JSON.parse(e);this.enabled=t.enabled??!0,this.masterVolume=t.masterVolume??.7,this.backgroundMusicEnabled=t.backgroundMusicEnabled??!1,this.backgroundMusicVolume=t.backgroundMusicVolume??.25,this.updateAllVolumes(),this.updateBackgroundMusicVolume()}}catch(e){console.warn("Failed to load sound settings:",e)}}syncWithSettingsStore(){try{const e=localStorage.getItem("aq:settings");if(e){const t=JSON.parse(e);t.state?.soundsEnabled!==void 0&&(this.enabled=t.state.soundsEnabled)}}catch(e){console.warn("Failed to sync with settings store:",e)}}saveSettings(){try{localStorage.setItem("aq:sound-settings",JSON.stringify({enabled:this.enabled,masterVolume:this.masterVolume,backgroundMusicEnabled:this.backgroundMusicEnabled,backgroundMusicVolume:this.backgroundMusicVolume}));const e=localStorage.getItem("aq:settings");if(e){const t=JSON.parse(e);t.state.soundsEnabled=this.enabled,localStorage.setItem("aq:settings",JSON.stringify(t))}}catch(e){console.warn("Failed to save sound settings:",e)}}updateAllVolumes(){Object.entries(this.soundConfigs).forEach(([e,t])=>{const n=this.sounds.get(e);n&&(n.volume=t.volume*this.masterVolume)})}updateBackgroundMusicVolume(){this.backgroundMusic&&(this.backgroundMusic.volume=this.backgroundMusicVolume*this.masterVolume)}playBackgroundMusic(){if(console.log(" playBackgroundMusic called with state:",{hasBackgroundMusic:!!this.backgroundMusic,backgroundMusicEnabled:this.backgroundMusicEnabled,soundsEnabled:this.enabled,currentVolume:this.backgroundMusic?.volume,readyState:this.backgroundMusic?.readyState,paused:this.backgroundMusic?.paused,currentTime:this.backgroundMusic?.currentTime,cooldown:this.backgroundMusicCooldown,src:this.backgroundMusic?.src}),!this.backgroundMusic){console.warn(" No background music audio element available");return}if(!this.backgroundMusicEnabled){console.log(" Background music is disabled, skipping playback");return}if(!this.enabled){console.log(" Overall sounds are disabled, skipping background music");return}if(this.backgroundMusicCooldown){console.log(" Background music is in cooldown, skipping playback");return}if(!this.backgroundMusic.paused){console.log(" Background music is already playing, skipping restart");return}try{this.backgroundMusicCooldown=!0,this.backgroundMusic.volume=this.backgroundMusicVolume*this.masterVolume,this.backgroundMusic.currentTime=0,console.log(" Attempting to play background music...",{volume:this.backgroundMusic.volume,readyState:this.backgroundMusic.readyState,networkState:this.backgroundMusic.networkState,paused:this.backgroundMusic.paused});const e=()=>{console.log(" Background music ended, starting 5-second cooldown"),this.backgroundMusic?.removeEventListener("ended",e),this.backgroundMusicTimeout=setTimeout(()=>{console.log(" Cooldown finished, background music can play again"),this.backgroundMusicCooldown=!1,this.backgroundMusicEnabled&&this.enabled&&(console.log(" Auto-restarting background music after cooldown"),this.playBackgroundMusic())},5e3)};this.backgroundMusic.addEventListener("ended",e);const t=this.backgroundMusic.play();t!==void 0?t.then(()=>{console.log(" Background music started successfully")}).catch(n=>{console.error(" Failed to play background music:",n),this.backgroundMusicCooldown=!1,n.name==="NotAllowedError"&&console.log(" Background music blocked by browser autoplay policy. User interaction required.")}):console.log(" Play method did not return a promise (older browser)")}catch(e){console.error(" Error playing background music:",e),this.backgroundMusicCooldown=!1}}pauseBackgroundMusic(){this.backgroundMusic&&!this.backgroundMusic.paused&&(this.backgroundMusic.pause(),console.log(" Background music paused")),this.backgroundMusicTimeout&&(clearTimeout(this.backgroundMusicTimeout),this.backgroundMusicTimeout=null),this.backgroundMusicCooldown=!1}stopBackgroundMusic(){this.backgroundMusic&&(this.backgroundMusic.pause(),this.backgroundMusic.currentTime=0,console.log(" Background music stopped")),this.backgroundMusicTimeout&&(clearTimeout(this.backgroundMusicTimeout),this.backgroundMusicTimeout=null),this.backgroundMusicCooldown=!1}play(e,t){const n=this.isEnabled();if(console.log(` Attempting to play sound: ${e}, enabled: ${n}`),!n){console.log(` Sound disabled, skipping ${e}`);return}const s=()=>{const l=this.sounds.get(e);if(!l){console.warn(`Sound not found: ${e}`);return}try{l.currentTime=0,t?.volume!==void 0&&(l.volume=t.volume*this.masterVolume),console.log(` Playing sound: ${e} at volume ${l.volume}`);const c=l.play();c!==void 0&&c.then(()=>{console.log(` Successfully played sound: ${e}`)}).catch(u=>{console.warn(`Failed to play sound ${e}:`,u)}),t?.volume!==void 0&&setTimeout(()=>{const u=this.soundConfigs[e];l.volume=u.volume*this.masterVolume},100)}catch(c){console.warn(`Error playing sound ${e}:`,c)}};t?.delay?setTimeout(s,t.delay):s()}setEnabled(e){this.enabled=e,this.saveSettings(),e&&this.backgroundMusicEnabled?this.playBackgroundMusic():this.pauseBackgroundMusic(),console.log(` Sound ${e?"enabled":"disabled"}`)}setMasterVolume(e){this.masterVolume=Math.max(0,Math.min(1,e)),this.updateAllVolumes(),this.updateBackgroundMusicVolume(),this.saveSettings(),console.log(` Master volume set to ${Math.round(this.masterVolume*100)}%`)}isEnabled(){try{const e=localStorage.getItem("aq:settings");if(e){const t=JSON.parse(e);if(t.state?.soundsEnabled!==void 0)return t.state.soundsEnabled}}catch(e){console.warn("Failed to read settings store for sound enabled state:",e)}return this.enabled}getMasterVolume(){return this.masterVolume}playHover(){this.play("hover")}playClick(){this.play("click")}playTaskComplete(){this.play("taskComplete")}playLevelUp(){this.play("levelUp",{delay:500})}playBadgeEarned(){this.play("badgeEarned",{delay:300})}setBackgroundMusicEnabled(e){console.log(" setBackgroundMusicEnabled called:",{enabled:e,previousState:this.backgroundMusicEnabled,overallSoundsEnabled:this.enabled,hasBackgroundMusic:!!this.backgroundMusic,currentlyPlaying:this.backgroundMusic?!this.backgroundMusic.paused:!1}),this.backgroundMusicEnabled=e,this.saveSettings(),e&&this.enabled?(console.log(" Starting background music..."),this.playBackgroundMusic()):(console.log(" Pausing background music..."),this.pauseBackgroundMusic()),console.log(` Background music ${e?"enabled":"disabled"}`)}setBackgroundMusicVolume(e){this.backgroundMusicVolume=Math.max(0,Math.min(1,e)),this.updateBackgroundMusicVolume(),this.saveSettings(),console.log(` Background music volume set to ${Math.round(this.backgroundMusicVolume*100)}%`)}isBackgroundMusicEnabled(){return this.backgroundMusicEnabled}getBackgroundMusicVolume(){return this.backgroundMusicVolume}toggleBackgroundMusic(){this.setBackgroundMusicEnabled(!this.backgroundMusicEnabled)}}const sr=new uE,Vk=r=>typeof r=="boolean"?`${r}`:r===0?"0":r,Fk=Z1,Dg=(r,e)=>t=>{var n;if(e?.variants==null)return Fk(r,t?.class,t?.className);const{variants:s,defaultVariants:l}=e,c=Object.keys(s).map(m=>{const p=t?.[m],x=l?.[m];if(p===null)return null;const b=Vk(p)||Vk(x);return s[m][b]}),u=t&&Object.entries(t).reduce((m,p)=>{let[x,b]=p;return b===void 0||(m[x]=b),m},{}),h=e==null||(n=e.compoundVariants)===null||n===void 0?void 0:n.reduce((m,p)=>{let{class:x,className:b,...v}=p;return Object.entries(v).every(k=>{let[w,S]=k;return Array.isArray(S)?S.includes({...l,...u}[w]):{...l,...u}[w]===S})?[...m,x,b]:m},[]);return Fk(r,c,h,t?.class,t?.className)},fE=Dg("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),K=M.forwardRef(({className:r,variant:e,size:t,asChild:n=!1,soundEnabled:s=!0,onMouseEnter:l,onClick:c,...u},h)=>{const m=n?j3:"button",p=b=>{s&&sr.playHover(),l?.(b)},x=b=>{s&&sr.playClick(),c?.(b)};return i.jsx(m,{className:lt(fE({variant:e,size:t,className:r})),ref:h,onMouseEnter:p,onClick:x,...u})});K.displayName="Button";const Ne=M.forwardRef(({className:r,...e},t)=>i.jsx("div",{ref:t,className:lt("rounded-xl border bg-card text-card-foreground shadow",r),...e}));Ne.displayName="Card";const qr=M.forwardRef(({className:r,...e},t)=>i.jsx("div",{ref:t,className:lt("flex flex-col space-y-1.5 p-6",r),...e}));qr.displayName="CardHeader";const sn=M.forwardRef(({className:r,...e},t)=>i.jsx("div",{ref:t,className:lt("font-semibold leading-none tracking-tight",r),...e}));sn.displayName="CardTitle";const hE=M.forwardRef(({className:r,...e},t)=>i.jsx("div",{ref:t,className:lt("text-sm text-muted-foreground",r),...e}));hE.displayName="CardDescription";const je=M.forwardRef(({className:r,...e},t)=>i.jsx("div",{ref:t,className:lt("p-6 pt-0",r),...e}));je.displayName="CardContent";const mE=M.forwardRef(({className:r,...e},t)=>i.jsx("div",{ref:t,className:lt("flex items-center p-6 pt-0",r),...e}));mE.displayName="CardFooter";const cc=An((r,e)=>({notifications:[],addNotification:t=>{console.log(" Adding notification to store:",t);const n=crypto.randomUUID(),s={...t,id:n,timestamp:Date.now(),duration:t.duration||4e3};console.log(" Complete notification object:",s),r(l=>{console.log(" Current notifications before add:",l.notifications.length);const c={notifications:[...l.notifications,s]};return console.log(" New notifications array length:",c.notifications.length),c}),console.log(" Store state after add:",e().notifications.length),setTimeout(()=>{e().removeNotification(n)},s.duration)},removeNotification:t=>r(n=>({notifications:n.notifications.filter(s=>s.id!==t)})),clearAll:()=>r({notifications:[]})})),pE=(r,e)=>({type:"level_up",title:"Level Up!",description:`You've reached Level ${r}!`,icon:"",level:r,xpGained:e,duration:5e3}),gE=(r,e,t)=>({type:"badge_earned",title:"Badge Earned!",description:`You've unlocked "${r}"!`,icon:e,badgeId:t,duration:5e3}),xE=(r,e)=>({type:"task_completed",title:e?"Task Completed Early!":"Task Completed!",description:`Great job! +${r} XP${e?" (Early bonus!)":""}`,icon:e?"":"",xpGained:r,duration:3e3}),bE=(r,e)=>({type:"quest_completed",title:"Quest Completed!",description:`"${r}" - +${e} XP`,icon:"",xpGained:e,duration:4e3}),yE=r=>{switch(r){case"level_up":return"levelUp";case"badge_earned":return"badgeEarned";case"task_completed":case"quest_completed":return"taskComplete";default:return"taskComplete"}};function vE({notification:r,onClose:e}){M.useEffect(()=>{const l=yE(r.type);sr.play(l),console.log(" Playing notification sound:",l,"for notification:",r.type)},[r.type]);const t=()=>{if(r.icon)return r.icon;switch(r.type){case"level_up":return i.jsx(oa,{className:"h-6 w-6 text-yellow-500"});case"badge_earned":return i.jsx(wo,{className:"h-6 w-6 text-purple-500"});case"task_completed":return i.jsx(Ll,{className:"h-6 w-6 text-green-500"});case"quest_completed":return i.jsx(ql,{className:"h-6 w-6 text-blue-500"});default:return i.jsx(oa,{className:"h-6 w-6 text-gray-500"})}},n=()=>{switch(r.type){case"level_up":return"from-yellow-500/20 to-orange-500/20 dark:from-yellow-400/20 dark:to-orange-400/20";case"badge_earned":return"from-purple-500/20 to-pink-500/20 dark:from-purple-400/20 dark:to-pink-400/20";case"task_completed":return"from-green-500/20 to-emerald-500/20 dark:from-green-400/20 dark:to-emerald-400/20";case"quest_completed":return"from-blue-500/20 to-indigo-500/20 dark:from-blue-400/20 dark:to-indigo-400/20";default:return"from-gray-500/20 to-gray-600/20 dark:from-gray-400/20 dark:to-gray-500/20"}},s=()=>{switch(r.type){case"level_up":return"ring-yellow-200/50 dark:ring-yellow-400/30";case"badge_earned":return"ring-purple-200/50 dark:ring-purple-400/30";case"task_completed":return"ring-green-200/50 dark:ring-green-400/30";case"quest_completed":return"ring-blue-200/50 dark:ring-blue-400/30";default:return"ring-gray-200/50 dark:ring-gray-400/30"}};return i.jsx(et.div,{initial:{opacity:0,scale:.8,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:-20},transition:{type:"spring",stiffness:300,damping:25,duration:.4},className:"w-full max-w-sm",children:i.jsx(Ne,{className:`border-0 shadow-2xl backdrop-blur-xl bg-gradient-to-br ${n()} 
                        ring-2 ${s()} hover:shadow-3xl transition-all duration-300
                        hover:scale-[1.02] active:scale-[0.98]`,children:i.jsx(je,{className:"p-4",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(et.div,{initial:{rotate:0},animate:{rotate:[0,-10,10,-5,5,0]},transition:{duration:.6,delay:.2},className:"flex-shrink-0 p-2 rounded-full bg-white/20 dark:bg-black/20 backdrop-blur-sm",children:typeof r.icon=="string"?i.jsx("span",{className:"text-2xl",children:r.icon}):t()}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx(et.h3,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1},className:"font-bold text-sm text-gray-900 dark:text-gray-100 mb-1",children:r.title}),i.jsx(et.p,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.2},className:"text-xs text-gray-700 dark:text-gray-300 leading-relaxed",children:r.description}),r.xpGained&&i.jsxs(et.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.3},className:"mt-2 inline-flex items-center gap-1 px-2 py-1 rounded-full bg-white/30 dark:bg-black/30 backdrop-blur-sm",children:[i.jsx(ql,{className:"h-3 w-3 text-yellow-600 dark:text-yellow-400"}),i.jsxs("span",{className:"text-xs font-semibold text-gray-900 dark:text-gray-100",children:["+",r.xpGained," XP"]})]})]}),i.jsx(K,{variant:"ghost",size:"sm",onClick:()=>e(r.id),className:"h-6 w-6 p-0 rounded-full hover:bg-white/20 dark:hover:bg-black/20 transition-colors duration-200",children:i.jsx(Qc,{className:"h-3 w-3"})})]})})})})}function kE({notification:r,onClose:e}){const t=()=>{if(r.icon)return r.icon;switch(r.type){case"level_up":return i.jsx(oa,{className:"h-12 w-12 text-yellow-500"});case"badge_earned":return i.jsx(wo,{className:"h-12 w-12 text-purple-500"});default:return i.jsx(oa,{className:"h-12 w-12 text-gray-500"})}},n=()=>{switch(r.type){case"level_up":return"from-yellow-400/30 via-orange-500/30 to-red-500/30";case"badge_earned":return"from-purple-400/30 via-pink-500/30 to-indigo-500/30";default:return"from-gray-400/30 via-gray-500/30 to-gray-600/30"}};return i.jsx(et.div,{initial:{opacity:0,scale:.8,rotateY:-15},animate:{opacity:1,scale:1,rotateY:0},exit:{opacity:0,scale:.8,rotateY:15},transition:{type:"spring",stiffness:300,damping:25,duration:.8},className:"w-full max-w-md mx-4",children:i.jsxs(Ne,{className:`border-2 shadow-2xl backdrop-blur-3xl bg-gradient-to-br ${n()}
                        border-white/30 dark:border-gray-600/30 hover:shadow-3xl transition-all duration-500
                        hover:scale-[1.02] relative overflow-hidden`,children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 via-transparent to-white/5 pointer-events-none"}),i.jsxs(je,{className:"p-8 text-center relative",children:[i.jsx(et.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{type:"spring",stiffness:400,damping:20,delay:.2},className:"flex justify-center mb-6",children:i.jsx("div",{className:"p-6 rounded-full bg-white/20 dark:bg-black/20 backdrop-blur-sm shadow-2xl",children:typeof r.icon=="string"?i.jsx("span",{className:"text-6xl",children:r.icon}):t()})}),i.jsx(et.h2,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"text-3xl font-bold text-white mb-3 drop-shadow-lg",children:r.title}),i.jsx(et.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"text-lg text-white/90 mb-6 leading-relaxed drop-shadow-md",children:r.description}),r.xpGained&&i.jsxs(et.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5},className:"mb-6 inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/30 dark:bg-black/30 backdrop-blur-sm shadow-lg",children:[i.jsx(ql,{className:"h-5 w-5 text-yellow-300"}),i.jsxs("span",{className:"text-xl font-bold text-white drop-shadow-md",children:["+",r.xpGained," XP"]})]}),r.type==="level_up"&&r.level&&i.jsxs(et.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.6},className:"mb-6",children:[i.jsxs("div",{className:"text-6xl font-bold text-white drop-shadow-lg mb-2",children:["Level ",r.level]}),i.jsx("div",{className:"text-white/80 text-lg",children:"You've reached a new level!"})]}),i.jsx(et.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:i.jsx(K,{variant:"secondary",onClick:()=>e(r.id),className:"bg-white/20 hover:bg-white/30 text-white border-white/30 hover:border-white/50 backdrop-blur-sm transition-all duration-200 px-8 py-3 text-lg font-semibold",children:"Awesome!"})})]})]})})}function wE(){const{notifications:r,removeNotification:e}=cc();console.log(" NotificationSystem render - total notifications:",r.length),console.log(" All notifications:",r);const t=r.filter(s=>s.type==="task_completed"||s.type==="quest_completed"),n=r.filter(s=>s.type==="level_up"||s.type==="badge_earned");return console.log(" Corner notifications:",t.length),console.log(" Center notifications:",n.length),i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"fixed top-4 right-4 space-y-3 pointer-events-none",style:{zIndex:5e4},children:i.jsx(Yl,{mode:"popLayout",children:t.map(s=>i.jsx("div",{className:"pointer-events-auto",children:i.jsx(vE,{notification:s,onClose:e})},s.id))})}),i.jsx("div",{className:"fixed inset-0 pointer-events-none flex items-center justify-center",style:{zIndex:50001},children:i.jsx(Yl,{mode:"popLayout",children:n.map(s=>i.jsx(et.div,{initial:{opacity:0,scale:.5,y:50},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.5,y:-50},transition:{type:"spring",stiffness:400,damping:30,duration:.6},className:"pointer-events-auto mb-8",children:i.jsx(kE,{notification:s,onClose:e})},s.id))})})]})}function at(r,e,{checkForDefaultPrevented:t=!0}={}){return function(s){if(r?.(s),t===!1||!s.defaultPrevented)return e?.(s)}}function SE(r,e){const t=M.createContext(e),n=l=>{const{children:c,...u}=l,h=M.useMemo(()=>u,Object.values(u));return i.jsx(t.Provider,{value:h,children:c})};n.displayName=r+"Provider";function s(l){const c=M.useContext(t);if(c)return c;if(e!==void 0)return e;throw new Error(`\`${l}\` must be used within \`${r}\``)}return[n,s]}function ri(r,e=[]){let t=[];function n(l,c){const u=M.createContext(c),h=t.length;t=[...t,c];const m=x=>{const{scope:b,children:v,...k}=x,w=b?.[r]?.[h]||u,S=M.useMemo(()=>k,Object.values(k));return i.jsx(w.Provider,{value:S,children:v})};m.displayName=l+"Provider";function p(x,b){const v=b?.[r]?.[h]||u,k=M.useContext(v);if(k)return k;if(c!==void 0)return c;throw new Error(`\`${x}\` must be used within \`${l}\``)}return[m,p]}const s=()=>{const l=t.map(c=>M.createContext(c));return function(u){const h=u?.[r]||l;return M.useMemo(()=>({[`__scope${r}`]:{...u,[r]:h}}),[u,h])}};return s.scopeName=r,[n,NE(s,...e)]}function NE(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const n=r.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(l){const c=n.reduce((u,{useScope:h,scopeName:m})=>{const x=h(l)[`__scope${m}`];return{...u,...x}},{});return M.useMemo(()=>({[`__scope${e.scopeName}`]:c}),[c])}};return t.scopeName=e.scopeName,t}var Ar=globalThis?.document?M.useLayoutEffect:()=>{},jE=Q1[" useId ".trim().toString()]||(()=>{}),CE=0;function _l(r){const[e,t]=M.useState(jE());return Ar(()=>{t(n=>n??String(CE++))},[r]),r||(e?`radix-${e}`:"")}var TE=Q1[" useInsertionEffect ".trim().toString()]||Ar;function Bc({prop:r,defaultProp:e,onChange:t=()=>{},caller:n}){const[s,l,c]=ME({defaultProp:e,onChange:t}),u=r!==void 0,h=u?r:s;{const p=M.useRef(r!==void 0);M.useEffect(()=>{const x=p.current;x!==u&&console.warn(`${n} is changing from ${x?"controlled":"uncontrolled"} to ${u?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),p.current=u},[u,n])}const m=M.useCallback(p=>{if(u){const x=EE(p)?p(r):p;x!==r&&c.current?.(x)}else l(p)},[u,r,l,c]);return[h,m]}function ME({defaultProp:r,onChange:e}){const[t,n]=M.useState(r),s=M.useRef(t),l=M.useRef(e);return TE(()=>{l.current=e},[e]),M.useEffect(()=>{s.current!==t&&(l.current?.(t),s.current=t)},[t,s]),[t,n,l]}function EE(r){return typeof r=="function"}var AE=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],rt=AE.reduce((r,e)=>{const t=Gl(`Primitive.${e}`),n=M.forwardRef((s,l)=>{const{asChild:c,...u}=s,h=c?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(h,{...u,ref:l})});return n.displayName=`Primitive.${e}`,{...r,[e]:n}},{});function DE(r,e){r&&Wf.flushSync(()=>r.dispatchEvent(e))}function Mo(r){const e=M.useRef(r);return M.useEffect(()=>{e.current=r}),M.useMemo(()=>(...t)=>e.current?.(...t),[])}function OE(r,e=globalThis?.document){const t=Mo(r);M.useEffect(()=>{const n=s=>{s.key==="Escape"&&t(s)};return e.addEventListener("keydown",n,{capture:!0}),()=>e.removeEventListener("keydown",n,{capture:!0})},[t,e])}var RE="DismissableLayer",zp="dismissableLayer.update",zE="dismissableLayer.pointerDownOutside",LE="dismissableLayer.focusOutside",Yk,uS=M.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Og=M.forwardRef((r,e)=>{const{disableOutsidePointerEvents:t=!1,onEscapeKeyDown:n,onPointerDownOutside:s,onFocusOutside:l,onInteractOutside:c,onDismiss:u,...h}=r,m=M.useContext(uS),[p,x]=M.useState(null),b=p?.ownerDocument??globalThis?.document,[,v]=M.useState({}),k=ft(e,I=>x(I)),w=Array.from(m.layers),[S]=[...m.layersWithOutsidePointerEventsDisabled].slice(-1),N=w.indexOf(S),T=p?w.indexOf(p):-1,C=m.layersWithOutsidePointerEventsDisabled.size>0,D=T>=N,A=PE(I=>{const $=I.target,ae=[...m.branches].some(le=>le.contains($));!D||ae||(s?.(I),c?.(I),I.defaultPrevented||u?.())},b),Y=_E(I=>{const $=I.target;[...m.branches].some(le=>le.contains($))||(l?.(I),c?.(I),I.defaultPrevented||u?.())},b);return OE(I=>{T===m.layers.size-1&&(n?.(I),!I.defaultPrevented&&u&&(I.preventDefault(),u()))},b),M.useEffect(()=>{if(p)return t&&(m.layersWithOutsidePointerEventsDisabled.size===0&&(Yk=b.body.style.pointerEvents,b.body.style.pointerEvents="none"),m.layersWithOutsidePointerEventsDisabled.add(p)),m.layers.add(p),qk(),()=>{t&&m.layersWithOutsidePointerEventsDisabled.size===1&&(b.body.style.pointerEvents=Yk)}},[p,b,t,m]),M.useEffect(()=>()=>{p&&(m.layers.delete(p),m.layersWithOutsidePointerEventsDisabled.delete(p),qk())},[p,m]),M.useEffect(()=>{const I=()=>v({});return document.addEventListener(zp,I),()=>document.removeEventListener(zp,I)},[]),i.jsx(rt.div,{...h,ref:k,style:{pointerEvents:C?D?"auto":"none":void 0,...r.style},onFocusCapture:at(r.onFocusCapture,Y.onFocusCapture),onBlurCapture:at(r.onBlurCapture,Y.onBlurCapture),onPointerDownCapture:at(r.onPointerDownCapture,A.onPointerDownCapture)})});Og.displayName=RE;var BE="DismissableLayerBranch",IE=M.forwardRef((r,e)=>{const t=M.useContext(uS),n=M.useRef(null),s=ft(e,n);return M.useEffect(()=>{const l=n.current;if(l)return t.branches.add(l),()=>{t.branches.delete(l)}},[t.branches]),i.jsx(rt.div,{...r,ref:s})});IE.displayName=BE;function PE(r,e=globalThis?.document){const t=Mo(r),n=M.useRef(!1),s=M.useRef(()=>{});return M.useEffect(()=>{const l=u=>{if(u.target&&!n.current){let h=function(){fS(zE,t,m,{discrete:!0})};const m={originalEvent:u};u.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=h,e.addEventListener("click",s.current,{once:!0})):h()}else e.removeEventListener("click",s.current);n.current=!1},c=window.setTimeout(()=>{e.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(c),e.removeEventListener("pointerdown",l),e.removeEventListener("click",s.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function _E(r,e=globalThis?.document){const t=Mo(r),n=M.useRef(!1);return M.useEffect(()=>{const s=l=>{l.target&&!n.current&&fS(LE,t,{originalEvent:l},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function qk(){const r=new CustomEvent(zp);document.dispatchEvent(r)}function fS(r,e,t,{discrete:n}){const s=t.originalEvent.target,l=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:t});e&&s.addEventListener(r,e,{once:!0}),n?DE(s,l):s.dispatchEvent(l)}var _m="focusScope.autoFocusOnMount",Hm="focusScope.autoFocusOnUnmount",Gk={bubbles:!1,cancelable:!0},HE="FocusScope",Rg=M.forwardRef((r,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:s,onUnmountAutoFocus:l,...c}=r,[u,h]=M.useState(null),m=Mo(s),p=Mo(l),x=M.useRef(null),b=ft(e,w=>h(w)),v=M.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;M.useEffect(()=>{if(n){let w=function(C){if(v.paused||!u)return;const D=C.target;u.contains(D)?x.current=D:ks(x.current,{select:!0})},S=function(C){if(v.paused||!u)return;const D=C.relatedTarget;D!==null&&(u.contains(D)||ks(x.current,{select:!0}))},N=function(C){if(document.activeElement===document.body)for(const A of C)A.removedNodes.length>0&&ks(u)};document.addEventListener("focusin",w),document.addEventListener("focusout",S);const T=new MutationObserver(N);return u&&T.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",S),T.disconnect()}}},[n,u,v.paused]),M.useEffect(()=>{if(u){Wk.add(v);const w=document.activeElement;if(!u.contains(w)){const N=new CustomEvent(_m,Gk);u.addEventListener(_m,m),u.dispatchEvent(N),N.defaultPrevented||($E(qE(hS(u)),{select:!0}),document.activeElement===w&&ks(u))}return()=>{u.removeEventListener(_m,m),setTimeout(()=>{const N=new CustomEvent(Hm,Gk);u.addEventListener(Hm,p),u.dispatchEvent(N),N.defaultPrevented||ks(w??document.body,{select:!0}),u.removeEventListener(Hm,p),Wk.remove(v)},0)}}},[u,m,p,v]);const k=M.useCallback(w=>{if(!t&&!n||v.paused)return;const S=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,N=document.activeElement;if(S&&N){const T=w.currentTarget,[C,D]=UE(T);C&&D?!w.shiftKey&&N===D?(w.preventDefault(),t&&ks(C,{select:!0})):w.shiftKey&&N===C&&(w.preventDefault(),t&&ks(D,{select:!0})):N===T&&w.preventDefault()}},[t,n,v.paused]);return i.jsx(rt.div,{tabIndex:-1,...c,ref:b,onKeyDown:k})});Rg.displayName=HE;function $E(r,{select:e=!1}={}){const t=document.activeElement;for(const n of r)if(ks(n,{select:e}),document.activeElement!==t)return}function UE(r){const e=hS(r),t=Kk(e,r),n=Kk(e.reverse(),r);return[t,n]}function hS(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const s=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||s?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Kk(r,e){for(const t of r)if(!VE(t,{upTo:e}))return t}function VE(r,{upTo:e}){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e!==void 0&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function FE(r){return r instanceof HTMLInputElement&&"select"in r}function ks(r,{select:e=!1}={}){if(r&&r.focus){const t=document.activeElement;r.focus({preventScroll:!0}),r!==t&&FE(r)&&e&&r.select()}}var Wk=YE();function YE(){let r=[];return{add(e){const t=r[0];e!==t&&t?.pause(),r=Xk(r,e),r.unshift(e)},remove(e){r=Xk(r,e),r[0]?.resume()}}}function Xk(r,e){const t=[...r],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function qE(r){return r.filter(e=>e.tagName!=="A")}var GE="Portal",zg=M.forwardRef((r,e)=>{const{container:t,...n}=r,[s,l]=M.useState(!1);Ar(()=>l(!0),[]);const c=t||s&&globalThis?.document?.body;return c?J1.createPortal(i.jsx(rt.div,{...n,ref:e}),c):null});zg.displayName=GE;function KE(r,e){return M.useReducer((t,n)=>e[t][n]??t,r)}var Zf=r=>{const{present:e,children:t}=r,n=WE(e),s=typeof t=="function"?t({present:n.isPresent}):M.Children.only(t),l=ft(n.ref,XE(s));return typeof t=="function"||n.isPresent?M.cloneElement(s,{ref:l}):null};Zf.displayName="Presence";function WE(r){const[e,t]=M.useState(),n=M.useRef(null),s=M.useRef(r),l=M.useRef("none"),c=r?"mounted":"unmounted",[u,h]=KE(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return M.useEffect(()=>{const m=xu(n.current);l.current=u==="mounted"?m:"none"},[u]),Ar(()=>{const m=n.current,p=s.current;if(p!==r){const b=l.current,v=xu(m);r?h("MOUNT"):v==="none"||m?.display==="none"?h("UNMOUNT"):h(p&&b!==v?"ANIMATION_OUT":"UNMOUNT"),s.current=r}},[r,h]),Ar(()=>{if(e){let m;const p=e.ownerDocument.defaultView??window,x=v=>{const w=xu(n.current).includes(CSS.escape(v.animationName));if(v.target===e&&w&&(h("ANIMATION_END"),!s.current)){const S=e.style.animationFillMode;e.style.animationFillMode="forwards",m=p.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=S)})}},b=v=>{v.target===e&&(l.current=xu(n.current))};return e.addEventListener("animationstart",b),e.addEventListener("animationcancel",x),e.addEventListener("animationend",x),()=>{p.clearTimeout(m),e.removeEventListener("animationstart",b),e.removeEventListener("animationcancel",x),e.removeEventListener("animationend",x)}}else h("ANIMATION_END")},[e,h]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:M.useCallback(m=>{n.current=m?getComputedStyle(m):null,t(m)},[])}}function xu(r){return r?.animationName||"none"}function XE(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var $m=0;function mS(){M.useEffect(()=>{const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",r[0]??Qk()),document.body.insertAdjacentElement("beforeend",r[1]??Qk()),$m++,()=>{$m===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),$m--}},[])}function Qk(){const r=document.createElement("span");return r.setAttribute("data-radix-focus-guard",""),r.tabIndex=0,r.style.outline="none",r.style.opacity="0",r.style.position="fixed",r.style.pointerEvents="none",r}var sa=function(){return sa=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e},sa.apply(this,arguments)};function pS(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(r);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(r,n[s])&&(t[n[s]]=r[n[s]]);return t}function QE(r,e,t){if(t||arguments.length===2)for(var n=0,s=e.length,l;n<s;n++)(l||!(n in e))&&(l||(l=Array.prototype.slice.call(e,0,n)),l[n]=e[n]);return r.concat(l||Array.prototype.slice.call(e))}var _u="right-scroll-bar-position",Hu="width-before-scroll-bar",JE="with-scroll-bars-hidden",ZE="--removed-body-scroll-bar-size";function Um(r,e){return typeof r=="function"?r(e):r&&(r.current=e),r}function eA(r,e){var t=M.useState(function(){return{value:r,callback:e,facade:{get current(){return t.value},set current(n){var s=t.value;s!==n&&(t.value=n,t.callback(n,s))}}}})[0];return t.callback=e,t.facade}var tA=typeof window<"u"?M.useLayoutEffect:M.useEffect,Jk=new WeakMap;function rA(r,e){var t=eA(null,function(n){return r.forEach(function(s){return Um(s,n)})});return tA(function(){var n=Jk.get(t);if(n){var s=new Set(n),l=new Set(r),c=t.current;s.forEach(function(u){l.has(u)||Um(u,null)}),l.forEach(function(u){s.has(u)||Um(u,c)})}Jk.set(t,r)},[r]),t}function nA(r){return r}function aA(r,e){e===void 0&&(e=nA);var t=[],n=!1,s={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:r},useMedium:function(l){var c=e(l,n);return t.push(c),function(){t=t.filter(function(u){return u!==c})}},assignSyncMedium:function(l){for(n=!0;t.length;){var c=t;t=[],c.forEach(l)}t={push:function(u){return l(u)},filter:function(){return t}}},assignMedium:function(l){n=!0;var c=[];if(t.length){var u=t;t=[],u.forEach(l),c=t}var h=function(){var p=c;c=[],p.forEach(l)},m=function(){return Promise.resolve().then(h)};m(),t={push:function(p){c.push(p),m()},filter:function(p){return c=c.filter(p),t}}}};return s}function sA(r){r===void 0&&(r={});var e=aA(null);return e.options=sa({async:!0,ssr:!1},r),e}var gS=function(r){var e=r.sideCar,t=pS(r,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return M.createElement(n,sa({},t))};gS.isSideCarExport=!0;function oA(r,e){return r.useMedium(e),gS}var xS=sA(),Vm=function(){},eh=M.forwardRef(function(r,e){var t=M.useRef(null),n=M.useState({onScrollCapture:Vm,onWheelCapture:Vm,onTouchMoveCapture:Vm}),s=n[0],l=n[1],c=r.forwardProps,u=r.children,h=r.className,m=r.removeScrollBar,p=r.enabled,x=r.shards,b=r.sideCar,v=r.noRelative,k=r.noIsolation,w=r.inert,S=r.allowPinchZoom,N=r.as,T=N===void 0?"div":N,C=r.gapMode,D=pS(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=b,Y=rA([t,e]),I=sa(sa({},D),s);return M.createElement(M.Fragment,null,p&&M.createElement(A,{sideCar:xS,removeScrollBar:m,shards:x,noRelative:v,noIsolation:k,inert:w,setCallbacks:l,allowPinchZoom:!!S,lockRef:t,gapMode:C}),c?M.cloneElement(M.Children.only(u),sa(sa({},I),{ref:Y})):M.createElement(T,sa({},I,{className:h,ref:Y}),u))});eh.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};eh.classNames={fullWidth:Hu,zeroRight:_u};var lA=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function iA(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var e=lA();return e&&r.setAttribute("nonce",e),r}function cA(r,e){r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}function dA(r){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(r)}var uA=function(){var r=0,e=null;return{add:function(t){r==0&&(e=iA())&&(cA(e,t),dA(e)),r++},remove:function(){r--,!r&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},fA=function(){var r=uA();return function(e,t){M.useEffect(function(){return r.add(e),function(){r.remove()}},[e&&t])}},bS=function(){var r=fA(),e=function(t){var n=t.styles,s=t.dynamic;return r(n,s),null};return e},hA={left:0,top:0,right:0,gap:0},Fm=function(r){return parseInt(r||"",10)||0},mA=function(r){var e=window.getComputedStyle(document.body),t=e[r==="padding"?"paddingLeft":"marginLeft"],n=e[r==="padding"?"paddingTop":"marginTop"],s=e[r==="padding"?"paddingRight":"marginRight"];return[Fm(t),Fm(n),Fm(s)]},pA=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return hA;var e=mA(r),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},gA=bS(),Hl="data-scroll-locked",xA=function(r,e,t,n){var s=r.left,l=r.top,c=r.right,u=r.gap;return t===void 0&&(t="margin"),`
  .`.concat(JE,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(u,"px ").concat(n,`;
  }
  body[`).concat(Hl,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(u,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(_u,` {
    right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(Hu,` {
    margin-right: `).concat(u,"px ").concat(n,`;
  }
  
  .`).concat(_u," .").concat(_u,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Hu," .").concat(Hu,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Hl,`] {
    `).concat(ZE,": ").concat(u,`px;
  }
`)},Zk=function(){var r=parseInt(document.body.getAttribute(Hl)||"0",10);return isFinite(r)?r:0},bA=function(){M.useEffect(function(){return document.body.setAttribute(Hl,(Zk()+1).toString()),function(){var r=Zk()-1;r<=0?document.body.removeAttribute(Hl):document.body.setAttribute(Hl,r.toString())}},[])},yA=function(r){var e=r.noRelative,t=r.noImportant,n=r.gapMode,s=n===void 0?"margin":n;bA();var l=M.useMemo(function(){return pA(s)},[s]);return M.createElement(gA,{styles:xA(l,!e,s,t?"":"!important")})},Lp=!1;if(typeof window<"u")try{var bu=Object.defineProperty({},"passive",{get:function(){return Lp=!0,!0}});window.addEventListener("test",bu,bu),window.removeEventListener("test",bu,bu)}catch{Lp=!1}var Nl=Lp?{passive:!1}:!1,vA=function(r){return r.tagName==="TEXTAREA"},yS=function(r,e){if(!(r instanceof Element))return!1;var t=window.getComputedStyle(r);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!vA(r)&&t[e]==="visible")},kA=function(r){return yS(r,"overflowY")},wA=function(r){return yS(r,"overflowX")},ew=function(r,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var s=vS(r,n);if(s){var l=kS(r,n),c=l[1],u=l[2];if(c>u)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},SA=function(r){var e=r.scrollTop,t=r.scrollHeight,n=r.clientHeight;return[e,t,n]},NA=function(r){var e=r.scrollLeft,t=r.scrollWidth,n=r.clientWidth;return[e,t,n]},vS=function(r,e){return r==="v"?kA(e):wA(e)},kS=function(r,e){return r==="v"?SA(e):NA(e)},jA=function(r,e){return r==="h"&&e==="rtl"?-1:1},CA=function(r,e,t,n,s){var l=jA(r,window.getComputedStyle(e).direction),c=l*n,u=t.target,h=e.contains(u),m=!1,p=c>0,x=0,b=0;do{if(!u)break;var v=kS(r,u),k=v[0],w=v[1],S=v[2],N=w-S-l*k;(k||N)&&vS(r,u)&&(x+=N,b+=k);var T=u.parentNode;u=T&&T.nodeType===Node.DOCUMENT_FRAGMENT_NODE?T.host:T}while(!h&&u!==document.body||h&&(e.contains(u)||e===u));return(p&&Math.abs(x)<1||!p&&Math.abs(b)<1)&&(m=!0),m},yu=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},tw=function(r){return[r.deltaX,r.deltaY]},rw=function(r){return r&&"current"in r?r.current:r},TA=function(r,e){return r[0]===e[0]&&r[1]===e[1]},MA=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},EA=0,jl=[];function AA(r){var e=M.useRef([]),t=M.useRef([0,0]),n=M.useRef(),s=M.useState(EA++)[0],l=M.useState(bS)[0],c=M.useRef(r);M.useEffect(function(){c.current=r},[r]),M.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(s));var w=QE([r.lockRef.current],(r.shards||[]).map(rw),!0).filter(Boolean);return w.forEach(function(S){return S.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),w.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(s))})}}},[r.inert,r.lockRef.current,r.shards]);var u=M.useCallback(function(w,S){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!c.current.allowPinchZoom;var N=yu(w),T=t.current,C="deltaX"in w?w.deltaX:T[0]-N[0],D="deltaY"in w?w.deltaY:T[1]-N[1],A,Y=w.target,I=Math.abs(C)>Math.abs(D)?"h":"v";if("touches"in w&&I==="h"&&Y.type==="range")return!1;var $=ew(I,Y);if(!$)return!0;if($?A=I:(A=I==="v"?"h":"v",$=ew(I,Y)),!$)return!1;if(!n.current&&"changedTouches"in w&&(C||D)&&(n.current=A),!A)return!0;var ae=n.current||A;return CA(ae,S,w,ae==="h"?C:D)},[]),h=M.useCallback(function(w){var S=w;if(!(!jl.length||jl[jl.length-1]!==l)){var N="deltaY"in S?tw(S):yu(S),T=e.current.filter(function(A){return A.name===S.type&&(A.target===S.target||S.target===A.shadowParent)&&TA(A.delta,N)})[0];if(T&&T.should){S.cancelable&&S.preventDefault();return}if(!T){var C=(c.current.shards||[]).map(rw).filter(Boolean).filter(function(A){return A.contains(S.target)}),D=C.length>0?u(S,C[0]):!c.current.noIsolation;D&&S.cancelable&&S.preventDefault()}}},[]),m=M.useCallback(function(w,S,N,T){var C={name:w,delta:S,target:N,should:T,shadowParent:DA(N)};e.current.push(C),setTimeout(function(){e.current=e.current.filter(function(D){return D!==C})},1)},[]),p=M.useCallback(function(w){t.current=yu(w),n.current=void 0},[]),x=M.useCallback(function(w){m(w.type,tw(w),w.target,u(w,r.lockRef.current))},[]),b=M.useCallback(function(w){m(w.type,yu(w),w.target,u(w,r.lockRef.current))},[]);M.useEffect(function(){return jl.push(l),r.setCallbacks({onScrollCapture:x,onWheelCapture:x,onTouchMoveCapture:b}),document.addEventListener("wheel",h,Nl),document.addEventListener("touchmove",h,Nl),document.addEventListener("touchstart",p,Nl),function(){jl=jl.filter(function(w){return w!==l}),document.removeEventListener("wheel",h,Nl),document.removeEventListener("touchmove",h,Nl),document.removeEventListener("touchstart",p,Nl)}},[]);var v=r.removeScrollBar,k=r.inert;return M.createElement(M.Fragment,null,k?M.createElement(l,{styles:MA(s)}):null,v?M.createElement(yA,{noRelative:r.noRelative,gapMode:r.gapMode}):null)}function DA(r){for(var e=null;r!==null;)r instanceof ShadowRoot&&(e=r.host,r=r.host),r=r.parentNode;return e}const OA=oA(xS,AA);var Lg=M.forwardRef(function(r,e){return M.createElement(eh,sa({},r,{ref:e,sideCar:OA}))});Lg.classNames=eh.classNames;var RA=function(r){if(typeof document>"u")return null;var e=Array.isArray(r)?r[0]:r;return e.ownerDocument.body},Cl=new WeakMap,vu=new WeakMap,ku={},Ym=0,wS=function(r){return r&&(r.host||wS(r.parentNode))},zA=function(r,e){return e.map(function(t){if(r.contains(t))return t;var n=wS(t);return n&&r.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",r,". Doing nothing"),null)}).filter(function(t){return!!t})},LA=function(r,e,t,n){var s=zA(e,Array.isArray(r)?r:[r]);ku[t]||(ku[t]=new WeakMap);var l=ku[t],c=[],u=new Set,h=new Set(s),m=function(x){!x||u.has(x)||(u.add(x),m(x.parentNode))};s.forEach(m);var p=function(x){!x||h.has(x)||Array.prototype.forEach.call(x.children,function(b){if(u.has(b))p(b);else try{var v=b.getAttribute(n),k=v!==null&&v!=="false",w=(Cl.get(b)||0)+1,S=(l.get(b)||0)+1;Cl.set(b,w),l.set(b,S),c.push(b),w===1&&k&&vu.set(b,!0),S===1&&b.setAttribute(t,"true"),k||b.setAttribute(n,"true")}catch(N){console.error("aria-hidden: cannot operate on ",b,N)}})};return p(e),u.clear(),Ym++,function(){c.forEach(function(x){var b=Cl.get(x)-1,v=l.get(x)-1;Cl.set(x,b),l.set(x,v),b||(vu.has(x)||x.removeAttribute(n),vu.delete(x)),v||x.removeAttribute(t)}),Ym--,Ym||(Cl=new WeakMap,Cl=new WeakMap,vu=new WeakMap,ku={})}},SS=function(r,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(r)?r:[r]),s=RA(r);return s?(n.push.apply(n,Array.from(s.querySelectorAll("[aria-live], script"))),LA(n,s,t,"aria-hidden")):function(){return null}},th="Dialog",[NS,$B]=ri(th),[BA,Kn]=NS(th),jS=r=>{const{__scopeDialog:e,children:t,open:n,defaultOpen:s,onOpenChange:l,modal:c=!0}=r,u=M.useRef(null),h=M.useRef(null),[m,p]=Bc({prop:n,defaultProp:s??!1,onChange:l,caller:th});return i.jsx(BA,{scope:e,triggerRef:u,contentRef:h,contentId:_l(),titleId:_l(),descriptionId:_l(),open:m,onOpenChange:p,onOpenToggle:M.useCallback(()=>p(x=>!x),[p]),modal:c,children:t})};jS.displayName=th;var CS="DialogTrigger",IA=M.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=Kn(CS,t),l=ft(e,s.triggerRef);return i.jsx(rt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Pg(s.open),...n,ref:l,onClick:at(r.onClick,s.onOpenToggle)})});IA.displayName=CS;var Bg="DialogPortal",[PA,TS]=NS(Bg,{forceMount:void 0}),MS=r=>{const{__scopeDialog:e,forceMount:t,children:n,container:s}=r,l=Kn(Bg,e);return i.jsx(PA,{scope:e,forceMount:t,children:M.Children.map(n,c=>i.jsx(Zf,{present:t||l.open,children:i.jsx(zg,{asChild:!0,container:s,children:c})}))})};MS.displayName=Bg;var Xu="DialogOverlay",ES=M.forwardRef((r,e)=>{const t=TS(Xu,r.__scopeDialog),{forceMount:n=t.forceMount,...s}=r,l=Kn(Xu,r.__scopeDialog);return l.modal?i.jsx(Zf,{present:n||l.open,children:i.jsx(HA,{...s,ref:e})}):null});ES.displayName=Xu;var _A=Gl("DialogOverlay.RemoveScroll"),HA=M.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=Kn(Xu,t);return i.jsx(Lg,{as:_A,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(rt.div,{"data-state":Pg(s.open),...n,ref:e,style:{pointerEvents:"auto",...n.style}})})}),Eo="DialogContent",AS=M.forwardRef((r,e)=>{const t=TS(Eo,r.__scopeDialog),{forceMount:n=t.forceMount,...s}=r,l=Kn(Eo,r.__scopeDialog);return i.jsx(Zf,{present:n||l.open,children:l.modal?i.jsx($A,{...s,ref:e}):i.jsx(UA,{...s,ref:e})})});AS.displayName=Eo;var $A=M.forwardRef((r,e)=>{const t=Kn(Eo,r.__scopeDialog),n=M.useRef(null),s=ft(e,t.contentRef,n);return M.useEffect(()=>{const l=n.current;if(l)return SS(l)},[]),i.jsx(DS,{...r,ref:s,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:at(r.onCloseAutoFocus,l=>{l.preventDefault(),t.triggerRef.current?.focus()}),onPointerDownOutside:at(r.onPointerDownOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0;(c.button===2||u)&&l.preventDefault()}),onFocusOutside:at(r.onFocusOutside,l=>l.preventDefault())})}),UA=M.forwardRef((r,e)=>{const t=Kn(Eo,r.__scopeDialog),n=M.useRef(!1),s=M.useRef(!1);return i.jsx(DS,{...r,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{r.onCloseAutoFocus?.(l),l.defaultPrevented||(n.current||t.triggerRef.current?.focus(),l.preventDefault()),n.current=!1,s.current=!1},onInteractOutside:l=>{r.onInteractOutside?.(l),l.defaultPrevented||(n.current=!0,l.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const c=l.target;t.triggerRef.current?.contains(c)&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&s.current&&l.preventDefault()}})}),DS=M.forwardRef((r,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:s,onCloseAutoFocus:l,...c}=r,u=Kn(Eo,t),h=M.useRef(null),m=ft(e,h);return mS(),i.jsxs(i.Fragment,{children:[i.jsx(Rg,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:s,onUnmountAutoFocus:l,children:i.jsx(Og,{role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":Pg(u.open),...c,ref:m,onDismiss:()=>u.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(VA,{titleId:u.titleId}),i.jsx(YA,{contentRef:h,descriptionId:u.descriptionId})]})]})}),Ig="DialogTitle",OS=M.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=Kn(Ig,t);return i.jsx(rt.h2,{id:s.titleId,...n,ref:e})});OS.displayName=Ig;var RS="DialogDescription",zS=M.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=Kn(RS,t);return i.jsx(rt.p,{id:s.descriptionId,...n,ref:e})});zS.displayName=RS;var LS="DialogClose",BS=M.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,s=Kn(LS,t);return i.jsx(rt.button,{type:"button",...n,ref:e,onClick:at(r.onClick,()=>s.onOpenChange(!1))})});BS.displayName=LS;function Pg(r){return r?"open":"closed"}var IS="DialogTitleWarning",[UB,PS]=SE(IS,{contentName:Eo,titleName:Ig,docsSlug:"dialog"}),VA=({titleId:r})=>{const e=PS(IS),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return M.useEffect(()=>{r&&(document.getElementById(r)||console.error(t))},[t,r]),null},FA="DialogDescriptionWarning",YA=({contentRef:r,descriptionId:e})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${PS(FA).contentName}}.`;return M.useEffect(()=>{const s=r.current?.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(n))},[n,r,e]),null},qA=jS,GA=MS,_S=ES,HS=AS,$S=OS,US=zS,KA=BS;const wr=qA,WA=GA,VS=M.forwardRef(({className:r,...e},t)=>i.jsx(_S,{ref:t,className:lt("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...e}));VS.displayName=_S.displayName;const lr=M.forwardRef(({className:r,children:e,...t},n)=>i.jsxs(WA,{children:[i.jsx(VS,{}),i.jsxs(HS,{ref:n,className:lt("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...t,children:[e,i.jsxs(KA,{className:"absolute right-3.5 top-3.5 inline-flex h-8 w-8 items-center justify-center rounded-full border border-black/10 dark:border-white/10 bg-black/5 text-neutral-700 hover:bg-black/10 dark:bg-white/10 dark:text-neutral-200 dark:hover:bg-white/15 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-colors disabled:pointer-events-none",children:[i.jsx(Qc,{className:"h-4 w-4","aria-hidden":"true"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));lr.displayName=HS.displayName;const ir=({className:r,...e})=>i.jsx("div",{className:lt("flex flex-col space-y-1.5 text-center sm:text-left",r),...e});ir.displayName="DialogHeader";const Sr=({className:r,...e})=>i.jsx("div",{className:lt("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",r),...e});Sr.displayName="DialogFooter";const cr=M.forwardRef(({className:r,...e},t)=>i.jsx($S,{ref:t,className:lt("text-lg font-semibold leading-none tracking-tight",r),...e}));cr.displayName=$S.displayName;const _g=M.forwardRef(({className:r,...e},t)=>i.jsx(US,{ref:t,className:lt("text-sm text-muted-foreground",r),...e}));_g.displayName=US.displayName;function XA(){["aq:settings","aq:theme","aq:academic-plan","aq:schedule","aq:tasks","aq:scholarships","aq:textbooks","aq:study-sessions","aq:gamification","aq:course-planner","aq:notifications","aq:sound-settings"].forEach(e=>{try{localStorage.removeItem(e)}catch(t){console.warn(`Failed to remove ${e}:`,t)}});try{Object.keys(localStorage).forEach(t=>{t.startsWith("aq:")&&localStorage.removeItem(t)})}catch(e){console.warn("Failed to clear aq: prefixed keys:",e)}}function QA(){try{const r=localStorage.getItem("aq:course-planner");if(r){const e=JSON.parse(r);if(e&&typeof e=="object"){const t={state:{byYearTerm:e.byYearTerm||{},selectedCourseId:e.selectedCourseId||void 0,selectedYearId:e.selectedYearId||void 0,selectedTermId:e.selectedTermId||void 0},version:1};return Object.keys(t.state.byYearTerm).forEach(n=>{const s=t.state.byYearTerm[n];Array.isArray(s)?t.state.byYearTerm[n]=s.filter(l=>l&&typeof l.id=="string"&&typeof l.title=="string").map(l=>({...l,code:l.code||"",title:l.title||"Untitled Course",instructor:l.instructor||void 0,syllabusUrl:l.syllabusUrl||void 0,linkedSlotId:l.linkedSlotId||void 0,weeklyAttendance:l.weeklyAttendance||{},modules:Array.isArray(l.modules)?l.modules:[{id:`m_${Math.random().toString(36).slice(2,8)}`,title:"M1",html:""}],tasks:Array.isArray(l.tasks)?l.tasks:[],folders:Array.isArray(l.folders)?l.folders:[{id:`fold_${Math.random().toString(36).slice(2,8)}`,path:"root",files:[]}]})):t.state.byYearTerm[n]=[]}),localStorage.setItem("aq:course-planner",JSON.stringify(t)),!0}}return!1}catch(r){return console.error("Data recovery failed:",r),!1}}function FS(){const r=[];try{const e=localStorage.getItem("aq:course-planner");if(e){const t=JSON.parse(e);!t||typeof t!="object"?r.push("Course planner data is not a valid object"):!t.byYearTerm||typeof t.byYearTerm!="object"?r.push("Course planner byYearTerm is not a valid object"):Object.keys(t.byYearTerm).forEach(n=>{const s=t.byYearTerm[n];Array.isArray(s)?s.forEach((l,c)=>{!l||typeof l!="object"?r.push(`Course ${c} in ${n} is not a valid object`):(typeof l.id!="string"&&r.push(`Course ${c} in ${n} has invalid id`),typeof l.title!="string"&&r.push(`Course ${c} in ${n} has invalid title`),Array.isArray(l.modules)||r.push(`Course ${c} in ${n} has invalid modules`),Array.isArray(l.tasks)||r.push(`Course ${c} in ${n} has invalid tasks`),Array.isArray(l.folders)||r.push(`Course ${c} in ${n} has invalid folders`))}):r.push(`Courses for ${n} is not an array`)})}return{isValid:r.length===0,errors:r}}catch(e){return r.push(`Failed to validate stored data: ${e}`),{isValid:!1,errors:r}}}function JA(){const r={};try{return["aq:settings","aq:theme","aq:academic-plan","aq:schedule","aq:tasks","aq:scholarships","aq:textbooks","aq:study-sessions","aq:gamification","aq:course-planner","aq:notifications","aq:sound-settings"].forEach(t=>{const n=localStorage.getItem(t);n&&(r[t]=n)}),JSON.stringify(r,null,2)}catch(e){return console.error("Failed to create backup:",e),"{}"}}class ZA extends P.Component{constructor(e){super(e),this.state={hasError:!1,error:null,showRecoveryDialog:!1,recoveryAttempted:!1}}static getDerivedStateFromError(e){return e.message.includes("localStorage")||e.message.includes("JSON")||e.message.includes("course")||e.message.includes("persist")?{hasError:!0,error:e,showRecoveryDialog:!0}:{hasError:!0,error:e}}componentDidCatch(e,t){console.error("DataErrorBoundary caught an error:",e,t);const n=FS();n.isValid||console.error("Data validation failed:",n.errors)}handleTryRecovery=()=>{const e=QA();this.setState({recoveryAttempted:!0}),e?window.location.reload():alert("Data recovery failed. You may need to reset your data.")};handleReloadPage=()=>{window.location.reload()};handleResetAllData=()=>{confirm("Are you sure you want to reset all data? This will permanently delete all your courses, tasks, and settings. This action cannot be undone.")&&(XA(),window.location.reload())};handleDownloadBackup=()=>{const e=JA(),t=new Blob([e],{type:"application/json"}),n=URL.createObjectURL(t),s=document.createElement("a");s.href=n,s.download=`academicquest-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)};handleCloseDialog=()=>{this.setState({showRecoveryDialog:!1})};render(){return this.state.hasError&&!this.state.showRecoveryDialog?i.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-4",children:"Something went wrong"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"An unexpected error occurred. Please refresh the page."}),i.jsx(K,{onClick:this.handleReloadPage,children:"Reload Page"})]})}):this.state.showRecoveryDialog?i.jsx("div",{className:"min-h-screen w-full bg-gray-50 dark:bg-gray-900 flex items-center justify-center",children:i.jsx(wr,{open:!0,onOpenChange:()=>{},children:i.jsxs(lr,{className:"max-w-md",children:[i.jsxs(ir,{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"p-2 rounded-full bg-red-100 dark:bg-red-900/20",children:i.jsx(SM,{className:"h-6 w-6 text-red-600 dark:text-red-400"})}),i.jsx(cr,{className:"text-xl font-bold",children:"Application Error"})]}),i.jsx(_g,{className:"text-gray-600 dark:text-gray-400",children:"The application encountered an error. This might be due to corrupted data or a temporary issue."})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs(K,{onClick:this.handleTryRecovery,className:"w-full justify-start bg-blue-600 hover:bg-blue-700 text-white",disabled:this.state.recoveryAttempted,children:[i.jsx(Y1,{className:"h-4 w-4 mr-2"}),"Try Data Recovery"]}),i.jsx(K,{onClick:this.handleReloadPage,variant:"outline",className:"w-full justify-start",children:"Reload Page"}),i.jsxs(K,{onClick:this.handleDownloadBackup,variant:"outline",className:"w-full justify-start",children:[i.jsx(jp,{className:"h-4 w-4 mr-2"}),"Download Backup"]}),i.jsxs(K,{onClick:this.handleResetAllData,variant:"destructive",className:"w-full justify-start",children:[i.jsx(Un,{className:"h-4 w-4 mr-2"}),"Reset All Data (Last Resort)"]})]}),i.jsx(Sr,{children:i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Resetting will clear all stored data and preferences."})})]})})}):this.props.children}}const nw={Inter:"'Inter', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif",Poppins:"'Poppins', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, 'Noto Sans', sans-serif",Nunito:"'Nunito', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, 'Noto Sans', sans-serif",Outfit:"'Outfit', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, 'Noto Sans', sans-serif",Roboto:"Roboto, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', 'Helvetica Neue', Arial, 'Noto Sans', sans-serif",Lato:"Lato, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif",Montserrat:"Montserrat, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, 'Noto Sans', sans-serif","Source Sans 3":"'Source Sans 3', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif"};function e4(){const r=_r(),e=$s();return P.useEffect(()=>{const t=nw[r.font]??nw.Inter;document.body.style.fontFamily=t},[r.font]),P.useEffect(()=>{const t=Math.round(r.textScale*100);document.documentElement.style.fontSize=`${t}%`},[r.textScale]),P.useEffect(()=>{const t=(r.radius/16).toFixed(3);document.documentElement.style.setProperty("--radius",`${t}rem`)},[r.radius]),P.useEffect(()=>{document.documentElement.classList.toggle("reduce-motion",!!e.reducedMotion)},[e.reducedMotion]),P.useEffect(()=>{console.log(" App initializing sound service...");const t=sr.isEnabled();console.log(" Sound service state:",{enabled:t})},[]),i.jsx(ZA,{children:i.jsxs("div",{className:"app-container",children:[i.jsx(o3,{}),i.jsx(wE,{})]})})}class Rl{static instance;static getInstance(){return Rl.instance||(Rl.instance=new Rl),Rl.instance}showLevelUpNotification(e,t){console.log(" Level up notification triggered:",{newLevel:e,xpGained:t});try{const{addNotification:n}=cc.getState();n(pE(e,t)),sr.playLevelUp(),console.log(" Level up notification added successfully")}catch(n){console.error(" Failed to show level up notification:",n)}}showBadgeNotification(e,t,n){console.log(" Badge notification triggered:",{badgeName:e,badgeIcon:t,badgeId:n});try{const{addNotification:s}=cc.getState();s(gE(e,t,n)),sr.playBadgeEarned(),console.log(" Badge notification added successfully")}catch(s){console.error(" Failed to show badge notification:",s)}}showTaskCompletedNotification(e,t=!1){console.log(" Task completion notification triggered:",{xpGained:e,isEarly:t});try{const{addNotification:n}=cc.getState();n(xE(e,t)),sr.playTaskComplete(),console.log(" Task completion notification added successfully")}catch(n){console.error(" Failed to show task completion notification:",n)}}showQuestCompletedNotification(e,t){console.log(" Quest completion notification triggered:",{questTitle:e,xpReward:t});try{const{addNotification:n}=cc.getState();n(bE(e,t)),sr.playTaskComplete(),console.log(" Quest completion notification added successfully")}catch(n){console.error(" Failed to show quest completion notification:",n)}}}const dc=Rl.getInstance(),Bp=[{id:"first_task",name:"Getting Started",description:"Complete your first task",icon:"",rarity:"common",unlocked:!1,maxProgress:1,progress:0},{id:"task_streak",name:"Task Master",description:"Complete 10 tasks in a row",icon:"",rarity:"rare",unlocked:!1,maxProgress:10,progress:0},{id:"early_bird",name:"Early Bird",description:"Complete 5 tasks before their due date",icon:"",rarity:"common",unlocked:!1,maxProgress:5,progress:0},{id:"perfect_week",name:"Perfect Week",description:"Complete all scheduled blocks for a week",icon:"",rarity:"epic",unlocked:!1,maxProgress:1,progress:0},{id:"study_warrior",name:"Study Warrior",description:"Study for 25+ hours in a week",icon:"",rarity:"rare",unlocked:!1,maxProgress:25,progress:0},{id:"schedule_master",name:"Schedule Master",description:"Complete 50 scheduled blocks",icon:"",rarity:"rare",unlocked:!1,maxProgress:50,progress:0},{id:"academic_scholar",name:"Academic Scholar",description:"Maintain 3.5+ GPA for a semester",icon:"",rarity:"legendary",unlocked:!1,maxProgress:1,progress:0},{id:"time_keeper",name:"Time Keeper",description:"Log 100 study sessions",icon:"",rarity:"epic",unlocked:!1,maxProgress:100,progress:0},{id:"goal_crusher",name:"Goal Crusher",description:"Complete 100 tasks total",icon:"",rarity:"epic",unlocked:!1,maxProgress:100,progress:0},{id:"consistency_king",name:"Consistency King",description:"Maintain a 30-day streak",icon:"",rarity:"legendary",unlocked:!1,maxProgress:30,progress:0},{id:"semester_starter",name:"Semester Starter",description:"Set up your first course and schedule",icon:"",rarity:"common",unlocked:!1,maxProgress:1,progress:0},{id:"perfect_attendance",name:"Perfect Attendance",description:"Attend all classes for 30 days straight",icon:"",rarity:"legendary",unlocked:!1,maxProgress:30,progress:0},{id:"attendance_streak",name:"Class Commitment",description:"Maintain a 7-day attendance streak",icon:"",rarity:"rare",unlocked:!1,maxProgress:7,progress:0},{id:"first_class",name:"First Day",description:"Attend your first class",icon:"",rarity:"common",unlocked:!1,maxProgress:1,progress:0},{id:"class_warrior",name:"Class Warrior",description:"Attend 50 classes",icon:"",rarity:"rare",unlocked:!1,maxProgress:50,progress:0},{id:"attendance_champion",name:"Attendance Champion",description:"Maintain 95%+ attendance for 30 days",icon:"",rarity:"epic",unlocked:!1,maxProgress:30,progress:0},{id:"never_miss",name:"Never Miss",description:"Attend 100 classes without missing any",icon:"",rarity:"legendary",unlocked:!1,maxProgress:100,progress:0},{id:"semester_perfect",name:"Semester Perfect",description:"Perfect attendance for an entire semester (120 days)",icon:"",rarity:"legendary",unlocked:!1,maxProgress:120,progress:0},{id:"monthly_perfect",name:"Monthly Perfect",description:"Perfect attendance for 30 consecutive days",icon:"",rarity:"epic",unlocked:!1,maxProgress:30,progress:0},{id:"attendance_legend",name:"Attendance Legend",description:"Maintain 90%+ attendance for a full year",icon:"",rarity:"legendary",unlocked:!1,maxProgress:365,progress:0},{id:"class_dedication",name:"Class Dedication",description:"Attend classes for 200 days total",icon:"",rarity:"epic",unlocked:!1,maxProgress:200,progress:0},{id:"gpa_achiever",name:"GPA Achiever",description:"Achieve a 3.0 GPA or higher",icon:"",rarity:"rare",unlocked:!1,maxProgress:1,progress:0},{id:"academic_foundation",name:"Academic Foundation",description:"Maintain a 3.5+ GPA for 30 days",icon:"",rarity:"epic",unlocked:!1,maxProgress:30,progress:0},{id:"course_planner",name:"Course Planner",description:"Add your first course to the course planner",icon:"",rarity:"common",unlocked:!1,maxProgress:1,progress:0},{id:"schedule_architect",name:"Schedule Architect",description:"Set up a complete weekly schedule with all courses",icon:"",rarity:"rare",unlocked:!1,maxProgress:1,progress:0},{id:"semester_organizer",name:"Semester Organizer",description:"Plan courses for an entire semester (5+ courses)",icon:"",rarity:"epic",unlocked:!1,maxProgress:5,progress:0},{id:"academic_starter",name:"Academic Starter",description:"Set up both course planner and schedule for the first time",icon:"",rarity:"rare",unlocked:!1,maxProgress:1,progress:0},{id:"grade_warrior",name:"Grade Warrior",description:"Track grades for 10+ assignments",icon:"",rarity:"rare",unlocked:!1,maxProgress:10,progress:0},{id:"dean_list",name:"Dean's List",description:"Achieve a 3.8+ GPA for a full semester",icon:"",rarity:"legendary",unlocked:!1,maxProgress:1,progress:0}],xo=500,t4=r=>Math.floor(r/xo)+1,r4=r=>r*xo,n4=[{type:"task",title:"Task Champion",description:"Complete 3 tasks today",target:3,xp:50},{type:"task",title:"Early Achiever",description:"Complete 1 task before its due date",target:1,xp:75},{type:"study",title:"Study Session",description:"Study for 2 hours today",target:2,xp:60},{type:"study",title:"Focus Time",description:"Complete 4 Pomodoro sessions",target:4,xp:40},{type:"schedule",title:"Schedule Keeper",description:"Complete 3 scheduled blocks today",target:3,xp:55},{type:"academic",title:"Course Explorer",description:"Review 1 course material",target:1,xp:35}],a4=r=>{const e=new Set(r.map(s=>s.id)),t=Bp.filter(s=>!e.has(s.id));return[...r.map(s=>{const l=Bp.find(c=>c.id===s.id);return l?{...l,unlocked:s.unlocked,unlockedAt:s.unlockedAt,progress:s.progress}:s}),...t]},Dr=An()(qn((r,e)=>({stats:{level:1,xp:0,nextLevelXp:xo,totalXp:0,streakDays:0,longestStreak:0,tasksCompleted:0,tasksCompletedEarly:0,studyHours:0,scheduleBlocksCompleted:0,perfectWeeks:0,classesAttended:0,attendanceStreak:0,longestAttendanceStreak:0,badges:Bp,dailyQuests:[],lastActiveDate:new Date().toISOString().split("T")[0],streakFreezeActive:!1,streakFreezeStartDate:null,streakFreezeEndDate:null,streakFreezeReason:null,frozenStreakDays:0,attendanceStreakFreezeActive:!1,frozenAttendanceStreak:0},updateStats:t=>r(n=>({stats:{...n.stats,...t}})),addXP:t=>r(n=>{const s=n.stats.totalXp+t,l=t4(s),c=n.stats.level,u={stats:{...n.stats,xp:n.stats.xp+t,totalXp:s,level:l,nextLevelXp:r4(l)}};return l>c&&setTimeout(()=>{dc.showLevelUpNotification(l,t)},0),u}),unlockBadge:t=>r(n=>{const s=n.stats.badges.find(c=>c.id===t),l={stats:{...n.stats,badges:n.stats.badges.map(c=>c.id===t?{...c,unlocked:!0,unlockedAt:new Date().toISOString()}:c)}};return s&&!s.unlocked&&setTimeout(()=>{dc.showBadgeNotification(s.name,s.icon,t)},0),l}),completeQuest:t=>r(n=>{const s=n.stats.dailyQuests.find(c=>c.id===t),l={stats:{...n.stats,dailyQuests:n.stats.dailyQuests.map(c=>c.id===t?{...c,completed:!0}:c)}};return s&&!s.completed&&setTimeout(()=>{dc.showQuestCompletedNotification(s.title,s.xpReward)},0),l}),updateQuestProgress:(t,n=1)=>r(s=>{const l=new Date().toISOString().split("T")[0],c=s.stats.dailyQuests.map(u=>{if(u.date===l&&u.type===t&&!u.completed){const h=Math.min(u.progress+n,u.target),m=h>=u.target;return m&&!u.completed&&setTimeout(()=>{dc.showQuestCompletedNotification(u.title,u.xpReward),Dr.getState().addXP(u.xpReward)},100),{...u,progress:h,completed:m}}return u});return{stats:{...s.stats,dailyQuests:c}}}),generateDailyQuests:()=>r(t=>{const n=new Date().toISOString().split("T")[0];if(t.stats.dailyQuests.some(c=>c.date===n))return t;const l=[...n4].sort(()=>.5-Math.random()).slice(0,3).map((c,u)=>({id:`${n}-${u}`,title:c.title,description:c.description,type:c.type,target:c.target,progress:0,completed:!1,xpReward:c.xp,date:n}));return{stats:{...t.stats,dailyQuests:[...t.stats.dailyQuests.filter(c=>c.date!==n),...l]}}}),checkAchievements:()=>r(t=>{const{stats:n}=t;let s=[...n.badges];return s=s.map(l=>{if(l.unlocked)return l;let c=!1,u=l.progress||0;switch(l.id){case"first_task":u=n.tasksCompleted,c=n.tasksCompleted>=1;break;case"task_streak":u=Math.min(n.tasksCompleted,10),c=n.tasksCompleted>=10;break;case"early_bird":u=n.tasksCompletedEarly,c=n.tasksCompletedEarly>=5;break;case"perfect_week":u=n.perfectWeeks,c=n.perfectWeeks>=1;break;case"study_warrior":u=Math.min(n.studyHours,25),c=n.studyHours>=25;break;case"schedule_master":u=n.scheduleBlocksCompleted,c=n.scheduleBlocksCompleted>=50;break;case"time_keeper":u=Math.min(n.scheduleBlocksCompleted,100),c=n.scheduleBlocksCompleted>=100;break;case"goal_crusher":u=n.tasksCompleted,c=n.tasksCompleted>=100;break;case"consistency_king":u=n.streakDays,c=n.streakDays>=30;break;case"perfect_attendance":u=n.attendanceStreak,c=n.attendanceStreak>=30;break;case"attendance_streak":u=n.attendanceStreak,c=n.attendanceStreak>=7;break;case"first_class":u=n.classesAttended,c=n.classesAttended>=1;break;case"class_warrior":u=n.classesAttended,c=n.classesAttended>=50;break;case"attendance_champion":u=n.attendanceStreak,c=n.attendanceStreak>=30;break;case"never_miss":u=n.classesAttended,c=n.classesAttended>=100;break;case"semester_perfect":u=n.attendanceStreak,c=n.attendanceStreak>=120;break;case"monthly_perfect":u=n.attendanceStreak,c=n.attendanceStreak>=30;break;case"attendance_legend":u=Math.min(365,n.classesAttended),c=n.classesAttended>=365;break;case"class_dedication":u=n.classesAttended,c=n.classesAttended>=200;break;case"gpa_achiever":u=l.progress||0,c=u>=1;break;case"academic_foundation":u=l.progress||0,c=u>=30;break;case"course_planner":u=l.progress||0,c=u>=1;break;case"schedule_architect":u=l.progress||0,c=u>=1;break;case"semester_organizer":u=l.progress||0,c=u>=5;break;case"academic_starter":u=l.progress||0,c=u>=1;break;case"grade_warrior":u=l.progress||0,c=u>=10;break;case"dean_list":u=l.progress||0,c=u>=1;break}return{...l,progress:u,unlocked:c,unlockedAt:c?new Date().toISOString():l.unlockedAt}}),{stats:{...n,badges:s}}}),resetStreak:()=>r(t=>({stats:{...t.stats,streakDays:0}})),incrementStreak:()=>r(t=>({stats:{...t.stats,streakDays:t.stats.streakDays+1,longestStreak:Math.max(t.stats.longestStreak,t.stats.streakDays+1),lastActiveDate:new Date().toISOString().split("T")[0]}})),activateStreakFreeze:(t,n,s)=>r(l=>({stats:{...l.stats,streakFreezeActive:!0,streakFreezeStartDate:n||new Date().toISOString().split("T")[0],streakFreezeEndDate:s||null,streakFreezeReason:t,frozenStreakDays:l.stats.streakDays}})),deactivateStreakFreeze:()=>r(t=>({stats:{...t.stats,streakFreezeActive:!1,streakFreezeStartDate:null,streakFreezeEndDate:null,streakFreezeReason:null,frozenStreakDays:0}})),activateAttendanceStreakFreeze:()=>r(t=>({stats:{...t.stats,attendanceStreakFreezeActive:!0,frozenAttendanceStreak:t.stats.attendanceStreak}})),deactivateAttendanceStreakFreeze:()=>r(t=>({stats:{...t.stats,attendanceStreakFreezeActive:!1,frozenAttendanceStreak:0}})),isStreakFrozen:()=>e().stats.streakFreezeActive,isAttendanceStreakFrozen:()=>e().stats.attendanceStreakFreezeActive,getEffectiveStreak:()=>{const t=e();return t.stats.streakFreezeActive?t.stats.frozenStreakDays:t.stats.streakDays},getEffectiveAttendanceStreak:()=>{const t=e();return t.stats.attendanceStreakFreezeActive?t.stats.frozenAttendanceStreak:t.stats.attendanceStreak}}),{name:"aq:gamification",onRehydrateStorage:()=>r=>{r&&(r.stats.badges=a4(r.stats.badges))}})),da={TASK_COMPLETE:25,TASK_EARLY:50,TASK_ON_TIME:35,STUDY_SESSION:15,FIRST_COURSE:50,SCHEDULE_SETUP:75,GPA_MILESTONE:100,GRADE_ENTRY:10};function YS(r){if(!r)return!1;const e=new Date;e.setHours(0,0,0,0);const t=new Date(r);return t.setHours(0,0,0,0),e<t}function qS(r){if(!r)return!0;const e=new Date;e.setHours(0,0,0,0);const t=new Date(r);return t.setHours(0,0,0,0),e<=t}const s4=r=>{console.log(" rewardTaskCompletion called with dueDate:",r);const e=Dr.getState(),t=YS(r),n=qS(r);let s;t?(s=da.TASK_EARLY,e.addXP(s),e.updateStats({tasksCompleted:e.stats.tasksCompleted+1,tasksCompletedEarly:e.stats.tasksCompletedEarly+1}),console.log(" Task completed early, XP reward:",s)):n?(s=da.TASK_ON_TIME,e.addXP(s),e.updateStats({tasksCompleted:e.stats.tasksCompleted+1}),console.log(" Task completed on time, XP reward:",s)):(s=da.TASK_COMPLETE,e.addXP(s),e.updateStats({tasksCompleted:e.stats.tasksCompleted+1}),console.log(" Task completed, XP reward:",s)),console.log(" Triggering task completion notification..."),setTimeout(()=>{dc.showTaskCompletedNotification(s,t)},0),e.updateQuestProgress("task",1),e.checkAchievements()},o4=r=>{const e=Dr.getState(),t=Math.floor(r/25)*da.STUDY_SESSION;e.addXP(t);const n=e.stats.studyHours;e.updateStats({studyHours:n+r/60});const s=r/60;e.updateQuestProgress("study",s),e.checkAchievements()},GS=()=>{const r=Dr.getState();r.addXP(da.FIRST_COURSE);const e=r.stats.badges.map(t=>t.id==="course_planner"?{...t,progress:1}:t);r.updateStats({badges:e}),r.checkAchievements()},KS=r=>{const e=Dr.getState(),t=e.stats.badges.map(n=>n.id==="semester_organizer"?{...n,progress:Math.min(r,5)}:n);e.updateStats({badges:t}),e.checkAchievements()},WS=()=>{const r=Dr.getState();r.addXP(da.SCHEDULE_SETUP);const e=r.stats.badges.map(t=>t.id==="schedule_architect"?{...t,progress:1}:t);r.updateStats({badges:e}),XS(),r.checkAchievements()},XS=()=>{const r=Dr.getState(),e=r.stats.badges,t=e.find(s=>s.id==="course_planner"),n=e.find(s=>s.id==="schedule_architect");if(t?.progress&&n?.progress){const s=e.map(l=>l.id==="academic_starter"?{...l,progress:1}:l);r.updateStats({badges:s}),r.checkAchievements()}},QS=r=>{const e=Dr.getState();let t=[...e.stats.badges],n=0;r>=3&&(t=t.map(s=>s.id==="gpa_achiever"?{...s,progress:1}:s),n+=da.GPA_MILESTONE),r>=3.8&&(t=t.map(s=>s.id==="dean_list"?{...s,progress:1}:s),n+=da.GPA_MILESTONE*2),n>0&&e.addXP(n),e.updateStats({badges:t}),e.checkAchievements()},JS=()=>{Dr.getState().addXP(da.GRADE_ENTRY)},Ip=r=>{const e=Dr.getState(),t=e.stats.badges.map(n=>n.id==="grade_warrior"?{...n,progress:Math.min(r,10)}:n);e.updateStats({badges:t}),e.checkAchievements()},ZS=Object.freeze(Object.defineProperty({__proto__:null,XP_REWARDS:da,checkAcademicStarter:XS,checkGPABadges:QS,checkGradeWarrior:Ip,checkSemesterOrganizer:KS,isTaskEarly:YS,isTaskOnTime:qS,rewardFirstCourse:GS,rewardGradeEntry:JS,rewardScheduleSetup:WS,rewardStudySession:o4,rewardTaskCompletion:s4},Symbol.toStringTag,{value:"Module"}));function Qu(r="id"){return`${r}_${Math.random().toString(36).slice(2,9)}`}function Pp(r){return new Array(r).fill(null).map((e,t)=>({id:Qu("term"),name:`Term ${t+1}`,startDate:void 0,endDate:void 0,slots:[]}))}const l4=()=>{const r=new Date().getFullYear();return{id:Qu("year"),label:`SY ${r}${r+1}`,terms:Pp(2)}},zr=An()(qn((r,e)=>({years:[l4()],selectedYearId:void 0,setSelectedYear:t=>r({selectedYearId:t}),addYear:(t,n=2)=>r(s=>{const l=new Date().getFullYear();return{years:[...s.years,{id:Qu("year"),label:t||`SY ${l}${l+1}`,terms:Pp(n)}]}}),removeYear:t=>r(n=>{const s=n.years.filter(c=>c.id!==t),l=n.selectedYearId===t?s[0]?.id:n.selectedYearId;return{years:s,selectedYearId:l}}),setTermsCount:(t,n)=>r(s=>({years:s.years.map(l=>{if(l.id!==t)return l;const c=Pp(n);return l.terms.forEach((u,h)=>{c[h]&&(c[h].slots=u.slots)}),{...l,terms:c}})})),setTermDates:(t,n,s,l)=>r(c=>({years:c.years.map(u=>u.id!==t?u:{...u,terms:u.terms.map(h=>h.id!==n?h:{...h,startDate:s,endDate:l})})})),addSlot:(t,n,s)=>r(l=>{const c={years:l.years.map(u=>u.id!==t?u:{...u,terms:u.terms.map(h=>h.id!==n?h:{...h,slots:[...h.slots,{id:Qu("slot"),...s}]})})};return setTimeout(()=>{const h=c.years.find(m=>m.id===t)?.terms.find(m=>m.id===n);h&&h.slots.length>=5&&new Set(h.slots.map(p=>p.day)).size>=5&&WS()},0),c}),updateSlot:(t,n,s)=>r(l=>({years:l.years.map(c=>c.id!==t?c:{...c,terms:c.terms.map(u=>u.id!==n?u:{...u,slots:u.slots.map(h=>h.id===s.id?s:h)})})})),removeSlot:(t,n,s)=>r(l=>({years:l.years.map(c=>c.id!==t?c:{...c,terms:c.terms.map(u=>u.id!==n?u:{...u,slots:u.slots.filter(h=>h.id!==s)})})})),getActiveTermForDate:t=>{const n=t.toISOString().slice(0,10);for(const s of e().years)for(const l of s.terms)if(!(!l.startDate||!l.endDate)&&l.startDate<=n&&n<=l.endDate)return{year:s,term:l}},todaySlots:()=>{const t=new Date,n=t.getDay(),s=e(),l=s.getActiveTermForDate(t),c=s.years.find(m=>m.id===s.selectedYearId)??s.years[0];return((l?.term??c?.terms[0])?.slots.filter(m=>m.day===n)??[]).slice().sort((m,p)=>{const x=b=>{const[v,k]=b.split(":").map(Number);return v*60+k};return x(m.start)-x(p.start)}).map(m=>({time:m.start,course:m.title||m.courseCode||"Class",room:m.room}))}}),{name:"aq:schedule"}));function Ic(r="id"){return`${r}_${Math.random().toString(36).slice(2,9)}`}function i4(){return{id:Ic("row"),code:"",name:"",section:"",credits:0,gpa:void 0}}function _p(r){return new Array(r).fill(null).map((e,t)=>({id:Ic("term"),name:`Term ${t+1}`,courses:Array.from({length:8},()=>i4())}))}const aw=()=>{const r=new Date().getFullYear();return{id:Ic("year"),label:`SY ${r}${r+1}`,terms:_p(2)}},Ft=An()(qn((r,e)=>({years:[aw()],selectedYearId:void 0,setSelectedYear:t=>r({selectedYearId:t}),addYear:(t,n=2)=>r(s=>({years:[...s.years,{id:Ic("year"),label:t||aw().label,terms:_p(n)}]})),setTermsCount:(t,n)=>r(s=>({years:s.years.map(l=>{if(l.id!==t)return l;const c=_p(n);return l.terms.forEach((u,h)=>{c[h]&&(c[h].courses=u.courses)}),{...l,terms:c}})})),addRow:(t,n)=>r(s=>({years:s.years.map(l=>l.id!==t?l:{...l,terms:l.terms.map(c=>c.id!==n?c:{...c,courses:[...c.courses,{id:Ic("row"),code:"",name:"",section:"",credits:0}]})})})),updateRow:(t,n,s)=>r(l=>({years:l.years.map(c=>c.id!==t?c:{...c,terms:c.terms.map(u=>u.id!==n?u:{...u,courses:u.courses.map(h=>h.id===s.id?s:h)})})})),removeRow:(t,n,s)=>r(l=>({years:l.years.map(c=>c.id!==t?c:{...c,terms:c.terms.map(u=>u.id!==n?u:{...u,courses:u.courses.filter(h=>h.id!==s)})})}))}),{name:"aq:academic-plan"})),c4="modulepreload",d4=function(r){return"/"+r},sw={},e2=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let h=function(m){return Promise.all(m.map(p=>Promise.resolve(p).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=c?.nonce||c?.getAttribute("nonce");s=h(t.map(m=>{if(m=d4(m),m in sw)return;sw[m]=!0;const p=m.endsWith(".css"),x=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${x}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":c4,p||(b.as="script"),b.crossOrigin="",b.href=m,u&&b.setAttribute("nonce",u),document.head.appendChild(b),p)return new Promise((v,k)=>{b.addEventListener("load",v),b.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${m}`)))})}))}function l(c){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=c,window.dispatchEvent(u),!u.defaultPrevented)throw c}return s.then(c=>{for(const u of c||[])u.status==="rejected"&&l(u.reason);return e().catch(l)})},_n=An()(qn((r,e)=>({tasks:[],addTask:t=>r(n=>({tasks:[...n.tasks,t]})),updateTask:(t,n)=>{const s=e().tasks.find(u=>u.id===t),l=s?.status==="Completed",c=n.status==="Completed";!l&&c&&s&&e2(async()=>{const{rewardTaskCompletion:u}=await Promise.resolve().then(()=>ZS);return{rewardTaskCompletion:u}},void 0).then(({rewardTaskCompletion:u})=>{u(s.dueDate)}),r(u=>({tasks:u.tasks.map(h=>h.id===t?{...h,...n}:h)}))},removeTask:t=>r(n=>({tasks:n.tasks.filter(s=>s.id!==t)})),clearTerm:(t,n)=>r(s=>({tasks:s.tasks.filter(l=>!(l.yearId===t&&l.termId===n))}))}),{name:"aq:tasks"}));function u4(r,e,t){return!e||!t?[]:r.filter(n=>n.yearId===e&&n.termId===t)}function ow(r,e=7){if(!r)return!1;const t=new Date;t.setHours(0,0,0,0);const n=new Date(r);n.setHours(0,0,0,0);const s=(n.getTime()-t.getTime())/(1e3*60*60*24);return s>=0&&s<=e}const rh=An()(qn(r=>({sessions:[],add:e=>{e.durationMin>0&&e2(async()=>{const{rewardStudySession:t}=await Promise.resolve().then(()=>ZS);return{rewardStudySession:t}},void 0).then(({rewardStudySession:t})=>{t(e.durationMin)}),r(t=>({sessions:[e,...t.sessions]}))},update:(e,t)=>r(n=>({sessions:n.sessions.map(s=>s.id===e?{...s,...t}:s)})),remove:e=>r(t=>({sessions:t.sessions.filter(n=>n.id!==e)})),clearAll:()=>r({sessions:[]})}),{name:"aq:study-sessions"}));function t2(r,e,t){const n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),s=new Date(t.getFullYear(),t.getMonth(),t.getDate(),23,59,59,999),l=new Map;for(let c=new Date(n);c<=s;c.setDate(c.getDate()+1))l.set(c.toISOString().slice(0,10),0);return r.forEach(c=>{const u=new Date(c.start).toISOString().slice(0,10);l.has(u)&&l.set(u,(l.get(u)||0)+(c.durationMin||0))}),Array.from(l.entries()).map(([c,u])=>({date:c,minutes:u}))}const lw=r=>{const e=r.filter(n=>n.marked);if(e.length===0)return 0;const t=e.filter(n=>n.attended).length;return Math.round(t/e.length*100)},r2=An()(qn((r,e)=>({records:[],addAttendanceRecord:(t,n)=>{r(s=>{const l=s.records.findIndex(h=>h.date===t),c=lw(n),u={date:t,classes:n,totalClasses:n.length,attendedClasses:n.filter(h=>h.attended&&h.marked).length,attendanceRate:c};if(l>=0){const h=[...s.records];return h[l]=u,{records:h}}else return{records:[...s.records,u].sort((h,m)=>h.date.localeCompare(m.date))}})},markAttendance:(t,n,s)=>{r(l=>{const c=l.records.findIndex(x=>x.date===t);if(c===-1)return l;const u=[...l.records],h={...u[c]},m=h.classes.findIndex(x=>x.slotId===n);if(m===-1)return l;const p=[...h.classes];return p[m]={...p[m],attended:s,marked:!0},h.classes=p,h.attendedClasses=p.filter(x=>x.attended&&x.marked).length,h.attendanceRate=lw(p),u[c]=h,{records:u}})},getAttendanceForDate:t=>e().records.find(n=>n.date===t),getAttendanceStreak:()=>{const{records:t}=e();if(t.length===0)return 0;const n=[...t].sort((l,c)=>c.date.localeCompare(l.date));let s=0;for(const l of n)if(l.totalClasses>0)if(l.attendanceRate===100)s++;else break;return s},getLast365DaysData:()=>{const{records:t}=e(),n=new Date,s=new Date(n);s.setDate(s.getDate()-364);const l=[];for(let c=364;c>=0;c--){const u=new Date(n);u.setDate(u.getDate()-c);const h=u.toISOString().split("T")[0],m=t.find(p=>p.date===h);l.push({date:h,attendanceRate:m?.attendanceRate||0,totalClasses:m?.totalClasses||0})}return l},getWeeklyAttendanceRate:()=>{const{records:t}=e(),n=new Date,s=new Date(n);s.setDate(s.getDate()-7);const l=t.filter(h=>{const m=new Date(h.date);return m>=s&&m<=n&&h.totalClasses>0});if(l.length===0)return 0;const c=l.reduce((h,m)=>h+m.totalClasses,0),u=l.reduce((h,m)=>h+m.attendedClasses,0);return c>0?Math.round(u/c*100):0},getMonthlyAttendanceRate:()=>{const{records:t}=e(),n=new Date,s=new Date(n);s.setDate(s.getDate()-30);const l=t.filter(h=>{const m=new Date(h.date);return m>=s&&m<=n&&h.totalClasses>0});if(l.length===0)return 0;const c=l.reduce((h,m)=>h+m.totalClasses,0),u=l.reduce((h,m)=>h+m.attendedClasses,0);return c>0?Math.round(u/c*100):0},getSemesterAttendanceRate:()=>{const{records:t}=e(),n=new Date,s=new Date(n);s.setDate(s.getDate()-120);const l=t.filter(h=>{const m=new Date(h.date);return m>=s&&m<=n&&h.totalClasses>0});if(l.length===0)return 0;const c=l.reduce((h,m)=>h+m.totalClasses,0),u=l.reduce((h,m)=>h+m.attendedClasses,0);return c>0?Math.round(u/c*100):0},getPerfectAttendanceDays:()=>{const{records:t}=e();return t.filter(n=>n.totalClasses>0&&n.attendanceRate===100).length},getTotalAttendanceDays:()=>{const{records:t}=e();return t.filter(n=>n.totalClasses>0).length},hasUnmarkedClasses:t=>{const n=e().getAttendanceForDate(t);return n?n.classes.some(s=>!s.marked):!1},getTodaysPendingClasses:()=>{const t=new Date().toISOString().split("T")[0],n=e().getAttendanceForDate(t);return n?n.classes.filter(s=>!s.marked):[]}}),{name:"aq:attendance"})),Ee=M.forwardRef(({className:r,type:e,...t},n)=>i.jsx("input",{type:e,className:lt("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:n,...t}));Ee.displayName="Input";var f4="Label",n2=M.forwardRef((r,e)=>i.jsx(rt.label,{...r,ref:e,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(r.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n2.displayName=f4;var a2=n2;const h4=Dg("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ot=M.forwardRef(({className:r,...e},t)=>i.jsx(a2,{ref:t,className:lt(h4(),r),...e}));ot.displayName=a2.displayName;function Ju(r,[e,t]){return Math.min(t,Math.max(e,r))}function s2(r){const e=r+"CollectionProvider",[t,n]=ri(e),[s,l]=t(e,{collectionRef:{current:null},itemMap:new Map}),c=w=>{const{scope:S,children:N}=w,T=P.useRef(null),C=P.useRef(new Map).current;return i.jsx(s,{scope:S,itemMap:C,collectionRef:T,children:N})};c.displayName=e;const u=r+"CollectionSlot",h=Gl(u),m=P.forwardRef((w,S)=>{const{scope:N,children:T}=w,C=l(u,N),D=ft(S,C.collectionRef);return i.jsx(h,{ref:D,children:T})});m.displayName=u;const p=r+"CollectionItemSlot",x="data-radix-collection-item",b=Gl(p),v=P.forwardRef((w,S)=>{const{scope:N,children:T,...C}=w,D=P.useRef(null),A=ft(S,D),Y=l(p,N);return P.useEffect(()=>(Y.itemMap.set(D,{ref:D,...C}),()=>void Y.itemMap.delete(D))),i.jsx(b,{[x]:"",ref:A,children:T})});v.displayName=p;function k(w){const S=l(r+"CollectionConsumer",w);return P.useCallback(()=>{const T=S.collectionRef.current;if(!T)return[];const C=Array.from(T.querySelectorAll(`[${x}]`));return Array.from(S.itemMap.values()).sort((Y,I)=>C.indexOf(Y.ref.current)-C.indexOf(I.ref.current))},[S.collectionRef,S.itemMap])}return[{Provider:c,Slot:m,ItemSlot:v},k,n]}var m4=M.createContext(void 0);function o2(r){const e=M.useContext(m4);return r||e||"ltr"}const p4=["top","right","bottom","left"],Bs=Math.min,on=Math.max,Zu=Math.round,wu=Math.floor,ua=r=>({x:r,y:r}),g4={left:"right",right:"left",bottom:"top",top:"bottom"},x4={start:"end",end:"start"};function Hp(r,e,t){return on(r,Bs(e,t))}function Ya(r,e){return typeof r=="function"?r(e):r}function qa(r){return r.split("-")[0]}function ni(r){return r.split("-")[1]}function Hg(r){return r==="x"?"y":"x"}function $g(r){return r==="y"?"height":"width"}const b4=new Set(["top","bottom"]);function ca(r){return b4.has(qa(r))?"y":"x"}function Ug(r){return Hg(ca(r))}function y4(r,e,t){t===void 0&&(t=!1);const n=ni(r),s=Ug(r),l=$g(s);let c=s==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(c=ef(c)),[c,ef(c)]}function v4(r){const e=ef(r);return[$p(r),e,$p(e)]}function $p(r){return r.replace(/start|end/g,e=>x4[e])}const iw=["left","right"],cw=["right","left"],k4=["top","bottom"],w4=["bottom","top"];function S4(r,e,t){switch(r){case"top":case"bottom":return t?e?cw:iw:e?iw:cw;case"left":case"right":return e?k4:w4;default:return[]}}function N4(r,e,t,n){const s=ni(r);let l=S4(qa(r),t==="start",n);return s&&(l=l.map(c=>c+"-"+s),e&&(l=l.concat(l.map($p)))),l}function ef(r){return r.replace(/left|right|bottom|top/g,e=>g4[e])}function j4(r){return{top:0,right:0,bottom:0,left:0,...r}}function l2(r){return typeof r!="number"?j4(r):{top:r,right:r,bottom:r,left:r}}function tf(r){const{x:e,y:t,width:n,height:s}=r;return{width:n,height:s,top:t,left:e,right:e+n,bottom:t+s,x:e,y:t}}function dw(r,e,t){let{reference:n,floating:s}=r;const l=ca(e),c=Ug(e),u=$g(c),h=qa(e),m=l==="y",p=n.x+n.width/2-s.width/2,x=n.y+n.height/2-s.height/2,b=n[u]/2-s[u]/2;let v;switch(h){case"top":v={x:p,y:n.y-s.height};break;case"bottom":v={x:p,y:n.y+n.height};break;case"right":v={x:n.x+n.width,y:x};break;case"left":v={x:n.x-s.width,y:x};break;default:v={x:n.x,y:n.y}}switch(ni(e)){case"start":v[c]-=b*(t&&m?-1:1);break;case"end":v[c]+=b*(t&&m?-1:1);break}return v}const C4=async(r,e,t)=>{const{placement:n="bottom",strategy:s="absolute",middleware:l=[],platform:c}=t,u=l.filter(Boolean),h=await(c.isRTL==null?void 0:c.isRTL(e));let m=await c.getElementRects({reference:r,floating:e,strategy:s}),{x:p,y:x}=dw(m,n,h),b=n,v={},k=0;for(let w=0;w<u.length;w++){const{name:S,fn:N}=u[w],{x:T,y:C,data:D,reset:A}=await N({x:p,y:x,initialPlacement:n,placement:b,strategy:s,middlewareData:v,rects:m,platform:c,elements:{reference:r,floating:e}});p=T??p,x=C??x,v={...v,[S]:{...v[S],...D}},A&&k<=50&&(k++,typeof A=="object"&&(A.placement&&(b=A.placement),A.rects&&(m=A.rects===!0?await c.getElementRects({reference:r,floating:e,strategy:s}):A.rects),{x:p,y:x}=dw(m,b,h)),w=-1)}return{x:p,y:x,placement:b,strategy:s,middlewareData:v}};async function Pc(r,e){var t;e===void 0&&(e={});const{x:n,y:s,platform:l,rects:c,elements:u,strategy:h}=r,{boundary:m="clippingAncestors",rootBoundary:p="viewport",elementContext:x="floating",altBoundary:b=!1,padding:v=0}=Ya(e,r),k=l2(v),S=u[b?x==="floating"?"reference":"floating":x],N=tf(await l.getClippingRect({element:(t=await(l.isElement==null?void 0:l.isElement(S)))==null||t?S:S.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(u.floating)),boundary:m,rootBoundary:p,strategy:h})),T=x==="floating"?{x:n,y:s,width:c.floating.width,height:c.floating.height}:c.reference,C=await(l.getOffsetParent==null?void 0:l.getOffsetParent(u.floating)),D=await(l.isElement==null?void 0:l.isElement(C))?await(l.getScale==null?void 0:l.getScale(C))||{x:1,y:1}:{x:1,y:1},A=tf(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:T,offsetParent:C,strategy:h}):T);return{top:(N.top-A.top+k.top)/D.y,bottom:(A.bottom-N.bottom+k.bottom)/D.y,left:(N.left-A.left+k.left)/D.x,right:(A.right-N.right+k.right)/D.x}}const T4=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:n,placement:s,rects:l,platform:c,elements:u,middlewareData:h}=e,{element:m,padding:p=0}=Ya(r,e)||{};if(m==null)return{};const x=l2(p),b={x:t,y:n},v=Ug(s),k=$g(v),w=await c.getDimensions(m),S=v==="y",N=S?"top":"left",T=S?"bottom":"right",C=S?"clientHeight":"clientWidth",D=l.reference[k]+l.reference[v]-b[v]-l.floating[k],A=b[v]-l.reference[v],Y=await(c.getOffsetParent==null?void 0:c.getOffsetParent(m));let I=Y?Y[C]:0;(!I||!await(c.isElement==null?void 0:c.isElement(Y)))&&(I=u.floating[C]||l.floating[k]);const $=D/2-A/2,ae=I/2-w[k]/2-1,le=Bs(x[N],ae),ie=Bs(x[T],ae),he=le,ye=I-w[k]-ie,fe=I/2-w[k]/2+$,ve=Hp(he,fe,ye),B=!h.arrow&&ni(s)!=null&&fe!==ve&&l.reference[k]/2-(fe<he?le:ie)-w[k]/2<0,W=B?fe<he?fe-he:fe-ye:0;return{[v]:b[v]+W,data:{[v]:ve,centerOffset:fe-ve-W,...B&&{alignmentOffset:W}},reset:B}}}),M4=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:s,middlewareData:l,rects:c,initialPlacement:u,platform:h,elements:m}=e,{mainAxis:p=!0,crossAxis:x=!0,fallbackPlacements:b,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:w=!0,...S}=Ya(r,e);if((t=l.arrow)!=null&&t.alignmentOffset)return{};const N=qa(s),T=ca(u),C=qa(u)===u,D=await(h.isRTL==null?void 0:h.isRTL(m.floating)),A=b||(C||!w?[ef(u)]:v4(u)),Y=k!=="none";!b&&Y&&A.push(...N4(u,w,k,D));const I=[u,...A],$=await Pc(e,S),ae=[];let le=((n=l.flip)==null?void 0:n.overflows)||[];if(p&&ae.push($[N]),x){const fe=y4(s,c,D);ae.push($[fe[0]],$[fe[1]])}if(le=[...le,{placement:s,overflows:ae}],!ae.every(fe=>fe<=0)){var ie,he;const fe=(((ie=l.flip)==null?void 0:ie.index)||0)+1,ve=I[fe];if(ve&&(!(x==="alignment"?T!==ca(ve):!1)||le.every(L=>ca(L.placement)===T?L.overflows[0]>0:!0)))return{data:{index:fe,overflows:le},reset:{placement:ve}};let B=(he=le.filter(W=>W.overflows[0]<=0).sort((W,L)=>W.overflows[1]-L.overflows[1])[0])==null?void 0:he.placement;if(!B)switch(v){case"bestFit":{var ye;const W=(ye=le.filter(L=>{if(Y){const H=ca(L.placement);return H===T||H==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(H=>H>0).reduce((H,Q)=>H+Q,0)]).sort((L,H)=>L[1]-H[1])[0])==null?void 0:ye[0];W&&(B=W);break}case"initialPlacement":B=u;break}if(s!==B)return{reset:{placement:B}}}return{}}}};function uw(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function fw(r){return p4.some(e=>r[e]>=0)}const E4=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...s}=Ya(r,e);switch(n){case"referenceHidden":{const l=await Pc(e,{...s,elementContext:"reference"}),c=uw(l,t.reference);return{data:{referenceHiddenOffsets:c,referenceHidden:fw(c)}}}case"escaped":{const l=await Pc(e,{...s,altBoundary:!0}),c=uw(l,t.floating);return{data:{escapedOffsets:c,escaped:fw(c)}}}default:return{}}}}},i2=new Set(["left","top"]);async function A4(r,e){const{placement:t,platform:n,elements:s}=r,l=await(n.isRTL==null?void 0:n.isRTL(s.floating)),c=qa(t),u=ni(t),h=ca(t)==="y",m=i2.has(c)?-1:1,p=l&&h?-1:1,x=Ya(e,r);let{mainAxis:b,crossAxis:v,alignmentAxis:k}=typeof x=="number"?{mainAxis:x,crossAxis:0,alignmentAxis:null}:{mainAxis:x.mainAxis||0,crossAxis:x.crossAxis||0,alignmentAxis:x.alignmentAxis};return u&&typeof k=="number"&&(v=u==="end"?k*-1:k),h?{x:v*p,y:b*m}:{x:b*m,y:v*p}}const D4=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,n;const{x:s,y:l,placement:c,middlewareData:u}=e,h=await A4(e,r);return c===((t=u.offset)==null?void 0:t.placement)&&(n=u.arrow)!=null&&n.alignmentOffset?{}:{x:s+h.x,y:l+h.y,data:{...h,placement:c}}}}},O4=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:n,placement:s}=e,{mainAxis:l=!0,crossAxis:c=!1,limiter:u={fn:S=>{let{x:N,y:T}=S;return{x:N,y:T}}},...h}=Ya(r,e),m={x:t,y:n},p=await Pc(e,h),x=ca(qa(s)),b=Hg(x);let v=m[b],k=m[x];if(l){const S=b==="y"?"top":"left",N=b==="y"?"bottom":"right",T=v+p[S],C=v-p[N];v=Hp(T,v,C)}if(c){const S=x==="y"?"top":"left",N=x==="y"?"bottom":"right",T=k+p[S],C=k-p[N];k=Hp(T,k,C)}const w=u.fn({...e,[b]:v,[x]:k});return{...w,data:{x:w.x-t,y:w.y-n,enabled:{[b]:l,[x]:c}}}}}},R4=function(r){return r===void 0&&(r={}),{options:r,fn(e){const{x:t,y:n,placement:s,rects:l,middlewareData:c}=e,{offset:u=0,mainAxis:h=!0,crossAxis:m=!0}=Ya(r,e),p={x:t,y:n},x=ca(s),b=Hg(x);let v=p[b],k=p[x];const w=Ya(u,e),S=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(h){const C=b==="y"?"height":"width",D=l.reference[b]-l.floating[C]+S.mainAxis,A=l.reference[b]+l.reference[C]-S.mainAxis;v<D?v=D:v>A&&(v=A)}if(m){var N,T;const C=b==="y"?"width":"height",D=i2.has(qa(s)),A=l.reference[x]-l.floating[C]+(D&&((N=c.offset)==null?void 0:N[x])||0)+(D?0:S.crossAxis),Y=l.reference[x]+l.reference[C]+(D?0:((T=c.offset)==null?void 0:T[x])||0)-(D?S.crossAxis:0);k<A?k=A:k>Y&&(k=Y)}return{[b]:v,[x]:k}}}},z4=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,n;const{placement:s,rects:l,platform:c,elements:u}=e,{apply:h=()=>{},...m}=Ya(r,e),p=await Pc(e,m),x=qa(s),b=ni(s),v=ca(s)==="y",{width:k,height:w}=l.floating;let S,N;x==="top"||x==="bottom"?(S=x,N=b===(await(c.isRTL==null?void 0:c.isRTL(u.floating))?"start":"end")?"left":"right"):(N=x,S=b==="end"?"top":"bottom");const T=w-p.top-p.bottom,C=k-p.left-p.right,D=Bs(w-p[S],T),A=Bs(k-p[N],C),Y=!e.middlewareData.shift;let I=D,$=A;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&($=C),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(I=T),Y&&!b){const le=on(p.left,0),ie=on(p.right,0),he=on(p.top,0),ye=on(p.bottom,0);v?$=k-2*(le!==0||ie!==0?le+ie:on(p.left,p.right)):I=w-2*(he!==0||ye!==0?he+ye:on(p.top,p.bottom))}await h({...e,availableWidth:$,availableHeight:I});const ae=await c.getDimensions(u.floating);return k!==ae.width||w!==ae.height?{reset:{rects:!0}}:{}}}};function nh(){return typeof window<"u"}function ai(r){return c2(r)?(r.nodeName||"").toLowerCase():"#document"}function dn(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function pa(r){var e;return(e=(c2(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function c2(r){return nh()?r instanceof Node||r instanceof dn(r).Node:!1}function Vn(r){return nh()?r instanceof Element||r instanceof dn(r).Element:!1}function fa(r){return nh()?r instanceof HTMLElement||r instanceof dn(r).HTMLElement:!1}function hw(r){return!nh()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof dn(r).ShadowRoot}const L4=new Set(["inline","contents"]);function Jc(r){const{overflow:e,overflowX:t,overflowY:n,display:s}=Fn(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!L4.has(s)}const B4=new Set(["table","td","th"]);function I4(r){return B4.has(ai(r))}const P4=[":popover-open",":modal"];function ah(r){return P4.some(e=>{try{return r.matches(e)}catch{return!1}})}const _4=["transform","translate","scale","rotate","perspective"],H4=["transform","translate","scale","rotate","perspective","filter"],$4=["paint","layout","strict","content"];function Vg(r){const e=Fg(),t=Vn(r)?Fn(r):r;return _4.some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||H4.some(n=>(t.willChange||"").includes(n))||$4.some(n=>(t.contain||"").includes(n))}function U4(r){let e=Is(r);for(;fa(e)&&!Kl(e);){if(Vg(e))return e;if(ah(e))return null;e=Is(e)}return null}function Fg(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const V4=new Set(["html","body","#document"]);function Kl(r){return V4.has(ai(r))}function Fn(r){return dn(r).getComputedStyle(r)}function sh(r){return Vn(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function Is(r){if(ai(r)==="html")return r;const e=r.assignedSlot||r.parentNode||hw(r)&&r.host||pa(r);return hw(e)?e.host:e}function d2(r){const e=Is(r);return Kl(e)?r.ownerDocument?r.ownerDocument.body:r.body:fa(e)&&Jc(e)?e:d2(e)}function _c(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const s=d2(r),l=s===((n=r.ownerDocument)==null?void 0:n.body),c=dn(s);if(l){const u=Up(c);return e.concat(c,c.visualViewport||[],Jc(s)?s:[],u&&t?_c(u):[])}return e.concat(s,_c(s,[],t))}function Up(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function u2(r){const e=Fn(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const s=fa(r),l=s?r.offsetWidth:t,c=s?r.offsetHeight:n,u=Zu(t)!==l||Zu(n)!==c;return u&&(t=l,n=c),{width:t,height:n,$:u}}function Yg(r){return Vn(r)?r:r.contextElement}function $l(r){const e=Yg(r);if(!fa(e))return ua(1);const t=e.getBoundingClientRect(),{width:n,height:s,$:l}=u2(e);let c=(l?Zu(t.width):t.width)/n,u=(l?Zu(t.height):t.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!u||!Number.isFinite(u))&&(u=1),{x:c,y:u}}const F4=ua(0);function f2(r){const e=dn(r);return!Fg()||!e.visualViewport?F4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Y4(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==dn(r)?!1:e}function Ao(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const s=r.getBoundingClientRect(),l=Yg(r);let c=ua(1);e&&(n?Vn(n)&&(c=$l(n)):c=$l(r));const u=Y4(l,t,n)?f2(l):ua(0);let h=(s.left+u.x)/c.x,m=(s.top+u.y)/c.y,p=s.width/c.x,x=s.height/c.y;if(l){const b=dn(l),v=n&&Vn(n)?dn(n):n;let k=b,w=Up(k);for(;w&&n&&v!==k;){const S=$l(w),N=w.getBoundingClientRect(),T=Fn(w),C=N.left+(w.clientLeft+parseFloat(T.paddingLeft))*S.x,D=N.top+(w.clientTop+parseFloat(T.paddingTop))*S.y;h*=S.x,m*=S.y,p*=S.x,x*=S.y,h+=C,m+=D,k=dn(w),w=Up(k)}}return tf({width:p,height:x,x:h,y:m})}function oh(r,e){const t=sh(r).scrollLeft;return e?e.left+t:Ao(pa(r)).left+t}function h2(r,e){const t=r.getBoundingClientRect(),n=t.left+e.scrollLeft-oh(r,t),s=t.top+e.scrollTop;return{x:n,y:s}}function q4(r){let{elements:e,rect:t,offsetParent:n,strategy:s}=r;const l=s==="fixed",c=pa(n),u=e?ah(e.floating):!1;if(n===c||u&&l)return t;let h={scrollLeft:0,scrollTop:0},m=ua(1);const p=ua(0),x=fa(n);if((x||!x&&!l)&&((ai(n)!=="body"||Jc(c))&&(h=sh(n)),fa(n))){const v=Ao(n);m=$l(n),p.x=v.x+n.clientLeft,p.y=v.y+n.clientTop}const b=c&&!x&&!l?h2(c,h):ua(0);return{width:t.width*m.x,height:t.height*m.y,x:t.x*m.x-h.scrollLeft*m.x+p.x+b.x,y:t.y*m.y-h.scrollTop*m.y+p.y+b.y}}function G4(r){return Array.from(r.getClientRects())}function K4(r){const e=pa(r),t=sh(r),n=r.ownerDocument.body,s=on(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),l=on(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let c=-t.scrollLeft+oh(r);const u=-t.scrollTop;return Fn(n).direction==="rtl"&&(c+=on(e.clientWidth,n.clientWidth)-s),{width:s,height:l,x:c,y:u}}const mw=25;function W4(r,e){const t=dn(r),n=pa(r),s=t.visualViewport;let l=n.clientWidth,c=n.clientHeight,u=0,h=0;if(s){l=s.width,c=s.height;const p=Fg();(!p||p&&e==="fixed")&&(u=s.offsetLeft,h=s.offsetTop)}const m=oh(n);if(m<=0){const p=n.ownerDocument,x=p.body,b=getComputedStyle(x),v=p.compatMode==="CSS1Compat"&&parseFloat(b.marginLeft)+parseFloat(b.marginRight)||0,k=Math.abs(n.clientWidth-x.clientWidth-v);k<=mw&&(l-=k)}else m<=mw&&(l+=m);return{width:l,height:c,x:u,y:h}}const X4=new Set(["absolute","fixed"]);function Q4(r,e){const t=Ao(r,!0,e==="fixed"),n=t.top+r.clientTop,s=t.left+r.clientLeft,l=fa(r)?$l(r):ua(1),c=r.clientWidth*l.x,u=r.clientHeight*l.y,h=s*l.x,m=n*l.y;return{width:c,height:u,x:h,y:m}}function pw(r,e,t){let n;if(e==="viewport")n=W4(r,t);else if(e==="document")n=K4(pa(r));else if(Vn(e))n=Q4(e,t);else{const s=f2(r);n={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return tf(n)}function m2(r,e){const t=Is(r);return t===e||!Vn(t)||Kl(t)?!1:Fn(t).position==="fixed"||m2(t,e)}function J4(r,e){const t=e.get(r);if(t)return t;let n=_c(r,[],!1).filter(u=>Vn(u)&&ai(u)!=="body"),s=null;const l=Fn(r).position==="fixed";let c=l?Is(r):r;for(;Vn(c)&&!Kl(c);){const u=Fn(c),h=Vg(c);!h&&u.position==="fixed"&&(s=null),(l?!h&&!s:!h&&u.position==="static"&&!!s&&X4.has(s.position)||Jc(c)&&!h&&m2(r,c))?n=n.filter(p=>p!==c):s=u,c=Is(c)}return e.set(r,n),n}function Z4(r){let{element:e,boundary:t,rootBoundary:n,strategy:s}=r;const c=[...t==="clippingAncestors"?ah(e)?[]:J4(e,this._c):[].concat(t),n],u=c[0],h=c.reduce((m,p)=>{const x=pw(e,p,s);return m.top=on(x.top,m.top),m.right=Bs(x.right,m.right),m.bottom=Bs(x.bottom,m.bottom),m.left=on(x.left,m.left),m},pw(e,u,s));return{width:h.right-h.left,height:h.bottom-h.top,x:h.left,y:h.top}}function e6(r){const{width:e,height:t}=u2(r);return{width:e,height:t}}function t6(r,e,t){const n=fa(e),s=pa(e),l=t==="fixed",c=Ao(r,!0,l,e);let u={scrollLeft:0,scrollTop:0};const h=ua(0);function m(){h.x=oh(s)}if(n||!n&&!l)if((ai(e)!=="body"||Jc(s))&&(u=sh(e)),n){const v=Ao(e,!0,l,e);h.x=v.x+e.clientLeft,h.y=v.y+e.clientTop}else s&&m();l&&!n&&s&&m();const p=s&&!n&&!l?h2(s,u):ua(0),x=c.left+u.scrollLeft-h.x-p.x,b=c.top+u.scrollTop-h.y-p.y;return{x,y:b,width:c.width,height:c.height}}function qm(r){return Fn(r).position==="static"}function gw(r,e){if(!fa(r)||Fn(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return pa(r)===t&&(t=t.ownerDocument.body),t}function p2(r,e){const t=dn(r);if(ah(r))return t;if(!fa(r)){let s=Is(r);for(;s&&!Kl(s);){if(Vn(s)&&!qm(s))return s;s=Is(s)}return t}let n=gw(r,e);for(;n&&I4(n)&&qm(n);)n=gw(n,e);return n&&Kl(n)&&qm(n)&&!Vg(n)?t:n||U4(r)||t}const r6=async function(r){const e=this.getOffsetParent||p2,t=this.getDimensions,n=await t(r.floating);return{reference:t6(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function n6(r){return Fn(r).direction==="rtl"}const a6={convertOffsetParentRelativeRectToViewportRelativeRect:q4,getDocumentElement:pa,getClippingRect:Z4,getOffsetParent:p2,getElementRects:r6,getClientRects:G4,getDimensions:e6,getScale:$l,isElement:Vn,isRTL:n6};function g2(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function s6(r,e){let t=null,n;const s=pa(r);function l(){var u;clearTimeout(n),(u=t)==null||u.disconnect(),t=null}function c(u,h){u===void 0&&(u=!1),h===void 0&&(h=1),l();const m=r.getBoundingClientRect(),{left:p,top:x,width:b,height:v}=m;if(u||e(),!b||!v)return;const k=wu(x),w=wu(s.clientWidth-(p+b)),S=wu(s.clientHeight-(x+v)),N=wu(p),C={rootMargin:-k+"px "+-w+"px "+-S+"px "+-N+"px",threshold:on(0,Bs(1,h))||1};let D=!0;function A(Y){const I=Y[0].intersectionRatio;if(I!==h){if(!D)return c();I?c(!1,I):n=setTimeout(()=>{c(!1,1e-7)},1e3)}I===1&&!g2(m,r.getBoundingClientRect())&&c(),D=!1}try{t=new IntersectionObserver(A,{...C,root:s.ownerDocument})}catch{t=new IntersectionObserver(A,C)}t.observe(r)}return c(!0),l}function o6(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:s=!0,ancestorResize:l=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:h=!1}=n,m=Yg(r),p=s||l?[...m?_c(m):[],..._c(e)]:[];p.forEach(N=>{s&&N.addEventListener("scroll",t,{passive:!0}),l&&N.addEventListener("resize",t)});const x=m&&u?s6(m,t):null;let b=-1,v=null;c&&(v=new ResizeObserver(N=>{let[T]=N;T&&T.target===m&&v&&(v.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var C;(C=v)==null||C.observe(e)})),t()}),m&&!h&&v.observe(m),v.observe(e));let k,w=h?Ao(r):null;h&&S();function S(){const N=Ao(r);w&&!g2(w,N)&&t(),w=N,k=requestAnimationFrame(S)}return t(),()=>{var N;p.forEach(T=>{s&&T.removeEventListener("scroll",t),l&&T.removeEventListener("resize",t)}),x?.(),(N=v)==null||N.disconnect(),v=null,h&&cancelAnimationFrame(k)}}const l6=D4,i6=O4,c6=M4,d6=z4,u6=E4,xw=T4,f6=R4,h6=(r,e,t)=>{const n=new Map,s={platform:a6,...t},l={...s.platform,_c:n};return C4(r,e,{...s,platform:l})};var m6=typeof document<"u",p6=function(){},$u=m6?M.useLayoutEffect:p6;function rf(r,e){if(r===e)return!0;if(typeof r!=typeof e)return!1;if(typeof r=="function"&&r.toString()===e.toString())return!0;let t,n,s;if(r&&e&&typeof r=="object"){if(Array.isArray(r)){if(t=r.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!rf(r[n],e[n]))return!1;return!0}if(s=Object.keys(r),t=s.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,s[n]))return!1;for(n=t;n--!==0;){const l=s[n];if(!(l==="_owner"&&r.$$typeof)&&!rf(r[l],e[l]))return!1}return!0}return r!==r&&e!==e}function x2(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function bw(r,e){const t=x2(r);return Math.round(e*t)/t}function Gm(r){const e=M.useRef(r);return $u(()=>{e.current=r}),e}function g6(r){r===void 0&&(r={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:s,elements:{reference:l,floating:c}={},transform:u=!0,whileElementsMounted:h,open:m}=r,[p,x]=M.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[b,v]=M.useState(n);rf(b,n)||v(n);const[k,w]=M.useState(null),[S,N]=M.useState(null),T=M.useCallback(L=>{L!==Y.current&&(Y.current=L,w(L))},[]),C=M.useCallback(L=>{L!==I.current&&(I.current=L,N(L))},[]),D=l||k,A=c||S,Y=M.useRef(null),I=M.useRef(null),$=M.useRef(p),ae=h!=null,le=Gm(h),ie=Gm(s),he=Gm(m),ye=M.useCallback(()=>{if(!Y.current||!I.current)return;const L={placement:e,strategy:t,middleware:b};ie.current&&(L.platform=ie.current),h6(Y.current,I.current,L).then(H=>{const Q={...H,isPositioned:he.current!==!1};fe.current&&!rf($.current,Q)&&($.current=Q,Wf.flushSync(()=>{x(Q)}))})},[b,e,t,ie,he]);$u(()=>{m===!1&&$.current.isPositioned&&($.current.isPositioned=!1,x(L=>({...L,isPositioned:!1})))},[m]);const fe=M.useRef(!1);$u(()=>(fe.current=!0,()=>{fe.current=!1}),[]),$u(()=>{if(D&&(Y.current=D),A&&(I.current=A),D&&A){if(le.current)return le.current(D,A,ye);ye()}},[D,A,ye,le,ae]);const ve=M.useMemo(()=>({reference:Y,floating:I,setReference:T,setFloating:C}),[T,C]),B=M.useMemo(()=>({reference:D,floating:A}),[D,A]),W=M.useMemo(()=>{const L={position:t,left:0,top:0};if(!B.floating)return L;const H=bw(B.floating,p.x),Q=bw(B.floating,p.y);return u?{...L,transform:"translate("+H+"px, "+Q+"px)",...x2(B.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:H,top:Q}},[t,u,B.floating,p.x,p.y]);return M.useMemo(()=>({...p,update:ye,refs:ve,elements:B,floatingStyles:W}),[p,ye,ve,B,W])}const x6=r=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:r,fn(t){const{element:n,padding:s}=typeof r=="function"?r(t):r;return n&&e(n)?n.current!=null?xw({element:n.current,padding:s}).fn(t):{}:n?xw({element:n,padding:s}).fn(t):{}}}},b6=(r,e)=>({...l6(r),options:[r,e]}),y6=(r,e)=>({...i6(r),options:[r,e]}),v6=(r,e)=>({...f6(r),options:[r,e]}),k6=(r,e)=>({...c6(r),options:[r,e]}),w6=(r,e)=>({...d6(r),options:[r,e]}),S6=(r,e)=>({...u6(r),options:[r,e]}),N6=(r,e)=>({...x6(r),options:[r,e]});var j6="Arrow",b2=M.forwardRef((r,e)=>{const{children:t,width:n=10,height:s=5,...l}=r;return i.jsx(rt.svg,{...l,ref:e,width:n,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:r.asChild?t:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});b2.displayName=j6;var C6=b2;function qg(r){const[e,t]=M.useState(void 0);return Ar(()=>{if(r){t({width:r.offsetWidth,height:r.offsetHeight});const n=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const l=s[0];let c,u;if("borderBoxSize"in l){const h=l.borderBoxSize,m=Array.isArray(h)?h[0]:h;c=m.inlineSize,u=m.blockSize}else c=r.offsetWidth,u=r.offsetHeight;t({width:c,height:u})});return n.observe(r,{box:"border-box"}),()=>n.unobserve(r)}else t(void 0)},[r]),e}var Gg="Popper",[y2,v2]=ri(Gg),[T6,k2]=y2(Gg),w2=r=>{const{__scopePopper:e,children:t}=r,[n,s]=M.useState(null);return i.jsx(T6,{scope:e,anchor:n,onAnchorChange:s,children:t})};w2.displayName=Gg;var S2="PopperAnchor",N2=M.forwardRef((r,e)=>{const{__scopePopper:t,virtualRef:n,...s}=r,l=k2(S2,t),c=M.useRef(null),u=ft(e,c),h=M.useRef(null);return M.useEffect(()=>{const m=h.current;h.current=n?.current||c.current,m!==h.current&&l.onAnchorChange(h.current)}),n?null:i.jsx(rt.div,{...s,ref:u})});N2.displayName=S2;var Kg="PopperContent",[M6,E6]=y2(Kg),j2=M.forwardRef((r,e)=>{const{__scopePopper:t,side:n="bottom",sideOffset:s=0,align:l="center",alignOffset:c=0,arrowPadding:u=0,avoidCollisions:h=!0,collisionBoundary:m=[],collisionPadding:p=0,sticky:x="partial",hideWhenDetached:b=!1,updatePositionStrategy:v="optimized",onPlaced:k,...w}=r,S=k2(Kg,t),[N,T]=M.useState(null),C=ft(e,de=>T(de)),[D,A]=M.useState(null),Y=qg(D),I=Y?.width??0,$=Y?.height??0,ae=n+(l!=="center"?"-"+l:""),le=typeof p=="number"?p:{top:0,right:0,bottom:0,left:0,...p},ie=Array.isArray(m)?m:[m],he=ie.length>0,ye={padding:le,boundary:ie.filter(D6),altBoundary:he},{refs:fe,floatingStyles:ve,placement:B,isPositioned:W,middlewareData:L}=g6({strategy:"fixed",placement:ae,whileElementsMounted:(...de)=>o6(...de,{animationFrame:v==="always"}),elements:{reference:S.anchor},middleware:[b6({mainAxis:s+$,alignmentAxis:c}),h&&y6({mainAxis:!0,crossAxis:!1,limiter:x==="partial"?v6():void 0,...ye}),h&&k6({...ye}),w6({...ye,apply:({elements:de,rects:ne,availableWidth:ge,availableHeight:Z})=>{const{width:oe,height:Le}=ne.reference,Je=de.floating.style;Je.setProperty("--radix-popper-available-width",`${ge}px`),Je.setProperty("--radix-popper-available-height",`${Z}px`),Je.setProperty("--radix-popper-anchor-width",`${oe}px`),Je.setProperty("--radix-popper-anchor-height",`${Le}px`)}}),D&&N6({element:D,padding:u}),O6({arrowWidth:I,arrowHeight:$}),b&&S6({strategy:"referenceHidden",...ye})]}),[H,Q]=M2(B),ue=Mo(k);Ar(()=>{W&&ue?.()},[W,ue]);const Ae=L.arrow?.x,me=L.arrow?.y,be=L.arrow?.centerOffset!==0,[$e,_e]=M.useState();return Ar(()=>{N&&_e(window.getComputedStyle(N).zIndex)},[N]),i.jsx("div",{ref:fe.setFloating,"data-radix-popper-content-wrapper":"",style:{...ve,transform:W?ve.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:$e,"--radix-popper-transform-origin":[L.transformOrigin?.x,L.transformOrigin?.y].join(" "),...L.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:r.dir,children:i.jsx(M6,{scope:t,placedSide:H,onArrowChange:A,arrowX:Ae,arrowY:me,shouldHideArrow:be,children:i.jsx(rt.div,{"data-side":H,"data-align":Q,...w,ref:C,style:{...w.style,animation:W?void 0:"none"}})})})});j2.displayName=Kg;var C2="PopperArrow",A6={top:"bottom",right:"left",bottom:"top",left:"right"},T2=M.forwardRef(function(e,t){const{__scopePopper:n,...s}=e,l=E6(C2,n),c=A6[l.placedSide];return i.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[c]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:i.jsx(C6,{...s,ref:t,style:{...s.style,display:"block"}})})});T2.displayName=C2;function D6(r){return r!==null}var O6=r=>({name:"transformOrigin",options:r,fn(e){const{placement:t,rects:n,middlewareData:s}=e,c=s.arrow?.centerOffset!==0,u=c?0:r.arrowWidth,h=c?0:r.arrowHeight,[m,p]=M2(t),x={start:"0%",center:"50%",end:"100%"}[p],b=(s.arrow?.x??0)+u/2,v=(s.arrow?.y??0)+h/2;let k="",w="";return m==="bottom"?(k=c?x:`${b}px`,w=`${-h}px`):m==="top"?(k=c?x:`${b}px`,w=`${n.floating.height+h}px`):m==="right"?(k=`${-h}px`,w=c?x:`${v}px`):m==="left"&&(k=`${n.floating.width+h}px`,w=c?x:`${v}px`),{data:{x:k,y:w}}}});function M2(r){const[e,t="center"]=r.split("-");return[e,t]}var R6=w2,z6=N2,L6=j2,B6=T2;function Wg(r){const e=M.useRef({value:r,previous:r});return M.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}var E2=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),I6="VisuallyHidden",P6=M.forwardRef((r,e)=>i.jsx(rt.span,{...r,ref:e,style:{...E2,...r.style}}));P6.displayName=I6;var _6=[" ","Enter","ArrowUp","ArrowDown"],H6=[" ","Enter"],Do="Select",[lh,ih,$6]=s2(Do),[si,VB]=ri(Do,[$6,v2]),ch=v2(),[U6,Us]=si(Do),[V6,F6]=si(Do),A2=r=>{const{__scopeSelect:e,children:t,open:n,defaultOpen:s,onOpenChange:l,value:c,defaultValue:u,onValueChange:h,dir:m,name:p,autoComplete:x,disabled:b,required:v,form:k}=r,w=ch(e),[S,N]=M.useState(null),[T,C]=M.useState(null),[D,A]=M.useState(!1),Y=o2(m),[I,$]=Bc({prop:n,defaultProp:s??!1,onChange:l,caller:Do}),[ae,le]=Bc({prop:c,defaultProp:u,onChange:h,caller:Do}),ie=M.useRef(null),he=S?k||!!S.closest("form"):!0,[ye,fe]=M.useState(new Set),ve=Array.from(ye).map(B=>B.props.value).join(";");return i.jsx(R6,{...w,children:i.jsxs(U6,{required:v,scope:e,trigger:S,onTriggerChange:N,valueNode:T,onValueNodeChange:C,valueNodeHasChildren:D,onValueNodeHasChildrenChange:A,contentId:_l(),value:ae,onValueChange:le,open:I,onOpenChange:$,dir:Y,triggerPointerDownPosRef:ie,disabled:b,children:[i.jsx(lh.Provider,{scope:e,children:i.jsx(V6,{scope:r.__scopeSelect,onNativeOptionAdd:M.useCallback(B=>{fe(W=>new Set(W).add(B))},[]),onNativeOptionRemove:M.useCallback(B=>{fe(W=>{const L=new Set(W);return L.delete(B),L})},[]),children:t})}),he?i.jsxs(eN,{"aria-hidden":!0,required:v,tabIndex:-1,name:p,autoComplete:x,value:ae,onChange:B=>le(B.target.value),disabled:b,form:k,children:[ae===void 0?i.jsx("option",{value:""}):null,Array.from(ye)]},ve):null]})})};A2.displayName=Do;var D2="SelectTrigger",O2=M.forwardRef((r,e)=>{const{__scopeSelect:t,disabled:n=!1,...s}=r,l=ch(t),c=Us(D2,t),u=c.disabled||n,h=ft(e,c.onTriggerChange),m=ih(t),p=M.useRef("touch"),[x,b,v]=rN(w=>{const S=m().filter(C=>!C.disabled),N=S.find(C=>C.value===c.value),T=nN(S,w,N);T!==void 0&&c.onValueChange(T.value)}),k=w=>{u||(c.onOpenChange(!0),v()),w&&(c.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return i.jsx(z6,{asChild:!0,...l,children:i.jsx(rt.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":tN(c.value)?"":void 0,...s,ref:h,onClick:at(s.onClick,w=>{w.currentTarget.focus(),p.current!=="mouse"&&k(w)}),onPointerDown:at(s.onPointerDown,w=>{p.current=w.pointerType;const S=w.target;S.hasPointerCapture(w.pointerId)&&S.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(k(w),w.preventDefault())}),onKeyDown:at(s.onKeyDown,w=>{const S=x.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&b(w.key),!(S&&w.key===" ")&&_6.includes(w.key)&&(k(),w.preventDefault())})})})});O2.displayName=D2;var R2="SelectValue",z2=M.forwardRef((r,e)=>{const{__scopeSelect:t,className:n,style:s,children:l,placeholder:c="",...u}=r,h=Us(R2,t),{onValueNodeHasChildrenChange:m}=h,p=l!==void 0,x=ft(e,h.onValueNodeChange);return Ar(()=>{m(p)},[m,p]),i.jsx(rt.span,{...u,ref:x,style:{pointerEvents:"none"},children:tN(h.value)?i.jsx(i.Fragment,{children:c}):l})});z2.displayName=R2;var Y6="SelectIcon",L2=M.forwardRef((r,e)=>{const{__scopeSelect:t,children:n,...s}=r;return i.jsx(rt.span,{"aria-hidden":!0,...s,ref:e,children:n||""})});L2.displayName=Y6;var q6="SelectPortal",B2=r=>i.jsx(zg,{asChild:!0,...r});B2.displayName=q6;var Oo="SelectContent",I2=M.forwardRef((r,e)=>{const t=Us(Oo,r.__scopeSelect),[n,s]=M.useState();if(Ar(()=>{s(new DocumentFragment)},[]),!t.open){const l=n;return l?Wf.createPortal(i.jsx(P2,{scope:r.__scopeSelect,children:i.jsx(lh.Slot,{scope:r.__scopeSelect,children:i.jsx("div",{children:r.children})})}),l):null}return i.jsx(_2,{...r,ref:e})});I2.displayName=Oo;var In=10,[P2,Vs]=si(Oo),G6="SelectContentImpl",K6=Gl("SelectContent.RemoveScroll"),_2=M.forwardRef((r,e)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:l,onPointerDownOutside:c,side:u,sideOffset:h,align:m,alignOffset:p,arrowPadding:x,collisionBoundary:b,collisionPadding:v,sticky:k,hideWhenDetached:w,avoidCollisions:S,...N}=r,T=Us(Oo,t),[C,D]=M.useState(null),[A,Y]=M.useState(null),I=ft(e,de=>D(de)),[$,ae]=M.useState(null),[le,ie]=M.useState(null),he=ih(t),[ye,fe]=M.useState(!1),ve=M.useRef(!1);M.useEffect(()=>{if(C)return SS(C)},[C]),mS();const B=M.useCallback(de=>{const[ne,...ge]=he().map(Le=>Le.ref.current),[Z]=ge.slice(-1),oe=document.activeElement;for(const Le of de)if(Le===oe||(Le?.scrollIntoView({block:"nearest"}),Le===ne&&A&&(A.scrollTop=0),Le===Z&&A&&(A.scrollTop=A.scrollHeight),Le?.focus(),document.activeElement!==oe))return},[he,A]),W=M.useCallback(()=>B([$,C]),[B,$,C]);M.useEffect(()=>{ye&&W()},[ye,W]);const{onOpenChange:L,triggerPointerDownPosRef:H}=T;M.useEffect(()=>{if(C){let de={x:0,y:0};const ne=Z=>{de={x:Math.abs(Math.round(Z.pageX)-(H.current?.x??0)),y:Math.abs(Math.round(Z.pageY)-(H.current?.y??0))}},ge=Z=>{de.x<=10&&de.y<=10?Z.preventDefault():C.contains(Z.target)||L(!1),document.removeEventListener("pointermove",ne),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",ne),document.addEventListener("pointerup",ge,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",ne),document.removeEventListener("pointerup",ge,{capture:!0})}}},[C,L,H]),M.useEffect(()=>{const de=()=>L(!1);return window.addEventListener("blur",de),window.addEventListener("resize",de),()=>{window.removeEventListener("blur",de),window.removeEventListener("resize",de)}},[L]);const[Q,ue]=rN(de=>{const ne=he().filter(oe=>!oe.disabled),ge=ne.find(oe=>oe.ref.current===document.activeElement),Z=nN(ne,de,ge);Z&&setTimeout(()=>Z.ref.current.focus())}),Ae=M.useCallback((de,ne,ge)=>{const Z=!ve.current&&!ge;(T.value!==void 0&&T.value===ne||Z)&&(ae(de),Z&&(ve.current=!0))},[T.value]),me=M.useCallback(()=>C?.focus(),[C]),be=M.useCallback((de,ne,ge)=>{const Z=!ve.current&&!ge;(T.value!==void 0&&T.value===ne||Z)&&ie(de)},[T.value]),$e=n==="popper"?Vp:H2,_e=$e===Vp?{side:u,sideOffset:h,align:m,alignOffset:p,arrowPadding:x,collisionBoundary:b,collisionPadding:v,sticky:k,hideWhenDetached:w,avoidCollisions:S}:{};return i.jsx(P2,{scope:t,content:C,viewport:A,onViewportChange:Y,itemRefCallback:Ae,selectedItem:$,onItemLeave:me,itemTextRefCallback:be,focusSelectedItem:W,selectedItemText:le,position:n,isPositioned:ye,searchRef:Q,children:i.jsx(Lg,{as:K6,allowPinchZoom:!0,children:i.jsx(Rg,{asChild:!0,trapped:T.open,onMountAutoFocus:de=>{de.preventDefault()},onUnmountAutoFocus:at(s,de=>{T.trigger?.focus({preventScroll:!0}),de.preventDefault()}),children:i.jsx(Og,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:de=>de.preventDefault(),onDismiss:()=>T.onOpenChange(!1),children:i.jsx($e,{role:"listbox",id:T.contentId,"data-state":T.open?"open":"closed",dir:T.dir,onContextMenu:de=>de.preventDefault(),...N,..._e,onPlaced:()=>fe(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:at(N.onKeyDown,de=>{const ne=de.ctrlKey||de.altKey||de.metaKey;if(de.key==="Tab"&&de.preventDefault(),!ne&&de.key.length===1&&ue(de.key),["ArrowUp","ArrowDown","Home","End"].includes(de.key)){let Z=he().filter(oe=>!oe.disabled).map(oe=>oe.ref.current);if(["ArrowUp","End"].includes(de.key)&&(Z=Z.slice().reverse()),["ArrowUp","ArrowDown"].includes(de.key)){const oe=de.target,Le=Z.indexOf(oe);Z=Z.slice(Le+1)}setTimeout(()=>B(Z)),de.preventDefault()}})})})})})})});_2.displayName=G6;var W6="SelectItemAlignedPosition",H2=M.forwardRef((r,e)=>{const{__scopeSelect:t,onPlaced:n,...s}=r,l=Us(Oo,t),c=Vs(Oo,t),[u,h]=M.useState(null),[m,p]=M.useState(null),x=ft(e,I=>p(I)),b=ih(t),v=M.useRef(!1),k=M.useRef(!0),{viewport:w,selectedItem:S,selectedItemText:N,focusSelectedItem:T}=c,C=M.useCallback(()=>{if(l.trigger&&l.valueNode&&u&&m&&w&&S&&N){const I=l.trigger.getBoundingClientRect(),$=m.getBoundingClientRect(),ae=l.valueNode.getBoundingClientRect(),le=N.getBoundingClientRect();if(l.dir!=="rtl"){const oe=le.left-$.left,Le=ae.left-oe,Je=I.left-Le,it=I.width+Je,zt=Math.max(it,$.width),Yt=window.innerWidth-In,Et=Ju(Le,[In,Math.max(In,Yt-zt)]);u.style.minWidth=it+"px",u.style.left=Et+"px"}else{const oe=$.right-le.right,Le=window.innerWidth-ae.right-oe,Je=window.innerWidth-I.right-Le,it=I.width+Je,zt=Math.max(it,$.width),Yt=window.innerWidth-In,Et=Ju(Le,[In,Math.max(In,Yt-zt)]);u.style.minWidth=it+"px",u.style.right=Et+"px"}const ie=b(),he=window.innerHeight-In*2,ye=w.scrollHeight,fe=window.getComputedStyle(m),ve=parseInt(fe.borderTopWidth,10),B=parseInt(fe.paddingTop,10),W=parseInt(fe.borderBottomWidth,10),L=parseInt(fe.paddingBottom,10),H=ve+B+ye+L+W,Q=Math.min(S.offsetHeight*5,H),ue=window.getComputedStyle(w),Ae=parseInt(ue.paddingTop,10),me=parseInt(ue.paddingBottom,10),be=I.top+I.height/2-In,$e=he-be,_e=S.offsetHeight/2,de=S.offsetTop+_e,ne=ve+B+de,ge=H-ne;if(ne<=be){const oe=ie.length>0&&S===ie[ie.length-1].ref.current;u.style.bottom="0px";const Le=m.clientHeight-w.offsetTop-w.offsetHeight,Je=Math.max($e,_e+(oe?me:0)+Le+W),it=ne+Je;u.style.height=it+"px"}else{const oe=ie.length>0&&S===ie[0].ref.current;u.style.top="0px";const Je=Math.max(be,ve+w.offsetTop+(oe?Ae:0)+_e)+ge;u.style.height=Je+"px",w.scrollTop=ne-be+w.offsetTop}u.style.margin=`${In}px 0`,u.style.minHeight=Q+"px",u.style.maxHeight=he+"px",n?.(),requestAnimationFrame(()=>v.current=!0)}},[b,l.trigger,l.valueNode,u,m,w,S,N,l.dir,n]);Ar(()=>C(),[C]);const[D,A]=M.useState();Ar(()=>{m&&A(window.getComputedStyle(m).zIndex)},[m]);const Y=M.useCallback(I=>{I&&k.current===!0&&(C(),T?.(),k.current=!1)},[C,T]);return i.jsx(Q6,{scope:t,contentWrapper:u,shouldExpandOnScrollRef:v,onScrollButtonChange:Y,children:i.jsx("div",{ref:h,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:D},children:i.jsx(rt.div,{...s,ref:x,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});H2.displayName=W6;var X6="SelectPopperPosition",Vp=M.forwardRef((r,e)=>{const{__scopeSelect:t,align:n="start",collisionPadding:s=In,...l}=r,c=ch(t);return i.jsx(L6,{...c,...l,ref:e,align:n,collisionPadding:s,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Vp.displayName=X6;var[Q6,Xg]=si(Oo,{}),Fp="SelectViewport",$2=M.forwardRef((r,e)=>{const{__scopeSelect:t,nonce:n,...s}=r,l=Vs(Fp,t),c=Xg(Fp,t),u=ft(e,l.onViewportChange),h=M.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),i.jsx(lh.Slot,{scope:t,children:i.jsx(rt.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:at(s.onScroll,m=>{const p=m.currentTarget,{contentWrapper:x,shouldExpandOnScrollRef:b}=c;if(b?.current&&x){const v=Math.abs(h.current-p.scrollTop);if(v>0){const k=window.innerHeight-In*2,w=parseFloat(x.style.minHeight),S=parseFloat(x.style.height),N=Math.max(w,S);if(N<k){const T=N+v,C=Math.min(k,T),D=T-C;x.style.height=C+"px",x.style.bottom==="0px"&&(p.scrollTop=D>0?D:0,x.style.justifyContent="flex-end")}}}h.current=p.scrollTop})})})]})});$2.displayName=Fp;var U2="SelectGroup",[J6,Z6]=si(U2),eD=M.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,s=_l();return i.jsx(J6,{scope:t,id:s,children:i.jsx(rt.div,{role:"group","aria-labelledby":s,...n,ref:e})})});eD.displayName=U2;var V2="SelectLabel",F2=M.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,s=Z6(V2,t);return i.jsx(rt.div,{id:s.id,...n,ref:e})});F2.displayName=V2;var nf="SelectItem",[tD,Y2]=si(nf),q2=M.forwardRef((r,e)=>{const{__scopeSelect:t,value:n,disabled:s=!1,textValue:l,...c}=r,u=Us(nf,t),h=Vs(nf,t),m=u.value===n,[p,x]=M.useState(l??""),[b,v]=M.useState(!1),k=ft(e,T=>h.itemRefCallback?.(T,n,s)),w=_l(),S=M.useRef("touch"),N=()=>{s||(u.onValueChange(n),u.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(tD,{scope:t,value:n,disabled:s,textId:w,isSelected:m,onItemTextChange:M.useCallback(T=>{x(C=>C||(T?.textContent??"").trim())},[]),children:i.jsx(lh.ItemSlot,{scope:t,value:n,disabled:s,textValue:p,children:i.jsx(rt.div,{role:"option","aria-labelledby":w,"data-highlighted":b?"":void 0,"aria-selected":m&&b,"data-state":m?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...c,ref:k,onFocus:at(c.onFocus,()=>v(!0)),onBlur:at(c.onBlur,()=>v(!1)),onClick:at(c.onClick,()=>{S.current!=="mouse"&&N()}),onPointerUp:at(c.onPointerUp,()=>{S.current==="mouse"&&N()}),onPointerDown:at(c.onPointerDown,T=>{S.current=T.pointerType}),onPointerMove:at(c.onPointerMove,T=>{S.current=T.pointerType,s?h.onItemLeave?.():S.current==="mouse"&&T.currentTarget.focus({preventScroll:!0})}),onPointerLeave:at(c.onPointerLeave,T=>{T.currentTarget===document.activeElement&&h.onItemLeave?.()}),onKeyDown:at(c.onKeyDown,T=>{h.searchRef?.current!==""&&T.key===" "||(H6.includes(T.key)&&N(),T.key===" "&&T.preventDefault())})})})})});q2.displayName=nf;var uc="SelectItemText",G2=M.forwardRef((r,e)=>{const{__scopeSelect:t,className:n,style:s,...l}=r,c=Us(uc,t),u=Vs(uc,t),h=Y2(uc,t),m=F6(uc,t),[p,x]=M.useState(null),b=ft(e,N=>x(N),h.onItemTextChange,N=>u.itemTextRefCallback?.(N,h.value,h.disabled)),v=p?.textContent,k=M.useMemo(()=>i.jsx("option",{value:h.value,disabled:h.disabled,children:v},h.value),[h.disabled,h.value,v]),{onNativeOptionAdd:w,onNativeOptionRemove:S}=m;return Ar(()=>(w(k),()=>S(k)),[w,S,k]),i.jsxs(i.Fragment,{children:[i.jsx(rt.span,{id:h.textId,...l,ref:b}),h.isSelected&&c.valueNode&&!c.valueNodeHasChildren?Wf.createPortal(l.children,c.valueNode):null]})});G2.displayName=uc;var K2="SelectItemIndicator",W2=M.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r;return Y2(K2,t).isSelected?i.jsx(rt.span,{"aria-hidden":!0,...n,ref:e}):null});W2.displayName=K2;var Yp="SelectScrollUpButton",X2=M.forwardRef((r,e)=>{const t=Vs(Yp,r.__scopeSelect),n=Xg(Yp,r.__scopeSelect),[s,l]=M.useState(!1),c=ft(e,n.onScrollButtonChange);return Ar(()=>{if(t.viewport&&t.isPositioned){let u=function(){const m=h.scrollTop>0;l(m)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?i.jsx(J2,{...r,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop-h.offsetHeight)}}):null});X2.displayName=Yp;var qp="SelectScrollDownButton",Q2=M.forwardRef((r,e)=>{const t=Vs(qp,r.__scopeSelect),n=Xg(qp,r.__scopeSelect),[s,l]=M.useState(!1),c=ft(e,n.onScrollButtonChange);return Ar(()=>{if(t.viewport&&t.isPositioned){let u=function(){const m=h.scrollHeight-h.clientHeight,p=Math.ceil(h.scrollTop)<m;l(p)};const h=t.viewport;return u(),h.addEventListener("scroll",u),()=>h.removeEventListener("scroll",u)}},[t.viewport,t.isPositioned]),s?i.jsx(J2,{...r,ref:c,onAutoScroll:()=>{const{viewport:u,selectedItem:h}=t;u&&h&&(u.scrollTop=u.scrollTop+h.offsetHeight)}}):null});Q2.displayName=qp;var J2=M.forwardRef((r,e)=>{const{__scopeSelect:t,onAutoScroll:n,...s}=r,l=Vs("SelectScrollButton",t),c=M.useRef(null),u=ih(t),h=M.useCallback(()=>{c.current!==null&&(window.clearInterval(c.current),c.current=null)},[]);return M.useEffect(()=>()=>h(),[h]),Ar(()=>{u().find(p=>p.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[u]),i.jsx(rt.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:at(s.onPointerDown,()=>{c.current===null&&(c.current=window.setInterval(n,50))}),onPointerMove:at(s.onPointerMove,()=>{l.onItemLeave?.(),c.current===null&&(c.current=window.setInterval(n,50))}),onPointerLeave:at(s.onPointerLeave,()=>{h()})})}),rD="SelectSeparator",Z2=M.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r;return i.jsx(rt.div,{"aria-hidden":!0,...n,ref:e})});Z2.displayName=rD;var Gp="SelectArrow",nD=M.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,s=ch(t),l=Us(Gp,t),c=Vs(Gp,t);return l.open&&c.position==="popper"?i.jsx(B6,{...s,...n,ref:e}):null});nD.displayName=Gp;var aD="SelectBubbleInput",eN=M.forwardRef(({__scopeSelect:r,value:e,...t},n)=>{const s=M.useRef(null),l=ft(n,s),c=Wg(e);return M.useEffect(()=>{const u=s.current;if(!u)return;const h=window.HTMLSelectElement.prototype,p=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==e&&p){const x=new Event("change",{bubbles:!0});p.call(u,e),u.dispatchEvent(x)}},[c,e]),i.jsx(rt.select,{...t,style:{...E2,...t.style},ref:l,defaultValue:e})});eN.displayName=aD;function tN(r){return r===""||r===void 0}function rN(r){const e=Mo(r),t=M.useRef(""),n=M.useRef(0),s=M.useCallback(c=>{const u=t.current+c;e(u),(function h(m){t.current=m,window.clearTimeout(n.current),m!==""&&(n.current=window.setTimeout(()=>h(""),1e3))})(u)},[e]),l=M.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return M.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,s,l]}function nN(r,e,t){const s=e.length>1&&Array.from(e).every(m=>m===e[0])?e[0]:e,l=t?r.indexOf(t):-1;let c=sD(r,Math.max(l,0));s.length===1&&(c=c.filter(m=>m!==t));const h=c.find(m=>m.textValue.toLowerCase().startsWith(s.toLowerCase()));return h!==t?h:void 0}function sD(r,e){return r.map((t,n)=>r[(e+n)%r.length])}var oD=A2,aN=O2,lD=z2,iD=L2,cD=B2,sN=I2,dD=$2,oN=F2,lN=q2,uD=G2,fD=W2,iN=X2,cN=Q2,dN=Z2;const yt=oD,vt=lD,gt=M.forwardRef(({className:r,children:e,...t},n)=>i.jsxs(aN,{ref:n,className:lt("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",r),...t,children:[e,i.jsx(iD,{asChild:!0,children:i.jsx(q1,{className:"h-4 w-4 opacity-50"})})]}));gt.displayName=aN.displayName;const uN=M.forwardRef(({className:r,...e},t)=>i.jsx(iN,{ref:t,className:lt("flex cursor-default items-center justify-center py-1",r),...e,children:i.jsx(NM,{className:"h-4 w-4"})}));uN.displayName=iN.displayName;const fN=M.forwardRef(({className:r,...e},t)=>i.jsx(cN,{ref:t,className:lt("flex cursor-default items-center justify-center py-1",r),...e,children:i.jsx(q1,{className:"h-4 w-4"})}));fN.displayName=cN.displayName;const xt=M.forwardRef(({className:r,children:e,position:t="popper",...n},s)=>i.jsx(cD,{children:i.jsxs(sN,{ref:s,className:lt("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:t,...n,children:[i.jsx(uN,{}),i.jsx(dD,{className:lt("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(fN,{})]})}));xt.displayName=sN.displayName;const hD=M.forwardRef(({className:r,...e},t)=>i.jsx(oN,{ref:t,className:lt("px-2 py-1.5 text-sm font-semibold",r),...e}));hD.displayName=oN.displayName;const Oe=M.forwardRef(({className:r,children:e,...t},n)=>i.jsxs(lN,{ref:n,className:lt("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...t,children:[i.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(fD,{children:i.jsx(Mg,{className:"h-4 w-4"})})}),i.jsx(uD,{children:e})]}));Oe.displayName=lN.displayName;const mD=M.forwardRef(({className:r,...e},t)=>i.jsx(dN,{ref:t,className:lt("-mx-1 my-1 h-px bg-muted",r),...e}));mD.displayName=dN.displayName;const pD=Dg("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Hn({className:r,variant:e,...t}){return i.jsx("div",{className:lt(pD({variant:e}),r),...t})}const Qg=M.createContext({activeTab:"",setActiveTab:()=>{}}),hN=({defaultValue:r,className:e,children:t})=>{const[n,s]=M.useState(r);return i.jsx(Qg.Provider,{value:{activeTab:n,setActiveTab:s},children:i.jsx("div",{className:lt("",e),children:t})})},Jg=M.forwardRef(({className:r,children:e,...t},n)=>i.jsx("div",{ref:n,className:lt("inline-flex h-10 items-center justify-center rounded-md bg-neutral-100 dark:bg-muted p-1 text-neutral-600 dark:text-muted-foreground",r),...t,children:e}));Jg.displayName="TabsList";const Ha=M.forwardRef(({className:r,value:e,children:t,...n},s)=>{const{activeTab:l,setActiveTab:c}=M.useContext(Qg),u=l===e;return i.jsx("button",{ref:s,type:"button",className:lt("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",u?"bg-white dark:bg-background text-neutral-900 dark:text-foreground shadow-sm":"text-neutral-600 dark:text-neutral-400 hover:bg-white/50 dark:hover:bg-background/50 hover:text-neutral-900 dark:hover:text-foreground",r),onClick:()=>c(e),...n,children:t})});Ha.displayName="TabsTrigger";const $a=M.forwardRef(({className:r,value:e,children:t,...n},s)=>{const{activeTab:l}=M.useContext(Qg);return l!==e?null:i.jsx("div",{ref:s,className:lt("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...n,children:t})});$a.displayName="TabsContent";const ys=["#4f46e5","#7c3aed","#0891b2","#059669","#dc2626","#ea580c","#ca8a04","#9333ea"];function gD({isOpen:r,onClose:e}){const{sessions:t}=rh(),{getEffectiveStreak:n}=Dr(),[s,l]=M.useState("week"),c=M.useMemo(()=>{const p=new Date,x=new Date(p);x.setDate(p.getDate()-6);const b=new Date(p);b.setDate(p.getDate()-29);const v=new Date(p);return v.setMonth(p.getMonth()-4),{week:{start:x,end:p,label:"7 Days"},month:{start:b,end:p,label:"30 Days"},term:{start:v,end:p,label:"This Term"}}},[]),u=M.useMemo(()=>{const p=c[s];return t.filter(x=>{const b=new Date(x.start);return b>=p.start&&b<=p.end})},[t,s,c]),h=M.useMemo(()=>{const p=u.reduce((D,A)=>D+A.durationMin,0),x=Math.round(p/60*10)/10,b=Math.round(p/((c[s].end.getTime()-c[s].start.getTime())/(1e3*60*60*24))*10)/10,v=u.reduce((D,A)=>(D[A.source]=(D[A.source]||0)+A.durationMin,D),{}),k=u.reduce((D,A)=>(A.courseId&&(D[A.courseId]=(D[A.courseId]||0)+A.durationMin),D),{}),w=t2(u,c[s].start,c[s].end).map(D=>({date:D.date,hours:Math.round(D.minutes/60*10)/10,day:new Date(D.date).toLocaleDateString("en-US",{weekday:"short"})})),S=n(),N=w.sort((D,A)=>D.date.localeCompare(A.date));let T=0,C=0;for(let D=N.length-1;D>=0;D--)N[D].hours>0?C++:(T=Math.max(T,C),C=0);return T=Math.max(T,C),{totalHours:x,totalMinutes:p,avgPerDay:b,sessionsCount:u.length,bySource:Object.entries(v).map(([D,A])=>({source:D.charAt(0).toUpperCase()+D.slice(1),minutes:A,hours:Math.round(A/60*10)/10,percentage:Math.round(A/p*100)})).sort((D,A)=>A.minutes-D.minutes),byCourse:Object.entries(k).map(([D,A])=>({courseId:D,minutes:A,hours:Math.round(A/60*10)/10,percentage:Math.round(A/p*100)})).sort((D,A)=>A.minutes-D.minutes).slice(0,5),dailyData:w,currentStreak:S,maxStreak:T}},[u,c,s,n]),m=M.useMemo(()=>{const p=new Array(24).fill(0),x=new Array(7).fill(0);u.forEach(w=>{const S=new Date(w.start),N=S.getHours(),T=S.getDay();p[N]+=w.durationMin,x[T]+=w.durationMin});const b=p.indexOf(Math.max(...p)),v=x.indexOf(Math.max(...x)),k=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return{peakHour:b===0?"12:00 AM":b<12?`${b}:00 AM`:b===12?"12:00 PM":`${b-12}:00 PM`,peakDay:k[v],hourlyData:p.map((w,S)=>({hour:S===0?"12 AM":S<12?`${S} AM`:S===12?"12 PM":`${S-12} PM`,minutes:Math.round(w),hours:Math.round(w/60*10)/10})),weeklyData:x.map((w,S)=>({day:k[S].slice(0,3),fullDay:k[S],minutes:Math.round(w),hours:Math.round(w/60*10)/10}))}},[u]);return r?i.jsx(Yl,{children:i.jsx(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e,children:i.jsxs(et.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",duration:.4,bounce:.1},className:"bg-gradient-to-br from-white to-slate-50/90 dark:from-neutral-900 dark:to-neutral-800/90 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 dark:border-neutral-700/30 w-full max-w-6xl max-h-[90vh] overflow-hidden",onClick:p=>p.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-neutral-200/50 dark:border-neutral-700/50 bg-gradient-to-r from-indigo-500/5 to-purple-500/5 dark:from-indigo-900/20 dark:to-purple-900/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl shadow-lg",children:i.jsx(Rm,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Study Hours Analytics"}),i.jsx("p",{className:"text-neutral-600 dark:text-neutral-400 font-medium",children:"Detailed insights into your study patterns"})]})]}),i.jsx(K,{variant:"outline",size:"icon",onClick:e,className:"rounded-2xl border-neutral-200 dark:border-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-all duration-200",children:i.jsx(Qc,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[i.jsx("div",{className:"flex gap-3 mb-6",children:["week","month","term"].map(p=>i.jsx(K,{variant:s===p?"default":"outline",onClick:()=>l(p),className:`rounded-2xl px-6 py-2 font-semibold transition-all duration-200 ${s===p?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-lg shadow-indigo-500/25":"border-neutral-200 dark:border-neutral-700 hover:bg-gradient-to-r hover:from-indigo-50 hover:to-purple-50 dark:hover:from-indigo-950 dark:hover:to-purple-950"}`,children:c[p].label},p))}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[i.jsx(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-950/30 dark:to-indigo-900/30 shadow-lg hover:shadow-xl transition-all duration-200",children:i.jsx(je,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400 mb-1",children:"Total Hours"}),i.jsxs("p",{className:"text-3xl font-bold text-blue-700 dark:text-blue-300",children:[h.totalHours,"h"]})]}),i.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl",children:i.jsx(Rc,{className:"w-8 h-8 text-white"})})]})})}),i.jsx(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-emerald-50 to-teal-100 dark:from-emerald-950/30 dark:to-teal-900/30 shadow-lg hover:shadow-xl transition-all duration-200",children:i.jsx(je,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400 mb-1",children:"Daily Average"}),i.jsxs("p",{className:"text-3xl font-bold text-emerald-700 dark:text-emerald-300",children:[h.avgPerDay,"m"]})]}),i.jsx("div",{className:"p-3 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl",children:i.jsx(jM,{className:"w-8 h-8 text-white"})})]})})}),i.jsx(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-purple-50 to-violet-100 dark:from-purple-950/30 dark:to-violet-900/30 shadow-lg hover:shadow-xl transition-all duration-200",children:i.jsx(je,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400 mb-1",children:"Sessions"}),i.jsx("p",{className:"text-3xl font-bold text-purple-700 dark:text-purple-300",children:h.sessionsCount})]}),i.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-violet-600 rounded-2xl",children:i.jsx(Ll,{className:"w-8 h-8 text-white"})})]})})}),i.jsx(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-orange-50 to-amber-100 dark:from-orange-950/30 dark:to-amber-900/30 shadow-lg hover:shadow-xl transition-all duration-200",children:i.jsx(je,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-orange-600 dark:text-orange-400 mb-1",children:"Current Streak"}),i.jsxs("p",{className:"text-3xl font-bold text-orange-700 dark:text-orange-300",children:[h.currentStreak," days"]})]}),i.jsx("div",{className:"p-3 bg-gradient-to-br from-orange-500 to-amber-600 rounded-2xl",children:i.jsx(gc,{className:"w-8 h-8 text-white"})})]})})})]}),i.jsxs(hN,{defaultValue:"trends",className:"space-y-6",children:[i.jsxs(Jg,{className:"grid w-full grid-cols-4 rounded-2xl bg-neutral-100/80 dark:bg-neutral-800/80 p-1 backdrop-blur-sm",children:[i.jsx(Ha,{value:"trends",className:"rounded-xl bg-transparent data-[state=active]:bg-white data-[state=active]:shadow-md dark:data-[state=active]:bg-neutral-700 font-semibold transition-all duration-200",children:"Daily Trends"}),i.jsx(Ha,{value:"patterns",className:"rounded-xl bg-transparent data-[state=active]:bg-white data-[state=active]:shadow-md dark:data-[state=active]:bg-neutral-700 font-semibold transition-all duration-200",children:"Study Patterns"}),i.jsx(Ha,{value:"sources",className:"rounded-xl bg-transparent data-[state=active]:bg-white data-[state=active]:shadow-md dark:data-[state=active]:bg-neutral-700 font-semibold transition-all duration-200",children:"Sources"}),i.jsx(Ha,{value:"courses",className:"rounded-xl bg-transparent data-[state=active]:bg-white data-[state=active]:shadow-md dark:data-[state=active]:bg-neutral-700 font-semibold transition-all duration-200",children:"Courses"})]}),i.jsx($a,{value:"trends",className:"space-y-6",children:i.jsxs(Ne,{className:"rounded-2xl border-0 bg-white/80 dark:bg-neutral-800/80 backdrop-blur-sm shadow-lg",children:[i.jsx(qr,{className:"pb-4",children:i.jsxs(sn,{className:"flex items-center gap-3 text-lg",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl",children:i.jsx(Bl,{className:"w-5 h-5 text-white"})}),"Daily Study Hours"]})}),i.jsx(je,{children:i.jsx("div",{className:"h-64",children:i.jsx(la,{width:"100%",height:"100%",children:i.jsxs(zc,{data:h.dailyData,children:[i.jsx(Il,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),i.jsx(Pl,{dataKey:"day",stroke:"#6b7280"}),i.jsx(kc,{stroke:"#6b7280"}),i.jsx(ia,{formatter:p=>[`${p}h`,"Hours"],labelFormatter:p=>`Day: ${p}`,contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)"}}),i.jsx(Lc,{dataKey:"hours",fill:"url(#colorGradient)",radius:[6,6,0,0]}),i.jsx("defs",{children:i.jsxs("linearGradient",{id:"colorGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:ys[0],stopOpacity:.8}),i.jsx("stop",{offset:"95%",stopColor:ys[1],stopOpacity:.6})]})})]})})})})]})}),i.jsx($a,{value:"patterns",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(Ne,{className:"rounded-2xl border-0 bg-white/80 dark:bg-neutral-800/80 backdrop-blur-sm shadow-lg",children:[i.jsx(qr,{className:"pb-4",children:i.jsxs(sn,{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl",children:i.jsx(Ll,{className:"w-5 h-5 text-white"})}),"Peak Study Times"]})}),i.jsx(je,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-indigo-50 to-purple-50 dark:from-indigo-950/30 dark:to-purple-950/30 rounded-2xl border border-indigo-100 dark:border-indigo-800",children:[i.jsx("span",{className:"font-semibold text-indigo-700 dark:text-indigo-300",children:"Peak Hour"}),i.jsx(Hn,{className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white border-0 px-3 py-1",children:m.peakHour})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-950/30 dark:to-teal-950/30 rounded-2xl border border-emerald-100 dark:border-emerald-800",children:[i.jsx("span",{className:"font-semibold text-emerald-700 dark:text-emerald-300",children:"Peak Day"}),i.jsx(Hn,{className:"bg-gradient-to-r from-emerald-500 to-teal-600 text-white border-0 px-3 py-1",children:m.peakDay})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-orange-50 to-amber-50 dark:from-orange-950/30 dark:to-amber-950/30 rounded-2xl border border-orange-100 dark:border-orange-800",children:[i.jsx("span",{className:"font-semibold text-orange-700 dark:text-orange-300",children:"Max Streak"}),i.jsxs(Hn,{className:"bg-gradient-to-r from-orange-500 to-amber-600 text-white border-0 px-3 py-1",children:[h.maxStreak," days"]})]})]})})]}),i.jsxs(Ne,{className:"rounded-2xl border-0 bg-white/80 dark:bg-neutral-800/80 backdrop-blur-sm shadow-lg",children:[i.jsx(qr,{className:"pb-4",children:i.jsxs(sn,{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-violet-600 rounded-xl",children:i.jsx(Rm,{className:"w-5 h-5 text-white"})}),"Weekly Pattern"]})}),i.jsx(je,{children:i.jsx("div",{className:"h-48",children:i.jsx(la,{width:"100%",height:"100%",children:i.jsxs(zc,{data:m.weeklyData,children:[i.jsx(Il,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),i.jsx(Pl,{dataKey:"day",stroke:"#6b7280"}),i.jsx(kc,{stroke:"#6b7280"}),i.jsx(ia,{formatter:p=>[`${p}h`,"Hours"],labelFormatter:p=>`${p}`,contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)"}}),i.jsx(Lc,{dataKey:"hours",fill:"url(#weeklyGradient)",radius:[6,6,0,0]}),i.jsx("defs",{children:i.jsxs("linearGradient",{id:"weeklyGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[i.jsx("stop",{offset:"5%",stopColor:ys[1],stopOpacity:.8}),i.jsx("stop",{offset:"95%",stopColor:ys[2],stopOpacity:.6})]})})]})})})})]})]})}),i.jsx($a,{value:"sources",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(Ne,{className:"rounded-2xl border-0 bg-white/80 dark:bg-neutral-800/80 backdrop-blur-sm shadow-lg",children:[i.jsx(qr,{className:"pb-4",children:i.jsxs(sn,{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-cyan-500 to-blue-600 rounded-xl",children:i.jsx(Rm,{className:"w-5 h-5 text-white"})}),"Study Sources Breakdown"]})}),i.jsx(je,{children:i.jsx("div",{className:"space-y-3",children:h.bySource.map((p,x)=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-neutral-50 to-neutral-100 dark:from-neutral-800/80 dark:to-neutral-700/80 rounded-2xl border border-neutral-200/50 dark:border-neutral-600/50 hover:shadow-md transition-all duration-200",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-4 h-4 rounded-full shadow-sm",style:{backgroundColor:ys[x%ys.length]}}),i.jsx("span",{className:"font-semibold text-neutral-700 dark:text-neutral-200",children:p.source})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-bold text-lg text-neutral-800 dark:text-neutral-100",children:[p.hours,"h"]}),i.jsxs("p",{className:"text-sm font-medium text-neutral-500 dark:text-neutral-400",children:[p.percentage,"%"]})]})]},p.source))})})]}),i.jsxs(Ne,{className:"rounded-2xl border-0 bg-white/80 dark:bg-neutral-800/80 backdrop-blur-sm shadow-lg",children:[i.jsx(qr,{className:"pb-4",children:i.jsxs(sn,{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-violet-500 to-purple-600 rounded-xl",children:i.jsx(Ll,{className:"w-5 h-5 text-white"})}),"Source Distribution"]})}),i.jsx(je,{children:i.jsx("div",{className:"h-48",children:i.jsx(la,{width:"100%",height:"100%",children:i.jsxs(Xf,{children:[i.jsx(Qf,{data:h.bySource,dataKey:"hours",nameKey:"source",cx:"50%",cy:"50%",outerRadius:80,label:({percentage:p})=>`${p}%`,labelLine:!1,children:h.bySource.map((p,x)=>i.jsx(Jf,{fill:ys[x%ys.length]},`cell-${x}`))}),i.jsx(ia,{formatter:p=>[`${p}h`,"Hours"],contentStyle:{backgroundColor:"rgba(255, 255, 255, 0.95)",border:"none",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.1)"}})]})})})})]})]})}),i.jsx($a,{value:"courses",className:"space-y-6",children:i.jsxs(Ne,{className:"rounded-2xl border-0 bg-white/80 dark:bg-neutral-800/80 backdrop-blur-sm shadow-lg",children:[i.jsx(qr,{className:"pb-4",children:i.jsxs(sn,{className:"flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-rose-500 to-pink-600 rounded-xl",children:i.jsx(gc,{className:"w-5 h-5 text-white"})}),"Top Courses by Study Time"]})}),i.jsx(je,{children:h.byCourse.length>0?i.jsx("div",{className:"space-y-4",children:h.byCourse.map((p,x)=>i.jsxs("div",{className:"flex items-center justify-between p-5 bg-gradient-to-r from-neutral-50 to-neutral-100 dark:from-neutral-800/80 dark:to-neutral-700/80 rounded-2xl border border-neutral-200/50 dark:border-neutral-600/50 hover:shadow-lg transition-all duration-200",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center text-white text-lg font-bold shadow-lg",children:x+1}),i.jsx("span",{className:"font-semibold text-lg text-neutral-700 dark:text-neutral-200",children:p.courseId})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-bold text-xl text-neutral-800 dark:text-neutral-100",children:[p.hours,"h"]}),i.jsxs("p",{className:"text-sm font-medium text-neutral-500 dark:text-neutral-400",children:[p.percentage,"%"]})]})]},p.courseId))}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-neutral-200 to-neutral-300 dark:from-neutral-700 dark:to-neutral-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(Bl,{className:"w-10 h-10 text-neutral-400 dark:text-neutral-500"})}),i.jsx("p",{className:"text-lg font-semibold text-neutral-600 dark:text-neutral-300 mb-2",children:"No course-specific study sessions found"}),i.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Study sessions linked to courses will appear here"})]})})]})})]})]})]})})}):null}function xD({isOpen:r,onClose:e}){const{stats:t,activateStreakFreeze:n,deactivateStreakFreeze:s,activateAttendanceStreakFreeze:l,deactivateAttendanceStreakFreeze:c,getEffectiveStreak:u,getEffectiveAttendanceStreak:h}=Dr(),[m,p]=M.useState(""),[x,b]=M.useState(""),[v,k]=M.useState(""),[w,S]=M.useState(""),N=[{value:"term_break",label:"Term Break",icon:""},{value:"holiday",label:"Holiday/Vacation",icon:""},{value:"no_classes",label:"No Classes Scheduled",icon:""},{value:"sick_leave",label:"Sick Leave",icon:""},{value:"family_emergency",label:"Family Emergency",icon:""},{value:"travel",label:"Travel/Study Abroad",icon:""},{value:"custom",label:"Custom Reason",icon:""}],T=()=>{const Y=m==="custom"?x:N.find(I=>I.value===m)?.label||"Streak Freeze";n(Y,v||void 0,w||void 0),l(),p(""),b(""),k(""),S("")},C=()=>{s(),c()},D=u(),A=h();return i.jsx(Yl,{children:r&&i.jsx(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e,children:i.jsx(et.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:Y=>Y.stopPropagation(),className:"w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:i.jsxs(Ne,{className:`border-0 shadow-2xl rounded-3xl bg-gradient-to-br from-white/95 via-white/90 to-white/85 \r
                          dark:from-neutral-900/95 dark:via-neutral-900/90 dark:to-neutral-800/85 backdrop-blur-md\r
                          ring-1 ring-white/20 dark:ring-white/10`,children:[i.jsx(qr,{className:"pb-4 border-b border-gray-200/30 dark:border-gray-700/30",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(sn,{className:`text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 \r
                                    dark:from-blue-400 dark:via-purple-400 dark:to-blue-300 bg-clip-text text-transparent\r
                                    flex items-center gap-3`,children:[i.jsx("div",{className:`p-2 rounded-xl bg-gradient-to-br from-blue-50/80 to-indigo-50/60 dark:from-blue-950/40 dark:to-indigo-950/30 \r
                                  border border-blue-100/50 dark:border-blue-800/30 shadow-lg`,children:i.jsx(Cp,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"})}),"Streak Freeze Manager"]}),i.jsx(K,{variant:"ghost",size:"sm",onClick:e,className:"rounded-full h-8 w-8 text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200",children:""})]})}),i.jsxs(je,{className:"p-6 space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:`p-4 rounded-2xl bg-gradient-to-br from-orange-50/80 to-amber-50/60 dark:from-orange-950/40 dark:to-amber-950/30 \r
                                border border-orange-100/50 dark:border-orange-800/30`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Bl,{className:"w-4 h-4 text-orange-600 dark:text-orange-400"}),i.jsx("span",{className:"font-medium text-orange-800 dark:text-orange-200",children:"Study Streak"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-2xl font-bold text-orange-700 dark:text-orange-300",children:[D," days"]}),i.jsx(Hn,{variant:t.streakFreezeActive?"secondary":"default",children:t.streakFreezeActive?"Frozen":"Active"})]}),t.streakFreezeActive&&i.jsxs("p",{className:"text-xs text-orange-600/80 dark:text-orange-400/60 mt-1",children:["Reason: ",t.streakFreezeReason]})]}),i.jsxs("div",{className:`p-4 rounded-2xl bg-gradient-to-br from-green-50/80 to-emerald-50/60 dark:from-green-950/40 dark:to-emerald-950/30 \r
                                border border-green-100/50 dark:border-green-800/30`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(G1,{className:"w-4 h-4 text-green-600 dark:text-green-400"}),i.jsx("span",{className:"font-medium text-green-800 dark:text-green-200",children:"Attendance Streak"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("span",{className:"text-2xl font-bold text-green-700 dark:text-green-300",children:[A," days"]}),i.jsx(Hn,{variant:t.attendanceStreakFreezeActive?"secondary":"default",children:t.attendanceStreakFreezeActive?"Frozen":"Active"})]})]})]}),t.streakFreezeActive?i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-neutral-800 dark:text-neutral-200",children:"Streak Freeze Active"}),i.jsxs("div",{className:`p-4 rounded-2xl bg-gradient-to-br from-blue-50/80 to-indigo-50/60 dark:from-blue-950/40 dark:to-indigo-950/30 \r
                                  border border-blue-100/50 dark:border-blue-800/30`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Cp,{className:"w-4 h-4 text-blue-600 dark:text-blue-400"}),i.jsx("span",{className:"font-medium text-blue-800 dark:text-blue-200",children:"Active Freeze"})]}),i.jsxs("p",{className:"text-blue-700 dark:text-blue-300 mb-2",children:[i.jsx("strong",{children:"Reason:"})," ",t.streakFreezeReason]}),t.streakFreezeStartDate&&i.jsxs("p",{className:"text-sm text-blue-600/80 dark:text-blue-400/60",children:[i.jsx("strong",{children:"Started:"})," ",new Date(t.streakFreezeStartDate).toLocaleDateString(),t.streakFreezeEndDate&&i.jsxs("span",{children:["  ",i.jsx("strong",{children:"Ends:"})," ",new Date(t.streakFreezeEndDate).toLocaleDateString()]})]})]}),i.jsxs(K,{onClick:C,variant:"outline",className:`w-full border-green-200 text-green-700 hover:bg-green-50 dark:border-green-700 \r
                               dark:text-green-300 dark:hover:bg-green-950/20`,children:[i.jsx(Mp,{className:"w-4 h-4 mr-2"}),"Deactivate Streak Freeze"]})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-neutral-800 dark:text-neutral-200",children:"Activate Streak Freeze"}),i.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"Preserve your current streaks during breaks, holidays, or when no classes are scheduled."}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ot,{htmlFor:"freeze-reason",children:"Reason for Freeze"}),i.jsxs(yt,{value:m,onValueChange:p,children:[i.jsx(gt,{children:i.jsx(vt,{placeholder:"Select a reason..."})}),i.jsx(xt,{children:N.map(Y=>i.jsx(Oe,{value:Y.value,children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:Y.icon}),i.jsx("span",{children:Y.label})]})},Y.value))})]})]}),m==="custom"&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(ot,{htmlFor:"custom-reason",children:"Custom Reason"}),i.jsx(Ee,{id:"custom-reason",value:x,onChange:Y=>b(Y.target.value),placeholder:"Enter your custom reason..."})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ot,{htmlFor:"start-date",children:"Start Date (Optional)"}),i.jsx(Ee,{id:"start-date",type:"date",value:v,onChange:Y=>k(Y.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ot,{htmlFor:"end-date",children:"End Date (Optional)"}),i.jsx(Ee,{id:"end-date",type:"date",value:w,onChange:Y=>S(Y.target.value)})]})]}),i.jsxs(K,{onClick:T,disabled:!m||m==="custom"&&!x,className:`w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 \r
                               text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                               hover:scale-105 active:scale-95 font-medium`,children:[i.jsx(Tp,{className:"w-4 h-4 mr-2"}),"Activate Streak Freeze"]})]}),i.jsxs("div",{className:`mt-6 p-4 rounded-2xl bg-gradient-to-br from-neutral-50/80 to-gray-50/60 dark:from-neutral-800/40 dark:to-gray-800/30 \r
                              border border-neutral-200/50 dark:border-neutral-700/30`,children:[i.jsx("h4",{className:"font-medium text-neutral-800 dark:text-neutral-200 mb-2",children:"How Streak Freeze Works"}),i.jsxs("ul",{className:"text-sm text-neutral-600 dark:text-neutral-400 space-y-1",children:[i.jsx("li",{children:" Preserves your current streak count during inactive periods"}),i.jsx("li",{children:" Prevents streak loss during term breaks, holidays, or sick days"}),i.jsx("li",{children:" Automatically applies to both study and attendance streaks"}),i.jsx("li",{children:" Can be activated/deactivated manually or with date ranges"})]})]})]})]})})})})}function bD({isOpen:r,onClose:e,defaultTab:t="status"}){const{stats:n,generateDailyQuests:s,checkAchievements:l}=Dr(),[c,u]=M.useState(!1);M.useEffect(()=>{r&&(s(),l())},[r,s,l]);const h=C=>{switch(C){case"status":return"overview";case"badges":return"badges";case"quests":return"quests";default:return"overview"}},m=n.xp%500/500*100,p=n.badges.filter(C=>C.unlocked),x=n.badges.filter(C=>!C.unlocked),b=n.dailyQuests.filter(C=>C.date===new Date().toISOString().split("T")[0]),v=b.filter(C=>C.completed),k=["first_class","attendance_streak","perfect_attendance","class_warrior","attendance_champion","never_miss","semester_perfect","monthly_perfect","attendance_legend","class_dedication"],w=["first_task","task_streak","early_bird","goal_crusher"],S=["study_warrior","time_keeper"],N=C=>k.includes(C)?"attendance":w.includes(C)?"tasks":S.includes(C)?"study":"general",T=C=>{switch(C){case"attendance":return"";case"tasks":return"";case"study":return"";default:return""}};return r?i.jsxs(Yl,{children:[i.jsx(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:e,children:i.jsxs(et.div,{initial:{scale:.95,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.95,opacity:0,y:20},transition:{type:"spring",duration:.4,bounce:.1},className:"bg-gradient-to-br from-white to-slate-50/90 dark:from-neutral-900 dark:to-neutral-800/90 backdrop-blur-lg rounded-3xl shadow-2xl border border-white/20 dark:border-neutral-700/30 w-full max-w-5xl max-h-[90vh] overflow-hidden",onClick:C=>C.stopPropagation(),children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-neutral-200/50 dark:border-neutral-700/50 bg-gradient-to-r from-purple-500/5 to-indigo-500/5 dark:from-purple-900/20 dark:to-indigo-900/20",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-2xl shadow-lg",children:i.jsx(Ck,{className:"w-7 h-7 text-white"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-indigo-600 bg-clip-text text-transparent",children:"Adventurer Status"}),i.jsxs("p",{className:"text-neutral-600 dark:text-neutral-400 font-medium",children:["Level ",n.level," Academic Explorer"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(K,{variant:"outline",size:"sm",onClick:()=>u(!0),className:"rounded-xl border-blue-200 dark:border-blue-700 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-all duration-200",children:[i.jsx(Cp,{className:"w-4 h-4 mr-2"}),"Streak Freeze"]}),i.jsx(K,{variant:"outline",size:"icon",onClick:e,className:"rounded-2xl border-neutral-200 dark:border-neutral-700 hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-all duration-200",children:i.jsx(Qc,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-120px)]",children:[i.jsx(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-purple-50 to-indigo-100 dark:from-purple-950/30 dark:to-indigo-900/30 shadow-lg hover:shadow-xl transition-all duration-200 mb-6",children:i.jsxs(je,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-2xl shadow-lg",children:i.jsx(oa,{className:"w-8 h-8 text-white"})}),i.jsxs("div",{children:[i.jsxs("h3",{className:"text-2xl font-bold text-purple-700 dark:text-purple-300",children:["Level ",n.level]}),i.jsxs("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:[n.xp," / ",n.nextLevelXp," XP"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm font-medium text-orange-600 dark:text-orange-400 mb-1",children:" Current Streak"}),i.jsxs("p",{className:"text-3xl font-bold text-orange-700 dark:text-orange-300",children:[n.streakDays," days"]})]})]}),i.jsx("div",{className:"w-full bg-neutral-200 dark:bg-neutral-700 rounded-full h-4 mb-3 shadow-inner",children:i.jsx(et.div,{initial:{width:0},animate:{width:`${m}%`},transition:{duration:.8,ease:"easeOut"},className:"h-4 rounded-full bg-gradient-to-r from-purple-500 to-indigo-600 shadow-lg"})}),i.jsxs("p",{className:"text-sm font-medium text-neutral-600 dark:text-neutral-400",children:[500-n.xp%500," XP to next level"]})]})}),i.jsxs(hN,{defaultValue:h(t),className:"space-y-6",children:[i.jsxs(Jg,{className:"grid w-full grid-cols-4 rounded-2xl bg-neutral-100/80 dark:bg-neutral-800/80 p-1 backdrop-blur-sm",children:[i.jsx(Ha,{value:"overview",className:"rounded-xl bg-transparent data-[state=active]:bg-white data-[state=active]:shadow-md dark:data-[state=active]:bg-neutral-700 font-semibold transition-all duration-200",children:"Overview"}),i.jsx(Ha,{value:"quests",className:"rounded-xl bg-transparent data-[state=active]:bg-white data-[state=active]:shadow-md dark:data-[state=active]:bg-neutral-700 font-semibold transition-all duration-200",children:"Daily Quests"}),i.jsx(Ha,{value:"badges",className:"rounded-xl bg-transparent data-[state=active]:bg-white data-[state=active]:shadow-md dark:data-[state=active]:bg-neutral-700 font-semibold transition-all duration-200",children:"Badges"}),i.jsx(Ha,{value:"stats",className:"rounded-xl bg-transparent data-[state=active]:bg-white data-[state=active]:shadow-md dark:data-[state=active]:bg-neutral-700 font-semibold transition-all duration-200",children:"Stats"})]}),i.jsx($a,{value:"overview",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-emerald-50 to-teal-100 dark:from-emerald-950/30 dark:to-teal-900/30 shadow-lg hover:shadow-xl transition-all duration-200",children:[i.jsx(qr,{className:"pb-4",children:i.jsxs(sn,{className:"flex items-center gap-3 text-lg",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl",children:i.jsx(Ll,{className:"w-5 h-5 text-white"})}),"Today's Progress"]})}),i.jsx(je,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/60 dark:bg-neutral-800/60 rounded-xl",children:[i.jsx("span",{className:"font-medium text-emerald-700 dark:text-emerald-300",children:"Daily Quests"}),i.jsxs(Hn,{className:"bg-gradient-to-r from-emerald-500 to-teal-600 text-white border-0",children:[v.length,"/",b.length]})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/60 dark:bg-neutral-800/60 rounded-xl",children:[i.jsx("span",{className:"font-medium text-emerald-700 dark:text-emerald-300",children:"Streak"}),i.jsxs(Hn,{className:"bg-gradient-to-r from-orange-500 to-amber-600 text-white border-0",children:[n.streakDays," days"]})]}),i.jsxs("div",{className:"flex justify-between items-center p-3 bg-white/60 dark:bg-neutral-800/60 rounded-xl",children:[i.jsx("span",{className:"font-medium text-emerald-700 dark:text-emerald-300",children:"Badges Earned"}),i.jsxs(Hn,{className:"bg-gradient-to-r from-purple-500 to-violet-600 text-white border-0",children:[p.length,"/",n.badges.length]})]})]})})]}),i.jsxs(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-amber-50 to-orange-100 dark:from-amber-950/30 dark:to-orange-900/30 shadow-lg hover:shadow-xl transition-all duration-200",children:[i.jsx(qr,{className:"pb-4",children:i.jsxs(sn,{className:"flex items-center gap-3 text-lg",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl",children:i.jsx(wo,{className:"w-5 h-5 text-white"})}),"Recent Achievements"]})}),i.jsx(je,{children:p.length>0?i.jsx("div",{className:"space-y-3",children:p.sort((C,D)=>(D.unlockedAt||"").localeCompare(C.unlockedAt||"")).slice(0,3).map(C=>i.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-2xl bg-white/60 dark:bg-neutral-800/60 hover:bg-white/80 dark:hover:bg-neutral-700/80 transition-all duration-200",children:[i.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl flex items-center justify-center text-lg shadow-md",children:C.icon}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"font-semibold text-amber-700 dark:text-amber-300 truncate",children:C.name}),i.jsx("p",{className:"text-xs font-medium text-amber-600 dark:text-amber-400",children:C.unlockedAt?new Date(C.unlockedAt).toLocaleDateString():""})]})]},C.id))}):i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-200 to-orange-300 dark:from-amber-800 dark:to-orange-700 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(wo,{className:"w-8 h-8 text-amber-600 dark:text-amber-400"})}),i.jsx("p",{className:"font-semibold text-amber-700 dark:text-amber-300 mb-2",children:"No badges unlocked yet"}),i.jsx("p",{className:"text-sm text-amber-600 dark:text-amber-400",children:"Complete tasks to earn your first badge!"})]})})]})]})}),i.jsx($a,{value:"quests",className:"space-y-6",children:i.jsxs(Ne,{className:"rounded-2xl border-0 bg-white/80 dark:bg-neutral-800/80 backdrop-blur-sm shadow-lg",children:[i.jsx(qr,{className:"pb-4",children:i.jsxs(sn,{className:"flex items-center gap-3 text-lg",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl",children:i.jsx(Bl,{className:"w-5 h-5 text-white"})}),"Today's Quests"]})}),i.jsx(je,{children:b.length>0?i.jsx("div",{className:"space-y-4",children:b.map(C=>i.jsxs("div",{className:`p-5 rounded-2xl border-0 transition-all duration-200 shadow-md hover:shadow-lg ${C.completed?"bg-gradient-to-r from-emerald-50 to-teal-50 dark:from-emerald-950/40 dark:to-teal-950/40":"bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-950/40 dark:to-indigo-950/40"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h4",{className:"font-semibold text-lg text-neutral-800 dark:text-neutral-100",children:C.title}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs(Hn,{className:`${C.completed?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white border-0":"bg-gradient-to-r from-blue-500 to-indigo-600 text-white border-0"} px-3 py-1`,children:[C.progress,"/",C.target]}),i.jsxs("span",{className:"text-sm font-medium text-amber-600 dark:text-amber-400 bg-amber-100 dark:bg-amber-900/20 px-2 py-1 rounded-lg",children:["+",C.xpReward," XP"]})]})]}),i.jsx("p",{className:"text-sm font-medium text-neutral-600 dark:text-neutral-400 mb-4",children:C.description}),i.jsx("div",{className:"w-full bg-neutral-200 dark:bg-neutral-700 rounded-full h-3 shadow-inner",children:i.jsx("div",{className:`h-3 rounded-full transition-all duration-500 shadow-sm ${C.completed?"bg-gradient-to-r from-emerald-500 to-teal-600":"bg-gradient-to-r from-blue-500 to-indigo-600"}`,style:{width:`${Math.min(C.progress/C.target*100,100)}%`}})})]},C.id))}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-200 to-indigo-300 dark:from-blue-800 dark:to-indigo-700 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(Bl,{className:"w-10 h-10 text-blue-600 dark:text-blue-400"})}),i.jsx("p",{className:"font-semibold text-blue-700 dark:text-blue-300 mb-2",children:"No quests available today"}),i.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400",children:"New quests will be generated tomorrow!"})]})})]})}),i.jsx($a,{value:"badges",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-green-50 to-emerald-100 dark:from-green-950/30 dark:to-emerald-900/30 shadow-lg",children:[i.jsx(qr,{className:"pb-4",children:i.jsxs(sn,{className:"flex items-center gap-3 text-lg",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl",children:i.jsx(gc,{className:"w-5 h-5 text-white"})}),"Earned Badges (",p.length,")"]})}),i.jsx(je,{children:p.length>0?i.jsx("div",{className:"grid grid-cols-2 gap-4",children:p.map(C=>{const D=N(C.id),A=T(D);return i.jsxs("div",{className:"p-4 rounded-2xl bg-white/60 dark:bg-neutral-800/60 border border-emerald-200/50 dark:border-emerald-700/50 hover:bg-white/80 dark:hover:bg-neutral-700/80 transition-all duration-200 relative shadow-md",children:[i.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-emerald-100 dark:bg-emerald-900/40 rounded-full flex items-center justify-center text-xs",children:A}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-2xl flex items-center justify-center text-2xl mb-3 mx-auto shadow-lg",children:C.icon}),i.jsx("p",{className:"font-semibold text-sm text-emerald-700 dark:text-emerald-300 mb-1",children:C.name}),i.jsx("p",{className:"text-xs text-emerald-600 dark:text-emerald-400 mb-2",children:C.description}),C.unlockedAt&&i.jsx("p",{className:"text-xs text-emerald-500 dark:text-emerald-500 font-medium",children:new Date(C.unlockedAt).toLocaleDateString()})]})]},C.id)})}):i.jsxs("div",{className:"text-center py-12",children:[i.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-emerald-200 to-teal-300 dark:from-emerald-800 dark:to-teal-700 rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(gc,{className:"w-10 h-10 text-emerald-600 dark:text-emerald-400"})}),i.jsx("p",{className:"font-semibold text-emerald-700 dark:text-emerald-300 mb-2",children:"No badges earned yet"}),i.jsx("p",{className:"text-sm text-emerald-600 dark:text-emerald-400",children:"Complete your first task to get started!"})]})})]}),i.jsxs(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-slate-50 to-neutral-100 dark:from-slate-950/30 dark:to-neutral-900/30 shadow-lg",children:[i.jsx(qr,{className:"pb-4",children:i.jsxs(sn,{className:"flex items-center gap-3 text-lg",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-slate-500 to-neutral-600 rounded-xl",children:i.jsx(ql,{className:"w-5 h-5 text-white"})}),"Available Badges (",x.length,")"]})}),i.jsx(je,{children:i.jsx("div",{className:"grid grid-cols-2 gap-4",children:x.map(C=>{const D=N(C.id),A=T(D);return i.jsxs("div",{className:"p-4 rounded-2xl bg-white/40 dark:bg-neutral-800/40 border border-slate-200/50 dark:border-slate-700/50 opacity-75 hover:opacity-90 transition-all duration-200 relative",children:[i.jsx("div",{className:"absolute top-2 right-2 w-6 h-6 bg-slate-100 dark:bg-slate-800/60 rounded-full flex items-center justify-center text-xs",children:A}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-slate-300 to-neutral-400 dark:from-slate-700 dark:to-neutral-600 rounded-2xl flex items-center justify-center text-2xl mb-3 mx-auto grayscale",children:C.icon}),i.jsx("p",{className:"font-semibold text-sm text-slate-600 dark:text-slate-400 mb-1",children:C.name}),i.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-500 mb-3",children:C.description}),C.maxProgress&&C.maxProgress>1&&i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"w-full bg-slate-200 dark:bg-slate-700 rounded-full h-2 mb-2 shadow-inner",children:i.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-slate-400 to-neutral-500 transition-all duration-300",style:{width:`${Math.min((C.progress||0)/C.maxProgress*100,100)}%`}})}),i.jsxs("p",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:[C.progress||0,"/",C.maxProgress]})]})]})]},C.id)})})})]})]})}),i.jsx($a,{value:"stats",className:"space-y-6",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.jsx(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-blue-950/30 dark:to-indigo-900/30 shadow-lg hover:shadow-xl transition-all duration-200",children:i.jsx(je,{className:"p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Ll,{className:"w-6 h-6 text-white"})}),i.jsx("p",{className:"text-3xl font-bold text-blue-700 dark:text-blue-300 mb-1",children:n.tasksCompleted}),i.jsx("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Tasks Completed"})]})})}),i.jsx(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-emerald-50 to-teal-100 dark:from-emerald-950/30 dark:to-teal-900/30 shadow-lg hover:shadow-xl transition-all duration-200",children:i.jsx(je,{className:"p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(ql,{className:"w-6 h-6 text-white"})}),i.jsx("p",{className:"text-3xl font-bold text-emerald-700 dark:text-emerald-300 mb-1",children:n.tasksCompletedEarly}),i.jsx("p",{className:"text-sm font-medium text-emerald-600 dark:text-emerald-400",children:"Early Completions"})]})})}),i.jsx(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-purple-50 to-violet-100 dark:from-purple-950/30 dark:to-violet-900/30 shadow-lg hover:shadow-xl transition-all duration-200",children:i.jsx(je,{className:"p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-violet-600 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(oa,{className:"w-6 h-6 text-white"})}),i.jsxs("p",{className:"text-3xl font-bold text-purple-700 dark:text-purple-300 mb-1",children:[n.studyHours%1===0?n.studyHours:n.studyHours.toFixed(1),"h"]}),i.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:"Study Hours"})]})})}),i.jsx(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-orange-50 to-amber-100 dark:from-orange-950/30 dark:to-amber-900/30 shadow-lg hover:shadow-xl transition-all duration-200",children:i.jsx(je,{className:"p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-amber-600 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Bl,{className:"w-6 h-6 text-white"})}),i.jsx("p",{className:"text-3xl font-bold text-orange-700 dark:text-orange-300 mb-1",children:n.scheduleBlocksCompleted}),i.jsx("p",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:"Schedule Blocks"})]})})}),i.jsx(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-rose-50 to-pink-100 dark:from-rose-950/30 dark:to-pink-900/30 shadow-lg hover:shadow-xl transition-all duration-200",children:i.jsx(je,{className:"p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-rose-500 to-pink-600 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(wo,{className:"w-6 h-6 text-white"})}),i.jsx("p",{className:"text-3xl font-bold text-rose-700 dark:text-rose-300 mb-1",children:n.classesAttended}),i.jsx("p",{className:"text-sm font-medium text-rose-600 dark:text-rose-400",children:"Classes Attended"})]})})}),i.jsx(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-teal-50 to-cyan-100 dark:from-teal-950/30 dark:to-cyan-900/30 shadow-lg hover:shadow-xl transition-all duration-200",children:i.jsx(je,{className:"p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-teal-500 to-cyan-600 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(gc,{className:"w-6 h-6 text-white"})}),i.jsx("p",{className:"text-3xl font-bold text-teal-700 dark:text-teal-300 mb-1",children:n.attendanceStreak}),i.jsx("p",{className:"text-sm font-medium text-teal-600 dark:text-teal-400",children:"Attendance Streak"})]})})}),i.jsx(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-yellow-50 to-amber-100 dark:from-yellow-950/30 dark:to-amber-900/30 shadow-lg hover:shadow-xl transition-all duration-200",children:i.jsx(je,{className:"p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-500 to-amber-600 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(Ck,{className:"w-6 h-6 text-white"})}),i.jsx("p",{className:"text-3xl font-bold text-yellow-700 dark:text-yellow-300 mb-1",children:n.longestStreak}),i.jsx("p",{className:"text-sm font-medium text-yellow-600 dark:text-yellow-400",children:"Longest Streak"})]})})}),i.jsx(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-pink-50 to-rose-100 dark:from-pink-950/30 dark:to-rose-900/30 shadow-lg hover:shadow-xl transition-all duration-200",children:i.jsx(je,{className:"p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-pink-500 to-rose-600 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(oa,{className:"w-6 h-6 text-white"})}),i.jsx("p",{className:"text-3xl font-bold text-pink-700 dark:text-pink-300 mb-1",children:n.longestAttendanceStreak}),i.jsx("p",{className:"text-sm font-medium text-pink-600 dark:text-pink-400",children:"Longest Attendance"})]})})}),i.jsx(Ne,{className:"rounded-2xl border-0 bg-gradient-to-br from-indigo-50 to-purple-100 dark:from-indigo-950/30 dark:to-purple-900/30 shadow-lg hover:shadow-xl transition-all duration-200",children:i.jsx(je,{className:"p-6",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-3",children:i.jsx(oa,{className:"w-6 h-6 text-white"})}),i.jsx("p",{className:"text-3xl font-bold text-indigo-700 dark:text-indigo-300 mb-1",children:n.totalXp}),i.jsx("p",{className:"text-sm font-medium text-indigo-600 dark:text-indigo-400",children:"Total XP"})]})})})]})})]})]})]})}),i.jsx(xD,{isOpen:c,onClose:()=>u(!1)})]}):null}const yD=`
  .light-scrollbar::-webkit-scrollbar { width: 10px; height: 10px; }
  .light-scrollbar::-webkit-scrollbar-track { background: rgba(0,0,0,0.05); border-radius: 5px; }
  .light-scrollbar::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.20); border-radius: 5px; }
  .light-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,0.30); }

  .dark-scrollbar::-webkit-scrollbar { width: 10px; height: 10px; }
  .dark-scrollbar::-webkit-scrollbar-track { background: rgba(255,255,255,0.10); border-radius: 5px; }
  .dark-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.20); border-radius: 5px; }
  .dark-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.30); }
`,vD=()=>{const{markAttendance:r,getLast365DaysData:e,getWeeklyAttendanceRate:t,getMonthlyAttendanceRate:n,getSemesterAttendanceRate:s,getPerfectAttendanceDays:l,getTotalAttendanceDays:c,hasUnmarkedClasses:u,getTodaysPendingClasses:h,getAttendanceForDate:m,addAttendanceRecord:p}=r2(),x=Dr(),b=_r(),{years:v,selectedYearId:k,getActiveTermForDate:w}=zr(),[S,N]=M.useState(!1),[T,C]=M.useState(""),[D,A]=M.useState([]),Y=M.useMemo(()=>{const ne=k||v[0]?.id;return v.find(ge=>ge.id===ne)},[v,k]),I=M.useMemo(()=>w(new Date)?.term||Y?.terms?.[0],[Y,w]),$=ne=>new Date(ne).getDay(),ae=M.useMemo(()=>ne=>{if(!I)return[];const ge=$(ne);return I.slots.filter(oe=>oe.day===ge).map(oe=>({date:ne,slotId:oe.id,courseCode:oe.courseCode||"",courseName:oe.title||oe.courseCode||"Class",attended:!1,marked:!1,time:oe.start,room:oe.room}))},[I]),le=M.useMemo(()=>()=>{if(!I?.startDate||!I?.endDate)return;const ne=new Date(I.startDate),ge=new Date(I.endDate),Z=new Date(ne);for(;Z<=ge;){const oe=Z.toISOString().split("T")[0];if(!m(oe)){const Je=ae(oe);Je.length>0&&p(oe,Je)}Z.setDate(Z.getDate()+1)}},[I?.startDate,I?.endDate,m,p,ae]);M.useEffect(()=>{le()},[le]),M.useEffect(()=>{let ne=document.getElementById("aq-attendance-scrollbar-styles");ne||(ne=document.createElement("style"),ne.id="aq-attendance-scrollbar-styles",document.head.appendChild(ne)),ne.textContent=yD},[]);const ie=window.matchMedia("(prefers-color-scheme: dark)").matches,ye=b.mode==="dark"||b.mode==="system"&&ie?"dark-scrollbar":"light-scrollbar",fe=M.useMemo(()=>{const ne=e(),ge=[];let Z=[];if(ne.forEach((oe,Le)=>{const Je=new Date(oe.date).getDay();if(Le===0)for(let it=0;it<Je;it++)Z.push({date:"",attendanceRate:0,totalClasses:0});Z.push(oe),Z.length===7&&(ge.push(Z),Z=[])}),Z.length>0){for(;Z.length<7;)Z.push({date:"",attendanceRate:0,totalClasses:0});ge.push(Z)}return ge},[e]),ve=M.useMemo(()=>{const ne=[],ge=new Date;for(let Z=11;Z>=0;Z--){const oe=new Date(ge.getFullYear(),ge.getMonth()-Z,1),Le=oe.toLocaleDateString("en-US",{month:"short"}),Je=Math.floor((ge.getTime()-oe.getTime())/(1e3*60*60*24)),it=Math.floor(Je/7),zt=Math.max(0,fe.length-it-1);ne.some(Yt=>Math.abs(Yt.weekIndex-zt)<4)||ne.push({label:Le,weekIndex:zt})}return ne},[fe]),B=(ne,ge)=>ge===0?"bg-neutral-100 dark:bg-neutral-800":ne>=95?"bg-green-600 dark:bg-green-500":ne>=80?"bg-green-400 dark:bg-green-400":ne>=60?"bg-green-300 dark:bg-green-300":ne>=40?"bg-yellow-300 dark:bg-yellow-400":"bg-red-300 dark:bg-red-400",W=x.getEffectiveAttendanceStreak(),L=t(),H=n(),Q=s(),ue=l(),Ae=c(),me=ne=>{if(!ne)return;C(ne);let ge=m(ne);if(!ge){const Z=ae(ne);Z.length>0&&(p(ne,Z),ge=m(ne))}A(ge?.classes||[]),N(!0)},be=async(ne,ge,Z)=>{await r(ne,ge,Z),Z&&x.addXP(10);const oe=m(ne);A(oe?.classes||[]),x.checkAchievements()},$e=h(),_e=new Date().toISOString().split("T")[0],de=u(_e);return i.jsxs(Ne,{className:"border-0 shadow-lg rounded-3xl bg-white/80 dark:bg-neutral-900/60",children:[i.jsxs(je,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Iu,{className:"w-5 h-5"}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Class Attendance"}),I&&i.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[Y?.label,"  ",I.name,I.startDate&&I.endDate&&i.jsxs("span",{className:"ml-2",children:["(",new Date(I.startDate).toLocaleDateString()," - ",new Date(I.endDate).toLocaleDateString(),")"]})]})]}),de&&i.jsxs(Hn,{variant:"destructive",className:"ml-2",children:[i.jsx(Pu,{className:"w-3 h-3 mr-1"}),"Pending"]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"Current Streak"}),i.jsxs("p",{className:"text-xl font-bold text-green-600",children:[W," days"]})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[i.jsxs("div",{className:"text-center p-3 rounded-xl bg-neutral-50 dark:bg-neutral-800/60",children:[i.jsxs("p",{className:"text-lg font-bold text-blue-600",children:[Math.round(L),"%"]}),i.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:"This Week"})]}),i.jsxs("div",{className:"text-center p-3 rounded-xl bg-neutral-50 dark:bg-neutral-800/60",children:[i.jsxs("p",{className:"text-lg font-bold text-green-600",children:[Math.round(H),"%"]}),i.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:"This Month"})]}),i.jsxs("div",{className:"text-center p-3 rounded-xl bg-neutral-50 dark:bg-neutral-800/60",children:[i.jsxs("p",{className:"text-lg font-bold text-purple-600",children:[Math.round(Q),"%"]}),i.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:"Semester"})]}),i.jsxs("div",{className:"text-center p-3 rounded-xl bg-neutral-50 dark:bg-neutral-800/60",children:[i.jsxs("p",{className:"text-lg font-bold text-orange-600",children:[ue,"/",Ae]}),i.jsx("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:"Perfect Days"})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[fe.reduce((ne,ge)=>ne+ge.filter(Z=>Z.totalClasses>0).length,0)," ","class days in the last year"]}),I&&i.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1",children:["Showing schedule from ",I.name,I.startDate&&I.endDate&&i.jsxs("span",{children:[" (",new Date(I.startDate).toLocaleDateString()," - ",new Date(I.endDate).toLocaleDateString(),")"]})]})]}),i.jsxs("div",{className:"flex items-center gap-2 text-xs text-neutral-500",children:[i.jsx("span",{children:"Absent"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-neutral-100 dark:bg-neutral-800",title:"No classes"}),i.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-red-300 dark:bg-red-400",title:"Poor attendance"}),i.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-yellow-300 dark:bg-yellow-400",title:"Moderate attendance"}),i.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-green-400 dark:bg-green-400",title:"Good attendance"}),i.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-green-600 dark:bg-green-500",title:"Excellent attendance"})]}),i.jsx("span",{children:"Present"})]})]}),i.jsx("div",{className:"relative mb-1",children:i.jsx("div",{className:"flex gap-1",children:fe.map((ne,ge)=>i.jsx("div",{className:"w-3 h-4 flex items-end justify-center",children:ve.map(Z=>Z.weekIndex===ge?i.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 font-medium",children:Z.label},Z.label):null)},ge))})}),i.jsx("div",{className:`flex gap-1 overflow-x-auto pb-2 ${ye}`,children:fe.map((ne,ge)=>i.jsx("div",{className:"flex flex-col gap-1",children:ne.map((Z,oe)=>i.jsx(et.div,{className:`w-3 h-3 rounded-sm cursor-pointer transition-all hover:ring-2 hover:ring-blue-300 dark:hover:ring-blue-400 hover:scale-125 ${Z.date?B(Z.attendanceRate,Z.totalClasses):"bg-transparent"}`,onClick:()=>me(Z.date),whileHover:{scale:1.3},whileTap:{scale:1.1},title:Z.date?`${Z.date}: ${Z.attendanceRate}% attendance (${Z.totalClasses} classes)`:""},`${ge}-${oe}`))},ge))})]}),$e.length>0&&i.jsxs(et.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"p-4 rounded-xl bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Pu,{className:"w-4 h-4 text-yellow-600"}),i.jsxs("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:["Pending Attendance (",$e.length," classes)"]})]}),i.jsxs("div",{className:"space-y-2",children:[$e.slice(0,3).map((ne,ge)=>i.jsxs("div",{className:"flex items-center justify-between text-sm",children:[i.jsxs("span",{className:"text-yellow-700 dark:text-yellow-300",children:[ne.time," - ",ne.courseName]}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx(K,{size:"sm",variant:"outline",className:"h-6 px-2 text-xs border-green-300 text-green-700 hover:bg-green-50",onClick:()=>be(_e,ne.slotId,!0),children:i.jsx(xc,{className:"w-3 h-3"})}),i.jsx(K,{size:"sm",variant:"outline",className:"h-6 px-2 text-xs border-red-300 text-red-700 hover:bg-red-50",onClick:()=>be(_e,ne.slotId,!1),children:i.jsx(bc,{className:"w-3 h-3"})})]})]},ge)),$e.length>3&&i.jsxs("p",{className:"text-xs text-yellow-600",children:["+",$e.length-3," more classes pending"]})]})]})]})]}),i.jsx(wr,{open:S,onOpenChange:N,children:i.jsxs(lr,{className:`max-w-lg border-0 shadow-2xl rounded-3xl bg-gradient-to-br from-white/95 via-white/90 to-white/85 \r
                                  dark:from-neutral-900/95 dark:via-neutral-900/90 dark:to-neutral-800/85 backdrop-blur-md\r
                                  ring-1 ring-white/20 dark:ring-white/10`,children:[i.jsx(ir,{className:"pb-4 border-b border-gray-200/30 dark:border-gray-700/30",children:i.jsxs(cr,{className:`text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 \r
                                  dark:from-blue-400 dark:via-purple-400 dark:to-blue-300 bg-clip-text text-transparent\r
                                  flex items-center gap-3`,children:[i.jsx("div",{className:`p-2 rounded-xl bg-gradient-to-br from-blue-50/80 to-indigo-50/60 dark:from-blue-950/40 dark:to-indigo-950/30 \r
                            border border-blue-100/50 dark:border-blue-800/30 shadow-lg`,children:i.jsx(Iu,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),"Attendance for ",new Date(T).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})]})}),i.jsx("div",{className:`space-y-4 max-h-96 overflow-y-auto ${ye}`,children:D.length>0?D.map((ne,ge)=>i.jsxs(et.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:ge*.1},className:`p-5 rounded-2xl bg-gradient-to-br from-white/80 to-gray-50/60 dark:from-gray-800/80 dark:to-gray-900/60 \r
                           border border-gray-200/50 dark:border-gray-700/30 shadow-lg backdrop-blur-sm\r
                           hover:shadow-xl transition-all duration-300 hover:scale-[1.02]`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold text-lg text-gray-800 dark:text-gray-100 mb-2",children:ne.courseName}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-300",children:[i.jsxs("span",{className:`flex items-center gap-2 px-3 py-1 rounded-full bg-blue-50/80 dark:bg-blue-950/30 \r
                                       border border-blue-100/50 dark:border-blue-800/30`,children:[i.jsx(Rc,{className:"w-3.5 h-3.5 text-blue-600 dark:text-blue-400"}),i.jsx("span",{className:"font-medium",children:ne.time})]}),ne.room&&i.jsxs("span",{className:`flex items-center gap-2 px-3 py-1 rounded-full bg-emerald-50/80 dark:bg-emerald-950/30 \r
                                         border border-emerald-100/50 dark:border-emerald-800/30`,children:[i.jsx(Ep,{className:"w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400"}),i.jsx("span",{className:"font-medium",children:ne.room})]})]})]}),i.jsx("div",{className:"ml-4",children:i.jsx(Hn,{variant:ne.marked?ne.attended?"default":"destructive":"outline",className:`px-3 py-1 font-medium text-sm shadow-lg ${ne.marked?ne.attended?"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-0 shadow-green-200/50":"bg-gradient-to-r from-red-500 to-rose-500 text-white border-0 shadow-red-200/50":"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-950/30 dark:to-orange-950/30 text-amber-700 dark:text-amber-300 border-amber-200 dark:border-amber-800"}`,children:ne.marked?ne.attended?i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(xc,{className:"w-3 h-3"}),"Present"]}):i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(bc,{className:"w-3 h-3"}),"Absent"]}):i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Pu,{className:"w-3 h-3"}),"Pending"]})})})]}),!ne.marked&&i.jsxs(et.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2},className:"flex gap-3 pt-3 border-t border-gray-200/30 dark:border-gray-700/30",children:[i.jsxs(K,{size:"sm",className:`flex-1 rounded-xl bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700\r
                                 dark:from-green-500 dark:to-emerald-500 dark:hover:from-green-600 dark:hover:to-emerald-600\r
                                 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                                 hover:scale-105 active:scale-95 font-medium`,onClick:()=>be(T,ne.slotId,!0),children:[i.jsx(xc,{className:"w-4 h-4 mr-2"}),"Mark Present"]}),i.jsxs(K,{size:"sm",className:`flex-1 rounded-xl bg-gradient-to-r from-red-600 to-rose-600 hover:from-red-700 hover:to-rose-700\r
                                 dark:from-red-500 dark:to-rose-500 dark:hover:from-red-600 dark:hover:to-rose-600\r
                                 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                                 hover:scale-105 active:scale-95 font-medium`,onClick:()=>be(T,ne.slotId,!1),children:[i.jsx(bc,{className:"w-4 h-4 mr-2"}),"Mark Absent"]})]})]},ge)):i.jsxs(et.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center py-12 px-6",children:[i.jsx("div",{className:`w-20 h-20 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-blue-50/80 to-indigo-50/60 \r
                              dark:from-blue-950/40 dark:to-indigo-950/30 border border-blue-100/50 dark:border-blue-800/30 \r
                              flex items-center justify-center shadow-lg`,children:i.jsx(Iu,{className:"w-10 h-10 text-blue-400 dark:text-blue-300"})}),i.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200 mb-2",children:"No Classes Scheduled"}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-sm mx-auto",children:"There are no classes scheduled for this day. Enjoy your free time!"})]})}),i.jsx(Sr,{className:"pt-6 border-t border-gray-200/30 dark:border-gray-700/30 mt-4",children:i.jsx(K,{variant:"outline",className:`rounded-2xl border-2 bg-gradient-to-r from-white/90 to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/80 \r
                       backdrop-blur-md hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 \r
                       border-gray-200/60 dark:border-gray-600/40 hover:border-blue-200/60 dark:hover:border-blue-400/30\r
                       shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95\r
                       text-gray-700 dark:text-gray-200 hover:text-blue-700 dark:hover:text-blue-300\r
                       font-medium tracking-wide px-6 py-2`,onClick:()=>N(!1),children:i.jsx("span",{className:"relative z-10",children:"Close"})})})]})})]})},kD=`
  .light-scrollbar::-webkit-scrollbar { width: 10px; height: 10px; }
  .light-scrollbar::-webkit-scrollbar-track { background: rgba(0,0,0,0.05); border-radius: 5px; }
  .light-scrollbar::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.20); border-radius: 5px; }
  .light-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,0.30); }

  .dark-scrollbar::-webkit-scrollbar { width: 10px; height: 10px; }
  .dark-scrollbar::-webkit-scrollbar-track { background: rgba(255,255,255,0.10); border-radius: 5px; }
  .dark-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.20); border-radius: 5px; }
  .dark-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.30); }
`,yw={term:"SY 20252026  Term 1",scheduleToday:[{time:"08:00",course:"Algorithms",room:"B402"},{time:"11:00",course:"Data Warehousing",room:"Lab 2"},{time:"15:00",course:"Operating Systems",room:"A305"}]},wD=()=>{const{palette:r}=_r();return Gn[r]},SD=(r,e)=>{const[t,n,s,l,c]=e;switch(r){case"primary":return{primary:t,secondary:l,glow:n,accent:s};case"academic":return{primary:n,secondary:t,glow:l,accent:c};case"productivity":return{primary:s,secondary:n,glow:t,accent:l};case"navigation":return{primary:l,secondary:t,glow:n,accent:s};case"feature":return{primary:t,secondary:n,glow:s,accent:l};default:return{primary:t,secondary:l,glow:n,accent:s}}},Km=({active:r,onClick:e,color:t,label:n})=>i.jsx("button",{onClick:e,className:`h-9 px-3 rounded-2xl border-2 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 backdrop-blur-md
      ${r?"border-white/30 ring-2 ring-white/20 shadow-lg scale-105 shadow-black/10":"border-white/10 hover:border-white/40 hover:scale-105 hover:shadow-lg shadow-black/5"}`,style:{background:r?`linear-gradient(135deg, ${t}FF 0%, ${t}CC 50%, ${t}AA 100%)`:`linear-gradient(135deg, ${t}80 0%, ${t}60 50%, ${t}40 100%)`,color:"#fff",boxShadow:r?`0 0 20px ${t}40, 0 4px 12px rgba(0,0,0,0.15)`:`0 2px 8px ${t}20, 0 2px 4px rgba(0,0,0,0.1)`},"aria-label":n}),vw={Inter:"'Inter', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif",Poppins:"'Poppins', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, 'Noto Sans', sans-serif",Nunito:"'Nunito', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, 'Noto Sans', sans-serif",Outfit:"'Outfit', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, 'Noto Sans', sans-serif",Roboto:"Roboto, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', 'Helvetica Neue', Arial, 'Noto Sans', sans-serif",Lato:"Lato, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif",Montserrat:"Montserrat, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, 'Noto Sans', sans-serif","Source Sans 3":"'Source Sans 3', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif"},mN=({Icon:r,onClick:e,title:t,size:n="md",colors:s,type:l="primary"})=>{const c=n==="lg"?"h-12 w-12":n==="sm"?"h-9 w-9":"h-11 w-11",u=SD(l,s),{primary:h,secondary:m,glow:p,accent:x}=u;return i.jsxs("button",{type:"button",title:t,onClick:e,onMouseMove:b=>{const v=b.currentTarget.getBoundingClientRect(),k=b.clientX-v.left,w=b.clientY-v.top;b.currentTarget.style.setProperty("--mx",`${k}px`),b.currentTarget.style.setProperty("--my",`${w}px`)},className:`relative group inline-grid place-items-center ${c} shrink-0 p-0 rounded-2xl
                    border border-white/20 dark:border-white/10
                    bg-gradient-to-br from-white/95 via-white/90 to-white/80 
                    dark:from-neutral-800/90 dark:via-neutral-800/70 dark:to-neutral-900/60
                    backdrop-blur-md overflow-hidden transition-all duration-300
                    hover:scale-105 active:scale-95
                    shadow-lg hover:shadow-2xl`,style:{background:`linear-gradient(135deg, ${h}15 0%, ${m}10 50%, ${p}08 100%)`},children:[i.jsx("span",{"aria-hidden":!0,className:"pointer-events-none absolute -inset-8 rounded-[32px] blur-3xl opacity-0 group-hover:opacity-100 transition-all duration-500",style:{background:`conic-gradient(from 0deg, ${h}40, ${m}30, ${p}35, ${x}25, ${h}40)`,animation:"spin 8s linear infinite"}}),i.jsx("span",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-all duration-300",style:{background:`conic-gradient(from 45deg, transparent 0%, ${h}60 25%, transparent 50%, ${m}60 75%, transparent 100%)`,mask:"linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0)",maskComposite:"xor",padding:"1px"}}),i.jsx("span",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 opacity-0 group-hover:opacity-100 transition-all duration-300",style:{background:`radial-gradient(140px circle at var(--mx) var(--my), ${h}30, ${m}15, transparent 60%)`,mixBlendMode:"overlay"}}),i.jsx("span",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 rounded-2xl transition-all duration-300",style:{boxShadow:`
                    0 0 0 1px ${h}20,
                    0 2px 8px ${h}15,
                    0 4px 16px ${m}10,
                    inset 0 1px 0 rgba(255,255,255,0.1)
                `}}),i.jsx("span",{"aria-hidden":!0,className:"pointer-events-none absolute inset-0 rounded-2xl opacity-0 group-hover:opacity-100 transition-all duration-300",style:{boxShadow:`
                    0 0 0 1px ${h}60,
                    0 4px 16px ${h}40,
                    0 8px 32px ${m}30,
                    0 16px 48px ${p}20,
                    inset 0 1px 0 rgba(255,255,255,0.2)
                `}}),i.jsx(r,{className:"relative z-10 block h-5 w-5 m-0 transition-all duration-200 group-hover:scale-110",style:{filter:`drop-shadow(0 1px 2px ${h}30)`,color:`${h}`}})]})},Wm=({label:r,value:e,icon:t,hint:n,colors:s,onIconClick:l,iconType:c="academic"})=>i.jsx(et.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},children:i.jsx(Ne,{className:"border-0 shadow-lg rounded-3xl bg-white/80 dark:bg-neutral-900/60",children:i.jsx(je,{className:"relative p-4 sm:p-5",children:i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsx("div",{className:"self-start",children:i.jsx(mN,{Icon:t,colors:s,onClick:l,type:c})}),i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"text-xs uppercase tracking-wider text-muted-foreground",children:r}),i.jsx("p",{className:"text-2xl font-extrabold mt-1 truncate",children:e}),n&&i.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:n})]})]})})})}),uo=({icon:r,title:e,desc:t,cta:n,colors:s,onClick:l,iconType:c="feature"})=>i.jsx(et.div,{initial:{opacity:0,y:18},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},children:i.jsx(Ne,{className:"h-full border-0 shadow-lg hover:shadow-xl transition-all duration-300 rounded-3xl bg-white/80 dark:bg-neutral-900/60 backdrop-blur-md hover:scale-[1.02] group",children:i.jsxs(je,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[i.jsx(mN,{Icon:r,colors:s,type:c}),i.jsx("h3",{className:"font-semibold text-lg tracking-tight group-hover:text-transparent group-hover:bg-gradient-to-r group-hover:from-blue-600 group-hover:to-purple-600 group-hover:bg-clip-text transition-all duration-300",children:e})]}),i.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-300 leading-relaxed mb-4",children:t}),n&&i.jsx(K,{variant:"outline",className:"rounded-2xl border-2 hover:bg-gradient-to-r hover:from-blue-50 hover:to-purple-50 dark:hover:from-blue-950/50 dark:hover:to-purple-950/50 transition-all duration-300",onClick:l,children:n})]})})});function ND(){const[r,e]=M.useState(!1),[t,n]=M.useState(!1),[s,l]=M.useState(!1),[c,u]=M.useState(!1),[h,m]=M.useState("status");M.useEffect(()=>{const G=localStorage.getItem("aq:settings");if(G)try{const{compact:xe}=JSON.parse(G);typeof xe=="boolean"&&e(xe)}catch{}},[]),M.useEffect(()=>{const G=document.createElement("style");return G.textContent=`
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
    `,document.head.appendChild(G),()=>{document.head.removeChild(G)}},[]);const p=Eg(),x=_r(),b=wD(),v=Dr(),k=Ft(G=>G.years),w=Ft(G=>G.selectedYearId),S=Ft(G=>G.setSelectedYear),N=$s(G=>G.gpaScale),T=_n(G=>G.tasks),C=_n(G=>G.addTask),D=_n(G=>G.updateTask),A=rh(G=>G.sessions),{markAttendance:Y,getAttendanceForDate:I,addAttendanceRecord:$}=r2(),[ae,le]=M.useState(!1),[ie,he]=M.useState(null);M.useEffect(()=>{const G=setTimeout(()=>{v.generateDailyQuests(),v.checkAchievements();const xe=new Date().toISOString().split("T")[0];v.stats.lastActiveDate!==xe&&(v.addXP(10),v.incrementStreak())},100);return()=>clearTimeout(G)},[]);const ye=P.useMemo(()=>{const G=w||k[0]?.id;return k.find(xe=>xe.id===G)},[k,w]),fe=P.useMemo(()=>ye?.terms?.[0],[ye]),ve=P.useMemo(()=>{const G=ye?.id,xe=fe?.id;if(!G||!xe)return 0;const Ce=T.filter(Fe=>Fe.yearId===G&&Fe.termId===xe).filter(Fe=>(Fe.title?.trim()?.length??0)>0);if(!Ce.length)return 0;const Ge=Ce.filter(Fe=>Fe.status==="Completed").length;return Math.round(Ge/Ce.length*100)},[T,ye?.id,fe?.id]),B=P.useMemo(()=>[{name:"Complete",value:ve},{name:"Remaining",value:100-ve}],[ve]),W=P.useMemo(()=>{const G=new Date,xe=new Date(G),Ie=new Date(G);return Ie.setDate(Ie.getDate()-6),t2(A,Ie,xe).map(({date:Ge,minutes:Fe})=>({d:new Date(Ge).toLocaleDateString("en-US",{weekday:"short"}),h:Math.round(Fe/60*10)/10}))},[A]),L=P.useMemo(()=>(fe?.courses||[]).reduce((xe,Ie)=>xe+(Number(Ie.credits)||0),0),[fe?.courses]),H=P.useMemo(()=>{const G=fe?.courses||[],{wSum:xe,cSum:Ie}=G.reduce((Ce,Ge)=>{const Fe=Number(Ge.credits)||0,Lt=typeof Ge.gpa=="number"?Ge.gpa:void 0;return Fe>0&&Lt!==void 0&&(Ce.wSum+=Fe*Lt,Ce.cSum+=Fe),Ce},{wSum:0,cSum:0});return Ie>0?xe/Ie:0},[fe?.courses]),Q=P.useMemo(()=>{const G=Math.max(0,Math.min(4,H));return N==="1-highest"?5-G:G},[H,N]),ue=P.useMemo(()=>{const G=[{range:"3.504.00",min:3.5,max:4.01,count:0},{range:"3.003.49",min:3,max:3.5,count:0},{range:"2.502.99",min:2.5,max:3,count:0},{range:"2.002.49",min:2,max:2.5,count:0},{range:"< 2.00",min:-.01,max:2,count:0}];return(fe?.courses||[]).forEach(Ie=>{if(typeof Ie.gpa!="number")return;const Ce=Math.max(0,Math.min(4,Ie.gpa)),Ge=G.find(Fe=>Ce>=Fe.min&&Ce<Fe.max);Ge&&(Ge.count+=1)}),G},[fe?.courses]),[Ae,me]=M.useState(!1),be=P.useMemo(()=>{const G=(fe?.courses||[]).filter(At=>typeof At.gpa=="number"),xe=G.length;if(!xe)return{count:0,credits:0,avg:0,avgDisplay:0,median:0,medianDisplay:0,best:0,bestDisplay:0,worst:0,worstDisplay:0,weighted:H,weightedDisplay:Q,coursesSorted:[]};const Ie=G.reduce((At,Cr)=>At+(Number(Cr.credits)||0),0),Ce=G.map(At=>Math.max(0,Math.min(4,At.gpa))).sort((At,Cr)=>At-Cr),Ge=Ce.reduce((At,Cr)=>At+Cr,0)/xe,Fe=xe%2?Ce[(xe-1)/2]:(Ce[xe/2-1]+Ce[xe/2])/2,Lt=Ce[Ce.length-1],Dn=Ce[0],Hr=At=>N==="1-highest"?5-At:At,xa=[...G].sort((At,Cr)=>Cr.gpa-At.gpa);return{count:xe,credits:Ie,avg:Ge,avgDisplay:Hr(Ge),median:Fe,medianDisplay:Hr(Fe),best:Lt,bestDisplay:Hr(Lt),worst:Dn,worstDisplay:Hr(Dn),weighted:H,weightedDisplay:Q,coursesSorted:xa}},[fe?.courses,H,Q,N]),[$e,_e]=M.useState(!1),[de,ne]=M.useState(""),[ge,Z]=M.useState(""),[oe,Le]=M.useState(""),[Je,it]=M.useState("Not Started");function zt(){if(!de.trim()||!ye?.id||!fe?.id){_e(!1);return}const G={id:crypto.randomUUID(),yearId:ye.id,termId:fe.id,courseId:void 0,title:de.trim(),status:Je,dueDate:ge||void 0,dueTime:oe||void 0,grade:void 0};C(G),ye?.id&&S(ye.id),_e(!1),ne(""),Z(""),Le(""),it("Not Started"),p("/tasks")}const Yt=zr(G=>G.getActiveTermForDate),Et=P.useMemo(()=>{const G=new Date,xe=G.getDay(),Ce=Yt(G)?.term;return Ce?Ce.slots.filter(Fe=>Fe.day===xe).slice().sort((Fe,Lt)=>{const Dn=Hr=>{const[xa,At]=Hr.split(":").map(Number);return xa*60+At};return Dn(Fe.start)-Dn(Lt.start)}).map(Fe=>({time:Fe.start,course:Fe.title||Fe.courseCode||"Class",room:Fe.room,slotId:Fe.id})):[]},[Yt]),te=G=>{he(G),le(!0)},hn=async G=>{if(!ie)return;const xe=new Date().toISOString().split("T")[0],Ie=ie.slotId||`${ie.time}-${ie.course}`.replace(/[^a-zA-Z0-9]/g,"-");if(I(xe))await Y(xe,Ie,G);else{const Ge={date:xe,slotId:Ie,courseCode:ie.course.split(" ")[0]||ie.course,courseName:ie.course,attended:G,marked:!0,time:ie.time,room:ie.room};$(xe,[Ge])}G&&v.addXP(10),v.checkAchievements(),le(!1),he(null)},hr=G=>{const xe=new Date().toISOString().split("T")[0],Ie=G.slotId||`${G.time}-${G.course}`.replace(/[^a-zA-Z0-9]/g,"-"),Ce=I(xe);if(!Ce)return{marked:!1,attended:!1};const Ge=Ce.classes.find(Fe=>Fe.slotId===Ie);return Ge?{marked:Ge.marked,attended:Ge.attended}:{marked:!1,attended:!1}},[St,mr]=M.useState(r);M.useEffect(()=>{St!==r&&mr(r)},[r,St]),M.useEffect(()=>{const G=setTimeout(()=>{St!==r&&e(St)},100);return()=>clearTimeout(G)},[St,r,e]);const[Qe,Wr]=M.useState(x.accent);M.useEffect(()=>{Wr(x.accent)},[x.accent]),M.useEffect(()=>{const G=vw[x.font]??vw.Inter;document.body.style.fontFamily=G;const xe=window.matchMedia("(prefers-color-scheme: dark)").matches,Ie=x.mode==="dark"||x.mode==="system"&&xe;document.documentElement.classList.toggle("dark",Ie);let Ce=document.getElementById("aq-scrollbar-styles");Ce||(Ce=document.createElement("style"),Ce.id="aq-scrollbar-styles",document.head.appendChild(Ce)),Ce.textContent=kD},[x.font,x.mode]);const Wn=M.useMemo(()=>{const G=Math.min(.5,Math.max(0,Qe/150)),xe=Math.round(G*255).toString(16).padStart(2,"0"),Ie=window.matchMedia("(prefers-color-scheme: dark)").matches,Ge=x.mode==="dark"||x.mode==="system"&&Ie?"linear-gradient(135deg, #0b0f19 0%, #0a0a0a 70%)":"linear-gradient(135deg, #ffffff 0%, #f8fbff 65%)",Fe=`radial-gradient(circle at 10% 0%, ${b[0]}${xe} 0%, transparent 40%)`,Lt=`radial-gradient(circle at 90% 10%, ${b[3]}${xe} 0%, transparent 45%)`,Dn=`radial-gradient(circle at 50% 120%, ${b[2]}${xe} 0%, transparent 55%)`;return{backgroundImage:`${Fe}, ${Lt}, ${Dn}, ${Ge}`,backgroundRepeat:"no-repeat, no-repeat, no-repeat, no-repeat",backgroundAttachment:"fixed, fixed, scroll, fixed",backgroundPosition:"10% 0%, 90% 10%, 50% 100%, 0 0"}},[Qe,x.mode,b]),$t=M.useMemo(()=>new Intl.DateTimeFormat(void 0,{weekday:"long",month:"long",day:"numeric",year:"numeric"}).format(new Date),[]),Nt=Math.min(100,Math.round(v.stats.totalXp%xo/xo*100)),Nr=window.matchMedia("(prefers-color-scheme: dark)").matches,Xn=x.mode==="dark"||x.mode==="system"&&Nr?"dark-scrollbar":"light-scrollbar";return i.jsxs("div",{className:`min-h-screen w-full overflow-x-hidden ${Xn}`,style:Wn,children:[i.jsxs("div",{className:`w-full px-4 sm:px-6 lg:px-12 ${r?"py-4":"py-8"}`,children:[i.jsx(et.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.55},className:`rounded-3xl ${r?"p-5":"p-8"} shadow-xl border border-black/5 bg-white/80 dark:bg-neutral-900/60 backdrop-blur-md`,children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx(G1,{className:"h-6 w-6"}),i.jsx("span",{className:"text-sm text-neutral-600",children:yw.term})]}),i.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold tracking-tight",children:"Academic Quest  Dashboard"}),i.jsx("p",{className:"mt-2 text-sm md:text-base text-neutral-600 max-w-2xl",children:"Your allinone Gamified Academic Tracker for Productivity."}),i.jsxs("div",{className:"mt-4 flex flex-wrap gap-3",children:[i.jsx(K,{className:`rounded-2xl bg-gradient-to-r from-blue-600 via-purple-600 to-blue-700 \r
                             dark:from-blue-500 dark:via-purple-500 dark:to-blue-600\r
                             hover:from-blue-700 hover:via-purple-700 hover:to-blue-800\r
                             dark:hover:from-blue-600 dark:hover:via-purple-600 dark:hover:to-blue-700\r
                             shadow-lg hover:shadow-2xl transition-all duration-300 hover:scale-105 active:scale-95\r
                             text-white font-medium tracking-wide\r
                             border-0 ring-2 ring-blue-200/50 dark:ring-purple-400/30 hover:ring-blue-300/70 dark:hover:ring-purple-300/50\r
                             transform hover:-translate-y-0.5 active:translate-y-0`,onClick:()=>p("/planner"),children:i.jsx("span",{className:"relative z-10",children:"Open Planner"})}),i.jsx(K,{variant:"outline",className:`rounded-2xl border-2 bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/90 dark:to-neutral-900/80 \r
                             backdrop-blur-md hover:from-green-50/90 hover:to-emerald-50/80 dark:hover:from-green-950/40 dark:hover:to-emerald-950/30 \r
                             border-neutral-200/60 dark:border-neutral-600/40 hover:border-green-200/60 dark:hover:border-emerald-400/30\r
                             shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95\r
                             text-neutral-700 dark:text-neutral-200 hover:text-green-700 dark:hover:text-emerald-300\r
                             font-medium tracking-wide`,onClick:()=>_e(!0),children:i.jsx("span",{children:"Quick Add Task"})}),i.jsxs(K,{variant:"outline",className:`rounded-2xl border-2 bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/90 dark:to-neutral-900/80 \r
                             backdrop-blur-md hover:from-orange-50/90 hover:to-amber-50/80 dark:hover:from-orange-950/40 dark:hover:to-amber-950/30 \r
                             border-neutral-200/60 dark:border-neutral-600/40 hover:border-orange-200/60 dark:hover:border-amber-400/30\r
                             shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95\r
                             text-neutral-700 dark:text-neutral-200 hover:text-orange-700 dark:hover:text-amber-300\r
                             font-medium tracking-wide`,onClick:()=>{localStorage.setItem("aq:pomo-corner","br"),window.dispatchEvent(new CustomEvent("pomo-show",{detail:{corner:"br"}})),window.dispatchEvent(new StorageEvent("storage",{key:"aq:pomo-corner",newValue:"br"}))},children:[i.jsx(K1,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:"Show Pomodoro"})]}),i.jsx(K,{variant:"ghost",className:`rounded-2xl bg-transparent text-foreground hover:bg-gradient-to-r hover:from-gray-100/80 hover:to-gray-200/60 \r
                             dark:hover:from-gray-700/60 dark:hover:to-gray-800/80 dark:bg-neutral-900/60 border-0 shadow-none \r
                             focus-visible:outline-none focus-visible:ring-0 transition-all duration-300 hover:scale-105 active:scale-95\r
                             hover:shadow-lg dark:hover:shadow-gray-900/50 transform hover:-translate-y-0.5 active:translate-y-0\r
                             font-medium tracking-wide`,onClick:()=>p("/settings"),children:i.jsx("span",{className:"relative z-10",children:"Settings"})})]})]}),i.jsx(Ne,{className:"border-0 shadow-lg bg-white/80 dark:bg-neutral-900/60 rounded-3xl w-full md:w-[360px]",children:i.jsxs(je,{className:`${r?"p-5":"p-6"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"inline-flex items-center gap-2 text-neutral-600",children:[i.jsx(Mn,{className:"h-4 w-4"}),i.jsx("span",{className:"text-xs md:text-sm",children:$t})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(oa,{className:"h-4 w-4"}),i.jsxs("span",{className:"text-sm font-semibold",children:["Lvl ",v.stats.level]})]})]}),i.jsx("p",{className:"text-xs uppercase tracking-wide text-neutral-500 mb-2",children:"Adventurer Status"}),i.jsxs("div",{className:"relative w-full h-3 bg-neutral-200 dark:bg-neutral-700 rounded-full overflow-hidden mb-2",children:[i.jsx(et.div,{initial:{width:0},animate:{width:`${Nt}%`,boxShadow:Nt>=80?[`0 0 10px ${b[0]}40`,`0 0 20px ${b[0]}60`,`0 0 10px ${b[0]}40`]:`0 0 10px ${b[0]}40`},transition:{duration:1.2,ease:"easeOut",delay:.2,boxShadow:{duration:2,repeat:Nt>=80?1/0:0,repeatType:"reverse"}},className:"absolute top-0 left-0 h-full rounded-full bg-gradient-to-r",style:{background:`linear-gradient(90deg, ${b[0]}, ${b[1]})`}}),i.jsx(et.div,{initial:{x:"-100%"},animate:{x:"200%"},transition:{duration:2,delay:1.5,repeat:1/0,repeatDelay:Nt>=80?2:4},className:"absolute top-0 left-0 h-full w-6 bg-gradient-to-r from-transparent via-white/30 to-transparent skew-x-12",style:{filter:"blur(1px)"}}),Nt>=90&&i.jsx(et.div,{animate:{scale:[1,1.1,1],opacity:[.6,1,.6]},transition:{duration:1.5,repeat:1/0,repeatType:"reverse"},className:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center text-xs",children:""})]}),i.jsxs("div",{className:"flex items-center justify-between text-sm text-neutral-600",children:[i.jsxs("span",{children:[v.stats.totalXp%xo," / ",xo," XP"]}),i.jsxs("span",{children:[" Streak: ",v.stats.streakDays,"d"]})]}),i.jsxs("div",{className:"mt-3 flex gap-2",children:[i.jsx(K,{size:"sm",className:`rounded-2xl bg-gradient-to-r from-purple-600/90 to-violet-600/90 dark:from-purple-500/90 dark:to-violet-500/90\r
                                  hover:from-purple-700/95 hover:to-violet-700/95 dark:hover:from-purple-400/95 dark:hover:to-violet-400/95\r
                                  text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                                  hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0\r
                                  font-medium tracking-wide backdrop-blur-md\r
                                  ring-2 ring-purple-200/50 dark:ring-purple-400/30 hover:ring-purple-300/60 dark:hover:ring-purple-300/40`,onClick:()=>{m("status"),u(!0)},children:"Status"}),i.jsx(K,{size:"sm",variant:"outline",className:`rounded-2xl border-2 bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/90 dark:to-neutral-900/80 \r
                                 backdrop-blur-md hover:from-purple-50/90 hover:to-violet-50/80 dark:hover:from-purple-950/40 dark:hover:to-violet-950/30 \r
                                 border-neutral-200/60 dark:border-neutral-600/40 hover:border-purple-200/60 dark:hover:border-violet-400/30\r
                                 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95\r
                                 text-neutral-700 dark:text-neutral-200 hover:text-purple-700 dark:hover:text-violet-300\r
                                 font-medium tracking-wide`,onClick:()=>{m("badges"),u(!0)},children:i.jsx("span",{children:"View Badges"})})]})]})})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 mt-6",children:[i.jsx(Ne,{className:"border-0 shadow-lg bg-white/80 dark:bg-neutral-900/60 rounded-3xl",children:i.jsxs(je,{className:"p-5",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Theme"}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ot,{className:"text-xs text-neutral-600",children:"Primary"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Km,{color:"#0ea5e9",active:x.palette==="sky",onClick:()=>x.setPalette("sky"),label:"Sky"}),i.jsx(Km,{color:"#8b5cf6",active:x.palette==="violet",onClick:()=>x.setPalette("violet"),label:"Violet"}),i.jsx(Km,{color:"#10b981",active:x.palette==="emerald",onClick:()=>x.setPalette("emerald"),label:"Emerald"})]})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx(ot,{className:"text-xs text-neutral-600",children:"Accent intensity"}),i.jsx("input",{type:"range",className:"w-full",min:0,max:100,step:1,value:Qe,onChange:G=>{const xe=Math.max(0,Math.min(100,Number(G.target.value)));Wr(xe),xe!==x.accent&&x.setAccent(xe)},onMouseUp:()=>Qe!==x.accent&&x.setAccent(Qe),onTouchEnd:()=>Qe!==x.accent&&x.setAccent(Qe),onWheel:G=>{G.preventDefault();const xe=G.deltaY<0?2:-2,Ie=Math.max(0,Math.min(100,Qe+xe));Ie!==Qe&&(Wr(Ie),Ie!==x.accent&&x.setAccent(Ie))}})]})]}),i.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"col-span-3",children:[i.jsx(ot,{className:"text-xs text-neutral-600",children:"Theme mode"}),i.jsx("div",{className:"mt-2 flex gap-2",children:[{key:"light",Icon:CM,label:"Light"},{key:"dark",Icon:TM,label:"Dark"},{key:"system",Icon:MM,label:"System"}].map(({key:G,Icon:xe,label:Ie})=>{const Ce=x.mode===G;return i.jsxs(K,{type:"button",variant:"ghost",onClick:()=>x.setMode(G),className:`h-9 px-3 gap-2 rounded-2xl transition-all duration-200 
                                      hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0
                                      ${Ce?"bg-gradient-to-r from-blue-600/90 to-indigo-600/90 dark:from-blue-500/90 dark:to-indigo-500/90 text-white shadow-lg ring-2 ring-blue-200/50 dark:ring-blue-400/30 backdrop-blur-md":"bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/90 dark:to-neutral-900/80 text-neutral-700 dark:text-neutral-200 hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 hover:text-blue-700 dark:hover:text-blue-300 shadow-md hover:shadow-lg backdrop-blur-md border border-neutral-200/60 dark:border-neutral-600/40 hover:border-blue-200/60 dark:hover:border-blue-400/30"}
                                      font-medium tracking-wide focus-visible:outline-none focus-visible:ring-0`,"aria-pressed":Ce,children:[i.jsx(xe,{className:"h-4 w-4 mr-1"}),i.jsx("span",{children:Ie})]},G)})})]}),i.jsxs("div",{className:"flex items-center justify-between col-span-2",children:[i.jsx(ot,{className:"text-xs text-neutral-600",children:"Compact layout"}),i.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[i.jsx("input",{type:"checkbox",className:"sr-only peer",checked:r,onChange:G=>e(G.target.checked)}),i.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"})]})]}),i.jsxs("div",{children:[i.jsx(ot,{className:"text-xs text-neutral-600",children:"Font family"}),i.jsxs(yt,{value:x.font,onValueChange:G=>x.setFont(G),children:[i.jsx(gt,{className:"mt-1 h-9 rounded-xl border border-black/10 bg-white/80 dark:bg-neutral-900/60 hover:bg-white transition",children:i.jsx(vt,{placeholder:"Choose a font"})}),i.jsx(xt,{className:"rounded-xl border border-black/10 bg-white/80 dark:bg-neutral-900/60 shadow-xl data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95",children:["Inter","Poppins","Nunito","Outfit","Roboto","Lato","Montserrat","Source Sans 3"].map(G=>i.jsx(Oe,{value:G,className:"cursor-pointer transition hover:bg-black/5",children:G},G))})]})]})]})]})}),i.jsx(Ne,{className:"border-0 shadow-lg bg-white/80 dark:bg-neutral-900/60 rounded-3xl",children:i.jsxs(je,{className:"p-5",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Quick Overview"}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 ",children:[i.jsx(Wm,{label:"Current GPA",value:Q.toFixed(2),icon:EM,hint:"Autocomputed from Academic Planner",colors:b,onIconClick:()=>p("/planner"),iconType:"academic"}),i.jsx(Wm,{label:"Units",value:L,icon:Tk,hint:"Enrolled this term",colors:b,onIconClick:()=>p("/planner"),iconType:"primary"}),i.jsx(Wm,{label:"Tasks Done",value:`${ve}%`,icon:yc,hint:"This term",colors:b,onIconClick:()=>p("/tasks"),iconType:"productivity"})]})]})}),i.jsx(Ne,{className:"border-0 shadow-lg bg-white/80 dark:bg-neutral-900/60 rounded-3xl",children:i.jsxs(je,{className:"p-5",children:[i.jsx("h3",{className:"font-semibold mb-3",children:"Task Completion"}),i.jsx("div",{className:"h-40",children:i.jsx(la,{width:"100%",height:"100%",children:i.jsxs(Xf,{margin:{top:0,right:0,bottom:0,left:0},children:[i.jsx(Qf,{dataKey:"value",data:B,innerRadius:55,outerRadius:80,startAngle:90,endAngle:-270,paddingAngle:2,cornerRadius:3,stroke:"transparent",isAnimationActive:!0,animationBegin:100,animationDuration:800,animationEasing:"ease-out",children:B.map((G,xe)=>i.jsx(Jf,{fill:b[xe%b.length]},xe))}),i.jsx(ia,{})]})})}),i.jsxs("div",{className:"mt-2 flex items-center justify-center gap-5 text-sm",children:[i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{background:b[0]}}),"Complete"]}),i.jsxs("span",{className:"inline-flex items-center gap-2",children:[i.jsx("span",{className:"h-2.5 w-2.5 rounded-full",style:{background:b[1]}}),"Remaining"]})]}),i.jsxs("p",{className:"text-sm text-neutral-600",children:[ve,"% completed this term"]})]})})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mt-6",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[i.jsx(Ne,{className:"border-0 shadow-lg rounded-3xl bg-white/80 dark:bg-neutral-900/60",children:i.jsxs(je,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Todays Schedule"}),p?i.jsxs(K,{variant:"outline",className:`rounded-2xl border-2 bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/90 dark:to-neutral-900/80 \r
                                   backdrop-blur-md hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 \r
                                   border-neutral-200/60 dark:border-neutral-600/40 hover:border-blue-200/60 dark:hover:border-indigo-400/30\r
                                   shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95\r
                                   text-neutral-700 dark:text-neutral-200 hover:text-blue-700 dark:hover:text-indigo-300\r
                                   font-medium tracking-wide`,onClick:()=>p("/schedule"),children:[i.jsx(Mn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:"View Week"})]}):i.jsx("a",{href:"/schedule",children:i.jsxs(K,{variant:"outline",className:`rounded-2xl border-2 bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/90 dark:to-neutral-900/80 \r
                                     backdrop-blur-md hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 \r
                                     border-neutral-200/60 dark:border-neutral-600/40 hover:border-blue-200/60 dark:hover:border-indigo-400/30\r
                                     shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95\r
                                     text-neutral-700 dark:text-neutral-200 hover:text-blue-700 dark:hover:text-indigo-300\r
                                     font-medium tracking-wide`,children:[i.jsx(Mn,{className:"h-4 w-4 mr-2"}),i.jsx("span",{children:"View Week"})]})})]}),i.jsxs("div",{className:"grid sm:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:[(Et.length?Et:yw.scheduleToday).map((G,xe)=>{const Ie=[{bg:"from-blue-50/80 to-indigo-100/60 dark:from-blue-950/40 dark:to-indigo-950/30",border:"border-blue-200/50 dark:border-blue-800/30",timeColor:"text-blue-600 dark:text-blue-400",courseColor:"text-blue-800 dark:text-blue-200",roomColor:"text-indigo-600 dark:text-indigo-400",accent:"bg-blue-500"},{bg:"from-emerald-50/80 to-green-100/60 dark:from-emerald-950/40 dark:to-green-950/30",border:"border-emerald-200/50 dark:border-emerald-800/30",timeColor:"text-emerald-600 dark:text-emerald-400",courseColor:"text-emerald-800 dark:text-emerald-200",roomColor:"text-green-600 dark:text-green-400",accent:"bg-emerald-500"},{bg:"from-purple-50/80 to-violet-100/60 dark:from-purple-950/40 dark:to-violet-950/30",border:"border-purple-200/50 dark:border-purple-800/30",timeColor:"text-purple-600 dark:text-purple-400",courseColor:"text-purple-800 dark:text-purple-200",roomColor:"text-violet-600 dark:text-violet-400",accent:"bg-purple-500"},{bg:"from-amber-50/80 to-orange-100/60 dark:from-amber-950/40 dark:to-orange-950/30",border:"border-amber-200/50 dark:border-amber-800/30",timeColor:"text-amber-600 dark:text-amber-400",courseColor:"text-amber-800 dark:text-amber-200",roomColor:"text-orange-600 dark:text-orange-400",accent:"bg-amber-500"},{bg:"from-rose-50/80 to-pink-100/60 dark:from-rose-950/40 dark:to-pink-950/30",border:"border-rose-200/50 dark:border-rose-800/30",timeColor:"text-rose-600 dark:text-rose-400",courseColor:"text-rose-800 dark:text-rose-200",roomColor:"text-pink-600 dark:text-pink-400",accent:"bg-rose-500"}],Ce=Ie[xe%Ie.length],Ge=hr(G);return i.jsxs(et.div,{initial:{opacity:0,y:12,scale:.95},animate:{opacity:1,y:0,scale:1},transition:{delay:xe*.1,duration:.4,type:"spring",stiffness:100,damping:20},whileHover:{scale:1.02,y:-2,transition:{duration:.2}},className:`relative group p-5 rounded-2xl bg-gradient-to-br ${Ce.bg} 
                                    border-2 ${Ce.border} shadow-lg hover:shadow-xl 
                                    transition-all duration-300 cursor-pointer backdrop-blur-sm
                                    overflow-hidden`,onClick:()=>te(G),children:[i.jsx("div",{className:`absolute left-0 top-0 w-1 h-full ${Ce.accent} opacity-60 group-hover:opacity-100 transition-opacity duration-300`}),Ge.marked&&i.jsx("div",{className:`absolute top-3 right-3 p-1.5 rounded-full ${Ge.attended?"bg-green-500 text-white":"bg-red-500 text-white"} shadow-lg`,children:Ge.attended?i.jsx(xc,{className:"h-3 w-3"}):i.jsx(bc,{className:"h-3 w-3"})}),!Ge.marked&&i.jsx("div",{className:"absolute top-3 right-3 p-1.5 rounded-full bg-amber-500 text-white shadow-lg animate-pulse",children:i.jsx(Pu,{className:"h-3 w-3"})}),i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-xl bg-white/60 dark:bg-black/20 
                                          border border-white/40 dark:border-white/10 backdrop-blur-sm`,children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${Ce.accent}`}),i.jsx("span",{className:`text-sm font-bold ${Ce.timeColor}`,children:G.time})]}),i.jsx("div",{className:"p-1.5 rounded-lg bg-white/40 dark:bg-black/20 border border-white/30 dark:border-white/10",children:i.jsx(Rc,{className:`h-3 w-3 ${Ce.timeColor}`})})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:`font-bold text-lg ${Ce.courseColor} leading-tight`,children:G.course}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ep,{className:`h-4 w-4 ${Ce.roomColor}`}),i.jsx("span",{className:`text-sm font-medium ${Ce.roomColor}`,children:G.room??"Room TBA"})]})]}),i.jsx("div",{className:"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:i.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 bg-white/80 dark:bg-black/50 px-2 py-1 rounded-lg backdrop-blur-sm",children:"Click to mark attendance"})}),i.jsx("div",{className:"absolute -right-4 -bottom-4 w-16 h-16 opacity-10 group-hover:opacity-20 transition-opacity duration-300",children:i.jsx("div",{className:`w-full h-full rounded-full ${Ce.accent} blur-xl`})})]},`${G.time}-${G.course}-${xe}`)}),!Et.length&&i.jsxs(et.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`col-span-full p-8 rounded-2xl bg-gradient-to-br from-gray-50/80 to-gray-100/60 \r
                                 dark:from-gray-800/50 dark:to-gray-900/30 border-2 border-dashed \r
                                 border-gray-300/50 dark:border-gray-600/30 text-center backdrop-blur-sm`,children:[i.jsx("div",{className:"mb-4",children:i.jsx(AM,{className:"h-12 w-12 mx-auto text-gray-400 dark:text-gray-500"})}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 font-medium",children:"No classes scheduled for today"}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 leading-relaxed",children:["Add class blocks in ",i.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:"Schedule Planner"})," and set the active term dates to populate Today's Schedule here."]})]})]})]})}),i.jsx(Ne,{className:"border-0 shadow-lg rounded-3xl bg-white/80 dark:bg-neutral-900/60",children:i.jsxs(je,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Study Hours (7day)"}),i.jsx(K,{variant:"ghost",className:`rounded-2xl bg-transparent text-foreground hover:bg-gradient-to-r hover:from-neutral-100/80 hover:to-neutral-200/60 \r
                               dark:hover:from-neutral-700/60 dark:hover:to-neutral-800/80 dark:bg-neutral-900/60 border-0 shadow-none \r
                               focus-visible:outline-none focus-visible:ring-0 transition-all duration-200 hover:scale-105 active:scale-95\r
                               hover:shadow-lg dark:hover:shadow-neutral-900/50 transform hover:-translate-y-0.5 active:translate-y-0\r
                               font-medium tracking-wide`,onClick:()=>l(!0),children:"Details"})]}),i.jsx("div",{className:"h-56",children:i.jsx(la,{width:"100%",height:"100%",children:i.jsxs(d3,{data:W,margin:{top:10,right:20,left:0,bottom:0},children:[i.jsx(Il,{strokeDasharray:"3 3"}),i.jsx(Pl,{dataKey:"d"}),i.jsx(kc,{}),i.jsx(ia,{}),i.jsx(u3,{type:"monotone",dataKey:"h",stroke:b[0],strokeWidth:3,dot:{r:3}})]})})})]})}),i.jsx(vD,{})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx(Ne,{className:"border-0 shadow-lg rounded-3xl bg-white/80 dark:bg-neutral-900/60",children:i.jsxs(je,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold",children:"Quick Tasks for the Week"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(K,{variant:"outline",className:`rounded-2xl border-2 bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/90 dark:to-neutral-900/80 \r
                                 backdrop-blur-md hover:from-green-50/90 hover:to-emerald-50/80 dark:hover:from-green-950/40 dark:hover:to-emerald-950/30 \r
                                 border-neutral-200/60 dark:border-neutral-600/40 hover:border-green-200/60 dark:hover:border-emerald-400/30\r
                                 shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95\r
                                 text-neutral-700 dark:text-neutral-200 hover:text-green-700 dark:hover:text-emerald-300\r
                                 font-medium tracking-wide`,onClick:()=>_e(!0),children:i.jsx("span",{children:"Add Task"})}),i.jsx(K,{variant:"ghost",className:`rounded-2xl bg-gradient-to-r from-blue-600/90 to-indigo-600/90 dark:from-blue-500/90 dark:to-indigo-500/90\r
                                  hover:from-blue-700/95 hover:to-indigo-700/95 dark:hover:from-blue-400/95 dark:hover:to-indigo-400/95\r
                                  text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                                  hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0\r
                                  font-medium tracking-wide backdrop-blur-md\r
                                  ring-2 ring-blue-200/50 dark:ring-blue-400/30 hover:ring-blue-300/60 dark:hover:ring-blue-300/40`,onClick:()=>p("/tasks"),children:"View Tasks"})]})]}),i.jsxs("div",{className:"space-y-2",children:[T.filter(G=>G.status!=="Completed"&&ow(G.dueDate,7)).slice(0,5).map(G=>i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-2xl bg-neutral-50 dark:bg-neutral-800/60",children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("p",{className:"font-medium truncate",children:G.title}),i.jsxs("p",{className:"text-xs text-muted-foreground",children:[G.dueDate?new Date(G.dueDate).toLocaleDateString():"No due date",G.dueTime?`  ${G.dueTime}`:""]})]}),i.jsx("div",{className:"shrink-0",children:i.jsxs(yt,{value:G.status,onValueChange:xe=>D(G.id,{status:xe}),children:[i.jsx(gt,{className:"h-8 rounded-xl w-[140px]",children:i.jsx(vt,{})}),i.jsxs(xt,{className:"rounded-xl border border-black/10 bg-white/80 dark:bg-neutral-900/60 shadow-xl",children:[i.jsx(Oe,{value:"Not Started",children:"Not Started"}),i.jsx(Oe,{value:"In Progress",children:"In Progress"}),i.jsx(Oe,{value:"Completed",children:"Completed"})]})]})})]},G.id)),T.filter(G=>G.status!=="Completed"&&ow(G.dueDate,7)).length===0&&i.jsx("p",{className:"text-sm text-muted-foreground",children:"No tasks due in the next 7 days."})]})]})}),i.jsx(Ne,{className:"border-0 shadow-lg rounded-3xl bg-white/80 dark:bg-neutral-900/60",children:i.jsxs(je,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold bg-gradient-to-r from-gray-900 to-gray-700 dark:from-gray-100 dark:to-gray-300 bg-clip-text text-transparent",children:"Grade Distribution"}),i.jsx(K,{variant:"ghost",className:`rounded-2xl bg-transparent text-foreground hover:bg-gradient-to-r hover:from-neutral-100/80 hover:to-neutral-200/60 \r
                               dark:hover:from-neutral-700/60 dark:hover:to-neutral-800/80 dark:bg-neutral-900/60 border-0 shadow-none \r
                               focus-visible:outline-none focus-visible:ring-0 transition-all duration-200 hover:scale-105 active:scale-95\r
                               hover:shadow-lg dark:hover:shadow-neutral-900/50 transform hover:-translate-y-0.5 active:translate-y-0\r
                               font-medium tracking-wide`,onClick:()=>me(!0),children:i.jsx("span",{className:"relative z-10",children:"More Details"})})]}),i.jsx("div",{className:"h-48",children:i.jsx(la,{width:"100%",height:"100%",children:i.jsxs(zc,{data:ue,children:[i.jsx(Il,{strokeDasharray:"3 3"}),i.jsx(Pl,{dataKey:"range"}),i.jsx(kc,{}),i.jsx(ia,{}),i.jsx(Lc,{dataKey:"count",fill:b[1],radius:[8,8,0,0]})]})})})]})})]})]}),i.jsx(wr,{open:Ae,onOpenChange:me,children:i.jsxs(lr,{className:`max-w-4xl max-h-[90vh] border-0 shadow-2xl rounded-3xl bg-gradient-to-br from-white/95 via-white/90 to-white/85 \r
                                    dark:from-neutral-900/95 dark:via-neutral-900/90 dark:to-neutral-800/85 backdrop-blur-md\r
                                    ring-1 ring-white/20 dark:ring-white/10 flex flex-col`,children:[i.jsx(ir,{className:"flex-shrink-0 pb-4 border-b border-gray-200/30 dark:border-gray-700/30",children:i.jsx(cr,{className:`text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 \r
                                      dark:from-blue-400 dark:via-purple-400 dark:to-blue-300 bg-clip-text text-transparent`,children:"Current Term Performance"})}),i.jsx("div",{className:`flex-1 overflow-y-auto pr-2 ${Xn}`,style:{maxHeight:"calc(90vh - 120px)"},children:i.jsxs("div",{className:"space-y-6 py-4",children:[i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[i.jsxs("div",{className:`p-4 rounded-2xl bg-gradient-to-br from-blue-50/80 to-indigo-50/60 dark:from-blue-950/40 dark:to-indigo-950/30 \r
                                  border border-blue-100/50 dark:border-blue-800/30 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 backdrop-blur-sm`,children:[i.jsx("div",{className:"text-xs text-blue-600 dark:text-blue-400 font-medium uppercase tracking-wider",children:"Courses with GPA"}),i.jsx("div",{className:"text-2xl font-bold text-blue-800 dark:text-blue-200 mt-1",children:be.count})]}),i.jsxs("div",{className:`p-4 rounded-2xl bg-gradient-to-br from-emerald-50/80 to-green-50/60 dark:from-emerald-950/40 dark:to-green-950/30 \r
                                  border border-emerald-100/50 dark:border-emerald-800/30 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 backdrop-blur-sm`,children:[i.jsx("div",{className:"text-xs text-emerald-600 dark:text-emerald-400 font-medium uppercase tracking-wider",children:"Total Credits"}),i.jsx("div",{className:"text-2xl font-bold text-emerald-800 dark:text-emerald-200 mt-1",children:be.credits})]}),i.jsxs("div",{className:`p-4 rounded-2xl bg-gradient-to-br from-purple-50/80 to-violet-50/60 dark:from-purple-950/40 dark:to-violet-950/30 \r
                                  border border-purple-100/50 dark:border-purple-800/30 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 backdrop-blur-sm`,children:[i.jsx("div",{className:"text-xs text-purple-600 dark:text-purple-400 font-medium uppercase tracking-wider",children:"Weighted GPA"}),i.jsx("div",{className:"text-2xl font-bold text-purple-800 dark:text-purple-200 mt-1",children:be.weightedDisplay.toFixed(2)})]}),i.jsxs("div",{className:`p-4 rounded-2xl bg-gradient-to-br from-amber-50/80 to-orange-50/60 dark:from-amber-950/40 dark:to-orange-950/30 \r
                                  border border-amber-100/50 dark:border-amber-800/30 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 backdrop-blur-sm`,children:[i.jsx("div",{className:"text-xs text-amber-600 dark:text-amber-400 font-medium uppercase tracking-wider",children:"Average (unweighted)"}),i.jsx("div",{className:"text-2xl font-bold text-amber-800 dark:text-amber-200 mt-1",children:be.avgDisplay.toFixed(2)})]}),i.jsxs("div",{className:`p-4 rounded-2xl bg-gradient-to-br from-cyan-50/80 to-sky-50/60 dark:from-cyan-950/40 dark:to-sky-950/30 \r
                                  border border-cyan-100/50 dark:border-cyan-800/30 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 backdrop-blur-sm`,children:[i.jsx("div",{className:"text-xs text-cyan-600 dark:text-cyan-400 font-medium uppercase tracking-wider",children:"Median"}),i.jsx("div",{className:"text-2xl font-bold text-cyan-800 dark:text-cyan-200 mt-1",children:be.medianDisplay.toFixed(2)})]}),i.jsxs("div",{className:`p-4 rounded-2xl bg-gradient-to-br from-rose-50/80 to-pink-50/60 dark:from-rose-950/40 dark:to-pink-950/30 \r
                                  border border-rose-100/50 dark:border-rose-800/30 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 backdrop-blur-sm`,children:[i.jsx("div",{className:"text-xs text-rose-600 dark:text-rose-400 font-medium uppercase tracking-wider",children:"Best / Worst"}),i.jsxs("div",{className:"text-2xl font-bold text-rose-800 dark:text-rose-200 mt-1",children:[be.bestDisplay.toFixed(2)," / ",be.worstDisplay.toFixed(2)]})]})]}),i.jsxs("div",{className:`p-6 rounded-2xl bg-gradient-to-br from-gray-50/50 to-gray-100/30 dark:from-gray-800/50 dark:to-gray-900/30 \r
                                border border-gray-200/50 dark:border-gray-700/30 shadow-lg backdrop-blur-sm`,children:[i.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200",children:"Grade Distribution Chart"}),i.jsx("div",{className:"h-56",children:i.jsx(la,{width:"100%",height:"100%",children:i.jsxs(zc,{data:ue,children:[i.jsx(Il,{strokeDasharray:"3 3"}),i.jsx(Pl,{dataKey:"range"}),i.jsx(kc,{}),i.jsx(ia,{}),i.jsx(Lc,{dataKey:"count",fill:b[2],radius:[8,8,0,0]})]})})})]}),i.jsxs("div",{className:`p-6 rounded-2xl bg-gradient-to-br from-white/80 to-gray-50/60 dark:from-gray-800/80 dark:to-gray-900/60 \r
                                border border-gray-200/50 dark:border-gray-700/30 shadow-lg backdrop-blur-sm`,children:[i.jsx("h4",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-gray-200",children:"Course Details"}),i.jsx("div",{className:`overflow-auto max-h-80 rounded-xl border border-gray-200/50 dark:border-gray-700/30 ${Xn}`,children:i.jsxs("table",{className:"min-w-full text-sm",children:[i.jsx("thead",{className:"sticky top-0 z-10",children:i.jsxs("tr",{className:"bg-gradient-to-r from-gray-100/90 to-gray-200/80 dark:from-gray-700/90 dark:to-gray-800/80 text-gray-700 dark:text-gray-300 backdrop-blur-sm",children:[i.jsx("th",{className:"text-left p-3 font-semibold tracking-wide",children:"Code"}),i.jsx("th",{className:"text-left p-3 font-semibold tracking-wide",children:"Course"}),i.jsx("th",{className:"text-left p-3 font-semibold tracking-wide",children:"Credits"}),i.jsx("th",{className:"text-left p-3 font-semibold tracking-wide",children:"GPA"})]})}),i.jsxs("tbody",{children:[be.coursesSorted.map((G,xe)=>{const Ie=Math.max(0,Math.min(4,G.gpa)),Ce=N==="1-highest"?5-Ie:Ie;return i.jsxs("tr",{className:`border-t border-gray-200/30 dark:border-gray-700/30 
                                                        hover:bg-gradient-to-r hover:from-blue-50/30 hover:to-purple-50/20 
                                                        dark:hover:from-blue-950/20 dark:hover:to-purple-950/10 
                                                        transition-all duration-200 ${xe%2===0?"bg-white/30 dark:bg-gray-800/30":"bg-gray-50/30 dark:bg-gray-900/30"}`,children:[i.jsx("td",{className:"p-3 whitespace-nowrap font-medium text-gray-700 dark:text-gray-300",children:G.code||"-"}),i.jsx("td",{className:"p-3 text-gray-800 dark:text-gray-200",children:G.name||"-"}),i.jsx("td",{className:"p-3 text-gray-700 dark:text-gray-300",children:Number(G.credits)||0}),i.jsx("td",{className:"p-3 font-bold text-blue-600 dark:text-blue-400",children:Ce.toFixed(2)})]},G.id)}),be.coursesSorted.length===0&&i.jsx("tr",{children:i.jsx("td",{className:"p-4 text-gray-500 dark:text-gray-400 text-center italic",colSpan:4,children:"No courses with GPA yet."})})]})]})})]})]})}),i.jsx(Sr,{className:"flex-shrink-0 pt-6 border-t border-gray-200/30 dark:border-gray-700/30 mt-4",children:i.jsx(K,{variant:"outline",className:`rounded-2xl border-2 bg-gradient-to-r from-white/90 to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/80 \r
                           backdrop-blur-md hover:from-red-50/90 hover:to-pink-50/80 dark:hover:from-red-950/40 dark:hover:to-pink-950/30 \r
                           border-gray-200/60 dark:border-gray-600/40 hover:border-red-200/60 dark:hover:border-red-400/30\r
                           shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95\r
                           text-gray-700 dark:text-gray-200 hover:text-red-700 dark:hover:text-red-300\r
                           font-medium tracking-wide px-6 py-2`,onClick:()=>me(!1),children:i.jsx("span",{className:"relative z-10",children:"Close"})})})]})}),i.jsxs("div",{className:"mt-10",children:[i.jsx("h2",{className:"text-xl font-semibold tracking-tight mb-4",children:"Everything in one place"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5",children:[i.jsx(uo,{icon:Tk,title:"Academic Planner",desc:"Program map by SY & term, courses, sections, units, GPA.",cta:"Open Academic Planner",colors:b,iconType:"academic",onClick:p?()=>p("/planner"):()=>window.location.href="/planner"}),i.jsx(uo,{icon:yc,title:"Task Tracker",desc:"Assignments by course with status, due date/time, daysleft, grade + completion chart.",cta:"Track Tasks",colors:b,iconType:"productivity",onClick:()=>p("/tasks")}),i.jsx(uo,{icon:Mn,title:"Schedule Planner",desc:"SundaySaturday timetable with focus blocks & time usage.",cta:"Plan My Week",colors:b,iconType:"navigation",onClick:p?()=>p("/schedule"):()=>window.location.href="/schedule"}),i.jsx(uo,{icon:DM,title:"Course Planner",desc:"Instructor, time, room, syllabus, meetings/week, weighted grading, projects, notes & study plan.",cta:"Open Course Planner",colors:b,iconType:"academic",onClick:()=>p("/courses")}),i.jsx(uo,{icon:OM,title:"Scholarship Tracker",desc:"Status, deadlines, daysleft, submitted docs, awards with charts.",cta:"Track Scholarships",colors:b,iconType:"primary",onClick:()=>p("/scholarships")}),i.jsx(uo,{icon:RM,title:"Textbook Tracker",desc:"Perclass texts, publisher, status, purchase & return dates.",cta:"Log Textbooks",colors:b,iconType:"feature",onClick:()=>p("/textbooks")}),i.jsx(uo,{icon:W1,title:"Settings",desc:"Themes, notifications, data import/export, grading scales, calendar sync, time format.",cta:"Open Settings",colors:b,iconType:"navigation",onClick:()=>p("/settings")})]})]}),i.jsx("div",{className:"mt-12",children:i.jsx(Ne,{className:"border-0 shadow-lg rounded-3xl bg-white/80 dark:bg-neutral-900/60 backdrop-blur-md",children:i.jsx(je,{className:"p-6 md:p-8",children:i.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-6 ",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold ",children:"Level up your semester"}),i.jsx("p",{className:"text-sm text-neutral-600 mt-1 max-w-2xl",children:"Earn streaks for consistent study, unlock badges (First A, 10 tasks done, NoOverdue Week), and upgrade your Academic Avatar."})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(K,{className:`rounded-2xl bg-gradient-to-r from-purple-600/90 to-violet-600/90 dark:from-purple-500/90 dark:to-violet-500/90\r
                                hover:from-purple-700/95 hover:to-violet-700/95 dark:hover:from-purple-400/95 dark:hover:to-violet-400/95\r
                                text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                                hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0\r
                                font-medium tracking-wide backdrop-blur-md\r
                                ring-2 ring-purple-200/50 dark:ring-purple-400/30 hover:ring-purple-300/60 dark:hover:ring-purple-300/40`,onClick:()=>{m("quests"),u(!0)},children:"Start Daily Quest"}),i.jsx(K,{variant:"outline",className:`rounded-2xl border-2 bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/90 dark:to-neutral-900/80 \r
                               backdrop-blur-md hover:from-purple-50/90 hover:to-violet-50/80 dark:hover:from-purple-950/40 dark:hover:to-violet-950/30 \r
                               border-neutral-200/60 dark:border-neutral-600/40 hover:border-purple-200/60 dark:hover:border-violet-400/30\r
                               shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95\r
                               text-neutral-700 dark:text-neutral-200 hover:text-purple-700 dark:hover:text-violet-300\r
                               font-medium tracking-wide`,onClick:()=>{m("badges"),u(!0)},children:i.jsx("span",{children:"View Badges"})})]})]})})})}),i.jsxs("div",{className:"flex flex-wrap gap-3 items-center justify-between mt-8 pb-6",children:[i.jsx("p",{className:"text-xs text-neutral-500",children:"Tip: Import syllabi or connect a calendar to autocreate tasks & classes."}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(K,{variant:"outline",className:`rounded-2xl border-2 bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/90 dark:to-neutral-900/80 \r
                         backdrop-blur-md hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 \r
                         border-neutral-200/60 dark:border-neutral-600/40 hover:border-blue-200/60 dark:hover:border-indigo-400/30\r
                         shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95\r
                         text-neutral-700 dark:text-neutral-200 hover:text-blue-700 dark:hover:text-indigo-300\r
                         font-medium tracking-wide`,onClick:()=>{const G=encodeURIComponent("AcademicQuest Feedback"),xe=encodeURIComponent(`Hi! I would like to share feedback about AcademicQuest:

[Please describe your experience, suggestions, or any errors encountered]

Thank you!`);window.open(`mailto:renkai.studios0@gmail.com?subject=${G}&body=${xe}`,"_blank")},children:[i.jsx(zM,{className:"w-4 h-4 mr-2"}),i.jsx("span",{children:"Send Feedback"})]}),i.jsx(K,{className:`rounded-2xl bg-gradient-to-r from-green-600/90 to-emerald-600/90 dark:from-green-500/90 dark:to-emerald-500/90\r
                          hover:from-green-700/95 hover:to-emerald-700/95 dark:hover:from-green-400/95 dark:hover:to-emerald-400/95\r
                          text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                          hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0\r
                          font-medium tracking-wide backdrop-blur-md\r
                          ring-2 ring-green-200/50 dark:ring-green-400/30 hover:ring-green-300/60 dark:hover:ring-green-300/40`,onClick:()=>p("/planner"),children:"Add Course"})]})]})]}),i.jsx(wr,{open:$e,onOpenChange:_e,children:i.jsxs(lr,{className:`max-w-lg border-0 shadow-2xl rounded-3xl bg-gradient-to-br from-white/95 via-white/90 to-white/85 \r
                                    dark:from-neutral-900/95 dark:via-neutral-900/90 dark:to-neutral-800/85 backdrop-blur-md\r
                                    ring-1 ring-white/20 dark:ring-white/10`,children:[i.jsx(ir,{className:"pb-4 border-b border-gray-200/30 dark:border-gray-700/30",children:i.jsxs(cr,{className:`text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 \r
                                      dark:from-blue-400 dark:via-purple-400 dark:to-blue-300 bg-clip-text text-transparent\r
                                      flex items-center gap-3`,children:[i.jsx("div",{className:`p-2 rounded-xl bg-gradient-to-br from-blue-50/80 to-indigo-50/60 dark:from-blue-950/40 dark:to-indigo-950/30 \r
                                border border-blue-100/50 dark:border-blue-800/30 shadow-lg`,children:i.jsx(yc,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Quick Add Task"]})}),i.jsxs("div",{className:"space-y-5 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-500"}),"Task Title"]}),i.jsx(Ee,{value:de,onChange:G=>ne(G.target.value),placeholder:"e.g., OS Lab Report, Assignment 3, Project Submission...",className:`rounded-xl border-2 border-gray-200/60 dark:border-gray-600/40 \r
                             bg-gradient-to-r from-white/90 to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/80\r
                             backdrop-blur-md focus:border-blue-400/60 dark:focus:border-purple-400/60\r
                             focus:ring-4 focus:ring-blue-100/50 dark:focus:ring-purple-900/30\r
                             transition-all duration-300 hover:shadow-lg focus:shadow-xl\r
                             text-gray-800 dark:text-gray-200 placeholder:text-gray-500 dark:placeholder:text-gray-400\r
                             h-11 px-4`})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-emerald-500 to-teal-500"}),"Due Date"]}),i.jsx(Ee,{type:"date",value:ge,onChange:G=>Z(G.target.value),className:`rounded-xl border-2 border-gray-200/60 dark:border-gray-600/40 \r
                               bg-gradient-to-r from-white/90 to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/80\r
                               backdrop-blur-md focus:border-emerald-400/60 dark:focus:border-teal-400/60\r
                               focus:ring-4 focus:ring-emerald-100/50 dark:focus:ring-teal-900/30\r
                               transition-all duration-300 hover:shadow-lg focus:shadow-xl\r
                               text-gray-800 dark:text-gray-200 h-11 px-4`})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-amber-500 to-orange-500"}),"Due Time"]}),i.jsx(Ee,{type:"time",value:oe,onChange:G=>Le(G.target.value),className:`rounded-xl border-2 border-gray-200/60 dark:border-gray-600/40 \r
                               bg-gradient-to-r from-white/90 to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/80\r
                               backdrop-blur-md focus:border-amber-400/60 dark:focus:border-orange-400/60\r
                               focus:ring-4 focus:ring-amber-100/50 dark:focus:ring-orange-900/30\r
                               transition-all duration-300 hover:shadow-lg focus:shadow-xl\r
                               text-gray-800 dark:text-gray-200 h-11 px-4`})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-purple-500 to-pink-500"}),"Status"]}),i.jsxs("select",{className:`w-full h-11 px-4 rounded-xl border-2 border-gray-200/60 dark:border-gray-600/40 \r
                             bg-gradient-to-r from-white/90 to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/80\r
                             backdrop-blur-md focus:border-purple-400/60 dark:focus:border-pink-400/60\r
                             focus:ring-4 focus:ring-purple-100/50 dark:focus:ring-pink-900/30\r
                             transition-all duration-300 hover:shadow-lg focus:shadow-xl\r
                             text-gray-800 dark:text-gray-200 cursor-pointer\r
                             focus:outline-none appearance-none`,value:Je,onChange:G=>it(G.target.value),style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[i.jsx("option",{value:"Not Started",children:" Not Started"}),i.jsx("option",{value:"In Progress",children:" In Progress"}),i.jsx("option",{value:"Completed",children:" Completed"})]})]})]}),i.jsxs(Sr,{className:"pt-6 border-t border-gray-200/30 dark:border-gray-700/30 gap-3",children:[i.jsx(K,{variant:"outline",className:`rounded-2xl border-2 bg-gradient-to-r from-white/90 to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/80 \r
                           backdrop-blur-md hover:from-red-50/90 hover:to-pink-50/80 dark:hover:from-red-950/40 dark:hover:to-pink-950/30 \r
                           border-gray-200/60 dark:border-gray-600/40 hover:border-red-200/60 dark:hover:border-red-400/30\r
                           shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95\r
                           text-gray-700 dark:text-gray-200 hover:text-red-700 dark:hover:text-red-300\r
                           font-medium tracking-wide px-6 py-2 flex-1`,onClick:()=>_e(!1),children:i.jsx("span",{className:"relative z-10",children:"Cancel"})}),i.jsx(K,{className:`rounded-2xl bg-gradient-to-r from-blue-600 via-purple-600 to-blue-700 \r
                           dark:from-blue-500 dark:via-purple-500 dark:to-blue-600\r
                           hover:from-blue-700 hover:via-purple-700 hover:to-blue-800\r
                           dark:hover:from-blue-600 dark:hover:via-purple-600 dark:hover:to-blue-700\r
                           shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95\r
                           text-white font-medium tracking-wide px-6 py-2 flex-1\r
                           border-0 ring-2 ring-blue-200/50 dark:ring-purple-400/30`,onClick:zt,children:i.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[i.jsx("span",{children:"Add Task"}),i.jsx("span",{className:"text-lg",children:""})]})})]})]})}),i.jsx(Yl,{children:t&&i.jsx(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 dark:bg-black/60 backdrop-blur-sm",onClick:()=>n(!1),children:i.jsxs(et.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",stiffness:260,damping:20},className:"w-[92%] max-w-lg rounded-3xl shadow-2xl bg-white/90 dark:bg-neutral-900/90 border border-black/10 dark:border-white/10 backdrop-blur-md",onClick:G=>G.stopPropagation(),children:[i.jsxs("div",{className:"p-6 border-b border-black/5 dark:border-white/10 flex items-center justify-between",children:[i.jsx("h4",{className:"text-lg font-semibold",children:"Unlocked Badges"}),i.jsx(K,{size:"sm",variant:"ghost",className:"rounded-2xl bg-transparent text-foreground hover:bg-black/5 dark:hover:bg-white/80 dark:bg-neutral-900/60 border-0 shadow-none focus-visible:outline-none focus-visible:ring-0",onClick:()=>n(!1),children:"Close"})]}),i.jsx("div",{className:"p-6 grid grid-cols-3 gap-4",children:[{name:"First A",icon:oa},{name:"10 Tasks",icon:wo},{name:"NoOverdue Week",icon:LM}].map(({name:G,icon:xe},Ie)=>i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mx-auto h-14 w-14 rounded-2xl flex items-center justify-center bg-neutral-50 dark:bg-neutral-800/60",children:i.jsx(xe,{className:"h-6 w-6"})}),i.jsx("p",{className:"text-xs mt-2 font-medium",children:G})]},Ie))}),i.jsx("div",{className:"px-6 pb-6",children:i.jsx(K,{className:"w-full rounded-2xl",children:"See All Badges"})})]})})}),i.jsx(gD,{isOpen:s,onClose:()=>l(!1)}),i.jsx(bD,{isOpen:c,onClose:()=>u(!1),defaultTab:h}),i.jsx(wr,{open:ae,onOpenChange:le,children:i.jsxs(lr,{className:`max-w-lg border-0 shadow-2xl rounded-3xl bg-gradient-to-br from-white/95 via-white/90 to-white/85 \r
                                    dark:from-neutral-900/95 dark:via-neutral-900/90 dark:to-neutral-800/85 backdrop-blur-md\r
                                    ring-1 ring-white/20 dark:ring-white/10`,children:[i.jsx(ir,{className:"pb-4 border-b border-gray-200/30 dark:border-gray-700/30",children:i.jsxs(cr,{className:`text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 \r
                                    dark:from-blue-400 dark:via-purple-400 dark:to-blue-300 bg-clip-text text-transparent\r
                                    flex items-center gap-3`,children:[i.jsx("div",{className:`p-2 rounded-xl bg-gradient-to-br from-blue-50/80 to-indigo-50/60 dark:from-blue-950/40 dark:to-indigo-950/30 \r
                              border border-blue-100/50 dark:border-blue-800/30 shadow-lg`,children:i.jsx(Iu,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),"Mark Attendance"]})}),ie&&i.jsx("div",{className:"py-6",children:i.jsxs("div",{className:`p-5 rounded-2xl bg-gradient-to-br from-white/80 to-gray-50/60 dark:from-gray-800/80 dark:to-gray-900/60 \r
                             border border-gray-200/50 dark:border-gray-700/30 shadow-lg backdrop-blur-sm`,children:[i.jsxs("div",{className:"mb-4",children:[i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-2",children:ie.course}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600 dark:text-gray-300",children:[i.jsxs("span",{className:`flex items-center gap-2 px-3 py-1 rounded-full bg-blue-50/80 dark:bg-blue-950/30 \r
                                     border border-blue-100/50 dark:border-blue-800/30`,children:[i.jsx(Rc,{className:"w-3.5 h-3.5 text-blue-600 dark:text-blue-400"}),i.jsx("span",{className:"font-medium",children:ie.time})]}),ie.room&&i.jsxs("span",{className:`flex items-center gap-2 px-3 py-1 rounded-full bg-emerald-50/80 dark:bg-emerald-950/30 \r
                                       border border-emerald-100/50 dark:border-emerald-800/30`,children:[i.jsx(Ep,{className:"w-3.5 h-3.5 text-emerald-600 dark:text-emerald-400"}),i.jsx("span",{className:"font-medium",children:ie.room})]})]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Did you attend this class today?"}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(K,{className:`flex-1 rounded-xl bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700\r
                                 dark:from-green-500 dark:to-emerald-500 dark:hover:from-green-600 dark:hover:to-emerald-600\r
                                 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                                 hover:scale-105 active:scale-95 font-medium py-3`,onClick:()=>hn(!0),children:[i.jsx(xc,{className:"w-5 h-5 mr-2"}),"Yes, I Attended"]}),i.jsxs(K,{className:`flex-1 rounded-xl bg-gradient-to-r from-red-600 to-rose-600 hover:from-red-700 hover:to-rose-700\r
                                 dark:from-red-500 dark:to-rose-500 dark:hover:from-red-600 dark:hover:to-rose-600\r
                                 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                                 hover:scale-105 active:scale-95 font-medium py-3`,onClick:()=>hn(!1),children:[i.jsx(bc,{className:"w-5 h-5 mr-2"}),"No, I Missed It"]})]})]})]})}),i.jsx(Sr,{className:"pt-6 border-t border-gray-200/30 dark:border-gray-700/30",children:i.jsx(K,{variant:"outline",className:`rounded-2xl border-2 bg-gradient-to-r from-white/90 to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/80 \r
                         backdrop-blur-md hover:from-red-50/90 hover:to-pink-50/80 dark:hover:from-red-950/40 dark:hover:to-pink-950/30 \r
                         border-gray-200/60 dark:border-gray-600/40 hover:border-red-200/60 dark:hover:border-red-400/30\r
                         shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95\r
                         text-gray-700 dark:text-gray-200 hover:text-red-700 dark:hover:text-red-300\r
                         font-medium tracking-wide px-6 py-2`,onClick:()=>le(!1),children:"Cancel"})})]})})]})}function oi({active:r}){const e=Eg(),t=l3(),n=[{key:"dashboard",label:"Dashboard",path:"/"},{key:"planner",label:"Academic Planner",path:"/planner"},{key:"tasks",label:"Task Tracker",path:"/tasks"},{key:"schedule",label:"Schedule Planner",path:"/schedule"},{key:"courses",label:"Course Planner",path:"/courses"},{key:"scholarships",label:"Scholarships",path:"/scholarships"},{key:"textbooks",label:"Textbooks",path:"/textbooks"},{key:"settings",label:"Settings",path:"/settings"}],s=t.pathname,l=(()=>{if(s==="/")return"dashboard";if(s.startsWith("/planner"))return"planner";if(s.startsWith("/tasks"))return"tasks";if(s.startsWith("/schedule"))return"schedule";if(s.startsWith("/course-planner")||s.startsWith("/courses"))return"courses";if(s.startsWith("/scholarships"))return"scholarships";if(s.startsWith("/textbooks"))return"textbooks";if(s.startsWith("/settings"))return"settings"})(),c=r??l;return i.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:n.map(u=>i.jsx(K,{variant:c===u.key?"default":"outline",className:`h-9 rounded-full transition-all duration-200 font-medium tracking-wide text-xs
            ${c===u.key?"bg-gradient-to-r from-blue-600/90 to-indigo-600/90 dark:from-blue-500/90 dark:to-indigo-500/90 text-white shadow-lg ring-2 ring-blue-200/50 dark:ring-blue-400/30 backdrop-blur-sm hover:from-blue-700/95 hover:to-indigo-700/95 dark:hover:from-blue-400/95 dark:hover:to-indigo-400/95":"bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 text-gray-700 dark:text-gray-200 hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 hover:text-blue-700 dark:hover:text-blue-300 shadow-md hover:shadow-lg backdrop-blur-sm border border-gray-200/60 dark:border-gray-600/40 hover:border-blue-200/60 dark:hover:border-blue-400/30"}
            hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0`,onClick:()=>e(u.path),children:u.label},u.key))})}const jD=`
  .light-scrollbar::-webkit-scrollbar { width: 10px; height: 10px; }
  .light-scrollbar::-webkit-scrollbar-track { background: rgba(0,0,0,0.05); border-radius: 5px; }
  .light-scrollbar::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.20); border-radius: 5px; }
  .light-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,0.30); }

  .dark-scrollbar::-webkit-scrollbar { width: 10px; height: 10px; }
  .dark-scrollbar::-webkit-scrollbar-track { background: rgba(255,255,255,0.10); border-radius: 5px; }
  .dark-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.20); border-radius: 5px; }
  .dark-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.30); }
`;function CD(){const r=_r(),e=Gn[r.palette],[t,n]=P.useState(r.accent);return P.useEffect(()=>n(r.accent),[r.accent]),P.useMemo(()=>{const s=Math.min(.35,Math.max(.12,t/260)),l=Math.round(s*255).toString(16).padStart(2,"0"),c=window.matchMedia("(prefers-color-scheme: dark)").matches,h=r.mode==="dark"||r.mode==="system"&&c?"linear-gradient(135deg, #0b0f19 0%, #0a0a0a 70%)":"linear-gradient(135deg, #ffffff 0%, #f8fbff 65%)",m=`radial-gradient(circle at 8% 0%, ${e[0]}${l} 0%, transparent 40%)`,p=`radial-gradient(circle at 92% 12%, ${e[3]}${l} 0%, transparent 45%)`,x=`radial-gradient(circle at 50% 120%, ${e[2]}${l} 0%, transparent 55%)`;return{backgroundImage:`${m}, ${p}, ${x}, ${h}`,backgroundRepeat:"no-repeat, no-repeat, no-repeat, no-repeat",backgroundAttachment:"fixed, fixed, scroll, fixed",backgroundPosition:"8% 0%, 92% 12%, 50% 100%, 0 0"}},[t,r.mode,e])}function TD({value:r,onChange:e,onRemove:t}){return i.jsxs("div",{className:"grid grid-cols-[30px_100px_1fr_90px_70px_70px] gap-3 items-center px-2 py-2",children:[i.jsx(K,{variant:"outline",size:"icon",onClick:t,className:`h-8 w-8 rounded-2xl\r
                  text-gray-600 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400\r
                  hover:bg-red-50/50 dark:hover:bg-red-950/20 transition-all duration-200\r
                  focus:text-red-500 dark:focus:text-red-400`,title:"Remove course",children:i.jsx(Un,{className:"h-3 w-3"})}),i.jsx(Ee,{value:r.code,onChange:n=>e({...r,code:n.target.value}),placeholder:"Code",className:`h-8 rounded-2xl bg-white/80 dark:bg-neutral-900/60 border-gray-200/60 dark:border-gray-600/40 \r
                  focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
                  transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs`}),i.jsx("div",{className:"flex",children:i.jsx("input",{className:`flex-1 h-8 rounded-2xl bg-white/80 dark:bg-neutral-900/60 border border-gray-200/60 dark:border-gray-600/40 px-4\r
                    focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
                    transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 outline-none text-xs\r
                    placeholder:text-gray-400 dark:placeholder:text-gray-500`,value:r.name,onChange:n=>e({...r,name:n.target.value}),placeholder:"Course name"})}),i.jsx(Ee,{value:r.section,onChange:n=>e({...r,section:n.target.value}),placeholder:"Sec.",className:`h-8 rounded-2xl bg-white/80 dark:bg-neutral-900/60 border-gray-200/60 dark:border-gray-600/40 \r
                  focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
                  transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs`}),i.jsx(Ee,{type:"number",step:"0.5",value:r.credits,onChange:n=>e({...r,credits:Number(n.target.value)||0}),placeholder:"Cr.",className:`h-8 rounded-2xl bg-white/80 dark:bg-neutral-900/60 border-gray-200/60 dark:border-gray-600/40 \r
                  focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
                  transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs`}),i.jsx(Ee,{type:"number",step:"0.01",min:0,max:4,value:r.gpa??"",onChange:n=>e({...r,gpa:n.target.value===""?void 0:Number(n.target.value)}),placeholder:"GPA",className:`h-8 rounded-2xl bg-white/80 dark:bg-neutral-900/60 border-gray-200/60 dark:border-gray-600/40 \r
                  focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
                  transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs`})]})}function MD({yearId:r,termIndex:e}){const t=Ft(v=>v.years),n=Ft(v=>v.addRow),s=Ft(v=>v.updateRow),l=Ft(v=>v.removeRow),c=$s(v=>v.gpaScale),u=t.find(v=>v.id===r),h=u?.terms?.[e],m=P.useMemo(()=>h?.courses??[],[h?.courses]),p=P.useMemo(()=>m.reduce((v,k)=>v+(Number(k.credits)||0),0),[m]),x=P.useMemo(()=>{const{wSum:v,cSum:k}=m.reduce((w,S)=>{const N=Number(S.credits)||0,T=typeof S.gpa=="number"?S.gpa:void 0;return N>0&&T!==void 0&&(w.wSum+=N*T,w.cSum+=N),w},{wSum:0,cSum:0});return k>0?v/k:0},[m]),b=P.useMemo(()=>{const v=Math.max(0,Math.min(4,x));return c==="1-highest"?5-v:v},[x,c]);return!u||!h?null:i.jsx(Ne,{className:`border-0 shadow-xl rounded-3xl overflow-hidden bg-white/80 dark:bg-neutral-900/60 backdrop-blur-xl \r
                    ring-1 ring-gray-200/50 dark:ring-gray-600/50 min-w-[900px] hover:shadow-2xl transition-all duration-200`,children:i.jsxs(je,{className:"p-6",children:[i.jsxs("div",{className:"flex items-end justify-between mb-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("div",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:h.name}),i.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Program plan this term"})]}),i.jsxs(K,{size:"sm",variant:"outline",className:`rounded-2xl bg-gradient-to-r from-green-600/90 to-emerald-600/90 dark:from-green-500/90 dark:to-emerald-500/90 \r
                      text-white shadow-lg ring-2 ring-green-200/50 dark:ring-green-400/30 backdrop-blur-sm border-0\r
                      hover:from-green-700/95 hover:to-emerald-700/95 dark:hover:from-green-400/95 dark:hover:to-emerald-400/95\r
                      transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0 \r
                      font-medium tracking-wide`,onClick:()=>n(r,h.id),children:[i.jsx(cn,{className:"h-4 w-4 mr-1"})," Add Row"]})]}),i.jsxs("div",{className:`grid grid-cols-[30px_100px_1fr_90px_70px_63px] gap-4 text-xs font-semibold \r
                        text-gray-600 dark:text-gray-300 pb-3 border-b border-gray-200/60 dark:border-gray-600/40`,children:[i.jsx("div",{}),i.jsx("div",{children:"Code"}),i.jsx("div",{children:"Course Name"}),i.jsx("div",{children:"Sec."}),i.jsx("div",{children:"Cr."}),i.jsx("div",{children:"GPA"})]}),i.jsx("div",{className:"divide-y divide-gray-100/60 dark:divide-gray-700/40",children:h.courses.map(v=>i.jsx(TD,{value:v,onChange:k=>s(r,h.id,k),onRemove:()=>l(r,h.id,v.id)},v.id))}),i.jsxs("div",{className:"flex items-center justify-end pt-4 border-t border-gray-200/60 dark:border-gray-600/40 mt-4 gap-6",children:[i.jsxs("div",{className:"text-xs",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400 mr-2",children:"Total Credits"}),i.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-100 bg-gray-100/80 dark:bg-gray-700/50 px-2 py-1 rounded-lg",children:p})]}),i.jsxs("div",{className:"text-xs",children:[i.jsx("span",{className:"text-gray-500 dark:text-gray-400 mr-2",children:"Term GPA"}),i.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-100 bg-gray-100/80 dark:bg-gray-700/50 px-2 py-1 rounded-lg",children:b.toFixed(2)})]})]})]})})}function ED(){const r=CD(),e=_r(),t=P.useMemo(()=>{const T=window.matchMedia("(prefers-color-scheme: dark)").matches;return e.mode==="dark"||e.mode==="system"&&T?"dark-scrollbar":"light-scrollbar"},[e.mode]),n=Ft(T=>T.years),s=Ft(T=>T.selectedYearId),l=Ft(T=>T.setSelectedYear),c=Ft(T=>T.addYear),u=Ft(T=>T.setTermsCount),h=s||n[0]?.id,m=n.find(T=>T.id===h),p=P.useRef({}),[x,b]=P.useState({}),v=P.useCallback(T=>{if(!p.current[T]?.length)return;const C=p.current[T].filter(Boolean).map(A=>A?.offsetHeight||0),D=C.length>0?Math.max(...C):560;b(A=>A[T]===D?A:{...A,[T]:D})},[]);P.useEffect(()=>{const T=[];return n.forEach(C=>{p.current[C.id]&&(p.current[C.id].forEach(D=>{if(!D)return;const A=new MutationObserver(()=>v(C.id));A.observe(D,{childList:!0,subtree:!0,attributes:!0}),T.push(A)}),v(C.id))}),()=>T.forEach(C=>C.disconnect())},[n,v]);const k=P.useRef({}),w=P.useCallback(()=>{if(n.length===0)return"SY 20252026";let T=2025;return n.forEach(C=>{const D=C.label.match(/SY (\d{4})(\d{4})/);if(D){const A=parseInt(D[1],10);A>T&&(T=A)}}),`SY ${T+1}${T+2}`},[n]),[S,N]=P.useState(!1);return i.jsxs("div",{className:"min-h-screen w-full",style:r,children:[i.jsx("style",{children:jD}),i.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Mn,{className:"h-5 w-5"}),i.jsx("h1",{className:"text-2xl font-bold",children:"Academic Planner"})]}),i.jsx(oi,{active:"planner"})]}),i.jsxs(K,{variant:"outline",className:`rounded-2xl h-11 bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                      text-gray-700 dark:text-gray-200 hover:from-cyan-50/90 hover:to-blue-50/80 dark:hover:from-cyan-950/40 dark:hover:to-blue-950/30 \r
                      hover:text-cyan-700 dark:hover:text-cyan-300 shadow-md hover:shadow-lg backdrop-blur-sm \r
                      border border-gray-200/60 dark:border-gray-600/40 hover:border-cyan-200/60 dark:hover:border-cyan-400/30\r
                      transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0`,onClick:()=>N(!0),children:[m?.label||"Choose School Year"," ",i.jsx("span",{className:"ml-1 opacity-60",children:""})]})]}),i.jsx(wr,{open:S,onOpenChange:N,children:i.jsxs(lr,{className:`max-w-md rounded-3xl bg-white/95 dark:bg-neutral-800/95 backdrop-blur-xl border-0 shadow-2xl \r
                                    ring-1 ring-gray-200/50 dark:ring-gray-600/50`,children:[i.jsx(ir,{children:i.jsx(cr,{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Select School Year"})}),i.jsx("div",{className:"space-y-2 max-h-64 overflow-auto",children:n.map(T=>i.jsx(K,{variant:T.id===h?"default":"outline",className:`w-full justify-start rounded-2xl text-lg py-5 transition-all duration-200 font-medium tracking-wide
                    ${T.id===h?"bg-gradient-to-r from-cyan-600/90 to-blue-600/90 dark:from-cyan-500/90 dark:to-blue-500/90 text-white shadow-lg ring-2 ring-cyan-200/50 dark:ring-cyan-400/30 backdrop-blur-sm hover:from-cyan-700/95 hover:to-blue-700/95 dark:hover:from-cyan-400/95 dark:hover:to-blue-400/95":"bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 text-gray-700 dark:text-gray-200 hover:from-cyan-50/90 hover:to-blue-50/80 dark:hover:from-cyan-950/40 dark:hover:to-blue-950/30 hover:text-cyan-700 dark:hover:text-cyan-300 shadow-md hover:shadow-lg backdrop-blur-sm border border-gray-200/60 dark:border-gray-600/40 hover:border-cyan-200/60 dark:hover:border-cyan-400/30"}
                    hover:scale-102 active:scale-98 hover:-translate-y-0.5 active:translate-y-0`,onClick:()=>{l(T.id),N(!1),setTimeout(()=>k.current[T.id]?.scrollIntoView({behavior:"smooth",block:"start"}),10)},children:T.label},T.id))}),i.jsx(Sr,{className:"mt-3",children:i.jsxs(K,{className:`bg-gradient-to-r from-green-600/90 to-emerald-600/90 dark:from-green-500/90 dark:to-emerald-500/90 \r
                          text-white shadow-lg ring-2 ring-green-200/50 dark:ring-green-400/30 backdrop-blur-sm \r
                          hover:from-green-700/95 hover:to-emerald-700/95 dark:hover:from-green-400/95 dark:hover:to-emerald-400/95\r
                          transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0 \r
                          rounded-2xl font-medium tracking-wide`,onClick:()=>{const T=w();c(T),N(!1),setTimeout(()=>{const C=n[n.length-1];C?.id&&(l(C.id),k.current[C.id]?.scrollIntoView({behavior:"smooth"}))},10)},children:[i.jsx(cn,{className:"h-4 w-4 mr-1"})," Add School Year"]})})]})}),i.jsx("div",{className:"space-y-16",children:n.map(T=>i.jsxs("div",{className:"space-y-6",ref:C=>{k.current[T.id]=C},children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h2",{className:`text-3xl font-bold tracking-tight bg-gradient-to-r from-gray-800 to-gray-600 dark:from-gray-100 dark:to-gray-300 \r
                              bg-clip-text text-transparent`,children:T.label})}),i.jsxs("div",{className:"flex",children:[i.jsx("div",{className:`overflow-x-auto flex-1 ${t}`,children:i.jsx("div",{className:"flex gap-6 items-start min-w-max",children:T.terms.map((C,D)=>i.jsx("div",{ref:A=>{if(p.current[T.id]||(p.current[T.id]=[]),A){for(;p.current[T.id].length<=D;)p.current[T.id].push(null);p.current[T.id][D]=A,setTimeout(()=>v(T.id),0)}},children:i.jsx(MD,{yearId:T.id,termIndex:D})},D))})}),i.jsx("div",{className:"ml-4 w-[120px] shrink-0 flex",children:i.jsx("button",{className:`w-full rounded-2xl bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                              border border-gray-200/60 dark:border-gray-600/40 shadow-md backdrop-blur-sm\r
                              hover:from-green-50/90 hover:to-emerald-50/80 dark:hover:from-green-950/40 dark:hover:to-emerald-950/30 \r
                              hover:text-green-700 dark:hover:text-green-300 hover:shadow-lg hover:border-green-200/60 dark:hover:border-green-400/30\r
                              transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] disabled:opacity-40 disabled:cursor-not-allowed\r
                              disabled:hover:scale-100 disabled:hover:shadow-md`,style:{height:x[T.id]||560},onClick:()=>u(T.id,Math.min(4,T.terms.length+1)),title:T.terms.length>=4?"Max 4 terms":"Add new term",disabled:T.terms.length>=4,children:i.jsx("span",{className:`block rotate-90 whitespace-nowrap text-lg md:text-xl font-semibold tracking-wide select-none 
                                      ${T.terms.length>=4?"text-gray-400 dark:text-gray-500":"text-gray-600 dark:text-gray-300"}`,children:T.terms.length>=4?"Max Terms":"+ Add New Term"})})})]})]},T.id))}),i.jsx("div",{className:"mt-4 pb-8",children:i.jsxs(K,{className:`w-full h-24 rounded-2xl bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                      border border-gray-200/60 dark:border-gray-600/40 shadow-md backdrop-blur-sm\r
                      hover:from-green-50/90 hover:to-emerald-50/80 dark:hover:from-green-950/40 dark:hover:to-emerald-950/30 \r
                      hover:text-green-700 dark:hover:text-green-300 hover:shadow-lg hover:border-green-200/60 dark:hover:border-green-400/30\r
                      transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] hover:-translate-y-1 active:translate-y-0\r
                      text-gray-600 dark:text-gray-300 font-semibold`,onClick:()=>{const T=w();c(T),setTimeout(()=>{const C=n[n.length-1];C?.id&&(l(C.id),k.current[C.id]?.scrollIntoView({behavior:"smooth"}))},10)},children:[i.jsx(cn,{className:"h-5 w-5 mr-2"})," Add New School Year"]})})]})]})}const AD=`
  /* Light theme scrollbars */
  .light-scrollbar::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }
  
  .light-scrollbar::-webkit-scrollbar-track {
    background: rgba(0, 0, 0, 0.05);
    border-radius: 5px;
  }
  
  .light-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(0, 0, 0, 0.2);
    border-radius: 5px;
  }
  
  .light-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(0, 0, 0, 0.3);
  }
  
  /* Dark theme scrollbars - what you already have */
  .dark-scrollbar::-webkit-scrollbar {
    width: 10px;
    height: 10px;
  }
  
  .dark-scrollbar::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.1);
    border-radius: 5px;
  }
  
  .dark-scrollbar::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 5px;
  }
  
  .dark-scrollbar::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
  }
`,Zg=7,DD=21,af=30,po=(DD-Zg)*60/af,mo=28,OD=po*mo,Kp=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Uu=["#0ea5e9","#22c55e","#f59e0b","#a78bfa","#ef4444","#06b6d4","#f97316"];function Su(r){const[e,t]=r.split(":").map(Number),n=(e-Zg)*(60/af)+Math.floor(t/af);return Math.max(0,Math.min(po,n))}function oc(r){const e=Zg*60+r*af,t=Math.floor(e/60),n=e%60;return`${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}`}function RD({open:r,onOpenChange:e,initial:t,onSave:n,onDelete:s}){const[l,c]=P.useState(t);return P.useEffect(()=>c(t),[t]),i.jsx(wr,{open:r,onOpenChange:e,children:i.jsxs(lr,{className:"max-w-2xl bg-white/95 dark:bg-neutral-900/95 backdrop-blur-xl border-0 shadow-2xl rounded-3xl",children:[i.jsx(ir,{className:"pb-6 border-b border-gray-200/50 dark:border-gray-700/50",children:i.jsx(cr,{className:"text-xl font-semibold bg-gradient-to-r from-green-600 to-emerald-600 dark:from-green-400 dark:to-emerald-400 bg-clip-text text-transparent flex items-center gap-2",children:l.id?i.jsxs(i.Fragment,{children:[i.jsx("svg",{className:"h-5 w-5 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Block"]}):i.jsxs(i.Fragment,{children:[i.jsx("svg",{className:"h-5 w-5 text-green-600 dark:text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add New Block"]})})}),i.jsx("div",{className:"py-6",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"col-span-2",children:[i.jsx(ot,{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Course / Agenda Name"}),i.jsx(Ee,{value:l.title,onChange:u=>c({...l,title:u.target.value}),placeholder:"e.g., Algorithms (LEC)",className:`rounded-2xl h-11 bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40 \r
                          focus:border-green-400/60 dark:focus:border-emerald-400/60 focus:ring-2 focus:ring-green-200/50 dark:focus:ring-emerald-400/20\r
                          transition-all duration-300 backdrop-blur-md`})]}),i.jsxs("div",{children:[i.jsx(ot,{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Course Code"}),i.jsx(Ee,{value:l.courseCode??"",onChange:u=>c({...l,courseCode:u.target.value}),placeholder:"e.g., CS101",className:`rounded-2xl h-11 bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40 \r
                          focus:border-green-400/60 dark:focus:border-emerald-400/60 focus:ring-2 focus:ring-green-200/50 dark:focus:ring-emerald-400/20\r
                          transition-all duration-300 backdrop-blur-md`})]}),i.jsxs("div",{children:[i.jsx(ot,{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Room"}),i.jsx(Ee,{value:l.room??"",onChange:u=>c({...l,room:u.target.value}),placeholder:"e.g., B402",className:`rounded-2xl h-11 bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40 \r
                          focus:border-green-400/60 dark:focus:border-emerald-400/60 focus:ring-2 focus:ring-green-200/50 dark:focus:ring-emerald-400/20\r
                          transition-all duration-300 backdrop-blur-md`})]}),i.jsxs("div",{children:[i.jsx(ot,{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Building"}),i.jsx(Ee,{value:l.building??"",onChange:u=>c({...l,building:u.target.value}),placeholder:"e.g., Engineering Hall",className:`rounded-2xl h-11 bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40 \r
                          focus:border-green-400/60 dark:focus:border-emerald-400/60 focus:ring-2 focus:ring-green-200/50 dark:focus:ring-emerald-400/20\r
                          transition-all duration-300 backdrop-blur-md`})]}),i.jsxs("div",{children:[i.jsxs(ot,{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:["Link ",i.jsx("span",{className:"text-gray-500 text-xs",children:"(optional)"})]}),i.jsx(Ee,{value:l.link??"",onChange:u=>c({...l,link:u.target.value}),placeholder:"https://...",className:`rounded-2xl h-11 bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40 \r
                          focus:border-green-400/60 dark:focus:border-emerald-400/60 focus:ring-2 focus:ring-green-200/50 dark:focus:ring-emerald-400/20\r
                          transition-all duration-300 backdrop-blur-md`})]}),i.jsxs("div",{children:[i.jsx(ot,{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Day"}),i.jsxs(yt,{value:l.day.toString(),onValueChange:u=>c({...l,day:Number(u)}),children:[i.jsx(gt,{className:`h-11 rounded-2xl bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40 \r
                                        focus:border-green-400/60 dark:focus:border-emerald-400/60 focus:ring-2 focus:ring-green-200/50 dark:focus:ring-emerald-400/20\r
                                        transition-all duration-300 backdrop-blur-md text-gray-700 dark:text-gray-200\r
                                        shadow-md hover:shadow-lg hover:scale-[1.01] active:scale-[0.99]`,children:i.jsx(vt,{placeholder:"Select a day"})}),i.jsx(xt,{className:`rounded-2xl bg-white/95 dark:bg-neutral-800/95 backdrop-blur-xl border-0 shadow-2xl \r
                                         ring-1 ring-gray-200/50 dark:ring-gray-600/50`,children:Kp.map((u,h)=>i.jsx(Oe,{value:h.toString(),className:`rounded-xl mx-1 my-0.5 focus:bg-green-50/90 dark:focus:bg-emerald-950/30 \r
                                focus:text-green-700 dark:focus:text-emerald-300 cursor-pointer\r
                                transition-all duration-200 hover:bg-green-50/50 dark:hover:bg-emerald-950/20`,children:u},u))})]})]}),i.jsxs("div",{children:[i.jsx(ot,{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"Start Time"}),i.jsx(Ee,{type:"time",value:l.start,onChange:u=>c({...l,start:u.target.value}),className:`rounded-2xl h-11 bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40 \r
                          focus:border-green-400/60 dark:focus:border-emerald-400/60 focus:ring-2 focus:ring-green-200/50 dark:focus:ring-emerald-400/20\r
                          transition-all duration-300 backdrop-blur-md`})]}),i.jsxs("div",{children:[i.jsx(ot,{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 block",children:"End Time"}),i.jsx(Ee,{type:"time",value:l.end,onChange:u=>c({...l,end:u.target.value}),className:`rounded-2xl h-11 bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40 \r
                          focus:border-green-400/60 dark:focus:border-emerald-400/60 focus:ring-2 focus:ring-green-200/50 dark:focus:ring-emerald-400/20\r
                          transition-all duration-300 backdrop-blur-md`})]}),i.jsxs("div",{className:"col-span-2",children:[i.jsx(ot,{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block",children:"Color Theme"}),i.jsx("div",{className:"flex flex-wrap gap-3",children:Uu.map(u=>i.jsx("button",{onClick:()=>c({...l,color:u}),className:`h-10 w-10 rounded-2xl border-2 transition-all duration-300 hover:scale-110 active:scale-95 ${l.color===u?"ring-4 ring-gray-400/50 dark:ring-gray-300/50 border-white dark:border-neutral-800 shadow-lg":"border-gray-200/60 dark:border-gray-600/40 hover:border-gray-300/80 dark:hover:border-gray-500/60 shadow-md hover:shadow-lg"}`,style:{background:u},title:u},u))})]})]})}),i.jsxs(Sr,{className:"pt-6 border-t border-gray-200/50 dark:border-gray-700/50 flex gap-3",children:[s&&i.jsxs(K,{variant:"destructive",onClick:s,className:`rounded-2xl bg-gradient-to-r from-red-600/90 to-red-700/90 dark:from-red-500/90 dark:to-red-600/90\r
                        hover:from-red-700/95 hover:to-red-800/95 dark:hover:from-red-400/95 dark:hover:to-red-500/95\r
                        text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                        hover:scale-[1.02] active:scale-[0.98] hover:-translate-y-0.5 active:translate-y-0\r
                        font-medium tracking-wide backdrop-blur-md\r
                        ring-2 ring-red-200/50 dark:ring-red-400/30 hover:ring-red-300/60 dark:hover:ring-red-300/40`,children:[i.jsx(Un,{className:"h-4 w-4 mr-2"})," Delete"]}),i.jsx("div",{className:"flex-1"}),i.jsx(K,{variant:"outline",onClick:()=>e(!1),className:`rounded-2xl bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                      text-gray-700 dark:text-gray-200 hover:from-gray-50/90 hover:to-gray-100/80 dark:hover:from-gray-750/40 dark:hover:to-gray-850/30 \r
                      shadow-md hover:shadow-lg backdrop-blur-sm border border-gray-200/60 dark:border-gray-600/40\r
                      transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] font-medium tracking-wide`,children:"Cancel"}),i.jsx(K,{onClick:()=>n(l),className:`rounded-2xl bg-gradient-to-r from-green-600/90 to-emerald-600/90 dark:from-green-500/90 dark:to-emerald-500/90\r
                      hover:from-green-700/95 hover:to-emerald-700/95 dark:hover:from-green-400/95 dark:hover:to-emerald-400/95\r
                      text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                      hover:scale-[1.02] active:scale-[0.98] hover:-translate-y-0.5 active:translate-y-0\r
                      font-medium tracking-wide backdrop-blur-md\r
                      ring-2 ring-green-200/50 dark:ring-green-400/30 hover:ring-green-300/60 dark:hover:ring-green-300/40`,children:l.id?"Save Changes":"Add Block"})]})]})})}function zD({start:r,end:e,onSave:t}){const[n,s]=P.useState(!1),[l,c]=P.useState(r),[u,h]=P.useState(e);return P.useEffect(()=>{c(r),h(e)},[r,e]),i.jsxs(i.Fragment,{children:[i.jsx(K,{variant:"outline",onClick:()=>s(!0),className:`rounded-2xl bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                  text-gray-700 dark:text-gray-200 hover:from-cyan-50/90 hover:to-sky-50/80 dark:hover:from-cyan-950/40 dark:hover:to-sky-950/30 \r
                  hover:text-cyan-700 dark:hover:text-cyan-300 shadow-md hover:shadow-lg backdrop-blur-sm \r
                  border border-gray-200/60 dark:border-gray-600/40 hover:border-cyan-200/60 dark:hover:border-cyan-400/30\r
                  transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] hover:-translate-y-0.5 active:translate-y-0\r
                  font-medium tracking-wide`,children:r&&e?`${r}  ${e}`:"Set Term Range"}),i.jsx(wr,{open:n,onOpenChange:s,children:i.jsxs(lr,{className:`max-w-md rounded-3xl bg-white/95 dark:bg-neutral-800/95 backdrop-blur-xl border-0 shadow-2xl \r
                                  ring-1 ring-gray-200/50 dark:ring-gray-600/50`,children:[i.jsxs(ir,{children:[i.jsx(cr,{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-2",children:"Term Date Range"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Set the start and end dates for this academic term to enable schedule tracking."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-6",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ot,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Start Date"}),i.jsx(Ee,{type:"date",value:l??"",onChange:m=>c(m.target.value),className:`rounded-2xl h-11 bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40 \r
                          focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
                          transition-all duration-300 backdrop-blur-md`})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ot,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"End Date"}),i.jsx(Ee,{type:"date",value:u??"",onChange:m=>h(m.target.value),className:`rounded-2xl h-11 bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40 \r
                          focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
                          transition-all duration-300 backdrop-blur-md`})]})]}),i.jsxs(Sr,{className:"mt-6 gap-3",children:[i.jsx(K,{variant:"outline",onClick:()=>s(!1),className:`rounded-2xl bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                        text-gray-700 dark:text-gray-200 hover:from-gray-50/90 hover:to-gray-100/80 dark:hover:from-gray-750/40 dark:hover:to-gray-850/30 \r
                        shadow-md hover:shadow-lg backdrop-blur-sm border border-gray-200/60 dark:border-gray-600/40\r
                        transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] font-medium tracking-wide`,children:"Cancel"}),i.jsx(K,{onClick:()=>{t(l,u),s(!1)},className:`rounded-2xl bg-gradient-to-r from-blue-600/90 to-indigo-600/90 dark:from-blue-500/90 dark:to-indigo-500/90\r
                        hover:from-blue-700/95 hover:to-indigo-700/95 dark:hover:from-blue-400/95 dark:hover:to-indigo-400/95\r
                        text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                        hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0\r
                        font-medium tracking-wide backdrop-blur-md\r
                        ring-2 ring-blue-200/50 dark:ring-blue-400/30 hover:ring-blue-300/60 dark:hover:ring-blue-300/40`,children:"Save Changes"})]})]})})]})}function LD({yearId:r,term:e}){const t=zr(N=>N.addSlot),n=zr(N=>N.updateSlot),s=zr(N=>N.removeSlot),l=zr(N=>N.setTermDates),c=!!(e.startDate&&e.endDate),[u,h]=P.useState(!1),[m,p]=P.useState(null),[x,b]=P.useState(!1),v=P.useMemo(()=>{const N={0:[],1:[],2:[],3:[],4:[],5:[],6:[]};for(const T of e.slots)N[T.day].push(T);return[-1,0,1,2,3,4,5,6].slice(1).forEach(T=>{N[T].sort((C,D)=>Su(C.start)-Su(D.start))}),N},[e.slots]);function k(N,T){if(!c){b(!0);return}const C=oc(T),D=oc(Math.min(T+2,po));p({title:"",day:N,start:C,end:D,color:Uu[(N+T)%Uu.length]}),h(!0)}function w(N,T){if(!c){b(!0);return}const C=T.currentTarget.getBoundingClientRect(),D=T.clientY-C.top,A=Math.max(0,Math.floor(D/mo));k(N,A)}function S(N){N.id?n(r,e.id,N):t(r,e.id,N),h(!1),p(null)}return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:`flex items-center justify-between p-4 rounded-2xl bg-gradient-to-r from-white/80 to-gray-50/70 \r
                      dark:from-neutral-800/80 dark:to-neutral-900/70 border border-gray-200/60 dark:border-gray-600/40 \r
                      shadow-md backdrop-blur-md`,children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:`flex items-center justify-center w-10 h-10 rounded-2xl bg-gradient-to-br from-blue-100 to-indigo-100 \r
                         dark:from-blue-900/40 dark:to-indigo-900/40`,children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-600 dark:text-blue-400",children:[i.jsx("path",{d:"M8 2v4"}),i.jsx("path",{d:"M16 2v4"}),i.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}),i.jsx("path",{d:"M3 10h18"})]})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-lg font-bold text-gray-800 dark:text-gray-100",children:e.name}),i.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:e.startDate&&e.endDate?i.jsx(i.Fragment,{children:i.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-green-50/80 dark:bg-green-900/30 \r
                                 text-green-700 dark:text-green-300 border border-green-200/60 dark:border-green-700/40`,children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),i.jsx("path",{d:"M9 11l3 3L22 4"})]}),e.startDate,"  ",e.endDate]})}):i.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-lg bg-amber-50/80 dark:bg-amber-900/30 \r
                               text-amber-700 dark:text-amber-300 border border-amber-200/60 dark:border-amber-700/40`,children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[i.jsx("circle",{cx:"12",cy:"12",r:"10"}),i.jsx("path",{d:"M12 6v6l4 2"})]}),"Dates not set"]})})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zD,{start:e.startDate,end:e.endDate,onSave:(N,T)=>l(r,e.id,N,T)}),i.jsxs(K,{size:"sm",variant:"outline",onClick:()=>{if(!c){b(!0);return}p({title:"",day:0,start:oc(0),end:oc(2),color:Uu[0]}),h(!0)},title:c?"Add new block":"Please set term dates first",className:`bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                        text-gray-700 dark:text-gray-200 hover:from-green-50/90 hover:to-emerald-50/80 dark:hover:from-green-950/40 dark:hover:to-emerald-950/30 \r
                        hover:text-green-700 dark:hover:text-emerald-300 shadow-md hover:shadow-lg backdrop-blur-sm \r
                        border border-gray-200/60 dark:border-gray-600/40 hover:border-green-200/60 dark:hover:border-emerald-400/30\r
                        transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] hover:-translate-y-0.5 active:translate-y-0\r
                        font-medium tracking-wide rounded-2xl`,children:[i.jsx(cn,{className:"h-4 w-4 mr-1"})," Add Block"]})]})]}),i.jsxs("div",{className:"grid mt-2 mb-1",style:{gridTemplateColumns:"100px repeat(7, 1fr)"},children:[i.jsx("div",{}),Kp.map(N=>i.jsx("div",{className:"text-center text-xs font-medium text-muted-foreground py-1",children:N},N))]}),i.jsx(Ne,{className:"border-0 shadow-lg rounded-3xl overflow-hidden bg-white/80 dark:bg-neutral-900/60",children:i.jsxs(je,{className:"p-0 relative",children:[!c&&i.jsx("div",{className:"absolute inset-0 bg-black/5 dark:bg-black/20 backdrop-blur-sm z-10 flex items-center justify-center p-4",children:i.jsxs("div",{className:`bg-white/95 dark:bg-neutral-900/95 p-8 rounded-3xl shadow-2xl max-w-md text-center backdrop-blur-xl\r
                            border border-gray-200/60 dark:border-gray-600/40 ring-1 ring-gray-100/50 dark:ring-gray-700/50`,children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-blue-100 to-indigo-100 \r
                                dark:from-blue-900/40 dark:to-indigo-900/40 mb-4`,children:i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"text-blue-600 dark:text-blue-400",children:[i.jsx("path",{d:"M8 2v4"}),i.jsx("path",{d:"M16 2v4"}),i.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}),i.jsx("path",{d:"M3 10h18"}),i.jsx("path",{d:"M8 14h.01"}),i.jsx("path",{d:"M12 14h.01"}),i.jsx("path",{d:"M16 14h.01"}),i.jsx("path",{d:"M8 18h.01"}),i.jsx("path",{d:"M12 18h.01"})]})}),i.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-3",children:"Set Term Dates First"}),i.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"To add classes to your schedule and see them in today's dashboard, you must set the term date range first. This ensures proper scheduling and course tracking throughout the semester."})]}),i.jsxs(K,{onClick:()=>b(!0),className:`rounded-2xl bg-gradient-to-r from-blue-600/90 to-indigo-600/90 dark:from-blue-500/90 dark:to-indigo-500/90\r
                            hover:from-blue-700/95 hover:to-indigo-700/95 dark:hover:from-blue-400/95 dark:hover:to-indigo-400/95\r
                            text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                            hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0\r
                            font-medium tracking-wide backdrop-blur-md px-6 py-3\r
                            ring-2 ring-blue-200/50 dark:ring-blue-400/30 hover:ring-blue-300/60 dark:hover:ring-blue-300/40`,children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",children:[i.jsx("path",{d:"M8 2v4"}),i.jsx("path",{d:"M16 2v4"}),i.jsx("rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}),i.jsx("path",{d:"M3 10h18"})]}),"Set Term Dates"]})]})}),i.jsxs("div",{className:"grid",style:{gridTemplateColumns:"100px repeat(7, 1fr)",gridTemplateRows:`repeat(${po}, ${mo}px)`},children:[Array.from({length:po}).map((N,T)=>{const C=oc(T),D=Number(C.slice(3));return i.jsx("div",{className:`border-r border-t border-black/5 dark:border-white/10 text-xs pr-2 flex items-start justify-end pt-1 ${D===0?"bg-black/0":""}`,style:{gridColumn:"1",gridRow:`${T+1} / ${T+2}`},children:D===0?C:""},`time-${T}`)}),Kp.map((N,T)=>i.jsxs("div",{className:"relative border-l border-black/5 dark:border-white/10",style:{gridColumn:T+2,gridRow:`1 / ${po+1}`},onClick:C=>w(T,C),children:[Array.from({length:po}).map((C,D)=>i.jsx("div",{className:`border-t border-black/5 dark:border-white/10 ${D%2?"bg-black/5 dark:bg-white/5":""}`,style:{height:mo}},`bg-${T}-${D}`)),v[T].map(C=>{const D=Su(C.start),A=Su(C.end),Y=D*mo,I=Math.max(mo,(A-D)*mo-2);return i.jsxs("button",{className:"absolute left-1 right-1 rounded-xl p-2 text-center flex flex-col justify-center items-center shadow-md hover:shadow-lg transition border border-black/10 dark:border-white/10 overflow-hidden",style:{top:Y,height:I,background:`${C.color??"#0ea5e9"}22`},onClick:$=>{$.stopPropagation(),p({...C}),h(!0)},title:`${C.title}  ${C.start}${C.end}`,children:[i.jsx("div",{className:"text-xs font-semibold leading-4 line-clamp-2",children:C.title}),I>60&&i.jsxs(i.Fragment,{children:[C.courseCode&&i.jsx("div",{className:"text-[10px] font-medium mt-0.5",children:C.courseCode}),(C.room||C.building)&&i.jsxs("div",{className:"text-[10px] opacity-80",children:[C.room&&`${C.room}`,C.room&&C.building?", ":"",C.building]}),C.link&&i.jsx("div",{className:"text-[10px] text-blue-500 opacity-80 truncate max-w-full",children:C.link.replace(/^https?:\/\//,"")})]}),i.jsxs("div",{className:"text-[10px] opacity-70 mt-0.5",children:[C.start,"",C.end]})]},C.id)})]},`col-${T}`))]})]})}),m&&i.jsx(RD,{open:u,onOpenChange:N=>{h(N),N||p(null)},initial:m,onSave:S,onDelete:m.id?()=>{m?.id&&(s(r,e.id,m.id),h(!1),p(null))}:void 0}),i.jsx(wr,{open:x,onOpenChange:b,children:i.jsxs(lr,{className:`max-w-md rounded-3xl bg-white/95 dark:bg-neutral-800/95 backdrop-blur-xl border-0 shadow-2xl \r
                                  ring-1 ring-gray-200/50 dark:ring-gray-600/50`,children:[i.jsx(ir,{children:i.jsx(cr,{className:"text-xl font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Set Term Date Range"})}),i.jsxs("div",{className:"space-y-4 text-center mb-6",children:[i.jsxs("div",{className:`inline-flex items-center justify-center gap-2 px-4 py-2 rounded-2xl bg-amber-50/80 dark:bg-amber-900/30 \r
                            border border-amber-200/60 dark:border-amber-700/40 text-amber-700 dark:text-amber-300`,children:[i.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-calendar-clock",children:[i.jsx("path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5"}),i.jsx("path",{d:"M16 2v4"}),i.jsx("path",{d:"M8 2v4"}),i.jsx("path",{d:"M3 10h5"}),i.jsx("circle",{cx:"16",cy:"16",r:"6"}),i.jsx("path",{d:"M16 14v2l1 1"})]}),i.jsx("span",{className:"font-medium text-sm",children:"Required for Schedule Tracking"})]}),i.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Setting the term dates enables proper class scheduling and ensures your courses appear correctly in the Today's Schedule dashboard."})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ot,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Start Date"}),i.jsx(Ee,{type:"date",value:e.startDate||"",onChange:N=>l(r,e.id,N.target.value,e.endDate),required:!0,className:`rounded-2xl h-11 bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40 \r
                          focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
                          transition-all duration-300 backdrop-blur-md`})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ot,{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"End Date"}),i.jsx(Ee,{type:"date",value:e.endDate||"",onChange:N=>l(r,e.id,e.startDate,N.target.value),required:!0,className:`rounded-2xl h-11 bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40 \r
                          focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
                          transition-all duration-300 backdrop-blur-md`})]})]}),i.jsx(Sr,{className:"mt-6",children:i.jsx(K,{onClick:()=>b(!1),disabled:!e.startDate||!e.endDate,className:`w-full rounded-2xl bg-gradient-to-r from-blue-600/90 to-indigo-600/90 dark:from-blue-500/90 dark:to-indigo-500/90\r
                        hover:from-blue-700/95 hover:to-indigo-700/95 dark:hover:from-blue-400/95 dark:hover:to-indigo-400/95\r
                        disabled:from-gray-400/80 disabled:to-gray-500/80 dark:disabled:from-gray-600/80 dark:disabled:to-gray-700/80\r
                        text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                        hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0\r
                        disabled:hover:scale-100 disabled:hover:translate-y-0 disabled:opacity-60 disabled:cursor-not-allowed\r
                        font-medium tracking-wide backdrop-blur-md h-12\r
                        ring-2 ring-blue-200/50 dark:ring-blue-400/30 hover:ring-blue-300/60 dark:hover:ring-blue-300/40\r
                        disabled:ring-gray-300/30 dark:disabled:ring-gray-600/30`,children:e.startDate&&e.endDate?"Save & Continue":"Set Both Dates to Continue"})})]})})]})}function BD({yearId:r,termIndex:e}){const n=zr(l=>l.years).find(l=>l.id===r),s=n?.terms?.[e];return!n||!s?null:i.jsx(LD,{yearId:r,term:s})}function ID(){const r=Eg(),e=[{label:"Dashboard",path:"/"},{label:"Academic Planner",path:"/planner"},{label:"Task Tracker",path:"/tasks"},{label:"Schedule Planner",path:"/schedule",active:!0},{label:"Course Planner",path:"/courses"},{label:"Scholarships",path:"/scholarships"},{label:"Textbooks",path:"/textbooks"},{label:"Settings",path:"/settings"}];return i.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:e.map(t=>i.jsx(K,{variant:t.active?"default":"outline",className:`h-9 rounded-full transition-all duration-200 font-medium tracking-wide text-xs
            ${t.active?"bg-gradient-to-r from-blue-600/90 to-indigo-600/90 dark:from-blue-500/90 dark:to-indigo-500/90 text-white shadow-lg ring-2 ring-blue-200/50 dark:ring-blue-400/30 backdrop-blur-sm hover:from-blue-700/95 hover:to-indigo-700/95 dark:hover:from-blue-400/95 dark:hover:to-indigo-400/95":"bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 text-gray-700 dark:text-gray-200 hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 hover:text-blue-700 dark:hover:text-blue-300 shadow-md hover:shadow-lg backdrop-blur-sm border border-gray-200/60 dark:border-gray-600/40 hover:border-blue-200/60 dark:hover:border-blue-400/30"}
            hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0`,onClick:()=>r(t.path),children:t.label},t.label))})}function PD(){const r=zr(A=>A.years),e=zr(A=>A.selectedYearId),t=P.useRef({}),n=zr(A=>A.setSelectedYear),s=zr(A=>A.addYear),l=zr(A=>A.removeYear),c=zr(A=>A.setTermsCount),u=e||r[0]?.id,h=r.find(A=>A.id===u),[m,p]=P.useState(!1),[x,b]=P.useState(!1),[v,k]=P.useState(null),w=_r(),S=Gn[w.palette],[N,T]=P.useState(w.accent);P.useEffect(()=>T(w.accent),[w.accent]);const C=P.useMemo(()=>{const A=Math.min(.35,Math.max(.12,N/260)),Y=Math.round(A*255).toString(16).padStart(2,"0"),I=window.matchMedia("(prefers-color-scheme: dark)").matches,ae=w.mode==="dark"||w.mode==="system"&&I?"linear-gradient(135deg, #0b0f19 0%, #0a0a0a 70%)":"linear-gradient(135deg, #ffffff 0%, #f8fbff 65%)",le=`radial-gradient(circle at 10% 0%, ${S[0]}${Y} 0%, transparent 40%)`,ie=`radial-gradient(circle at 90% 10%, ${S[3]}${Y} 0%, transparent 45%)`,he=`radial-gradient(circle at 50% 120%, ${S[2]}${Y} 0%, transparent 55%)`;return{backgroundImage:`${le}, ${ie}, ${he}, ${ae}`,backgroundRepeat:"no-repeat, no-repeat, no-repeat, no-repeat",backgroundAttachment:"fixed, fixed, scroll, fixed",backgroundPosition:"10% 0%, 90% 10%, 50% 100%, 0 0"}},[N,w.mode,S]),D=()=>{if(r.length===0)return"SY 20252026";let A=2025;return r.forEach(Y=>{const I=Y.label.match(/SY (\d{4})(\d{4})/);if(I){const $=parseInt(I[1],10);$>A&&(A=$)}}),`SY ${A+1}${A+2}`};return i.jsxs("div",{className:"min-h-screen w-full",style:C,children:[i.jsx("style",{children:AD}),i.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6 space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Mn,{className:"h-5 w-5"}),i.jsx("h1",{className:"text-2xl font-bold",children:"Schedule Planner"})]}),i.jsx(ID,{})]}),i.jsxs(K,{variant:"outline",className:`rounded-2xl bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                      text-gray-700 dark:text-gray-200 hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 \r
                      hover:text-blue-700 dark:hover:text-blue-300 shadow-md hover:shadow-lg backdrop-blur-sm \r
                      border border-gray-200/60 dark:border-gray-600/40 hover:border-blue-200/60 dark:hover:border-blue-400/30\r
                      transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0\r
                      font-medium tracking-wide`,onClick:()=>p(!0),title:"Select school year",children:[h?.label||"Choose School Year"," ",i.jsx("span",{className:"ml-1 opacity-60",children:""})]})]}),i.jsx(wr,{open:m,onOpenChange:p,children:i.jsxs(lr,{className:"max-w-lg bg-white/95 dark:bg-neutral-900/95 backdrop-blur-xl border-0 shadow-2xl rounded-3xl",children:[i.jsx(ir,{className:"pb-4 border-b border-gray-200/50 dark:border-gray-700/50",children:i.jsx(cr,{className:"text-xl font-semibold bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400 bg-clip-text text-transparent",children:"Select School Year"})}),i.jsx("div",{className:"space-y-4 max-h-80 overflow-auto py-3 px-1",children:r.length===0?i.jsx("div",{className:"text-sm text-muted-foreground p-4 text-center bg-gray-50/50 dark:bg-neutral-800/50 rounded-xl",children:"No school years added yet. Add your first school year below."}):r.map(A=>i.jsxs("div",{className:"flex items-center gap-3 group px-1",children:[i.jsx(K,{variant:A.id===u?"default":"outline",className:`flex-1 justify-start rounded-2xl transition-all duration-200 font-medium tracking-wide h-12
                          ${A.id===u?"bg-gradient-to-r from-blue-600/90 to-indigo-600/90 dark:from-blue-500/90 dark:to-indigo-500/90 text-white shadow-lg ring-2 ring-blue-200/50 dark:ring-blue-400/30 backdrop-blur-sm hover:from-blue-700/95 hover:to-indigo-700/95 dark:hover:from-blue-400/95 dark:hover:to-indigo-400/95":"bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 text-gray-700 dark:text-gray-200 hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 hover:text-blue-700 dark:hover:text-blue-300 shadow-md hover:shadow-lg backdrop-blur-sm border border-gray-200/60 dark:border-gray-600/40 hover:border-blue-200/60 dark:hover:border-blue-400/30"}
                          hover:scale-[1.02] active:scale-[0.98] hover:-translate-y-0.5 active:translate-y-0`,onClick:()=>{n(A.id),p(!1),setTimeout(()=>{t.current[A.id]?.scrollIntoView({behavior:"smooth",block:"start"})},10)},children:A.label}),r.length>1&&i.jsx(K,{variant:"ghost",size:"sm",className:`h-12 w-12 p-0 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 \r
                                    hover:bg-red-50/50 dark:hover:bg-red-950/30 rounded-2xl transition-all duration-300\r
                                    opacity-0 group-hover:opacity-100 hover:scale-105 active:scale-95\r
                                    ring-1 ring-red-200/50 dark:ring-red-800/50 hover:ring-red-300/60 dark:hover:ring-red-700/60`,onClick:()=>{k({id:A.id,label:A.label}),b(!0)},title:`Delete ${A.label}`,children:i.jsx(Un,{className:"h-4 w-4"})})]},A.id))}),i.jsx(Sr,{className:"pt-4 border-t border-gray-200/50 dark:border-gray-700/50",children:i.jsxs(K,{onClick:()=>{const A=D();s(A),p(!1),setTimeout(()=>{const Y=r[r.length-1];Y?.id&&(n(Y.id),t.current[Y.id]?.scrollIntoView({behavior:"smooth"}))},10)},className:`rounded-2xl bg-gradient-to-r from-green-600/90 to-emerald-600/90 dark:from-green-500/90 dark:to-emerald-500/90\r
                            hover:from-green-700/95 hover:to-emerald-700/95 dark:hover:from-green-400/95 dark:hover:to-emerald-400/95\r
                            text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                            hover:scale-[1.02] active:scale-[0.98] hover:-translate-y-0.5 active:translate-y-0\r
                            font-medium tracking-wide backdrop-blur-md\r
                            ring-2 ring-green-200/50 dark:ring-green-400/30 hover:ring-green-300/60 dark:hover:ring-green-300/40`,children:[i.jsx(cn,{className:"h-4 w-4 mr-1"})," Add School Year"]})})]})}),i.jsx(wr,{open:x,onOpenChange:b,children:i.jsxs(lr,{className:"max-w-md bg-white/95 dark:bg-neutral-900/95 backdrop-blur-xl border-0 shadow-2xl rounded-3xl",children:[i.jsx(ir,{className:"pb-4 border-b border-red-200/50 dark:border-red-800/50",children:i.jsxs(cr,{className:"text-xl font-semibold text-red-600 dark:text-red-400 flex items-center gap-2",children:[i.jsx(Un,{className:"h-5 w-5"}),"Delete School Year"]})}),i.jsxs("div",{className:"py-4",children:[i.jsxs("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:["Are you sure you want to delete ",i.jsx("strong",{children:v?.label}),"?"]}),i.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 bg-red-50/50 dark:bg-red-950/30 p-3 rounded-xl border border-red-200/50 dark:border-red-800/50",children:" This will permanently delete all terms, courses, and schedules for this school year. This action cannot be undone."})]}),i.jsxs(Sr,{className:"pt-4 border-t border-gray-200/50 dark:border-gray-700/50 flex gap-2",children:[i.jsx(K,{variant:"outline",onClick:()=>{b(!1),k(null)},className:`rounded-2xl bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                            text-gray-700 dark:text-gray-200 hover:from-gray-50/90 hover:to-gray-100/80 dark:hover:from-gray-750/40 dark:hover:to-gray-850/30 \r
                            shadow-md hover:shadow-lg backdrop-blur-sm border border-gray-200/60 dark:border-gray-600/40\r
                            transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] font-medium tracking-wide`,children:"Cancel"}),i.jsxs(K,{onClick:()=>{v&&(l(v.id),b(!1),k(null),p(!1))},className:`rounded-2xl bg-gradient-to-r from-red-600/90 to-red-700/90 dark:from-red-500/90 dark:to-red-600/90\r
                            hover:from-red-700/95 hover:to-red-800/95 dark:hover:from-red-400/95 dark:hover:to-red-500/95\r
                            text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                            hover:scale-[1.02] active:scale-[0.98] hover:-translate-y-0.5 active:translate-y-0\r
                            font-medium tracking-wide backdrop-blur-md\r
                            ring-2 ring-red-200/50 dark:ring-red-400/30 hover:ring-red-300/60 dark:hover:ring-red-300/40`,children:[i.jsx(Un,{className:"h-4 w-4 mr-1"})," Delete"]})]})]})})]}),i.jsxs("div",{className:"space-y-6",children:[r.map(A=>i.jsxs("div",{className:"space-y-4",ref:Y=>{t.current[A.id]=Y},children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsx("h2",{className:"text-2xl font-semibold tracking-tight",children:A.label})}),i.jsxs("div",{className:"flex",children:[" ",i.jsx("div",{className:`overflow-x-auto flex-1 ${w.mode==="dark"||w.mode==="system"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark-scrollbar":"light-scrollbar"}`,children:i.jsx("div",{className:"flex gap-6 items-start min-w-max",children:A.terms.map((Y,I)=>i.jsx("div",{className:"min-w-[950px]",children:i.jsx(BD,{yearId:A.id,termIndex:I})},I))})}),i.jsxs("div",{className:"ml-4 w-[120px] shrink-0 flex flex-col",children:[i.jsx("div",{className:"h-8 mb-12"}),i.jsx("button",{className:`w-full rounded-2xl bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                              text-gray-700 dark:text-gray-200 hover:from-green-50/90 hover:to-emerald-50/80 dark:hover:from-green-950/40 dark:hover:to-emerald-950/30 \r
                              hover:text-green-700 dark:hover:text-emerald-300 shadow-md hover:shadow-lg backdrop-blur-sm \r
                              border border-gray-200/60 dark:border-gray-600/40 hover:border-green-200/60 dark:hover:border-emerald-400/30\r
                              transition-all duration-200 hover:scale-[1.02] active:scale-[0.98] hover:-translate-y-0.5 active:translate-y-0\r
                              disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:hover:translate-y-0\r
                              disabled:hover:from-white/95 disabled:hover:to-white/85 dark:disabled:hover:from-neutral-800/80 dark:disabled:hover:to-neutral-900/70`,style:{height:OD+56-32},onClick:()=>c(A.id,Math.min(4,A.terms.length+1)),title:A.terms.length>=4?"Max 4 terms":"Add new term",disabled:A.terms.length>=4,children:i.jsx("span",{className:"block rotate-90 whitespace-nowrap text-lg md:text-xl font-semibold tracking-wide select-none",children:"+ Add New Term"})})]})]})]},A.id)),i.jsx("div",{className:"mt-4 pb-8",children:i.jsxs(K,{className:`w-full h-24 rounded-2xl bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                        text-gray-700 dark:text-gray-200 hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 \r
                        hover:text-blue-700 dark:hover:text-blue-300 shadow-md hover:shadow-lg backdrop-blur-sm \r
                        border border-gray-200/60 dark:border-gray-600/40 hover:border-blue-200/60 dark:hover:border-blue-400/30\r
                        transition-all duration-200 hover:scale-[1.01] active:scale-[0.99] hover:-translate-y-0.5 active:translate-y-0\r
                        disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 disabled:hover:translate-y-0\r
                        disabled:hover:from-white/95 disabled:hover:to-white/85 dark:disabled:hover:from-neutral-800/80 dark:disabled:hover:to-neutral-900/70\r
                        font-semibold tracking-wide`,onClick:()=>{const A=D();console.log("Adding new year:",A),s(A),setTimeout(()=>{const Y=r[r.length-1];console.log("Years after adding:",r.length,Y?.id),Y?.id&&(n(Y.id),t.current[Y.id]?.scrollIntoView({behavior:"smooth"}))},10)},children:[i.jsx(cn,{className:"h-5 w-5 mr-2"})," Add New School Year"]})})]})]})}const fo=(r="id")=>`${r}_${Math.random().toString(36).slice(2,8)}`,ar=An()(qn((r,e)=>({byYearTerm:{},selectedCourseId:void 0,selectedYearId:void 0,selectedTermId:void 0,setSelectedCourse:t=>r({selectedCourseId:t}),setSelectedYear:t=>r({selectedYearId:t}),setSelectedTerm:t=>r({selectedTermId:t}),addCourse:(t,n)=>{const s=fo("course"),l={id:s,code:n?.code||"",title:n?.title||"Untitled Course",instructor:n?.instructor,syllabusUrl:n?.syllabusUrl,linkedSlotId:n?.linkedSlotId,weeklyAttendance:{},modules:[{id:fo("m"),title:"M1",html:""}],tasks:[],folders:[{id:fo("fold"),path:"root",files:[]}]};return r(c=>{const u=c.byYearTerm[t]||[],h=u.length===0,m={byYearTerm:{...c.byYearTerm,[t]:[...u,l]},selectedCourseId:s};return h&&setTimeout(()=>GS(),0),setTimeout(()=>KS(u.length+1),100),m}),s},updateCourse:(t,n)=>r(s=>({byYearTerm:{...s.byYearTerm,[t]:(s.byYearTerm[t]||[]).map(l=>l.id===n.id?n:l)}})),removeCourse:(t,n)=>r(s=>({byYearTerm:{...s.byYearTerm,[t]:(s.byYearTerm[t]||[]).filter(l=>l.id!==n)},selectedCourseId:s.selectedCourseId===n?void 0:s.selectedCourseId})),addModule:(t,n,s=`M${Math.floor(Math.random()*90)+2}`)=>{const l=fo("m");return r(c=>({byYearTerm:{...c.byYearTerm,[t]:(c.byYearTerm[t]||[]).map(u=>u.id!==n?u:{...u,modules:[...u.modules,{id:l,title:s,html:""}]})}})),l},removeModule:(t,n,s)=>r(l=>({byYearTerm:{...l.byYearTerm,[t]:(l.byYearTerm[t]||[]).map(c=>c.id!==n?c:{...c,modules:c.modules.filter(u=>u.id!==s)})}})),updateModule:(t,n,s,l)=>{try{if(!t||!n||!s){console.error("Invalid parameters for updateModule:",{key:t,courseId:n,moduleId:s});return}const c=typeof l=="string"?l.trim():"";r(u=>{const h=u.byYearTerm[t]||[],m=h.findIndex(k=>k.id===n);if(m===-1)return console.warn(`Course ${n} not found in ${t}`),u;const p=h[m],x=p.modules.findIndex(k=>k.id===s);if(x===-1)return console.warn(`Module ${s} not found in course ${n}`),u;const b={...p,modules:p.modules.map((k,w)=>w===x?{...k,html:c}:k)},v=[...h];return v[m]=b,{byYearTerm:{...u.byYearTerm,[t]:v}}}),console.log(` Module ${s} updated successfully`)}catch(c){throw console.error(` Failed to update module ${s}:`,c),c}},addTask:(t,n,s)=>r(l=>{const c={byYearTerm:{...l.byYearTerm,[t]:(l.byYearTerm[t]||[]).map(u=>u.id!==n?u:{...u,tasks:[...u.tasks,s]})}};return setTimeout(()=>{const h=Object.values(l.byYearTerm).flat().reduce((m,p)=>m+p.tasks.filter(x=>x.grade!==void 0).length,0);Ip(h)},0),c}),updateTask:(t,n,s)=>r(l=>{const u=(l.byYearTerm[t]||[]).find(m=>m.id===n)?.tasks.find(m=>m.id===s.id),h={byYearTerm:{...l.byYearTerm,[t]:(l.byYearTerm[t]||[]).map(m=>m.id!==n?m:{...m,tasks:m.tasks.map(p=>p.id===s.id?s:p)})}};return s.grade!==void 0&&u?.grade===void 0&&setTimeout(()=>JS(),0),setTimeout(()=>{const m=Object.values(l.byYearTerm).flat(),p=m.reduce((b,v)=>b+v.tasks.filter(k=>k.grade!==void 0).length,0);Ip(p);const x=m.flatMap(b=>b.tasks.filter(v=>v.grade!==void 0));if(x.length>0){const v=x.reduce((k,w)=>k+(w.grade||0),0)/x.length/100*4;QS(v)}},100),h}),removeTask:(t,n,s)=>r(l=>({byYearTerm:{...l.byYearTerm,[t]:(l.byYearTerm[t]||[]).map(c=>c.id!==n?c:{...c,tasks:c.tasks.filter(u=>u.id!==s)})}})),updateWeeklyAttendance:(t,n,s,l,c)=>r(u=>({byYearTerm:{...u.byYearTerm,[t]:(u.byYearTerm[t]||[]).map(h=>h.id!==n?h:{...h,weeklyAttendance:{...h.weeklyAttendance||{},[s]:(h.weeklyAttendance?.[s]||Array.from({length:7},()=>!1)).map((m,p)=>p===l?c:m)}})}})),getWeeklyAttendance:(t,n,s)=>e().byYearTerm[t]?.find(c=>c.id===n)?.weeklyAttendance?.[s]||Array.from({length:7},()=>!1),ensureFolder:(t,n,s)=>r(l=>({byYearTerm:{...l.byYearTerm,[t]:(l.byYearTerm[t]||[]).map(c=>c.id!==n||c.folders.some(u=>u.path===s)?c:{...c,folders:[...c.folders,{id:fo("fold"),path:s,files:[]}]})}})),renameFolder:(t,n,s,l)=>r(c=>({byYearTerm:{...c.byYearTerm,[t]:(c.byYearTerm[t]||[]).map(u=>u.id!==n?u:{...u,folders:u.folders.map(h=>h.id===s?{...h,path:l}:h)})}})),addFileToFolder:(t,n,s,l)=>r(c=>({byYearTerm:{...c.byYearTerm,[t]:(c.byYearTerm[t]||[]).map(u=>u.id!==n?u:{...u,folders:u.folders.map(h=>h.path===s?{...h,files:[...h.files,l]}:h)})}})),moveFile:(t,n,s,l,c)=>r(u=>({byYearTerm:{...u.byYearTerm,[t]:(u.byYearTerm[t]||[]).map(h=>{if(h.id!==n)return h;let m;const p=h.folders.map(x=>{if(x.path===l){const b=x.files.filter(v=>v.id===s?(m=v,!1):!0);return{...x,files:b}}return x}).map(x=>x.path===c&&m?{...x,files:[...x.files,m]}:x);return{...h,folders:p}})}}))}),{name:"aq:course-planner",version:1,migrate:(r,e)=>e===0?{...r,byYearTerm:r.byYearTerm||{},selectedCourseId:r.selectedCourseId||void 0,selectedYearId:r.selectedYearId||void 0,selectedTermId:r.selectedTermId||void 0}:r,onRehydrateStorage:()=>r=>{r&&((!r.byYearTerm||typeof r.byYearTerm!="object")&&(r.byYearTerm={}),Object.keys(r.byYearTerm).forEach(e=>{const t=r.byYearTerm[e];Array.isArray(t)?r.byYearTerm[e]=t.filter(n=>n&&typeof n.id=="string"&&typeof n.title=="string"&&Array.isArray(n.modules)&&Array.isArray(n.tasks)&&Array.isArray(n.folders)).map(n=>({...n,code:n.code||"",title:n.title||"Untitled Course",instructor:n.instructor||void 0,syllabusUrl:n.syllabusUrl||void 0,linkedSlotId:n.linkedSlotId||void 0,weeklyAttendance:n.weeklyAttendance||{},modules:n.modules||[{id:fo("m"),title:"M1",html:""}],tasks:n.tasks||[],folders:n.folders||[{id:fo("fold"),path:"root",files:[]}]})):r.byYearTerm[e]=[]}))}}));var pN=f3();function yr(r){this.content=r}yr.prototype={constructor:yr,find:function(r){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===r)return e;return-1},get:function(r){var e=this.find(r);return e==-1?void 0:this.content[e+1]},update:function(r,e,t){var n=t&&t!=r?this.remove(t):this,s=n.find(r),l=n.content.slice();return s==-1?l.push(t||r,e):(l[s+1]=e,t&&(l[s]=t)),new yr(l)},remove:function(r){var e=this.find(r);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new yr(t)},addToStart:function(r,e){return new yr([r,e].concat(this.remove(r).content))},addToEnd:function(r,e){var t=this.remove(r).content.slice();return t.push(r,e),new yr(t)},addBefore:function(r,e,t){var n=this.remove(e),s=n.content.slice(),l=n.find(r);return s.splice(l==-1?s.length:l,0,e,t),new yr(s)},forEach:function(r){for(var e=0;e<this.content.length;e+=2)r(this.content[e],this.content[e+1])},prepend:function(r){return r=yr.from(r),r.size?new yr(r.content.concat(this.subtract(r).content)):this},append:function(r){return r=yr.from(r),r.size?new yr(this.subtract(r).content.concat(r.content)):this},subtract:function(r){var e=this;r=yr.from(r);for(var t=0;t<r.content.length;t+=2)e=e.remove(r.content[t]);return e},toObject:function(){var r={};return this.forEach(function(e,t){r[e]=t}),r},get size(){return this.content.length>>1}};yr.from=function(r){if(r instanceof yr)return r;var e=[];if(r)for(var t in r)e.push(t,r[t]);return new yr(e)};function gN(r,e,t){for(let n=0;;n++){if(n==r.childCount||n==e.childCount)return r.childCount==e.childCount?null:t;let s=r.child(n),l=e.child(n);if(s==l){t+=s.nodeSize;continue}if(!s.sameMarkup(l))return t;if(s.isText&&s.text!=l.text){for(let c=0;s.text[c]==l.text[c];c++)t++;return t}if(s.content.size||l.content.size){let c=gN(s.content,l.content,t+1);if(c!=null)return c}t+=s.nodeSize}}function xN(r,e,t,n){for(let s=r.childCount,l=e.childCount;;){if(s==0||l==0)return s==l?null:{a:t,b:n};let c=r.child(--s),u=e.child(--l),h=c.nodeSize;if(c==u){t-=h,n-=h;continue}if(!c.sameMarkup(u))return{a:t,b:n};if(c.isText&&c.text!=u.text){let m=0,p=Math.min(c.text.length,u.text.length);for(;m<p&&c.text[c.text.length-m-1]==u.text[u.text.length-m-1];)m++,t--,n--;return{a:t,b:n}}if(c.content.size||u.content.size){let m=xN(c.content,u.content,t-1,n-1);if(m)return m}t-=h,n-=h}}class re{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let n=0;n<e.length;n++)this.size+=e[n].nodeSize}nodesBetween(e,t,n,s=0,l){for(let c=0,u=0;u<t;c++){let h=this.content[c],m=u+h.nodeSize;if(m>e&&n(h,s+u,l||null,c)!==!1&&h.content.size){let p=u+1;h.nodesBetween(Math.max(0,e-p),Math.min(h.content.size,t-p),n,s+p)}u=m}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,n,s){let l="",c=!0;return this.nodesBetween(e,t,(u,h)=>{let m=u.isText?u.text.slice(Math.max(e,h)-h,t-h):u.isLeaf?s?typeof s=="function"?s(u):s:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&m||u.isTextblock)&&n&&(c?c=!1:l+=n),l+=m},0),l}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,n=e.firstChild,s=this.content.slice(),l=0;for(t.isText&&t.sameMarkup(n)&&(s[s.length-1]=t.withText(t.text+n.text),l=1);l<e.content.length;l++)s.push(e.content[l]);return new re(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let n=[],s=0;if(t>e)for(let l=0,c=0;c<t;l++){let u=this.content[l],h=c+u.nodeSize;h>e&&((c<e||h>t)&&(u.isText?u=u.cut(Math.max(0,e-c),Math.min(u.text.length,t-c)):u=u.cut(Math.max(0,e-c-1),Math.min(u.content.size,t-c-1))),n.push(u),s+=u.nodeSize),c=h}return new re(n,s)}cutByIndex(e,t){return e==t?re.empty:e==0&&t==this.content.length?this:new re(this.content.slice(e,t))}replaceChild(e,t){let n=this.content[e];if(n==t)return this;let s=this.content.slice(),l=this.size+t.nodeSize-n.nodeSize;return s[e]=t,new re(s,l)}addToStart(e){return new re([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new re(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,n=0;t<this.content.length;t++){let s=this.content[t];e(s,n,t),n+=s.nodeSize}}findDiffStart(e,t=0){return gN(this,e,t)}findDiffEnd(e,t=this.size,n=e.size){return xN(this,e,t,n)}findIndex(e){if(e==0)return Nu(0,e);if(e==this.size)return Nu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,n=0;;t++){let s=this.child(t),l=n+s.nodeSize;if(l>=e)return l==e?Nu(t+1,l):Nu(t,n);n=l}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return re.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new re(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return re.empty;let t,n=0;for(let s=0;s<e.length;s++){let l=e[s];n+=l.nodeSize,s&&l.isText&&e[s-1].sameMarkup(l)?(t||(t=e.slice(0,s)),t[t.length-1]=l.withText(t[t.length-1].text+l.text)):t&&t.push(l)}return new re(t||e,n)}static from(e){if(!e)return re.empty;if(e instanceof re)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new re([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}re.empty=new re([],0);const Xm={index:0,offset:0};function Nu(r,e){return Xm.index=r,Xm.offset=e,Xm}function sf(r,e){if(r===e)return!0;if(!(r&&typeof r=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(r);if(Array.isArray(e)!=t)return!1;if(t){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(!sf(r[n],e[n]))return!1}else{for(let n in r)if(!(n in e)||!sf(r[n],e[n]))return!1;for(let n in e)if(!(n in r))return!1}return!0}let kt=class Wp{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,n=!1;for(let s=0;s<e.length;s++){let l=e[s];if(this.eq(l))return e;if(this.type.excludes(l.type))t||(t=e.slice(0,s));else{if(l.type.excludes(this.type))return e;!n&&l.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),n=!0),t&&t.push(l)}}return t||(t=e.slice()),n||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&sf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let n=e.marks[t.type];if(!n)throw new RangeError(`There is no mark type ${t.type} in this schema`);let s=n.create(t.attrs);return n.checkAttrs(s.attrs),s}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].eq(t[n]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Wp.none;if(e instanceof Wp)return[e];let t=e.slice();return t.sort((n,s)=>n.type.rank-s.type.rank),t}};kt.none=[];class of extends Error{}class pe{constructor(e,t,n){this.content=e,this.openStart=t,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let n=yN(this.content,e+this.openStart,t);return n&&new pe(n,this.openStart,this.openEnd)}removeBetween(e,t){return new pe(bN(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return pe.empty;let n=t.openStart||0,s=t.openEnd||0;if(typeof n!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new pe(re.fromJSON(e,t.content),n,s)}static maxOpen(e,t=!0){let n=0,s=0;for(let l=e.firstChild;l&&!l.isLeaf&&(t||!l.type.spec.isolating);l=l.firstChild)n++;for(let l=e.lastChild;l&&!l.isLeaf&&(t||!l.type.spec.isolating);l=l.lastChild)s++;return new pe(e,n,s)}}pe.empty=new pe(re.empty,0,0);function bN(r,e,t){let{index:n,offset:s}=r.findIndex(e),l=r.maybeChild(n),{index:c,offset:u}=r.findIndex(t);if(s==e||l.isText){if(u!=t&&!r.child(c).isText)throw new RangeError("Removing non-flat range");return r.cut(0,e).append(r.cut(t))}if(n!=c)throw new RangeError("Removing non-flat range");return r.replaceChild(n,l.copy(bN(l.content,e-s-1,t-s-1)))}function yN(r,e,t,n){let{index:s,offset:l}=r.findIndex(e),c=r.maybeChild(s);if(l==e||c.isText)return n&&!n.canReplace(s,s,t)?null:r.cut(0,e).append(t).append(r.cut(e));let u=yN(c.content,e-l-1,t,c);return u&&r.replaceChild(s,c.copy(u))}function _D(r,e,t){if(t.openStart>r.depth)throw new of("Inserted content deeper than insertion position");if(r.depth-t.openStart!=e.depth-t.openEnd)throw new of("Inconsistent open depths");return vN(r,e,t,0)}function vN(r,e,t,n){let s=r.index(n),l=r.node(n);if(s==e.index(n)&&n<r.depth-t.openStart){let c=vN(r,e,t,n+1);return l.copy(l.content.replaceChild(s,c))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&r.depth==n&&e.depth==n){let c=r.parent,u=c.content;return No(c,u.cut(0,r.parentOffset).append(t.content).append(u.cut(e.parentOffset)))}else{let{start:c,end:u}=HD(t,r);return No(l,wN(r,c,u,e,n))}else return No(l,lf(r,e,n))}function kN(r,e){if(!e.type.compatibleContent(r.type))throw new of("Cannot join "+e.type.name+" onto "+r.type.name)}function Xp(r,e,t){let n=r.node(t);return kN(n,e.node(t)),n}function So(r,e){let t=e.length-1;t>=0&&r.isText&&r.sameMarkup(e[t])?e[t]=r.withText(e[t].text+r.text):e.push(r)}function wc(r,e,t,n){let s=(e||r).node(t),l=0,c=e?e.index(t):s.childCount;r&&(l=r.index(t),r.depth>t?l++:r.textOffset&&(So(r.nodeAfter,n),l++));for(let u=l;u<c;u++)So(s.child(u),n);e&&e.depth==t&&e.textOffset&&So(e.nodeBefore,n)}function No(r,e){return r.type.checkContent(e),r.copy(e)}function wN(r,e,t,n,s){let l=r.depth>s&&Xp(r,e,s+1),c=n.depth>s&&Xp(t,n,s+1),u=[];return wc(null,r,s,u),l&&c&&e.index(s)==t.index(s)?(kN(l,c),So(No(l,wN(r,e,t,n,s+1)),u)):(l&&So(No(l,lf(r,e,s+1)),u),wc(e,t,s,u),c&&So(No(c,lf(t,n,s+1)),u)),wc(n,null,s,u),new re(u)}function lf(r,e,t){let n=[];if(wc(null,r,t,n),r.depth>t){let s=Xp(r,e,t+1);So(No(s,lf(r,e,t+1)),n)}return wc(e,null,t,n),new re(n)}function HD(r,e){let t=e.depth-r.openStart,s=e.node(t).copy(r.content);for(let l=t-1;l>=0;l--)s=e.node(l).copy(re.from(s));return{start:s.resolveNoCache(r.openStart+t),end:s.resolveNoCache(s.content.size-r.openEnd-t)}}class Hc{constructor(e,t,n){this.pos=e,this.path=t,this.parentOffset=n,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let n=this.pos-this.path[this.path.length-1],s=e.child(t);return n?e.child(t).cut(n):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let n=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let l=0;l<e;l++)s+=n.child(l).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return kt.none;if(this.textOffset)return e.child(t).marks;let n=e.maybeChild(t-1),s=e.maybeChild(t);if(!n){let u=n;n=s,s=u}let l=n.marks;for(var c=0;c<l.length;c++)l[c].type.spec.inclusive===!1&&(!s||!l[c].isInSet(s.marks))&&(l=l[c--].removeFromSet(l));return l}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let n=t.marks,s=e.parent.maybeChild(e.index());for(var l=0;l<n.length;l++)n[l].type.spec.inclusive===!1&&(!s||!n[l].isInSet(s.marks))&&(n=n[l--].removeFromSet(n));return n}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);n>=0;n--)if(e.pos<=this.end(n)&&(!t||t(this.node(n))))return new cf(this,e,n);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let n=[],s=0,l=t;for(let c=e;;){let{index:u,offset:h}=c.content.findIndex(l),m=l-h;if(n.push(c,u,s+h),!m||(c=c.child(u),c.isText))break;l=m-1,s+=h+1}return new Hc(t,n,l)}static resolveCached(e,t){let n=kw.get(e);if(n)for(let l=0;l<n.elts.length;l++){let c=n.elts[l];if(c.pos==t)return c}else kw.set(e,n=new $D);let s=n.elts[n.i]=Hc.resolve(e,t);return n.i=(n.i+1)%UD,s}}class $D{constructor(){this.elts=[],this.i=0}}const UD=12,kw=new WeakMap;class cf{constructor(e,t,n){this.$from=e,this.$to=t,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const VD=Object.create(null);let Ds=class Qp{constructor(e,t,n,s=kt.none){this.type=e,this.attrs=t,this.marks=s,this.content=n||re.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,n,s=0){this.content.nodesBetween(e,t,n,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,n,s){return this.content.textBetween(e,t,n,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,n){return this.type==e&&sf(this.attrs,t||e.defaultAttrs||VD)&&kt.sameSet(this.marks,n||kt.none)}copy(e=null){return e==this.content?this:new Qp(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Qp(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,n=!1){if(e==t)return pe.empty;let s=this.resolve(e),l=this.resolve(t),c=n?0:s.sharedDepth(t),u=s.start(c),m=s.node(c).content.cut(s.pos-u,l.pos-u);return new pe(m,s.depth-c,l.depth-c)}replace(e,t,n){return _D(this.resolve(e),this.resolve(t),n)}nodeAt(e){for(let t=this;;){let{index:n,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(n),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:n}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:n}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:n}=this.content.findIndex(e);if(n<e)return{node:this.content.child(t),index:t,offset:n};let s=this.content.child(t-1);return{node:s,index:t-1,offset:n-s.nodeSize}}resolve(e){return Hc.resolveCached(this,e)}resolveNoCache(e){return Hc.resolve(this,e)}rangeHasMark(e,t,n){let s=!1;return t>e&&this.nodesBetween(e,t,l=>(n.isInSet(l.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),SN(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,n=re.empty,s=0,l=n.childCount){let c=this.contentMatchAt(e).matchFragment(n,s,l),u=c&&c.matchFragment(this.content,t);if(!u||!u.validEnd)return!1;for(let h=s;h<l;h++)if(!this.type.allowsMarks(n.child(h).marks))return!1;return!0}canReplaceWith(e,t,n,s){if(s&&!this.type.allowsMarks(s))return!1;let l=this.contentMatchAt(e).matchType(n),c=l&&l.matchFragment(this.content,t);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=kt.none;for(let t=0;t<this.marks.length;t++){let n=this.marks[t];n.type.checkAttrs(n.attrs),e=n.addToSet(e)}if(!kt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let n;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,n)}let s=re.fromJSON(e,t.content),l=e.nodeType(t.type).create(t.attrs,s,n);return l.type.checkAttrs(l.attrs),l}};Ds.prototype.text=void 0;class df extends Ds{constructor(e,t,n,s){if(super(e,t,null,s),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):SN(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new df(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new df(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function SN(r,e){for(let t=r.length-1;t>=0;t--)e=r[t].type.name+"("+e+")";return e}class Ro{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let n=new FD(e,t);if(n.next==null)return Ro.empty;let s=NN(n);n.next&&n.err("Unexpected trailing text");let l=QD(XD(s));return JD(l,n),l}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,n=e.childCount){let s=this;for(let l=t;s&&l<n;l++)s=s.matchType(e.child(l).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let n=0;n<e.next.length;n++)if(this.next[t].type==e.next[n].type)return!0;return!1}fillBefore(e,t=!1,n=0){let s=[this];function l(c,u){let h=c.matchFragment(e,n);if(h&&(!t||h.validEnd))return re.from(u.map(m=>m.createAndFill()));for(let m=0;m<c.next.length;m++){let{type:p,next:x}=c.next[m];if(!(p.isText||p.hasRequiredAttrs())&&s.indexOf(x)==-1){s.push(x);let b=l(x,u.concat(p));if(b)return b}}return null}return l(this,[])}findWrapping(e){for(let n=0;n<this.wrapCache.length;n+=2)if(this.wrapCache[n]==e)return this.wrapCache[n+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let s=n.shift(),l=s.match;if(l.matchType(e)){let c=[];for(let u=s;u.type;u=u.via)c.push(u.type);return c.reverse()}for(let c=0;c<l.next.length;c++){let{type:u,next:h}=l.next[c];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in t)&&(!s.type||h.validEnd)&&(n.push({match:u.contentMatch,type:u,via:s}),t[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(n){e.push(n);for(let s=0;s<n.next.length;s++)e.indexOf(n.next[s].next)==-1&&t(n.next[s].next)}return t(this),e.map((n,s)=>{let l=s+(n.validEnd?"*":" ")+" ";for(let c=0;c<n.next.length;c++)l+=(c?", ":"")+n.next[c].type.name+"->"+e.indexOf(n.next[c].next);return l}).join(`
`)}}Ro.empty=new Ro(!0);class FD{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function NN(r){let e=[];do e.push(YD(r));while(r.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function YD(r){let e=[];do e.push(qD(r));while(r.next&&r.next!=")"&&r.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function qD(r){let e=WD(r);for(;;)if(r.eat("+"))e={type:"plus",expr:e};else if(r.eat("*"))e={type:"star",expr:e};else if(r.eat("?"))e={type:"opt",expr:e};else if(r.eat("{"))e=GD(r,e);else break;return e}function ww(r){/\D/.test(r.next)&&r.err("Expected number, got '"+r.next+"'");let e=Number(r.next);return r.pos++,e}function GD(r,e){let t=ww(r),n=t;return r.eat(",")&&(r.next!="}"?n=ww(r):n=-1),r.eat("}")||r.err("Unclosed braced range"),{type:"range",min:t,max:n,expr:e}}function KD(r,e){let t=r.nodeTypes,n=t[e];if(n)return[n];let s=[];for(let l in t){let c=t[l];c.isInGroup(e)&&s.push(c)}return s.length==0&&r.err("No node type or group '"+e+"' found"),s}function WD(r){if(r.eat("(")){let e=NN(r);return r.eat(")")||r.err("Missing closing paren"),e}else if(/\W/.test(r.next))r.err("Unexpected token '"+r.next+"'");else{let e=KD(r,r.next).map(t=>(r.inline==null?r.inline=t.isInline:r.inline!=t.isInline&&r.err("Mixing inline and block content"),{type:"name",value:t}));return r.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function XD(r){let e=[[]];return s(l(r,0),t()),e;function t(){return e.push([])-1}function n(c,u,h){let m={term:h,to:u};return e[c].push(m),m}function s(c,u){c.forEach(h=>h.to=u)}function l(c,u){if(c.type=="choice")return c.exprs.reduce((h,m)=>h.concat(l(m,u)),[]);if(c.type=="seq")for(let h=0;;h++){let m=l(c.exprs[h],u);if(h==c.exprs.length-1)return m;s(m,u=t())}else if(c.type=="star"){let h=t();return n(u,h),s(l(c.expr,h),h),[n(h)]}else if(c.type=="plus"){let h=t();return s(l(c.expr,u),h),s(l(c.expr,h),h),[n(h)]}else{if(c.type=="opt")return[n(u)].concat(l(c.expr,u));if(c.type=="range"){let h=u;for(let m=0;m<c.min;m++){let p=t();s(l(c.expr,h),p),h=p}if(c.max==-1)s(l(c.expr,h),h);else for(let m=c.min;m<c.max;m++){let p=t();n(h,p),s(l(c.expr,h),p),h=p}return[n(h)]}else{if(c.type=="name")return[n(u,void 0,c.value)];throw new Error("Unknown expr type")}}}}function jN(r,e){return e-r}function Sw(r,e){let t=[];return n(e),t.sort(jN);function n(s){let l=r[s];if(l.length==1&&!l[0].term)return n(l[0].to);t.push(s);for(let c=0;c<l.length;c++){let{term:u,to:h}=l[c];!u&&t.indexOf(h)==-1&&n(h)}}}function QD(r){let e=Object.create(null);return t(Sw(r,0));function t(n){let s=[];n.forEach(c=>{r[c].forEach(({term:u,to:h})=>{if(!u)return;let m;for(let p=0;p<s.length;p++)s[p][0]==u&&(m=s[p][1]);Sw(r,h).forEach(p=>{m||s.push([u,m=[]]),m.indexOf(p)==-1&&m.push(p)})})});let l=e[n.join(",")]=new Ro(n.indexOf(r.length-1)>-1);for(let c=0;c<s.length;c++){let u=s[c][1].sort(jN);l.next.push({type:s[c][0],next:e[u.join(",")]||t(u)})}return l}}function JD(r,e){for(let t=0,n=[r];t<n.length;t++){let s=n[t],l=!s.validEnd,c=[];for(let u=0;u<s.next.length;u++){let{type:h,next:m}=s.next[u];c.push(h.name),l&&!(h.isText||h.hasRequiredAttrs())&&(l=!1),n.indexOf(m)==-1&&n.push(m)}l&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function CN(r){let e=Object.create(null);for(let t in r){let n=r[t];if(!n.hasDefault)return null;e[t]=n.default}return e}function TN(r,e){let t=Object.create(null);for(let n in r){let s=e&&e[n];if(s===void 0){let l=r[n];if(l.hasDefault)s=l.default;else throw new RangeError("No value supplied for attribute "+n)}t[n]=s}return t}function MN(r,e,t,n){for(let s in e)if(!(s in r))throw new RangeError(`Unsupported attribute ${s} for ${t} of type ${s}`);for(let s in r){let l=r[s];l.validate&&l.validate(e[s])}}function EN(r,e){let t=Object.create(null);if(e)for(let n in e)t[n]=new eO(r,n,e[n]);return t}let Nw=class AN{constructor(e,t,n){this.name=e,this.schema=t,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=EN(e,n.attrs),this.defaultAttrs=CN(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==Ro.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:TN(this.attrs,e)}create(e=null,t,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ds(this,this.computeAttrs(e),re.from(t),kt.setFrom(n))}createChecked(e=null,t,n){return t=re.from(t),this.checkContent(t),new Ds(this,this.computeAttrs(e),t,kt.setFrom(n))}createAndFill(e=null,t,n){if(e=this.computeAttrs(e),t=re.from(t),t.size){let c=this.contentMatch.fillBefore(t);if(!c)return null;t=c.append(t)}let s=this.contentMatch.matchFragment(t),l=s&&s.fillBefore(re.empty,!0);return l?new Ds(this,e,t.append(l),kt.setFrom(n)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let n=0;n<e.childCount;n++)if(!this.allowsMarks(e.child(n).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){MN(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let n=0;n<e.length;n++)this.allowsMarkType(e[n].type)?t&&t.push(e[n]):t||(t=e.slice(0,n));return t?t.length?t:kt.none:e}static compile(e,t){let n=Object.create(null);e.forEach((l,c)=>n[l]=new AN(l,t,c));let s=t.spec.topNode||"doc";if(!n[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let l in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}};function ZD(r,e,t){let n=t.split("|");return s=>{let l=s===null?"null":typeof s;if(n.indexOf(l)<0)throw new RangeError(`Expected value of type ${n} for attribute ${e} on type ${r}, got ${l}`)}}class eO{constructor(e,t,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate=typeof n.validate=="string"?ZD(e,t,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class dh{constructor(e,t,n,s){this.name=e,this.rank=t,this.schema=n,this.spec=s,this.attrs=EN(e,s.attrs),this.excluded=null;let l=CN(this.attrs);this.instance=l?new kt(this,l):null}create(e=null){return!e&&this.instance?this.instance:new kt(this,TN(this.attrs,e))}static compile(e,t){let n=Object.create(null),s=0;return e.forEach((l,c)=>n[l]=new dh(l,s++,t,c)),n}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){MN(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class DN{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=yr.from(e.nodes),t.marks=yr.from(e.marks||{}),this.nodes=Nw.compile(this.spec.nodes,this),this.marks=dh.compile(this.spec.marks,this);let n=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let l=this.nodes[s],c=l.spec.content||"",u=l.spec.marks;if(l.contentMatch=n[c]||(n[c]=Ro.parse(c,this.nodes)),l.inlineContent=l.contentMatch.inlineContent,l.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!l.isInline||!l.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=l}l.markSet=u=="_"?null:u?jw(this,u.split(" ")):u==""||!l.inlineContent?[]:null}for(let s in this.marks){let l=this.marks[s],c=l.spec.excludes;l.excluded=c==null?[l]:c==""?[]:jw(this,c.split(" "))}this.nodeFromJSON=s=>Ds.fromJSON(this,s),this.markFromJSON=s=>kt.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,n,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Nw){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,n,s)}text(e,t){let n=this.nodes.text;return new df(n,n.defaultAttrs,e,kt.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function jw(r,e){let t=[];for(let n=0;n<e.length;n++){let s=e[n],l=r.marks[s],c=l;if(l)t.push(l);else for(let u in r.marks){let h=r.marks[u];(s=="_"||h.spec.group&&h.spec.group.split(" ").indexOf(s)>-1)&&t.push(c=h)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[n]+"'")}return t}function tO(r){return r.tag!=null}function rO(r){return r.style!=null}class Os{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let n=this.matchedStyles=[];t.forEach(s=>{if(tO(s))this.tags.push(s);else if(rO(s)){let l=/[^=]*/.exec(s.style)[0];n.indexOf(l)<0&&n.push(l),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let l=e.nodes[s.node];return l.contentMatch.matchType(l)})}parse(e,t={}){let n=new Tw(this,t,!1);return n.addAll(e,kt.none,t.from,t.to),n.finish()}parseSlice(e,t={}){let n=new Tw(this,t,!0);return n.addAll(e,kt.none,t.from,t.to),pe.maxOpen(n.finish())}matchTag(e,t,n){for(let s=n?this.tags.indexOf(n)+1:0;s<this.tags.length;s++){let l=this.tags[s];if(sO(e,l.tag)&&(l.namespace===void 0||e.namespaceURI==l.namespace)&&(!l.context||t.matchesContext(l.context))){if(l.getAttrs){let c=l.getAttrs(e);if(c===!1)continue;l.attrs=c||void 0}return l}}}matchStyle(e,t,n,s){for(let l=s?this.styles.indexOf(s)+1:0;l<this.styles.length;l++){let c=this.styles[l],u=c.style;if(!(u.indexOf(e)!=0||c.context&&!n.matchesContext(c.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=t))){if(c.getAttrs){let h=c.getAttrs(t);if(h===!1)continue;c.attrs=h||void 0}return c}}}static schemaRules(e){let t=[];function n(s){let l=s.priority==null?50:s.priority,c=0;for(;c<t.length;c++){let u=t[c];if((u.priority==null?50:u.priority)<l)break}t.splice(c,0,s)}for(let s in e.marks){let l=e.marks[s].spec.parseDOM;l&&l.forEach(c=>{n(c=Mw(c)),c.mark||c.ignore||c.clearMark||(c.mark=s)})}for(let s in e.nodes){let l=e.nodes[s].spec.parseDOM;l&&l.forEach(c=>{n(c=Mw(c)),c.node||c.ignore||c.mark||(c.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Os(e,Os.schemaRules(e)))}}const ON={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},nO={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},RN={ol:!0,ul:!0},$c=1,Jp=2,Sc=4;function Cw(r,e,t){return e!=null?(e?$c:0)|(e==="full"?Jp:0):r&&r.whitespace=="pre"?$c|Jp:t&~Sc}class ju{constructor(e,t,n,s,l,c){this.type=e,this.attrs=t,this.marks=n,this.solid=s,this.options=c,this.content=[],this.activeMarks=kt.none,this.match=l||(c&Sc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(re.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let n=this.type.contentMatch,s;return(s=n.findWrapping(e.type))?(this.match=n,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&$c)){let n=this.content[this.content.length-1],s;if(n&&n.isText&&(s=/[ \t\r\n\u000c]+$/.exec(n.text))){let l=n;n.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=l.withText(l.text.slice(0,l.text.length-s[0].length))}}let t=re.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(re.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ON.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Tw{constructor(e,t,n){this.parser=e,this.options=t,this.isOpen=n,this.open=0,this.localPreserveWS=!1;let s=t.topNode,l,c=Cw(null,t.preserveWhitespace,0)|(n?Sc:0);s?l=new ju(s.type,s.attrs,kt.none,!0,t.topMatch||s.type.contentMatch,c):n?l=new ju(null,null,kt.none,!0,null,c):l=new ju(e.schema.topNodeType,null,kt.none,!0,null,c),this.nodes=[l],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let n=e.nodeValue,s=this.top,l=s.options&Jp?"full":this.localPreserveWS||(s.options&$c)>0;if(l==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(n)){if(l)l!=="full"?n=n.replace(/\r?\n|\r/g," "):n=n.replace(/\r\n?/g,`
`);else if(n=n.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(n)&&this.open==this.nodes.length-1){let c=s.content[s.content.length-1],u=e.previousSibling;(!c||u&&u.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(n=n.slice(1))}n&&this.insertNode(this.parser.schema.text(n),t,!/\S/.test(n)),this.findInText(e)}else this.findInside(e)}addElement(e,t,n){let s=this.localPreserveWS,l=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),u;RN.hasOwnProperty(c)&&this.parser.normalizeLists&&aO(e);let h=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,n));e:if(h?h.ignore:nO.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,t);else if(!h||h.skip||h.closeParent){h&&h.closeParent?this.open=Math.max(0,this.open-1):h&&h.skip.nodeType&&(e=h.skip);let m,p=this.needsBlock;if(ON.hasOwnProperty(c))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),m=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let x=h&&h.skip?t:this.readStyles(e,t);x&&this.addAll(e,x),m&&this.sync(l),this.needsBlock=p}else{let m=this.readStyles(e,t);m&&this.addElementByRule(e,h,m,h.consuming===!1?u:void 0)}this.localPreserveWS=s}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let n=e.style;if(n&&n.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let l=this.parser.matchedStyles[s],c=n.getPropertyValue(l);if(c)for(let u=void 0;;){let h=this.parser.matchStyle(l,c,this,u);if(!h)break;if(h.ignore)return null;if(h.clearMark?t=t.filter(m=>!h.clearMark(m)):t=t.concat(this.parser.schema.marks[h.mark].create(h.attrs)),h.consuming===!1)u=h;else break}}return t}addElementByRule(e,t,n,s){let l,c;if(t.node)if(c=this.parser.schema.nodes[t.node],c.isLeaf)this.insertNode(c.create(t.attrs),n,e.nodeName=="BR")||this.leafFallback(e,n);else{let h=this.enter(c,t.attrs||null,n,t.preserveWhitespace);h&&(l=!0,n=h)}else{let h=this.parser.schema.marks[t.mark];n=n.concat(h.create(t.attrs))}let u=this.top;if(c&&c.isLeaf)this.findInside(e);else if(s)this.addElement(e,n,s);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(h=>this.insertNode(h,n,!1));else{let h=e;typeof t.contentElement=="string"?h=e.querySelector(t.contentElement):typeof t.contentElement=="function"?h=t.contentElement(e):t.contentElement&&(h=t.contentElement),this.findAround(e,h,!0),this.addAll(h,n),this.findAround(e,h,!1)}l&&this.sync(u)&&this.open--}addAll(e,t,n,s){let l=n||0;for(let c=n?e.childNodes[n]:e.firstChild,u=s==null?null:e.childNodes[s];c!=u;c=c.nextSibling,++l)this.findAtPoint(e,l),this.addDOM(c,t);this.findAtPoint(e,l)}findPlace(e,t,n){let s,l;for(let c=this.open,u=0;c>=0;c--){let h=this.nodes[c],m=h.findWrapping(e);if(m&&(!s||s.length>m.length+u)&&(s=m,l=h,!m.length))break;if(h.solid){if(n)break;u+=2}}if(!s)return null;this.sync(l);for(let c=0;c<s.length;c++)t=this.enterInner(s[c],null,t,!1);return t}insertNode(e,t,n){if(e.isInline&&this.needsBlock&&!this.top.type){let l=this.textblockFromContext();l&&(t=this.enterInner(l,null,t))}let s=this.findPlace(e,t,n);if(s){this.closeExtra();let l=this.top;l.match&&(l.match=l.match.matchType(e.type));let c=kt.none;for(let u of s.concat(e.marks))(l.type?l.type.allowsMarkType(u.type):Ew(u.type,e.type))&&(c=u.addToSet(c));return l.content.push(e.mark(c)),!0}return!1}enter(e,t,n,s){let l=this.findPlace(e.create(t),n,!1);return l&&(l=this.enterInner(e,t,n,!0,s)),l}enterInner(e,t,n,s=!1,l){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let u=Cw(e,l,c.options);c.options&Sc&&c.content.length==0&&(u|=Sc);let h=kt.none;return n=n.filter(m=>(c.type?c.type.allowsMarkType(m.type):Ew(m.type,e))?(h=m.addToSet(h),!1):!0),this.nodes.push(new ju(e,t,h,s,null,u)),this.open++,n}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=$c)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let n=this.nodes[t].content;for(let s=n.length-1;s>=0;s--)e+=n[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&this.find[n].offset==t&&(this.find[n].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,n){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(n?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),n=this.options.context,s=!this.isOpen&&(!n||n.parent.type==this.nodes[0].type),l=-(n?n.depth+1:0)+(s?0:1),c=(u,h)=>{for(;u>=0;u--){let m=t[u];if(m==""){if(u==t.length-1||u==0)continue;for(;h>=l;h--)if(c(u-1,h))return!0;return!1}else{let p=h>0||h==0&&s?this.nodes[h].type:n&&h>=l?n.node(h-l).type:null;if(!p||p.name!=m&&!p.isInGroup(m))return!1;h--}}return!0};return c(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let n=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let n=this.parser.schema.nodes[t];if(n.isTextblock&&n.defaultAttrs)return n}}}function aO(r){for(let e=r.firstChild,t=null;e;e=e.nextSibling){let n=e.nodeType==1?e.nodeName.toLowerCase():null;n&&RN.hasOwnProperty(n)&&t?(t.appendChild(e),e=t):n=="li"?t=e:n&&(t=null)}}function sO(r,e){return(r.matches||r.msMatchesSelector||r.webkitMatchesSelector||r.mozMatchesSelector).call(r,e)}function Mw(r){let e={};for(let t in r)e[t]=r[t];return e}function Ew(r,e){let t=e.schema.nodes;for(let n in t){let s=t[n];if(!s.allowsMarkType(r))continue;let l=[],c=u=>{l.push(u);for(let h=0;h<u.edgeCount;h++){let{type:m,next:p}=u.edge(h);if(m==e||l.indexOf(p)<0&&c(p))return!0}};if(c(s.contentMatch))return!0}}class Po{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},n){n||(n=Qm(t).createDocumentFragment());let s=n,l=[];return e.forEach(c=>{if(l.length||c.marks.length){let u=0,h=0;for(;u<l.length&&h<c.marks.length;){let m=c.marks[h];if(!this.marks[m.type.name]){h++;continue}if(!m.eq(l[u][0])||m.type.spec.spanning===!1)break;u++,h++}for(;u<l.length;)s=l.pop()[1];for(;h<c.marks.length;){let m=c.marks[h++],p=this.serializeMark(m,c.isInline,t);p&&(l.push([m,s]),s.appendChild(p.dom),s=p.contentDOM||p.dom)}}s.appendChild(this.serializeNodeInner(c,t))}),n}serializeNodeInner(e,t){let{dom:n,contentDOM:s}=Vu(Qm(t),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return n}serializeNode(e,t={}){let n=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let l=this.serializeMark(e.marks[s],e.isInline,t);l&&((l.contentDOM||l.dom).appendChild(n),n=l.dom)}return n}serializeMark(e,t,n={}){let s=this.marks[e.type.name];return s&&Vu(Qm(n),s(e,t),null,e.attrs)}static renderSpec(e,t,n=null,s){return Vu(e,t,n,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Po(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Aw(e.nodes);return t.text||(t.text=n=>n.text),t}static marksFromSchema(e){return Aw(e.marks)}}function Aw(r){let e={};for(let t in r){let n=r[t].spec.toDOM;n&&(e[t]=n)}return e}function Qm(r){return r.document||window.document}const Dw=new WeakMap;function oO(r){let e=Dw.get(r);return e===void 0&&Dw.set(r,e=lO(r)),e}function lO(r){let e=null;function t(n){if(n&&typeof n=="object")if(Array.isArray(n))if(typeof n[0]=="string")e||(e=[]),e.push(n);else for(let s=0;s<n.length;s++)t(n[s]);else for(let s in n)t(n[s])}return t(r),e}function Vu(r,e,t,n){if(typeof e=="string")return{dom:r.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],l;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(n&&(l=oO(n))&&l.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=s.indexOf(" ");c>0&&(t=s.slice(0,c),s=s.slice(c+1));let u,h=t?r.createElementNS(t,s):r.createElement(s),m=e[1],p=1;if(m&&typeof m=="object"&&m.nodeType==null&&!Array.isArray(m)){p=2;for(let x in m)if(m[x]!=null){let b=x.indexOf(" ");b>0?h.setAttributeNS(x.slice(0,b),x.slice(b+1),m[x]):x=="style"&&h.style?h.style.cssText=m[x]:h.setAttribute(x,m[x])}}for(let x=p;x<e.length;x++){let b=e[x];if(b===0){if(x<e.length-1||x>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:h,contentDOM:h}}else{let{dom:v,contentDOM:k}=Vu(r,b,t,n);if(h.appendChild(v),k){if(u)throw new RangeError("Multiple content holes");u=k}}}return{dom:h,contentDOM:u}}const zN=65535,LN=Math.pow(2,16);function iO(r,e){return r+e*LN}function Ow(r){return r&zN}function cO(r){return(r-(r&zN))/LN}const BN=1,IN=2,Fu=4,PN=8;class Zp{constructor(e,t,n){this.pos=e,this.delInfo=t,this.recover=n}get deleted(){return(this.delInfo&PN)>0}get deletedBefore(){return(this.delInfo&(BN|Fu))>0}get deletedAfter(){return(this.delInfo&(IN|Fu))>0}get deletedAcross(){return(this.delInfo&Fu)>0}}class ln{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&ln.empty)return ln.empty}recover(e){let t=0,n=Ow(e);if(!this.inverted)for(let s=0;s<n;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[n*3]+t+cO(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,n){let s=0,l=this.inverted?2:1,c=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let h=this.ranges[u]-(this.inverted?s:0);if(h>e)break;let m=this.ranges[u+l],p=this.ranges[u+c],x=h+m;if(e<=x){let b=m?e==h?-1:e==x?1:t:t,v=h+s+(b<0?0:p);if(n)return v;let k=e==(t<0?h:x)?null:iO(u/3,e-h),w=e==h?IN:e==x?BN:Fu;return(t<0?e!=h:e!=x)&&(w|=PN),new Zp(v,w,k)}s+=p-m}return n?e+s:new Zp(e+s,0,null)}touches(e,t){let n=0,s=Ow(t),l=this.inverted?2:1,c=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let h=this.ranges[u]-(this.inverted?n:0);if(h>e)break;let m=this.ranges[u+l],p=h+m;if(e<=p&&u==s*3)return!0;n+=this.ranges[u+c]-m}return!1}forEach(e){let t=this.inverted?2:1,n=this.inverted?1:2;for(let s=0,l=0;s<this.ranges.length;s+=3){let c=this.ranges[s],u=c-(this.inverted?l:0),h=c+(this.inverted?0:l),m=this.ranges[s+t],p=this.ranges[s+n];e(u,u+m,h,h+p),l+=p-m}}invert(){return new ln(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?ln.empty:new ln(e<0?[0,-e,0]:[0,0,e])}}ln.empty=new ln([]);class Uc{constructor(e,t,n=0,s=e?e.length:0){this.mirror=t,this.from=n,this.to=s,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Uc(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,n=this._maps.length;t<e._maps.length;t++){let s=e.getMirror(t);this.appendMap(e._maps[t],s!=null&&s<t?n+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,n=this._maps.length+e._maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e._maps[t].invert(),s!=null&&s>t?n-s-1:void 0)}}invert(){let e=new Uc;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let n=this.from;n<this.to;n++)e=this._maps[n].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,n){let s=0;for(let l=this.from;l<this.to;l++){let c=this._maps[l],u=c.mapResult(e,t);if(u.recover!=null){let h=this.getMirror(l);if(h!=null&&h>l&&h<this.to){l=h,e=this._maps[h].recover(u.recover);continue}}s|=u.delInfo,e=u.pos}return n?e:new Zp(e,s,null)}}const Jm=Object.create(null);class Or{getMap(){return ln.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=Jm[t.stepType];if(!n)throw new RangeError(`No step type ${t.stepType} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in Jm)throw new RangeError("Duplicate use of step JSON ID "+e);return Jm[e]=t,t.prototype.jsonID=e,t}}class Kt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Kt(e,null)}static fail(e){return new Kt(null,e)}static fromReplace(e,t,n,s){try{return Kt.ok(e.replace(t,n,s))}catch(l){if(l instanceof of)return Kt.fail(l.message);throw l}}}function ex(r,e,t){let n=[];for(let s=0;s<r.childCount;s++){let l=r.child(s);l.content.size&&(l=l.copy(ex(l.content,e,l))),l.isInline&&(l=e(l,t,s)),n.push(l)}return re.fromArray(n)}class Ms extends Or{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=e.resolve(this.from),s=n.node(n.sharedDepth(this.to)),l=new pe(ex(t.content,(c,u)=>!c.isAtom||!u.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),s),t.openStart,t.openEnd);return Kt.fromReplace(e,this.from,this.to,l)}invert(){return new $n(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new Ms(t.pos,n.pos,this.mark)}merge(e){return e instanceof Ms&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Ms(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Ms(t.from,t.to,e.markFromJSON(t.mark))}}Or.jsonID("addMark",Ms);class $n extends Or{constructor(e,t,n){super(),this.from=e,this.to=t,this.mark=n}apply(e){let t=e.slice(this.from,this.to),n=new pe(ex(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return Kt.fromReplace(e,this.from,this.to,n)}invert(){return new Ms(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deleted&&n.deleted||t.pos>=n.pos?null:new $n(t.pos,n.pos,this.mark)}merge(e){return e instanceof $n&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new $n(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new $n(t.from,t.to,e.markFromJSON(t.mark))}}Or.jsonID("removeMark",$n);class Es extends Or{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Kt.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Kt.fromReplace(e,this.pos,this.pos+1,new pe(re.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let n=this.mark.addToSet(t.marks);if(n.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(n))return new Es(this.pos,t.marks[s]);return new Es(this.pos,this.mark)}}return new zo(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Es(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Es(t.pos,e.markFromJSON(t.mark))}}Or.jsonID("addNodeMark",Es);class zo extends Or{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Kt.fail("No node at mark step's position");let n=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Kt.fromReplace(e,this.pos,this.pos+1,new pe(re.from(n),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Es(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new zo(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new zo(t.pos,e.markFromJSON(t.mark))}}Or.jsonID("removeNodeMark",zo);class or extends Or{constructor(e,t,n,s=!1){super(),this.from=e,this.to=t,this.slice=n,this.structure=s}apply(e){return this.structure&&eg(e,this.from,this.to)?Kt.fail("Structure replace would overwrite content"):Kt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new ln([this.from,this.to-this.from,this.slice.size])}invert(e){return new or(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1);return t.deletedAcross&&n.deletedAcross?null:new or(t.pos,Math.max(t.pos,n.pos),this.slice,this.structure)}merge(e){if(!(e instanceof or)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?pe.empty:new pe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new or(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?pe.empty:new pe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new or(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new or(t.from,t.to,pe.fromJSON(e,t.slice),!!t.structure)}}Or.jsonID("replace",or);class dr extends Or{constructor(e,t,n,s,l,c,u=!1){super(),this.from=e,this.to=t,this.gapFrom=n,this.gapTo=s,this.slice=l,this.insert=c,this.structure=u}apply(e){if(this.structure&&(eg(e,this.from,this.gapFrom)||eg(e,this.gapTo,this.to)))return Kt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Kt.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,t.content);return n?Kt.fromReplace(e,this.from,this.to,n):Kt.fail("Content does not fit in gap")}getMap(){return new ln([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new dr(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),n=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),l=this.to==this.gapTo?n.pos:e.map(this.gapTo,1);return t.deletedAcross&&n.deletedAcross||s<t.pos||l>n.pos?null:new dr(t.pos,n.pos,s,l,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new dr(t.from,t.to,t.gapFrom,t.gapTo,pe.fromJSON(e,t.slice),t.insert,!!t.structure)}}Or.jsonID("replaceAround",dr);function eg(r,e,t){let n=r.resolve(e),s=t-e,l=n.depth;for(;s>0&&l>0&&n.indexAfter(l)==n.node(l).childCount;)l--,s--;if(s>0){let c=n.node(l).maybeChild(n.indexAfter(l));for(;s>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,s--}}return!1}function dO(r,e,t,n){let s=[],l=[],c,u;r.doc.nodesBetween(e,t,(h,m,p)=>{if(!h.isInline)return;let x=h.marks;if(!n.isInSet(x)&&p.type.allowsMarkType(n.type)){let b=Math.max(m,e),v=Math.min(m+h.nodeSize,t),k=n.addToSet(x);for(let w=0;w<x.length;w++)x[w].isInSet(k)||(c&&c.to==b&&c.mark.eq(x[w])?c.to=v:s.push(c=new $n(b,v,x[w])));u&&u.to==b?u.to=v:l.push(u=new Ms(b,v,n))}}),s.forEach(h=>r.step(h)),l.forEach(h=>r.step(h))}function uO(r,e,t,n){let s=[],l=0;r.doc.nodesBetween(e,t,(c,u)=>{if(!c.isInline)return;l++;let h=null;if(n instanceof dh){let m=c.marks,p;for(;p=n.isInSet(m);)(h||(h=[])).push(p),m=p.removeFromSet(m)}else n?n.isInSet(c.marks)&&(h=[n]):h=c.marks;if(h&&h.length){let m=Math.min(u+c.nodeSize,t);for(let p=0;p<h.length;p++){let x=h[p],b;for(let v=0;v<s.length;v++){let k=s[v];k.step==l-1&&x.eq(s[v].style)&&(b=k)}b?(b.to=m,b.step=l):s.push({style:x,from:Math.max(u,e),to:m,step:l})}}}),s.forEach(c=>r.step(new $n(c.from,c.to,c.style)))}function tx(r,e,t,n=t.contentMatch,s=!0){let l=r.doc.nodeAt(e),c=[],u=e+1;for(let h=0;h<l.childCount;h++){let m=l.child(h),p=u+m.nodeSize,x=n.matchType(m.type);if(!x)c.push(new or(u,p,pe.empty));else{n=x;for(let b=0;b<m.marks.length;b++)t.allowsMarkType(m.marks[b].type)||r.step(new $n(u,p,m.marks[b]));if(s&&m.isText&&t.whitespace!="pre"){let b,v=/\r?\n|\r/g,k;for(;b=v.exec(m.text);)k||(k=new pe(re.from(t.schema.text(" ",t.allowedMarks(m.marks))),0,0)),c.push(new or(u+b.index,u+b.index+b[0].length,k))}}u=p}if(!n.validEnd){let h=n.fillBefore(re.empty,!0);r.replace(u,u,new pe(h,0,0))}for(let h=c.length-1;h>=0;h--)r.step(c[h])}function fO(r,e,t){return(e==0||r.canReplace(e,r.childCount))&&(t==r.childCount||r.canReplace(0,t))}function li(r){let t=r.parent.content.cutByIndex(r.startIndex,r.endIndex);for(let n=r.depth;;--n){let s=r.$from.node(n),l=r.$from.index(n),c=r.$to.indexAfter(n);if(n<r.depth&&s.canReplace(l,c,t))return n;if(n==0||s.type.spec.isolating||!fO(s,l,c))break}return null}function hO(r,e,t){let{$from:n,$to:s,depth:l}=e,c=n.before(l+1),u=s.after(l+1),h=c,m=u,p=re.empty,x=0;for(let k=l,w=!1;k>t;k--)w||n.index(k)>0?(w=!0,p=re.from(n.node(k).copy(p)),x++):h--;let b=re.empty,v=0;for(let k=l,w=!1;k>t;k--)w||s.after(k+1)<s.end(k)?(w=!0,b=re.from(s.node(k).copy(b)),v++):m++;r.step(new dr(h,m,c,u,new pe(p.append(b),x,v),p.size-x,!0))}function rx(r,e,t=null,n=r){let s=mO(r,e),l=s&&pO(n,e);return l?s.map(Rw).concat({type:e,attrs:t}).concat(l.map(Rw)):null}function Rw(r){return{type:r,attrs:null}}function mO(r,e){let{parent:t,startIndex:n,endIndex:s}=r,l=t.contentMatchAt(n).findWrapping(e);if(!l)return null;let c=l.length?l[0]:e;return t.canReplaceWith(n,s,c)?l:null}function pO(r,e){let{parent:t,startIndex:n,endIndex:s}=r,l=t.child(n),c=e.contentMatch.findWrapping(l.type);if(!c)return null;let h=(c.length?c[c.length-1]:e).contentMatch;for(let m=n;h&&m<s;m++)h=h.matchType(t.child(m).type);return!h||!h.validEnd?null:c}function gO(r,e,t){let n=re.empty;for(let c=t.length-1;c>=0;c--){if(n.size){let u=t[c].type.contentMatch.matchFragment(n);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}n=re.from(t[c].type.create(t[c].attrs,n))}let s=e.start,l=e.end;r.step(new dr(s,l,s,l,new pe(n,0,0),t.length,!0))}function xO(r,e,t,n,s){if(!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let l=r.steps.length;r.doc.nodesBetween(e,t,(c,u)=>{let h=typeof s=="function"?s(c):s;if(c.isTextblock&&!c.hasMarkup(n,h)&&bO(r.doc,r.mapping.slice(l).map(u),n)){let m=null;if(n.schema.linebreakReplacement){let v=n.whitespace=="pre",k=!!n.contentMatch.matchType(n.schema.linebreakReplacement);v&&!k?m=!1:!v&&k&&(m=!0)}m===!1&&HN(r,c,u,l),tx(r,r.mapping.slice(l).map(u,1),n,void 0,m===null);let p=r.mapping.slice(l),x=p.map(u,1),b=p.map(u+c.nodeSize,1);return r.step(new dr(x,b,x+1,b-1,new pe(re.from(n.create(h,null,c.marks)),0,0),1,!0)),m===!0&&_N(r,c,u,l),!1}})}function _N(r,e,t,n){e.forEach((s,l)=>{if(s.isText){let c,u=/\r?\n|\r/g;for(;c=u.exec(s.text);){let h=r.mapping.slice(n).map(t+1+l+c.index);r.replaceWith(h,h+1,e.type.schema.linebreakReplacement.create())}}})}function HN(r,e,t,n){e.forEach((s,l)=>{if(s.type==s.type.schema.linebreakReplacement){let c=r.mapping.slice(n).map(t+1+l);r.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function bO(r,e,t){let n=r.resolve(e),s=n.index();return n.parent.canReplaceWith(s,s+1,t)}function yO(r,e,t,n,s){let l=r.doc.nodeAt(e);if(!l)throw new RangeError("No node at given position");t||(t=l.type);let c=t.create(n,null,s||l.marks);if(l.isLeaf)return r.replaceWith(e,e+l.nodeSize,c);if(!t.validContent(l.content))throw new RangeError("Invalid content for node type "+t.name);r.step(new dr(e,e+l.nodeSize,e+1,e+l.nodeSize-1,new pe(re.from(c),0,0),1,!0))}function Va(r,e,t=1,n){let s=r.resolve(e),l=s.depth-t,c=n&&n[n.length-1]||s.parent;if(l<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!c.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let m=s.depth-1,p=t-2;m>l;m--,p--){let x=s.node(m),b=s.index(m);if(x.type.spec.isolating)return!1;let v=x.content.cutByIndex(b,x.childCount),k=n&&n[p+1];k&&(v=v.replaceChild(0,k.type.create(k.attrs)));let w=n&&n[p]||x;if(!x.canReplace(b+1,x.childCount)||!w.type.validContent(v))return!1}let u=s.indexAfter(l),h=n&&n[0];return s.node(l).canReplaceWith(u,u,h?h.type:s.node(l+1).type)}function vO(r,e,t=1,n){let s=r.doc.resolve(e),l=re.empty,c=re.empty;for(let u=s.depth,h=s.depth-t,m=t-1;u>h;u--,m--){l=re.from(s.node(u).copy(l));let p=n&&n[m];c=re.from(p?p.type.create(p.attrs,c):s.node(u).copy(c))}r.step(new or(e,e,new pe(l.append(c),t,t),!0))}function Fs(r,e){let t=r.resolve(e),n=t.index();return $N(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(n,n+1)}function kO(r,e){e.content.size||r.type.compatibleContent(e.type);let t=r.contentMatchAt(r.childCount),{linebreakReplacement:n}=r.type.schema;for(let s=0;s<e.childCount;s++){let l=e.child(s),c=l.type==n?r.type.schema.nodes.text:l.type;if(t=t.matchType(c),!t||!r.type.allowsMarks(l.marks))return!1}return t.validEnd}function $N(r,e){return!!(r&&e&&!r.isLeaf&&kO(r,e))}function uh(r,e,t=-1){let n=r.resolve(e);for(let s=n.depth;;s--){let l,c,u=n.index(s);if(s==n.depth?(l=n.nodeBefore,c=n.nodeAfter):t>0?(l=n.node(s+1),u++,c=n.node(s).maybeChild(u)):(l=n.node(s).maybeChild(u-1),c=n.node(s+1)),l&&!l.isTextblock&&$N(l,c)&&n.node(s).canReplace(u,u+1))return e;if(s==0)break;e=t<0?n.before(s):n.after(s)}}function wO(r,e,t){let n=null,{linebreakReplacement:s}=r.doc.type.schema,l=r.doc.resolve(e-t),c=l.node().type;if(s&&c.inlineContent){let p=c.whitespace=="pre",x=!!c.contentMatch.matchType(s);p&&!x?n=!1:!p&&x&&(n=!0)}let u=r.steps.length;if(n===!1){let p=r.doc.resolve(e+t);HN(r,p.node(),p.before(),u)}c.inlineContent&&tx(r,e+t-1,c,l.node().contentMatchAt(l.index()),n==null);let h=r.mapping.slice(u),m=h.map(e-t);if(r.step(new or(m,h.map(e+t,-1),pe.empty,!0)),n===!0){let p=r.doc.resolve(m);_N(r,p.node(),p.before(),r.steps.length)}return r}function SO(r,e,t){let n=r.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),t))return e;if(n.parentOffset==0)for(let s=n.depth-1;s>=0;s--){let l=n.index(s);if(n.node(s).canReplaceWith(l,l,t))return n.before(s+1);if(l>0)return null}if(n.parentOffset==n.parent.content.size)for(let s=n.depth-1;s>=0;s--){let l=n.indexAfter(s);if(n.node(s).canReplaceWith(l,l,t))return n.after(s+1);if(l<n.node(s).childCount)return null}return null}function UN(r,e,t){let n=r.resolve(e);if(!t.content.size)return e;let s=t.content;for(let l=0;l<t.openStart;l++)s=s.firstChild.content;for(let l=1;l<=(t.openStart==0&&t.size?2:1);l++)for(let c=n.depth;c>=0;c--){let u=c==n.depth?0:n.pos<=(n.start(c+1)+n.end(c+1))/2?-1:1,h=n.index(c)+(u>0?1:0),m=n.node(c),p=!1;if(l==1)p=m.canReplace(h,h,s);else{let x=m.contentMatchAt(h).findWrapping(s.firstChild.type);p=x&&m.canReplaceWith(h,h,x[0])}if(p)return u==0?n.pos:u<0?n.before(c+1):n.after(c+1)}return null}function fh(r,e,t=e,n=pe.empty){if(e==t&&!n.size)return null;let s=r.resolve(e),l=r.resolve(t);return VN(s,l,n)?new or(e,t,n):new NO(s,l,n).fit()}function VN(r,e,t){return!t.openStart&&!t.openEnd&&r.start()==e.start()&&r.parent.canReplace(r.index(),e.index(),t.content)}class NO{constructor(e,t,n){this.$from=e,this.$to=t,this.unplaced=n,this.frontier=[],this.placed=re.empty;for(let s=0;s<=e.depth;s++){let l=e.node(s);this.frontier.push({type:l.type,match:l.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=re.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let m=this.findFittable();m?this.placeNodes(m):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,n=this.$from,s=this.close(e<0?this.$to:n.doc.resolve(e));if(!s)return null;let l=this.placed,c=n.depth,u=s.depth;for(;c&&u&&l.childCount==1;)l=l.firstChild.content,c--,u--;let h=new pe(l,c,u);return e>-1?new dr(n.pos,e,this.$to.pos,this.$to.end(),h,t):h.size||n.pos!=this.$to.pos?new or(n.pos,s.pos,h):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,n=0,s=this.unplaced.openEnd;n<e;n++){let l=t.firstChild;if(t.childCount>1&&(s=0),l.type.spec.isolating&&s<=n){e=n;break}t=l.content}for(let t=1;t<=2;t++)for(let n=t==1?e:this.unplaced.openStart;n>=0;n--){let s,l=null;n?(l=Zm(this.unplaced.content,n-1).firstChild,s=l.content):s=this.unplaced.content;let c=s.firstChild;for(let u=this.depth;u>=0;u--){let{type:h,match:m}=this.frontier[u],p,x=null;if(t==1&&(c?m.matchType(c.type)||(x=m.fillBefore(re.from(c),!1)):l&&h.compatibleContent(l.type)))return{sliceDepth:n,frontierDepth:u,parent:l,inject:x};if(t==2&&c&&(p=m.findWrapping(c.type)))return{sliceDepth:n,frontierDepth:u,parent:l,wrap:p};if(l&&m.matchType(l.type))break}}}openMore(){let{content:e,openStart:t,openEnd:n}=this.unplaced,s=Zm(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new pe(e,t+1,Math.max(n,s.size+t>=e.size-n?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:n}=this.unplaced,s=Zm(e,t);if(s.childCount<=1&&t>0){let l=e.size-t<=t+s.size;this.unplaced=new pe(fc(e,t-1,1),t-1,l?t-1:n)}else this.unplaced=new pe(fc(e,t,1),t,n)}placeNodes({sliceDepth:e,frontierDepth:t,parent:n,inject:s,wrap:l}){for(;this.depth>t;)this.closeFrontierNode();if(l)for(let w=0;w<l.length;w++)this.openFrontierNode(l[w]);let c=this.unplaced,u=n?n.content:c.content,h=c.openStart-e,m=0,p=[],{match:x,type:b}=this.frontier[t];if(s){for(let w=0;w<s.childCount;w++)p.push(s.child(w));x=x.matchFragment(s)}let v=u.size+e-(c.content.size-c.openEnd);for(;m<u.childCount;){let w=u.child(m),S=x.matchType(w.type);if(!S)break;m++,(m>1||h==0||w.content.size)&&(x=S,p.push(FN(w.mark(b.allowedMarks(w.marks)),m==1?h:0,m==u.childCount?v:-1)))}let k=m==u.childCount;k||(v=-1),this.placed=hc(this.placed,t,re.from(p)),this.frontier[t].match=x,k&&v<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,S=u;w<v;w++){let N=S.lastChild;this.frontier.push({type:N.type,match:N.contentMatchAt(N.childCount)}),S=N.content}this.unplaced=k?e==0?pe.empty:new pe(fc(c.content,e-1,1),e-1,v<0?c.openEnd:e-1):new pe(fc(c.content,e,m),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!ep(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,s=this.$to.after(n);for(;n>1&&s==this.$to.end(--n);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:n,type:s}=this.frontier[t],l=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),c=ep(e,t,s,n,l);if(c){for(let u=t-1;u>=0;u--){let{match:h,type:m}=this.frontier[u],p=ep(e,u,m,h,!0);if(!p||p.childCount)continue e}return{depth:t,fit:c,move:l?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=hc(this.placed,t.depth,t.fit)),e=t.move;for(let n=t.depth+1;n<=e.depth;n++){let s=e.node(n),l=s.type.contentMatch.fillBefore(s.content,!0,e.index(n));this.openFrontierNode(s.type,s.attrs,l)}return e}openFrontierNode(e,t=null,n){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=hc(this.placed,this.depth,re.from(e.create(t,n))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(re.empty,!0);t.childCount&&(this.placed=hc(this.placed,this.frontier.length,t))}}function fc(r,e,t){return e==0?r.cutByIndex(t,r.childCount):r.replaceChild(0,r.firstChild.copy(fc(r.firstChild.content,e-1,t)))}function hc(r,e,t){return e==0?r.append(t):r.replaceChild(r.childCount-1,r.lastChild.copy(hc(r.lastChild.content,e-1,t)))}function Zm(r,e){for(let t=0;t<e;t++)r=r.firstChild.content;return r}function FN(r,e,t){if(e<=0)return r;let n=r.content;return e>1&&(n=n.replaceChild(0,FN(n.firstChild,e-1,n.childCount==1?t-1:0))),e>0&&(n=r.type.contentMatch.fillBefore(n).append(n),t<=0&&(n=n.append(r.type.contentMatch.matchFragment(n).fillBefore(re.empty,!0)))),r.copy(n)}function ep(r,e,t,n,s){let l=r.node(e),c=s?r.indexAfter(e):r.index(e);if(c==l.childCount&&!t.compatibleContent(l.type))return null;let u=n.fillBefore(l.content,!0,c);return u&&!jO(t,l.content,c)?u:null}function jO(r,e,t){for(let n=t;n<e.childCount;n++)if(!r.allowsMarks(e.child(n).marks))return!0;return!1}function CO(r){return r.spec.defining||r.spec.definingForContent}function TO(r,e,t,n){if(!n.size)return r.deleteRange(e,t);let s=r.doc.resolve(e),l=r.doc.resolve(t);if(VN(s,l,n))return r.step(new or(e,t,n));let c=qN(s,r.doc.resolve(t));c[c.length-1]==0&&c.pop();let u=-(s.depth+1);c.unshift(u);for(let b=s.depth,v=s.pos-1;b>0;b--,v--){let k=s.node(b).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;c.indexOf(b)>-1?u=b:s.before(b)==v&&c.splice(1,0,-b)}let h=c.indexOf(u),m=[],p=n.openStart;for(let b=n.content,v=0;;v++){let k=b.firstChild;if(m.push(k),v==n.openStart)break;b=k.content}for(let b=p-1;b>=0;b--){let v=m[b],k=CO(v.type);if(k&&!v.sameMarkup(s.node(Math.abs(u)-1)))p=b;else if(k||!v.type.isTextblock)break}for(let b=n.openStart;b>=0;b--){let v=(b+p+1)%(n.openStart+1),k=m[v];if(k)for(let w=0;w<c.length;w++){let S=c[(w+h)%c.length],N=!0;S<0&&(N=!1,S=-S);let T=s.node(S-1),C=s.index(S-1);if(T.canReplaceWith(C,C,k.type,k.marks))return r.replace(s.before(S),N?l.after(S):t,new pe(YN(n.content,0,n.openStart,v),v,n.openEnd))}}let x=r.steps.length;for(let b=c.length-1;b>=0&&(r.replace(e,t,n),!(r.steps.length>x));b--){let v=c[b];v<0||(e=s.before(v),t=l.after(v))}}function YN(r,e,t,n,s){if(e<t){let l=r.firstChild;r=r.replaceChild(0,l.copy(YN(l.content,e+1,t,n,l)))}if(e>n){let l=s.contentMatchAt(0),c=l.fillBefore(r).append(r);r=c.append(l.matchFragment(c).fillBefore(re.empty,!0))}return r}function MO(r,e,t,n){if(!n.isInline&&e==t&&r.doc.resolve(e).parent.content.size){let s=SO(r.doc,e,n.type);s!=null&&(e=t=s)}r.replaceRange(e,t,new pe(re.from(n),0,0))}function EO(r,e,t){let n=r.doc.resolve(e),s=r.doc.resolve(t),l=qN(n,s);for(let c=0;c<l.length;c++){let u=l[c],h=c==l.length-1;if(h&&u==0||n.node(u).type.contentMatch.validEnd)return r.delete(n.start(u),s.end(u));if(u>0&&(h||n.node(u-1).canReplace(n.index(u-1),s.indexAfter(u-1))))return r.delete(n.before(u),s.after(u))}for(let c=1;c<=n.depth&&c<=s.depth;c++)if(e-n.start(c)==n.depth-c&&t>n.end(c)&&s.end(c)-t!=s.depth-c&&n.start(c-1)==s.start(c-1)&&n.node(c-1).canReplace(n.index(c-1),s.index(c-1)))return r.delete(n.before(c),t);r.delete(e,t)}function qN(r,e){let t=[],n=Math.min(r.depth,e.depth);for(let s=n;s>=0;s--){let l=r.start(s);if(l<r.pos-(r.depth-s)||e.end(s)>e.pos+(e.depth-s)||r.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(l==e.start(s)||s==r.depth&&s==e.depth&&r.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==l-1)&&t.push(s)}return t}class Ul extends Or{constructor(e,t,n){super(),this.pos=e,this.attr=t,this.value=n}apply(e){let t=e.nodeAt(this.pos);if(!t)return Kt.fail("No node at attribute step's position");let n=Object.create(null);for(let l in t.attrs)n[l]=t.attrs[l];n[this.attr]=this.value;let s=t.type.create(n,null,t.marks);return Kt.fromReplace(e,this.pos,this.pos+1,new pe(re.from(s),0,t.isLeaf?0:1))}getMap(){return ln.empty}invert(e){return new Ul(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Ul(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ul(t.pos,t.attr,t.value)}}Or.jsonID("attr",Ul);class Vc extends Or{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let n=e.type.create(t,e.content,e.marks);return Kt.ok(n)}getMap(){return ln.empty}invert(e){return new Vc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Vc(t.attr,t.value)}}Or.jsonID("docAttr",Vc);let Wl=class extends Error{};Wl=function r(e){let t=Error.call(this,e);return t.__proto__=r.prototype,t};Wl.prototype=Object.create(Error.prototype);Wl.prototype.constructor=Wl;Wl.prototype.name="TransformError";class GN{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Uc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Wl(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,n=pe.empty){let s=fh(this.doc,e,t,n);return s&&this.step(s),this}replaceWith(e,t,n){return this.replace(e,t,new pe(re.from(n),0,0))}delete(e,t){return this.replace(e,t,pe.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,n){return TO(this,e,t,n),this}replaceRangeWith(e,t,n){return MO(this,e,t,n),this}deleteRange(e,t){return EO(this,e,t),this}lift(e,t){return hO(this,e,t),this}join(e,t=1){return wO(this,e,t),this}wrap(e,t){return gO(this,e,t),this}setBlockType(e,t=e,n,s=null){return xO(this,e,t,n,s),this}setNodeMarkup(e,t,n=null,s){return yO(this,e,t,n,s),this}setNodeAttribute(e,t,n){return this.step(new Ul(e,t,n)),this}setDocAttribute(e,t){return this.step(new Vc(e,t)),this}addNodeMark(e,t){return this.step(new Es(e,t)),this}removeNodeMark(e,t){let n=this.doc.nodeAt(e);if(!n)throw new RangeError("No node at position "+e);if(t instanceof kt)t.isInSet(n.marks)&&this.step(new zo(e,t));else{let s=n.marks,l,c=[];for(;l=t.isInSet(s);)c.push(new zo(e,l)),s=l.removeFromSet(s);for(let u=c.length-1;u>=0;u--)this.step(c[u])}return this}split(e,t=1,n){return vO(this,e,t,n),this}addMark(e,t,n){return dO(this,e,t,n),this}removeMark(e,t,n){return uO(this,e,t,n),this}clearIncompatible(e,t,n){return tx(this,e,t,n),this}}const tp=Object.create(null);class Ue{constructor(e,t,n){this.$anchor=e,this.$head=t,this.ranges=n||[new AO(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=pe.empty){let n=t.content.lastChild,s=null;for(let u=0;u<t.openEnd;u++)s=n,n=n.lastChild;let l=e.steps.length,c=this.ranges;for(let u=0;u<c.length;u++){let{$from:h,$to:m}=c[u],p=e.mapping.slice(l);e.replaceRange(p.map(h.pos),p.map(m.pos),u?pe.empty:t),u==0&&Bw(e,l,(n?n.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let n=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:c,$to:u}=s[l],h=e.mapping.slice(n),m=h.map(c.pos),p=h.map(u.pos);l?e.deleteRange(m,p):(e.replaceRangeWith(m,p,t),Bw(e,n,t.isInline?-1:1))}}static findFrom(e,t,n=!1){let s=e.parent.inlineContent?new He(e):El(e.node(0),e.parent,e.pos,e.index(),t,n);if(s)return s;for(let l=e.depth-1;l>=0;l--){let c=t<0?El(e.node(0),e.node(l),e.before(l+1),e.index(l),t,n):El(e.node(0),e.node(l),e.after(l+1),e.index(l)+1,t,n);if(c)return c}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new un(e.node(0))}static atStart(e){return El(e,e,0,0,1)||new un(e)}static atEnd(e){return El(e,e,e.content.size,e.childCount,-1)||new un(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=tp[t.type];if(!n)throw new RangeError(`No selection type ${t.type} defined`);return n.fromJSON(e,t)}static jsonID(e,t){if(e in tp)throw new RangeError("Duplicate use of selection JSON ID "+e);return tp[e]=t,t.prototype.jsonID=e,t}getBookmark(){return He.between(this.$anchor,this.$head).getBookmark()}}Ue.prototype.visible=!0;class AO{constructor(e,t){this.$from=e,this.$to=t}}let zw=!1;function Lw(r){!zw&&!r.parent.inlineContent&&(zw=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+r.parent.type.name+")"))}class He extends Ue{constructor(e,t=e){Lw(e),Lw(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let n=e.resolve(t.map(this.head));if(!n.parent.inlineContent)return Ue.near(n);let s=e.resolve(t.map(this.anchor));return new He(s.parent.inlineContent?s:n,n)}replace(e,t=pe.empty){if(super.replace(e,t),t==pe.empty){let n=this.$from.marksAcross(this.$to);n&&e.ensureMarks(n)}}eq(e){return e instanceof He&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new hh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new He(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,n=t){let s=e.resolve(t);return new this(s,n==t?s:e.resolve(n))}static between(e,t,n){let s=e.pos-t.pos;if((!n||s)&&(n=s>=0?1:-1),!t.parent.inlineContent){let l=Ue.findFrom(t,n,!0)||Ue.findFrom(t,-n,!0);if(l)t=l.$head;else return Ue.near(t,n)}return e.parent.inlineContent||(s==0?e=t:(e=(Ue.findFrom(e,-n,!0)||Ue.findFrom(e,n,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new He(e,t)}}Ue.jsonID("text",He);class hh{constructor(e,t){this.anchor=e,this.head=t}map(e){return new hh(e.map(this.anchor),e.map(this.head))}resolve(e){return He.between(e.resolve(this.anchor),e.resolve(this.head))}}class Re extends Ue{constructor(e){let t=e.nodeAfter,n=e.node(0).resolve(e.pos+t.nodeSize);super(e,n),this.node=t}map(e,t){let{deleted:n,pos:s}=t.mapResult(this.anchor),l=e.resolve(s);return n?Ue.near(l):new Re(l)}content(){return new pe(re.from(this.node),0,0)}eq(e){return e instanceof Re&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new nx(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Re(e.resolve(t.anchor))}static create(e,t){return new Re(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Re.prototype.visible=!1;Ue.jsonID("node",Re);class nx{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:n}=e.mapResult(this.anchor);return t?new hh(n,n):new nx(n)}resolve(e){let t=e.resolve(this.anchor),n=t.nodeAfter;return n&&Re.isSelectable(n)?new Re(t):Ue.near(t)}}class un extends Ue{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=pe.empty){if(t==pe.empty){e.delete(0,e.doc.content.size);let n=Ue.atStart(e.doc);n.eq(e.selection)||e.setSelection(n)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new un(e)}map(e){return new un(e)}eq(e){return e instanceof un}getBookmark(){return DO}}Ue.jsonID("all",un);const DO={map(){return this},resolve(r){return new un(r)}};function El(r,e,t,n,s,l=!1){if(e.inlineContent)return He.create(r,t);for(let c=n-(s>0?0:1);s>0?c<e.childCount:c>=0;c+=s){let u=e.child(c);if(u.isAtom){if(!l&&Re.isSelectable(u))return Re.create(r,t-(s<0?u.nodeSize:0))}else{let h=El(r,u,t+s,s<0?u.childCount:0,s,l);if(h)return h}t+=u.nodeSize*s}return null}function Bw(r,e,t){let n=r.steps.length-1;if(n<e)return;let s=r.steps[n];if(!(s instanceof or||s instanceof dr))return;let l=r.mapping.maps[n],c;l.forEach((u,h,m,p)=>{c==null&&(c=p)}),r.setSelection(Ue.near(r.doc.resolve(c),t))}const Iw=1,Cu=2,Pw=4;class OO extends GN{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Iw)&~Cu,this.storedMarks=null,this}get selectionSet(){return(this.updated&Iw)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Cu,this}ensureMarks(e){return kt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Cu)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Cu,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let n=this.selection;return t&&(e=e.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||kt.none))),n.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,n){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(n==null&&(n=t),n=n??t,!e)return this.deleteRange(t,n);let l=this.storedMarks;if(!l){let c=this.doc.resolve(t);l=n==t?c.marks():c.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,s.text(e,l)),this.selection.empty||this.setSelection(Ue.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Pw,this}get scrolledIntoView(){return(this.updated&Pw)>0}}function _w(r,e){return!e||!r?r:r.bind(e)}class mc{constructor(e,t,n){this.name=e,this.init=_w(t.init,n),this.apply=_w(t.apply,n)}}const RO=[new mc("doc",{init(r){return r.doc||r.schema.topNodeType.createAndFill()},apply(r){return r.doc}}),new mc("selection",{init(r,e){return r.selection||Ue.atStart(e.doc)},apply(r){return r.selection}}),new mc("storedMarks",{init(r){return r.storedMarks||null},apply(r,e,t,n){return n.selection.$cursor?r.storedMarks:null}}),new mc("scrollToSelection",{init(){return 0},apply(r,e){return r.scrolledIntoView?e+1:e}})];class rp{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=RO.slice(),t&&t.forEach(n=>{if(this.pluginsByKey[n.key])throw new RangeError("Adding different instances of a keyed plugin ("+n.key+")");this.plugins.push(n),this.pluginsByKey[n.key]=n,n.spec.state&&this.fields.push(new mc(n.key,n.spec.state,n))})}}class zl{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=t){let s=this.config.plugins[n];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],n=this.applyInner(e),s=null;for(;;){let l=!1;for(let c=0;c<this.config.plugins.length;c++){let u=this.config.plugins[c];if(u.spec.appendTransaction){let h=s?s[c].n:0,m=s?s[c].state:this,p=h<t.length&&u.spec.appendTransaction.call(u,h?t.slice(h):t,m,n);if(p&&n.filterTransaction(p,c)){if(p.setMeta("appendedTransaction",e),!s){s=[];for(let x=0;x<this.config.plugins.length;x++)s.push(x<c?{state:n,n:t.length}:{state:this,n:0})}t.push(p),n=n.applyInner(p),l=!0}s&&(s[c]={state:n,n:t.length})}}if(!l)return{state:n,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new zl(this.config),n=this.config.fields;for(let s=0;s<n.length;s++){let l=n[s];t[l.name]=l.apply(e,this[l.name],this,t)}return t}get tr(){return new OO(this)}static create(e){let t=new rp(e.doc?e.doc.type.schema:e.schema,e.plugins),n=new zl(t);for(let s=0;s<t.fields.length;s++)n[t.fields[s].name]=t.fields[s].init(e,n);return n}reconfigure(e){let t=new rp(this.schema,e.plugins),n=t.fields,s=new zl(t);for(let l=0;l<n.length;l++){let c=n[l].name;s[c]=this.hasOwnProperty(c)?this[c]:n[l].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(n=>n.toJSON())),e&&typeof e=="object")for(let n in e){if(n=="doc"||n=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[n],l=s.spec.state;l&&l.toJSON&&(t[n]=l.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,n){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new rp(e.schema,e.plugins),l=new zl(s);return s.fields.forEach(c=>{if(c.name=="doc")l.doc=Ds.fromJSON(e.schema,t.doc);else if(c.name=="selection")l.selection=Ue.fromJSON(l.doc,t.selection);else if(c.name=="storedMarks")t.storedMarks&&(l.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(n)for(let u in n){let h=n[u],m=h.spec.state;if(h.key==c.name&&m&&m.fromJSON&&Object.prototype.hasOwnProperty.call(t,u)){l[c.name]=m.fromJSON.call(h,e,t[u],l);return}}l[c.name]=c.init(e,l)}}),l}}function KN(r,e,t){for(let n in r){let s=r[n];s instanceof Function?s=s.bind(e):n=="handleDOMEvents"&&(s=KN(s,e,{})),t[n]=s}return t}class Ht{constructor(e){this.spec=e,this.props={},e.props&&KN(e.props,this,this.props),this.key=e.key?e.key.key:WN("plugin")}getState(e){return e[this.key]}}const np=Object.create(null);function WN(r){return r in np?r+"$"+ ++np[r]:(np[r]=0,r+"$")}class fr{constructor(e="key"){this.key=WN(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const vr=function(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e},Xl=function(r){let e=r.assignedSlot||r.parentNode;return e&&e.nodeType==11?e.host:e};let tg=null;const _a=function(r,e,t){let n=tg||(tg=document.createRange());return n.setEnd(r,t??r.nodeValue.length),n.setStart(r,e||0),n},zO=function(){tg=null},Lo=function(r,e,t,n){return t&&(Hw(r,e,t,n,-1)||Hw(r,e,t,n,1))},LO=/^(img|br|input|textarea|hr)$/i;function Hw(r,e,t,n,s){for(var l;;){if(r==t&&e==n)return!0;if(e==(s<0?0:Tn(r))){let c=r.parentNode;if(!c||c.nodeType!=1||Zc(r)||LO.test(r.nodeName)||r.contentEditable=="false")return!1;e=vr(r)+(s<0?0:1),r=c}else if(r.nodeType==1){let c=r.childNodes[e+(s<0?-1:0)];if(c.nodeType==1&&c.contentEditable=="false")if(!((l=c.pmViewDesc)===null||l===void 0)&&l.ignoreForSelection)e+=s;else return!1;else r=c,e=s<0?Tn(r):0}else return!1}}function Tn(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function BO(r,e){for(;;){if(r.nodeType==3&&e)return r;if(r.nodeType==1&&e>0){if(r.contentEditable=="false")return null;r=r.childNodes[e-1],e=Tn(r)}else if(r.parentNode&&!Zc(r))e=vr(r),r=r.parentNode;else return null}}function IO(r,e){for(;;){if(r.nodeType==3&&e<r.nodeValue.length)return r;if(r.nodeType==1&&e<r.childNodes.length){if(r.contentEditable=="false")return null;r=r.childNodes[e],e=0}else if(r.parentNode&&!Zc(r))e=vr(r)+1,r=r.parentNode;else return null}}function PO(r,e,t){for(let n=e==0,s=e==Tn(r);n||s;){if(r==t)return!0;let l=vr(r);if(r=r.parentNode,!r)return!1;n=n&&l==0,s=s&&l==Tn(r)}}function Zc(r){let e;for(let t=r;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==r||e.contentDOM==r)}const mh=function(r){return r.focusNode&&Lo(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)};function go(r,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=r,t.key=t.code=e,t}function _O(r){let e=r.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function HO(r,e,t){if(r.caretPositionFromPoint)try{let n=r.caretPositionFromPoint(e,t);if(n)return{node:n.offsetNode,offset:Math.min(Tn(n.offsetNode),n.offset)}}catch{}if(r.caretRangeFromPoint){let n=r.caretRangeFromPoint(e,t);if(n)return{node:n.startContainer,offset:Math.min(Tn(n.startContainer),n.startOffset)}}}const ha=typeof navigator<"u"?navigator:null,$w=typeof document<"u"?document:null,Ys=ha&&ha.userAgent||"",rg=/Edge\/(\d+)/.exec(Ys),XN=/MSIE \d/.exec(Ys),ng=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ys),Kr=!!(XN||ng||rg),Rs=XN?document.documentMode:ng?+ng[1]:rg?+rg[1]:0,Yn=!Kr&&/gecko\/(\d+)/i.test(Ys);Yn&&+(/Firefox\/(\d+)/.exec(Ys)||[0,0])[1];const ag=!Kr&&/Chrome\/(\d+)/.exec(Ys),Er=!!ag,QN=ag?+ag[1]:0,Br=!Kr&&!!ha&&/Apple Computer/.test(ha.vendor),Ql=Br&&(/Mobile\/\w+/.test(Ys)||!!ha&&ha.maxTouchPoints>2),Cn=Ql||(ha?/Mac/.test(ha.platform):!1),$O=ha?/Win/.test(ha.platform):!1,Ua=/Android \d/.test(Ys),ed=!!$w&&"webkitFontSmoothing"in $w.documentElement.style,UO=ed?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function VO(r){let e=r.defaultView&&r.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.documentElement.clientWidth,top:0,bottom:r.documentElement.clientHeight}}function za(r,e){return typeof r=="number"?r:r[e]}function FO(r){let e=r.getBoundingClientRect(),t=e.width/r.offsetWidth||1,n=e.height/r.offsetHeight||1;return{left:e.left,right:e.left+r.clientWidth*t,top:e.top,bottom:e.top+r.clientHeight*n}}function Uw(r,e,t){let n=r.someProp("scrollThreshold")||0,s=r.someProp("scrollMargin")||5,l=r.dom.ownerDocument;for(let c=t||r.dom;c;){if(c.nodeType!=1){c=Xl(c);continue}let u=c,h=u==l.body,m=h?VO(l):FO(u),p=0,x=0;if(e.top<m.top+za(n,"top")?x=-(m.top-e.top+za(s,"top")):e.bottom>m.bottom-za(n,"bottom")&&(x=e.bottom-e.top>m.bottom-m.top?e.top+za(s,"top")-m.top:e.bottom-m.bottom+za(s,"bottom")),e.left<m.left+za(n,"left")?p=-(m.left-e.left+za(s,"left")):e.right>m.right-za(n,"right")&&(p=e.right-m.right+za(s,"right")),p||x)if(h)l.defaultView.scrollBy(p,x);else{let v=u.scrollLeft,k=u.scrollTop;x&&(u.scrollTop+=x),p&&(u.scrollLeft+=p);let w=u.scrollLeft-v,S=u.scrollTop-k;e={left:e.left-w,top:e.top-S,right:e.right-w,bottom:e.bottom-S}}let b=h?"fixed":getComputedStyle(c).position;if(/^(fixed|sticky)$/.test(b))break;c=b=="absolute"?c.offsetParent:Xl(c)}}function YO(r){let e=r.dom.getBoundingClientRect(),t=Math.max(0,e.top),n,s;for(let l=(e.left+e.right)/2,c=t+1;c<Math.min(innerHeight,e.bottom);c+=5){let u=r.root.elementFromPoint(l,c);if(!u||u==r.dom||!r.dom.contains(u))continue;let h=u.getBoundingClientRect();if(h.top>=t-20){n=u,s=h.top;break}}return{refDOM:n,refTop:s,stack:JN(r.dom)}}function JN(r){let e=[],t=r.ownerDocument;for(let n=r;n&&(e.push({dom:n,top:n.scrollTop,left:n.scrollLeft}),r!=t);n=Xl(n));return e}function qO({refDOM:r,refTop:e,stack:t}){let n=r?r.getBoundingClientRect().top:0;ZN(t,n==0?0:n-e)}function ZN(r,e){for(let t=0;t<r.length;t++){let{dom:n,top:s,left:l}=r[t];n.scrollTop!=s+e&&(n.scrollTop=s+e),n.scrollLeft!=l&&(n.scrollLeft=l)}}let Tl=null;function GO(r){if(r.setActive)return r.setActive();if(Tl)return r.focus(Tl);let e=JN(r);r.focus(Tl==null?{get preventScroll(){return Tl={preventScroll:!0},!0}}:void 0),Tl||(Tl=!1,ZN(e,0))}function ej(r,e){let t,n=2e8,s,l=0,c=e.top,u=e.top,h,m;for(let p=r.firstChild,x=0;p;p=p.nextSibling,x++){let b;if(p.nodeType==1)b=p.getClientRects();else if(p.nodeType==3)b=_a(p).getClientRects();else continue;for(let v=0;v<b.length;v++){let k=b[v];if(k.top<=c&&k.bottom>=u){c=Math.max(k.bottom,c),u=Math.min(k.top,u);let w=k.left>e.left?k.left-e.left:k.right<e.left?e.left-k.right:0;if(w<n){t=p,n=w,s=w&&t.nodeType==3?{left:k.right<e.left?k.right:k.left,top:e.top}:e,p.nodeType==1&&w&&(l=x+(e.left>=(k.left+k.right)/2?1:0));continue}}else k.top>e.top&&!h&&k.left<=e.left&&k.right>=e.left&&(h=p,m={left:Math.max(k.left,Math.min(k.right,e.left)),top:k.top});!t&&(e.left>=k.right&&e.top>=k.top||e.left>=k.left&&e.top>=k.bottom)&&(l=x+1)}}return!t&&h&&(t=h,s=m,n=0),t&&t.nodeType==3?KO(t,s):!t||n&&t.nodeType==1?{node:r,offset:l}:ej(t,s)}function KO(r,e){let t=r.nodeValue.length,n=document.createRange();for(let s=0;s<t;s++){n.setEnd(r,s+1),n.setStart(r,s);let l=ws(n,1);if(l.top!=l.bottom&&ax(e,l))return{node:r,offset:s+(e.left>=(l.left+l.right)/2?1:0)}}return{node:r,offset:0}}function ax(r,e){return r.left>=e.left-1&&r.left<=e.right+1&&r.top>=e.top-1&&r.top<=e.bottom+1}function WO(r,e){let t=r.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<r.getBoundingClientRect().left?t:r}function XO(r,e,t){let{node:n,offset:s}=ej(e,t),l=-1;if(n.nodeType==1&&!n.firstChild){let c=n.getBoundingClientRect();l=c.left!=c.right&&t.left>(c.left+c.right)/2?1:-1}return r.docView.posFromDOM(n,s,l)}function QO(r,e,t,n){let s=-1;for(let l=e,c=!1;l!=r.dom;){let u=r.docView.nearestDesc(l,!0),h;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((h=u.dom.getBoundingClientRect()).width||h.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!c&&h.left>n.left||h.top>n.top?s=u.posBefore:(!c&&h.right<n.left||h.bottom<n.top)&&(s=u.posAfter),c=!0),!u.contentDOM&&s<0&&!u.node.isText))return(u.node.isBlock?n.top<(h.top+h.bottom)/2:n.left<(h.left+h.right)/2)?u.posBefore:u.posAfter;l=u.dom.parentNode}return s>-1?s:r.docView.posFromDOM(e,t,-1)}function tj(r,e,t){let n=r.childNodes.length;if(n&&t.top<t.bottom)for(let s=Math.max(0,Math.min(n-1,Math.floor(n*(e.top-t.top)/(t.bottom-t.top))-2)),l=s;;){let c=r.childNodes[l];if(c.nodeType==1){let u=c.getClientRects();for(let h=0;h<u.length;h++){let m=u[h];if(ax(e,m))return tj(c,e,m)}}if((l=(l+1)%n)==s)break}return r}function JO(r,e){let t=r.dom.ownerDocument,n,s=0,l=HO(t,e.left,e.top);l&&({node:n,offset:s}=l);let c=(r.root.elementFromPoint?r.root:t).elementFromPoint(e.left,e.top),u;if(!c||!r.dom.contains(c.nodeType!=1?c.parentNode:c)){let m=r.dom.getBoundingClientRect();if(!ax(e,m)||(c=tj(r.dom,e,m),!c))return null}if(Br)for(let m=c;n&&m;m=Xl(m))m.draggable&&(n=void 0);if(c=WO(c,e),n){if(Yn&&n.nodeType==1&&(s=Math.min(s,n.childNodes.length),s<n.childNodes.length)){let p=n.childNodes[s],x;p.nodeName=="IMG"&&(x=p.getBoundingClientRect()).right<=e.left&&x.bottom>e.top&&s++}let m;ed&&s&&n.nodeType==1&&(m=n.childNodes[s-1]).nodeType==1&&m.contentEditable=="false"&&m.getBoundingClientRect().top>=e.top&&s--,n==r.dom&&s==n.childNodes.length-1&&n.lastChild.nodeType==1&&e.top>n.lastChild.getBoundingClientRect().bottom?u=r.state.doc.content.size:(s==0||n.nodeType!=1||n.childNodes[s-1].nodeName!="BR")&&(u=QO(r,n,s,e))}u==null&&(u=XO(r,c,e));let h=r.docView.nearestDesc(c,!0);return{pos:u,inside:h?h.posAtStart-h.border:-1}}function Vw(r){return r.top<r.bottom||r.left<r.right}function ws(r,e){let t=r.getClientRects();if(t.length){let n=t[e<0?0:t.length-1];if(Vw(n))return n}return Array.prototype.find.call(t,Vw)||r.getBoundingClientRect()}const ZO=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function rj(r,e,t){let{node:n,offset:s,atom:l}=r.docView.domFromPos(e,t<0?-1:1),c=ed||Yn;if(n.nodeType==3)if(c&&(ZO.test(n.nodeValue)||(t<0?!s:s==n.nodeValue.length))){let h=ws(_a(n,s,s),t);if(Yn&&s&&/\s/.test(n.nodeValue[s-1])&&s<n.nodeValue.length){let m=ws(_a(n,s-1,s-1),-1);if(m.top==h.top){let p=ws(_a(n,s,s+1),-1);if(p.top!=h.top)return lc(p,p.left<m.left)}}return h}else{let h=s,m=s,p=t<0?1:-1;return t<0&&!s?(m++,p=-1):t>=0&&s==n.nodeValue.length?(h--,p=1):t<0?h--:m++,lc(ws(_a(n,h,m),p),p<0)}if(!r.state.doc.resolve(e-(l||0)).parent.inlineContent){if(l==null&&s&&(t<0||s==Tn(n))){let h=n.childNodes[s-1];if(h.nodeType==1)return ap(h.getBoundingClientRect(),!1)}if(l==null&&s<Tn(n)){let h=n.childNodes[s];if(h.nodeType==1)return ap(h.getBoundingClientRect(),!0)}return ap(n.getBoundingClientRect(),t>=0)}if(l==null&&s&&(t<0||s==Tn(n))){let h=n.childNodes[s-1],m=h.nodeType==3?_a(h,Tn(h)-(c?0:1)):h.nodeType==1&&(h.nodeName!="BR"||!h.nextSibling)?h:null;if(m)return lc(ws(m,1),!1)}if(l==null&&s<Tn(n)){let h=n.childNodes[s];for(;h.pmViewDesc&&h.pmViewDesc.ignoreForCoords;)h=h.nextSibling;let m=h?h.nodeType==3?_a(h,0,c?0:1):h.nodeType==1?h:null:null;if(m)return lc(ws(m,-1),!0)}return lc(ws(n.nodeType==3?_a(n):n,-t),t>=0)}function lc(r,e){if(r.width==0)return r;let t=e?r.left:r.right;return{top:r.top,bottom:r.bottom,left:t,right:t}}function ap(r,e){if(r.height==0)return r;let t=e?r.top:r.bottom;return{top:t,bottom:t,left:r.left,right:r.right}}function nj(r,e,t){let n=r.state,s=r.root.activeElement;n!=e&&r.updateState(e),s!=r.dom&&r.focus();try{return t()}finally{n!=e&&r.updateState(n),s!=r.dom&&s&&s.focus()}}function eR(r,e,t){let n=e.selection,s=t=="up"?n.$from:n.$to;return nj(r,e,()=>{let{node:l}=r.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let u=r.docView.nearestDesc(l,!0);if(!u)break;if(u.node.isBlock){l=u.contentDOM||u.dom;break}l=u.dom.parentNode}let c=rj(r,s.pos,1);for(let u=l.firstChild;u;u=u.nextSibling){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=_a(u,0,u.nodeValue.length).getClientRects();else continue;for(let m=0;m<h.length;m++){let p=h[m];if(p.bottom>p.top+1&&(t=="up"?c.top-p.top>(p.bottom-c.top)*2:p.bottom-c.bottom>(c.bottom-p.top)*2))return!1}}return!0})}const tR=/[\u0590-\u08ac]/;function rR(r,e,t){let{$head:n}=e.selection;if(!n.parent.isTextblock)return!1;let s=n.parentOffset,l=!s,c=s==n.parent.content.size,u=r.domSelection();return u?!tR.test(n.parent.textContent)||!u.modify?t=="left"||t=="backward"?l:c:nj(r,e,()=>{let{focusNode:h,focusOffset:m,anchorNode:p,anchorOffset:x}=r.domSelectionRange(),b=u.caretBidiLevel;u.modify("move",t,"character");let v=n.depth?r.docView.domAfterPos(n.before()):r.dom,{focusNode:k,focusOffset:w}=r.domSelectionRange(),S=k&&!v.contains(k.nodeType==1?k:k.parentNode)||h==k&&m==w;try{u.collapse(p,x),h&&(h!=p||m!=x)&&u.extend&&u.extend(h,m)}catch{}return b!=null&&(u.caretBidiLevel=b),S}):n.pos==n.start()||n.pos==n.end()}let Fw=null,Yw=null,qw=!1;function nR(r,e,t){return Fw==e&&Yw==t?qw:(Fw=e,Yw=t,qw=t=="up"||t=="down"?eR(r,e,t):rR(r,e,t))}const En=0,Gw=1,bo=2,ma=3;class td{constructor(e,t,n,s){this.parent=e,this.children=t,this.dom=n,this.contentDOM=s,this.dirty=En,n.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,n){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,n=this.posAtStart;;t++){let s=this.children[t];if(s==e)return n;n+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,n){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(n<0){let l,c;if(e==this.contentDOM)l=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.previousSibling}for(;l&&!((c=l.pmViewDesc)&&c.parent==this);)l=l.previousSibling;return l?this.posBeforeChild(c)+c.size:this.posAtStart}else{let l,c;if(e==this.contentDOM)l=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.nextSibling}for(;l&&!((c=l.pmViewDesc)&&c.parent==this);)l=l.nextSibling;return l?this.posBeforeChild(c):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>vr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let l=e;;l=l.parentNode){if(l==this.dom){s=!1;break}if(l.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let l=e;;l=l.parentNode){if(l==this.dom){s=!0;break}if(l.nextSibling)break}}return s??n>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let n=!0,s=e;s;s=s.parentNode){let l=this.getDesc(s),c;if(l&&(!t||l.node))if(n&&(c=l.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))n=!1;else return l}}getDesc(e){let t=e.pmViewDesc;for(let n=t;n;n=n.parent)if(n==this)return t}posFromDOM(e,t,n){for(let s=e;s;s=s.parentNode){let l=this.getDesc(s);if(l)return l.localPosFromDOM(e,t,n)}return-1}descAt(e){for(let t=0,n=0;t<this.children.length;t++){let s=this.children[t],l=n+s.size;if(n==e&&l!=n){for(;!s.border&&s.children.length;)for(let c=0;c<s.children.length;c++){let u=s.children[c];if(u.size){s=u;break}}return s}if(e<l)return s.descAt(e-n-s.border);n=l}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let n=0,s=0;for(let l=0;n<this.children.length;n++){let c=this.children[n],u=l+c.size;if(u>e||c instanceof sj){s=e-l;break}l=u}if(s)return this.children[n].domFromPos(s-this.children[n].border,t);for(let l;n&&!(l=this.children[n-1]).size&&l instanceof aj&&l.side>=0;n--);if(t<=0){let l,c=!0;for(;l=n?this.children[n-1]:null,!(!l||l.dom.parentNode==this.contentDOM);n--,c=!1);return l&&t&&c&&!l.border&&!l.domAtom?l.domFromPos(l.size,t):{node:this.contentDOM,offset:l?vr(l.dom)+1:0}}else{let l,c=!0;for(;l=n<this.children.length?this.children[n]:null,!(!l||l.dom.parentNode==this.contentDOM);n++,c=!1);return l&&c&&!l.border&&!l.domAtom?l.domFromPos(0,t):{node:this.contentDOM,offset:l?vr(l.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,n=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,l=-1;for(let c=n,u=0;;u++){let h=this.children[u],m=c+h.size;if(s==-1&&e<=m){let p=c+h.border;if(e>=p&&t<=m-h.border&&h.node&&h.contentDOM&&this.contentDOM.contains(h.contentDOM))return h.parseRange(e,t,p);e=c;for(let x=u;x>0;x--){let b=this.children[x-1];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(1)){s=vr(b.dom)+1;break}e-=b.size}s==-1&&(s=0)}if(s>-1&&(m>t||u==this.children.length-1)){t=m;for(let p=u+1;p<this.children.length;p++){let x=this.children[p];if(x.size&&x.dom.parentNode==this.contentDOM&&!x.emptyChildAt(-1)){l=vr(x.dom);break}t+=x.size}l==-1&&(l=this.contentDOM.childNodes.length);break}c=m}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:l}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:n}=this.domFromPos(e,0);if(t.nodeType!=1||n==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[n]}setSelection(e,t,n,s=!1){let l=Math.min(e,t),c=Math.max(e,t);for(let v=0,k=0;v<this.children.length;v++){let w=this.children[v],S=k+w.size;if(l>k&&c<S)return w.setSelection(e-k-w.border,t-k-w.border,n,s);k=S}let u=this.domFromPos(e,e?-1:1),h=t==e?u:this.domFromPos(t,t?-1:1),m=n.root.getSelection(),p=n.domSelectionRange(),x=!1;if((Yn||Br)&&e==t){let{node:v,offset:k}=u;if(v.nodeType==3){if(x=!!(k&&v.nodeValue[k-1]==`
`),x&&k==v.nodeValue.length)for(let w=v,S;w;w=w.parentNode){if(S=w.nextSibling){S.nodeName=="BR"&&(u=h={node:S.parentNode,offset:vr(S)+1});break}let N=w.pmViewDesc;if(N&&N.node&&N.node.isBlock)break}}else{let w=v.childNodes[k-1];x=w&&(w.nodeName=="BR"||w.contentEditable=="false")}}if(Yn&&p.focusNode&&p.focusNode!=h.node&&p.focusNode.nodeType==1){let v=p.focusNode.childNodes[p.focusOffset];v&&v.contentEditable=="false"&&(s=!0)}if(!(s||x&&Br)&&Lo(u.node,u.offset,p.anchorNode,p.anchorOffset)&&Lo(h.node,h.offset,p.focusNode,p.focusOffset))return;let b=!1;if((m.extend||e==t)&&!x){m.collapse(u.node,u.offset);try{e!=t&&m.extend(h.node,h.offset),b=!0}catch{}}if(!b){if(e>t){let k=u;u=h,h=k}let v=document.createRange();v.setEnd(h.node,h.offset),v.setStart(u.node,u.offset),m.removeAllRanges(),m.addRange(v)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let n=0,s=0;s<this.children.length;s++){let l=this.children[s],c=n+l.size;if(n==c?e<=c&&t>=n:e<c&&t>n){let u=n+l.border,h=c-l.border;if(e>=u&&t<=h){this.dirty=e==n||t==c?bo:Gw,e==u&&t==h&&(l.contentLost||l.dom.parentNode!=this.contentDOM)?l.dirty=ma:l.markDirty(e-u,t-u);return}else l.dirty=l.dom==l.contentDOM&&l.dom.parentNode==this.contentDOM&&!l.children.length?bo:ma}n=c}this.dirty=bo}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let n=e==1?bo:Gw;t.dirty<n&&(t.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class aj extends td{constructor(e,t,n,s){let l,c=t.type.toDOM;if(typeof c=="function"&&(c=c(n,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)})),!t.type.spec.raw){if(c.nodeType!=1){let u=document.createElement("span");u.appendChild(c),c=u}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=t,this.widget=t,l=this}matchesWidget(e){return this.dirty==En&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class aR extends td{constructor(e,t,n,s){super(e,[],t,null),this.textDOM=n,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Bo extends td{constructor(e,t,n,s,l){super(e,[],n,s),this.mark=t,this.spec=l}static create(e,t,n,s){let l=s.nodeViews[t.type.name],c=l&&l(t,s,n);return(!c||!c.dom)&&(c=Po.renderSpec(document,t.type.spec.toDOM(t,n),null,t.attrs)),new Bo(e,t,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&ma||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=ma&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=En){let n=this.parent;for(;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=En}}slice(e,t,n){let s=Bo.create(this.parent,this.mark,!0,n),l=this.children,c=this.size;t<c&&(l=og(l,t,c,n)),e>0&&(l=og(l,0,e,n));for(let u=0;u<l.length;u++)l[u].parent=s;return s.children=l,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class zs extends td{constructor(e,t,n,s,l,c,u,h,m){super(e,[],l,c),this.node=t,this.outerDeco=n,this.innerDeco=s,this.nodeDOM=u}static create(e,t,n,s,l,c){let u=l.nodeViews[t.type.name],h,m=u&&u(t,l,()=>{if(!h)return c;if(h.parent)return h.parent.posBeforeChild(h)},n,s),p=m&&m.dom,x=m&&m.contentDOM;if(t.isText){if(!p)p=document.createTextNode(t.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:x}=Po.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!x&&!t.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),t.type.spec.draggable&&(p.draggable=!0));let b=p;return p=ij(p,n,t),m?h=new sR(e,t,n,s,p,x||null,b,m,l,c+1):t.isText?new ph(e,t,n,s,p,b,l):new zs(e,t,n,s,p,x||null,b,l,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let n=this.children[t];if(this.dom.contains(n.dom.parentNode)){e.contentElement=n.dom.parentNode;break}}e.contentElement||(e.getContent=()=>re.empty)}return e}matchesNode(e,t,n){return this.dirty==En&&e.eq(this.node)&&uf(t,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let n=this.node.inlineContent,s=t,l=e.composing?this.localCompositionInfo(e,t):null,c=l&&l.pos>-1?l:null,u=l&&l.pos<0,h=new lR(this,c&&c.node,e);dR(this.node,this.innerDeco,(m,p,x)=>{m.spec.marks?h.syncToMarks(m.spec.marks,n,e):m.type.side>=0&&!x&&h.syncToMarks(p==this.node.childCount?kt.none:this.node.child(p).marks,n,e),h.placeWidget(m,e,s)},(m,p,x,b)=>{h.syncToMarks(m.marks,n,e);let v;h.findNodeMatch(m,p,x,b)||u&&e.state.selection.from>s&&e.state.selection.to<s+m.nodeSize&&(v=h.findIndexWithChild(l.node))>-1&&h.updateNodeAt(m,p,x,v,e)||h.updateNextNode(m,p,x,e,b,s)||h.addNode(m,p,x,e,s),s+=m.nodeSize}),h.syncToMarks([],n,e),this.node.isTextblock&&h.addTextblockHacks(),h.destroyRest(),(h.changed||this.dirty==bo)&&(c&&this.protectLocalComposition(e,c),oj(this.contentDOM,this.children,e),Ql&&uR(this.dom))}localCompositionInfo(e,t){let{from:n,to:s}=e.state.selection;if(!(e.state.selection instanceof He)||n<t||s>t+this.node.content.size)return null;let l=e.input.compositionNode;if(!l||!this.dom.contains(l.parentNode))return null;if(this.node.inlineContent){let c=l.nodeValue,u=fR(this.node.content,c,n-t,s-t);return u<0?null:{node:l,pos:u,text:c}}else return{node:l,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:n,text:s}){if(this.getDesc(t))return;let l=t;for(;l.parentNode!=this.contentDOM;l=l.parentNode){for(;l.previousSibling;)l.parentNode.removeChild(l.previousSibling);for(;l.nextSibling;)l.parentNode.removeChild(l.nextSibling);l.pmViewDesc&&(l.pmViewDesc=void 0)}let c=new aR(this,l,t,s);e.input.compositionNodes.push(c),this.children=og(this.children,n,n+s.length,e,c)}update(e,t,n,s){return this.dirty==ma||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,n,s),!0)}updateInner(e,t,n,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=n,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=En}updateOuterDeco(e){if(uf(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,n=this.dom;this.dom=lj(this.dom,this.nodeDOM,sg(this.outerDeco,this.node,t),sg(e,this.node,t)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Kw(r,e,t,n,s){ij(n,e,r);let l=new zs(void 0,r,e,t,n,n,n,s,0);return l.contentDOM&&l.updateChildren(s,0),l}class ph extends zs{constructor(e,t,n,s,l,c,u){super(e,t,n,s,l,null,c,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,n,s){return this.dirty==ma||this.dirty!=En&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=En||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=En,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,n){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,n)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,n){let s=this.node.cut(e,t),l=document.createTextNode(s.text);return new ph(this.parent,s,this.outerDeco,this.innerDeco,l,l,n)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=ma)}get domAtom(){return!1}isText(e){return this.node.text==e}}class sj extends td{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==En&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class sR extends zs{constructor(e,t,n,s,l,c,u,h,m,p){super(e,t,n,s,l,c,u,m,p),this.spec=h}update(e,t,n,s){if(this.dirty==ma)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let l=this.spec.update(e,t,n);return l&&this.updateInner(e,t,n,s),l}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,n,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,n,s){this.spec.setSelection?this.spec.setSelection(e,t,n.root):super.setSelection(e,t,n,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function oj(r,e,t){let n=r.firstChild,s=!1;for(let l=0;l<e.length;l++){let c=e[l],u=c.dom;if(u.parentNode==r){for(;u!=n;)n=Ww(n),s=!0;n=n.nextSibling}else s=!0,r.insertBefore(u,n);if(c instanceof Bo){let h=n?n.previousSibling:r.lastChild;oj(c.contentDOM,c.children,t),n=h?h.nextSibling:r.firstChild}}for(;n;)n=Ww(n),s=!0;s&&t.trackWrites==r&&(t.trackWrites=null)}const Nc=function(r){r&&(this.nodeName=r)};Nc.prototype=Object.create(null);const yo=[new Nc];function sg(r,e,t){if(r.length==0)return yo;let n=t?yo[0]:new Nc,s=[n];for(let l=0;l<r.length;l++){let c=r[l].type.attrs;if(c){c.nodeName&&s.push(n=new Nc(c.nodeName));for(let u in c){let h=c[u];h!=null&&(t&&s.length==1&&s.push(n=new Nc(e.isInline?"span":"div")),u=="class"?n.class=(n.class?n.class+" ":"")+h:u=="style"?n.style=(n.style?n.style+";":"")+h:u!="nodeName"&&(n[u]=h))}}}return s}function lj(r,e,t,n){if(t==yo&&n==yo)return e;let s=e;for(let l=0;l<n.length;l++){let c=n[l],u=t[l];if(l){let h;u&&u.nodeName==c.nodeName&&s!=r&&(h=s.parentNode)&&h.nodeName.toLowerCase()==c.nodeName||(h=document.createElement(c.nodeName),h.pmIsDeco=!0,h.appendChild(s),u=yo[0]),s=h}oR(s,u||yo[0],c)}return s}function oR(r,e,t){for(let n in e)n!="class"&&n!="style"&&n!="nodeName"&&!(n in t)&&r.removeAttribute(n);for(let n in t)n!="class"&&n!="style"&&n!="nodeName"&&t[n]!=e[n]&&r.setAttribute(n,t[n]);if(e.class!=t.class){let n=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let l=0;l<n.length;l++)s.indexOf(n[l])==-1&&r.classList.remove(n[l]);for(let l=0;l<s.length;l++)n.indexOf(s[l])==-1&&r.classList.add(s[l]);r.classList.length==0&&r.removeAttribute("class")}if(e.style!=t.style){if(e.style){let n=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=n.exec(e.style);)r.style.removeProperty(s[1])}t.style&&(r.style.cssText+=t.style)}}function ij(r,e,t){return lj(r,r,yo,sg(e,t,r.nodeType!=1))}function uf(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].type.eq(e[t].type))return!1;return!0}function Ww(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class lR{constructor(e,t,n){this.lock=t,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=iR(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let n=e;n<t;n++)this.top.children[n].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,n){let s=0,l=this.stack.length>>1,c=Math.min(l,e.length);for(;s<c&&(s==l-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<l;)this.destroyRest(),this.top.dirty=En,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let u=-1;for(let h=this.index;h<Math.min(this.index+3,this.top.children.length);h++){let m=this.top.children[h];if(m.matchesMark(e[l])&&!this.isLocked(m.dom)){u=h;break}}if(u>-1)u>this.index&&(this.changed=!0,this.destroyBetween(this.index,u)),this.top=this.top.children[this.index];else{let h=Bo.create(this.top,e[l],t,n);this.top.children.splice(this.index,0,h),this.top=h,this.changed=!0}this.index=0,l++}}findNodeMatch(e,t,n,s){let l=-1,c;if(s>=this.preMatch.index&&(c=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&c.matchesNode(e,t,n))l=this.top.children.indexOf(c,this.index);else for(let u=this.index,h=Math.min(this.top.children.length,u+5);u<h;u++){let m=this.top.children[u];if(m.matchesNode(e,t,n)&&!this.preMatch.matched.has(m)){l=u;break}}return l<0?!1:(this.destroyBetween(this.index,l),this.index++,!0)}updateNodeAt(e,t,n,s,l){let c=this.top.children[s];return c.dirty==ma&&c.dom==c.contentDOM&&(c.dirty=bo),c.update(e,t,n,l)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let n=e.pmViewDesc;if(n){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==n)return s}return-1}e=t}}updateNextNode(e,t,n,s,l,c){for(let u=this.index;u<this.top.children.length;u++){let h=this.top.children[u];if(h instanceof zs){let m=this.preMatch.matched.get(h);if(m!=null&&m!=l)return!1;let p=h.dom,x,b=this.isLocked(p)&&!(e.isText&&h.node&&h.node.isText&&h.nodeDOM.nodeValue==e.text&&h.dirty!=ma&&uf(t,h.outerDeco));if(!b&&h.update(e,t,n,s))return this.destroyBetween(this.index,u),h.dom!=p&&(this.changed=!0),this.index++,!0;if(!b&&(x=this.recreateWrapper(h,e,t,n,s,c)))return this.destroyBetween(this.index,u),this.top.children[this.index]=x,x.contentDOM&&(x.dirty=bo,x.updateChildren(s,c+1),x.dirty=En),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,n,s,l,c){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!uf(n,e.outerDeco)||!s.eq(e.innerDeco))return null;let u=zs.create(this.top,t,n,s,l,c);if(u.contentDOM){u.children=e.children,e.children=[];for(let h of u.children)h.parent=u}return e.destroy(),u}addNode(e,t,n,s,l){let c=zs.create(this.top,e,t,n,s,l);c.contentDOM&&c.updateChildren(s,l+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,t,n){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let l=new aj(this.top,e,t,n);this.top.children.splice(this.index++,0,l),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof Bo;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof ph)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Br||Er)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let n=document.createElement(e);e=="IMG"&&(n.className="ProseMirror-separator",n.alt=""),e=="BR"&&(n.className="ProseMirror-trailingBreak");let s=new sj(this.top,[],n,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function iR(r,e){let t=e,n=t.children.length,s=r.childCount,l=new Map,c=[];e:for(;s>0;){let u;for(;;)if(n){let m=t.children[n-1];if(m instanceof Bo)t=m,n=m.children.length;else{u=m,n--;break}}else{if(t==e)break e;n=t.parent.children.indexOf(t),t=t.parent}let h=u.node;if(h){if(h!=r.child(s-1))break;--s,l.set(u,s),c.push(u)}}return{index:s,matched:l,matches:c.reverse()}}function cR(r,e){return r.type.side-e.type.side}function dR(r,e,t,n){let s=e.locals(r),l=0;if(s.length==0){for(let m=0;m<r.childCount;m++){let p=r.child(m);n(p,s,e.forChild(l,p),m),l+=p.nodeSize}return}let c=0,u=[],h=null;for(let m=0;;){let p,x;for(;c<s.length&&s[c].to==l;){let S=s[c++];S.widget&&(p?(x||(x=[p])).push(S):p=S)}if(p)if(x){x.sort(cR);for(let S=0;S<x.length;S++)t(x[S],m,!!h)}else t(p,m,!!h);let b,v;if(h)v=-1,b=h,h=null;else if(m<r.childCount)v=m,b=r.child(m++);else break;for(let S=0;S<u.length;S++)u[S].to<=l&&u.splice(S--,1);for(;c<s.length&&s[c].from<=l&&s[c].to>l;)u.push(s[c++]);let k=l+b.nodeSize;if(b.isText){let S=k;c<s.length&&s[c].from<S&&(S=s[c].from);for(let N=0;N<u.length;N++)u[N].to<S&&(S=u[N].to);S<k&&(h=b.cut(S-l),b=b.cut(0,S-l),k=S,v=-1)}else for(;c<s.length&&s[c].to<k;)c++;let w=b.isInline&&!b.isLeaf?u.filter(S=>!S.inline):u.slice();n(b,w,e.forChild(l,b),v),l=k}}function uR(r){if(r.nodeName=="UL"||r.nodeName=="OL"){let e=r.style.cssText;r.style.cssText=e+"; list-style: square !important",window.getComputedStyle(r).listStyle,r.style.cssText=e}}function fR(r,e,t,n){for(let s=0,l=0;s<r.childCount&&l<=n;){let c=r.child(s++),u=l;if(l+=c.nodeSize,!c.isText)continue;let h=c.text;for(;s<r.childCount;){let m=r.child(s++);if(l+=m.nodeSize,!m.isText)break;h+=m.text}if(l>=t){if(l>=n&&h.slice(n-e.length-u,n-u)==e)return n-e.length;let m=u<n?h.lastIndexOf(e,n-u-1):-1;if(m>=0&&m+e.length+u>=t)return u+m;if(t==n&&h.length>=n+e.length-u&&h.slice(n-u,n-u+e.length)==e)return n}}return-1}function og(r,e,t,n,s){let l=[];for(let c=0,u=0;c<r.length;c++){let h=r[c],m=u,p=u+=h.size;m>=t||p<=e?l.push(h):(m<e&&l.push(h.slice(0,e-m,n)),s&&(l.push(s),s=void 0),p>t&&l.push(h.slice(t-m,h.size,n)))}return l}function sx(r,e=null){let t=r.domSelectionRange(),n=r.state.doc;if(!t.focusNode)return null;let s=r.docView.nearestDesc(t.focusNode),l=s&&s.size==0,c=r.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(c<0)return null;let u=n.resolve(c),h,m;if(mh(t)){for(h=c;s&&!s.node;)s=s.parent;let x=s.node;if(s&&x.isAtom&&Re.isSelectable(x)&&s.parent&&!(x.isInline&&PO(t.focusNode,t.focusOffset,s.dom))){let b=s.posBefore;m=new Re(c==b?u:n.resolve(b))}}else{if(t instanceof r.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let x=c,b=c;for(let v=0;v<t.rangeCount;v++){let k=t.getRangeAt(v);x=Math.min(x,r.docView.posFromDOM(k.startContainer,k.startOffset,1)),b=Math.max(b,r.docView.posFromDOM(k.endContainer,k.endOffset,-1))}if(x<0)return null;[h,c]=b==r.state.selection.anchor?[b,x]:[x,b],u=n.resolve(c)}else h=r.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(h<0)return null}let p=n.resolve(h);if(!m){let x=e=="pointer"||r.state.selection.head<u.pos&&!l?1:-1;m=ox(r,p,u,x)}return m}function cj(r){return r.editable?r.hasFocus():uj(r)&&document.activeElement&&document.activeElement.contains(r.dom)}function Fa(r,e=!1){let t=r.state.selection;if(dj(r,t),!!cj(r)){if(!e&&r.input.mouseDown&&r.input.mouseDown.allowDefault&&Er){let n=r.domSelectionRange(),s=r.domObserver.currentSelection;if(n.anchorNode&&s.anchorNode&&Lo(n.anchorNode,n.anchorOffset,s.anchorNode,s.anchorOffset)){r.input.mouseDown.delayedSelectionSync=!0,r.domObserver.setCurSelection();return}}if(r.domObserver.disconnectSelection(),r.cursorWrapper)mR(r);else{let{anchor:n,head:s}=t,l,c;Xw&&!(t instanceof He)&&(t.$from.parent.inlineContent||(l=Qw(r,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(c=Qw(r,t.to))),r.docView.setSelection(n,s,r,e),Xw&&(l&&Jw(l),c&&Jw(c)),t.visible?r.dom.classList.remove("ProseMirror-hideselection"):(r.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&hR(r))}r.domObserver.setCurSelection(),r.domObserver.connectSelection()}}const Xw=Br||Er&&QN<63;function Qw(r,e){let{node:t,offset:n}=r.docView.domFromPos(e,0),s=n<t.childNodes.length?t.childNodes[n]:null,l=n?t.childNodes[n-1]:null;if(Br&&s&&s.contentEditable=="false")return sp(s);if((!s||s.contentEditable=="false")&&(!l||l.contentEditable=="false")){if(s)return sp(s);if(l)return sp(l)}}function sp(r){return r.contentEditable="true",Br&&r.draggable&&(r.draggable=!1,r.wasDraggable=!0),r}function Jw(r){r.contentEditable="false",r.wasDraggable&&(r.draggable=!0,r.wasDraggable=null)}function hR(r){let e=r.dom.ownerDocument;e.removeEventListener("selectionchange",r.input.hideSelectionGuard);let t=r.domSelectionRange(),n=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",r.input.hideSelectionGuard=()=>{(t.anchorNode!=n||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",r.input.hideSelectionGuard),setTimeout(()=>{(!cj(r)||r.state.selection.visible)&&r.dom.classList.remove("ProseMirror-hideselection")},20))})}function mR(r){let e=r.domSelection(),t=document.createRange();if(!e)return;let n=r.cursorWrapper.dom,s=n.nodeName=="IMG";s?t.setStart(n.parentNode,vr(n)+1):t.setStart(n,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!s&&!r.state.selection.visible&&Kr&&Rs<=11&&(n.disabled=!0,n.disabled=!1)}function dj(r,e){if(e instanceof Re){let t=r.docView.descAt(e.from);t!=r.lastSelectedViewDesc&&(Zw(r),t&&t.selectNode(),r.lastSelectedViewDesc=t)}else Zw(r)}function Zw(r){r.lastSelectedViewDesc&&(r.lastSelectedViewDesc.parent&&r.lastSelectedViewDesc.deselectNode(),r.lastSelectedViewDesc=void 0)}function ox(r,e,t,n){return r.someProp("createSelectionBetween",s=>s(r,e,t))||He.between(e,t,n)}function e1(r){return r.editable&&!r.hasFocus()?!1:uj(r)}function uj(r){let e=r.domSelectionRange();if(!e.anchorNode)return!1;try{return r.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(r.editable||r.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function pR(r){let e=r.docView.domFromPos(r.state.selection.anchor,0),t=r.domSelectionRange();return Lo(e.node,e.offset,t.anchorNode,t.anchorOffset)}function lg(r,e){let{$anchor:t,$head:n}=r.selection,s=e>0?t.max(n):t.min(n),l=s.parent.inlineContent?s.depth?r.doc.resolve(e>0?s.after():s.before()):null:s;return l&&Ue.findFrom(l,e)}function Ss(r,e){return r.dispatch(r.state.tr.setSelection(e).scrollIntoView()),!0}function t1(r,e,t){let n=r.state.selection;if(n instanceof He)if(t.indexOf("s")>-1){let{$head:s}=n,l=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!l||l.isText||!l.isLeaf)return!1;let c=r.state.doc.resolve(s.pos+l.nodeSize*(e<0?-1:1));return Ss(r,new He(n.$anchor,c))}else if(n.empty){if(r.endOfTextblock(e>0?"forward":"backward")){let s=lg(r.state,e);return s&&s instanceof Re?Ss(r,s):!1}else if(!(Cn&&t.indexOf("m")>-1)){let s=n.$head,l=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,c;if(!l||l.isText)return!1;let u=e<0?s.pos-l.nodeSize:s.pos;return l.isAtom||(c=r.docView.descAt(u))&&!c.contentDOM?Re.isSelectable(l)?Ss(r,new Re(e<0?r.state.doc.resolve(s.pos-l.nodeSize):s)):ed?Ss(r,new He(r.state.doc.resolve(e<0?u:u+l.nodeSize))):!1:!1}}else return!1;else{if(n instanceof Re&&n.node.isInline)return Ss(r,new He(e>0?n.$to:n.$from));{let s=lg(r.state,e);return s?Ss(r,s):!1}}}function ff(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function jc(r,e){let t=r.pmViewDesc;return t&&t.size==0&&(e<0||r.nextSibling||r.nodeName!="BR")}function Ml(r,e){return e<0?gR(r):xR(r)}function gR(r){let e=r.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(!t)return;let s,l,c=!1;for(Yn&&t.nodeType==1&&n<ff(t)&&jc(t.childNodes[n],-1)&&(c=!0);;)if(n>0){if(t.nodeType!=1)break;{let u=t.childNodes[n-1];if(jc(u,-1))s=t,l=--n;else if(u.nodeType==3)t=u,n=t.nodeValue.length;else break}}else{if(fj(t))break;{let u=t.previousSibling;for(;u&&jc(u,-1);)s=t.parentNode,l=vr(u),u=u.previousSibling;if(u)t=u,n=ff(t);else{if(t=t.parentNode,t==r.dom)break;n=0}}}c?ig(r,t,n):s&&ig(r,s,l)}function xR(r){let e=r.domSelectionRange(),t=e.focusNode,n=e.focusOffset;if(!t)return;let s=ff(t),l,c;for(;;)if(n<s){if(t.nodeType!=1)break;let u=t.childNodes[n];if(jc(u,1))l=t,c=++n;else break}else{if(fj(t))break;{let u=t.nextSibling;for(;u&&jc(u,1);)l=u.parentNode,c=vr(u)+1,u=u.nextSibling;if(u)t=u,n=0,s=ff(t);else{if(t=t.parentNode,t==r.dom)break;n=s=0}}}l&&ig(r,l,c)}function fj(r){let e=r.pmViewDesc;return e&&e.node&&e.node.isBlock}function bR(r,e){for(;r&&e==r.childNodes.length&&!Zc(r);)e=vr(r)+1,r=r.parentNode;for(;r&&e<r.childNodes.length;){let t=r.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;r=t,e=0}}function yR(r,e){for(;r&&!e&&!Zc(r);)e=vr(r),r=r.parentNode;for(;r&&e;){let t=r.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;r=t,e=r.childNodes.length}}function ig(r,e,t){if(e.nodeType!=3){let l,c;(c=bR(e,t))?(e=c,t=0):(l=yR(e,t))&&(e=l,t=l.nodeValue.length)}let n=r.domSelection();if(!n)return;if(mh(n)){let l=document.createRange();l.setEnd(e,t),l.setStart(e,t),n.removeAllRanges(),n.addRange(l)}else n.extend&&n.extend(e,t);r.domObserver.setCurSelection();let{state:s}=r;setTimeout(()=>{r.state==s&&Fa(r)},50)}function r1(r,e){let t=r.state.doc.resolve(e);if(!(Er||$O)&&t.parent.inlineContent){let s=r.coordsAtPos(e);if(e>t.start()){let l=r.coordsAtPos(e-1),c=(l.top+l.bottom)/2;if(c>s.top&&c<s.bottom&&Math.abs(l.left-s.left)>1)return l.left<s.left?"ltr":"rtl"}if(e<t.end()){let l=r.coordsAtPos(e+1),c=(l.top+l.bottom)/2;if(c>s.top&&c<s.bottom&&Math.abs(l.left-s.left)>1)return l.left>s.left?"ltr":"rtl"}}return getComputedStyle(r.dom).direction=="rtl"?"rtl":"ltr"}function n1(r,e,t){let n=r.state.selection;if(n instanceof He&&!n.empty||t.indexOf("s")>-1||Cn&&t.indexOf("m")>-1)return!1;let{$from:s,$to:l}=n;if(!s.parent.inlineContent||r.endOfTextblock(e<0?"up":"down")){let c=lg(r.state,e);if(c&&c instanceof Re)return Ss(r,c)}if(!s.parent.inlineContent){let c=e<0?s:l,u=n instanceof un?Ue.near(c,e):Ue.findFrom(c,e);return u?Ss(r,u):!1}return!1}function a1(r,e){if(!(r.state.selection instanceof He))return!0;let{$head:t,$anchor:n,empty:s}=r.state.selection;if(!t.sameParent(n))return!0;if(!s)return!1;if(r.endOfTextblock(e>0?"forward":"backward"))return!0;let l=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(l&&!l.isText){let c=r.state.tr;return e<0?c.delete(t.pos-l.nodeSize,t.pos):c.delete(t.pos,t.pos+l.nodeSize),r.dispatch(c),!0}return!1}function s1(r,e,t){r.domObserver.stop(),e.contentEditable=t,r.domObserver.start()}function vR(r){if(!Br||r.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=r.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let n=e.firstChild;s1(r,n,"true"),setTimeout(()=>s1(r,n,"false"),20)}return!1}function kR(r){let e="";return r.ctrlKey&&(e+="c"),r.metaKey&&(e+="m"),r.altKey&&(e+="a"),r.shiftKey&&(e+="s"),e}function wR(r,e){let t=e.keyCode,n=kR(e);if(t==8||Cn&&t==72&&n=="c")return a1(r,-1)||Ml(r,-1);if(t==46&&!e.shiftKey||Cn&&t==68&&n=="c")return a1(r,1)||Ml(r,1);if(t==13||t==27)return!0;if(t==37||Cn&&t==66&&n=="c"){let s=t==37?r1(r,r.state.selection.from)=="ltr"?-1:1:-1;return t1(r,s,n)||Ml(r,s)}else if(t==39||Cn&&t==70&&n=="c"){let s=t==39?r1(r,r.state.selection.from)=="ltr"?1:-1:1;return t1(r,s,n)||Ml(r,s)}else{if(t==38||Cn&&t==80&&n=="c")return n1(r,-1,n)||Ml(r,-1);if(t==40||Cn&&t==78&&n=="c")return vR(r)||n1(r,1,n)||Ml(r,1);if(n==(Cn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function lx(r,e){r.someProp("transformCopied",v=>{e=v(e,r)});let t=[],{content:n,openStart:s,openEnd:l}=e;for(;s>1&&l>1&&n.childCount==1&&n.firstChild.childCount==1;){s--,l--;let v=n.firstChild;t.push(v.type.name,v.attrs!=v.type.defaultAttrs?v.attrs:null),n=v.content}let c=r.someProp("clipboardSerializer")||Po.fromSchema(r.state.schema),u=bj(),h=u.createElement("div");h.appendChild(c.serializeFragment(n,{document:u}));let m=h.firstChild,p,x=0;for(;m&&m.nodeType==1&&(p=xj[m.nodeName.toLowerCase()]);){for(let v=p.length-1;v>=0;v--){let k=u.createElement(p[v]);for(;h.firstChild;)k.appendChild(h.firstChild);h.appendChild(k),x++}m=h.firstChild}m&&m.nodeType==1&&m.setAttribute("data-pm-slice",`${s} ${l}${x?` -${x}`:""} ${JSON.stringify(t)}`);let b=r.someProp("clipboardTextSerializer",v=>v(e,r))||e.content.textBetween(0,e.content.size,`

`);return{dom:h,text:b,slice:e}}function hj(r,e,t,n,s){let l=s.parent.type.spec.code,c,u;if(!t&&!e)return null;let h=e&&(n||l||!t);if(h){if(r.someProp("transformPastedText",b=>{e=b(e,l||n,r)}),l)return e?new pe(re.from(r.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):pe.empty;let x=r.someProp("clipboardTextParser",b=>b(e,s,n,r));if(x)u=x;else{let b=s.marks(),{schema:v}=r.state,k=Po.fromSchema(v);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let S=c.appendChild(document.createElement("p"));w&&S.appendChild(k.serializeNode(v.text(w,b)))})}}else r.someProp("transformPastedHTML",x=>{t=x(t,r)}),c=CR(t),ed&&TR(c);let m=c&&c.querySelector("[data-pm-slice]"),p=m&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(m.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let x=+p[3];x>0;x--){let b=c.firstChild;for(;b&&b.nodeType!=1;)b=b.nextSibling;if(!b)break;c=b}if(u||(u=(r.someProp("clipboardParser")||r.someProp("domParser")||Os.fromSchema(r.state.schema)).parseSlice(c,{preserveWhitespace:!!(h||p),context:s,ruleFromNode(b){return b.nodeName=="BR"&&!b.nextSibling&&b.parentNode&&!SR.test(b.parentNode.nodeName)?{ignore:!0}:null}})),p)u=MR(o1(u,+p[1],+p[2]),p[4]);else if(u=pe.maxOpen(NR(u.content,s),!0),u.openStart||u.openEnd){let x=0,b=0;for(let v=u.content.firstChild;x<u.openStart&&!v.type.spec.isolating;x++,v=v.firstChild);for(let v=u.content.lastChild;b<u.openEnd&&!v.type.spec.isolating;b++,v=v.lastChild);u=o1(u,x,b)}return r.someProp("transformPasted",x=>{u=x(u,r)}),u}const SR=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function NR(r,e){if(r.childCount<2)return r;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),l,c=[];if(r.forEach(u=>{if(!c)return;let h=s.findWrapping(u.type),m;if(!h)return c=null;if(m=c.length&&l.length&&pj(h,l,u,c[c.length-1],0))c[c.length-1]=m;else{c.length&&(c[c.length-1]=gj(c[c.length-1],l.length));let p=mj(u,h);c.push(p),s=s.matchType(p.type),l=h}}),c)return re.from(c)}return r}function mj(r,e,t=0){for(let n=e.length-1;n>=t;n--)r=e[n].create(null,re.from(r));return r}function pj(r,e,t,n,s){if(s<r.length&&s<e.length&&r[s]==e[s]){let l=pj(r,e,t,n.lastChild,s+1);if(l)return n.copy(n.content.replaceChild(n.childCount-1,l));if(n.contentMatchAt(n.childCount).matchType(s==r.length-1?t.type:r[s+1]))return n.copy(n.content.append(re.from(mj(t,r,s+1))))}}function gj(r,e){if(e==0)return r;let t=r.content.replaceChild(r.childCount-1,gj(r.lastChild,e-1)),n=r.contentMatchAt(r.childCount).fillBefore(re.empty,!0);return r.copy(t.append(n))}function cg(r,e,t,n,s,l){let c=e<0?r.firstChild:r.lastChild,u=c.content;return r.childCount>1&&(l=0),s<n-1&&(u=cg(u,e,t,n,s+1,l)),s>=t&&(u=e<0?c.contentMatchAt(0).fillBefore(u,l<=s).append(u):u.append(c.contentMatchAt(c.childCount).fillBefore(re.empty,!0))),r.replaceChild(e<0?0:r.childCount-1,c.copy(u))}function o1(r,e,t){return e<r.openStart&&(r=new pe(cg(r.content,-1,e,r.openStart,0,r.openEnd),e,r.openEnd)),t<r.openEnd&&(r=new pe(cg(r.content,1,t,r.openEnd,0,0),r.openStart,t)),r}const xj={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let l1=null;function bj(){return l1||(l1=document.implementation.createHTMLDocument("title"))}let op=null;function jR(r){let e=window.trustedTypes;return e?(op||(op=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),op.createHTML(r)):r}function CR(r){let e=/^(\s*<meta [^>]*>)*/.exec(r);e&&(r=r.slice(e[0].length));let t=bj().createElement("div"),n=/<([a-z][^>\s]+)/i.exec(r),s;if((s=n&&xj[n[1].toLowerCase()])&&(r=s.map(l=>"<"+l+">").join("")+r+s.map(l=>"</"+l+">").reverse().join("")),t.innerHTML=jR(r),s)for(let l=0;l<s.length;l++)t=t.querySelector(s[l])||t;return t}function TR(r){let e=r.querySelectorAll(Er?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let n=e[t];n.childNodes.length==1&&n.textContent==""&&n.parentNode&&n.parentNode.replaceChild(r.ownerDocument.createTextNode(" "),n)}}function MR(r,e){if(!r.size)return r;let t=r.content.firstChild.type.schema,n;try{n=JSON.parse(e)}catch{return r}let{content:s,openStart:l,openEnd:c}=r;for(let u=n.length-2;u>=0;u-=2){let h=t.nodes[n[u]];if(!h||h.hasRequiredAttrs())break;s=re.from(h.create(n[u+1],s)),l++,c++}return new pe(s,l,c)}const Ir={},Pr={},ER={touchstart:!0,touchmove:!0};class AR{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function DR(r){for(let e in Ir){let t=Ir[e];r.dom.addEventListener(e,r.input.eventHandlers[e]=n=>{RR(r,n)&&!ix(r,n)&&(r.editable||!(n.type in Pr))&&t(r,n)},ER[e]?{passive:!0}:void 0)}Br&&r.dom.addEventListener("input",()=>null),dg(r)}function As(r,e){r.input.lastSelectionOrigin=e,r.input.lastSelectionTime=Date.now()}function OR(r){r.domObserver.stop();for(let e in r.input.eventHandlers)r.dom.removeEventListener(e,r.input.eventHandlers[e]);clearTimeout(r.input.composingTimeout),clearTimeout(r.input.lastIOSEnterFallbackTimeout)}function dg(r){r.someProp("handleDOMEvents",e=>{for(let t in e)r.input.eventHandlers[t]||r.dom.addEventListener(t,r.input.eventHandlers[t]=n=>ix(r,n))})}function ix(r,e){return r.someProp("handleDOMEvents",t=>{let n=t[e.type];return n?n(r,e)||e.defaultPrevented:!1})}function RR(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=r.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function zR(r,e){!ix(r,e)&&Ir[e.type]&&(r.editable||!(e.type in Pr))&&Ir[e.type](r,e)}Pr.keydown=(r,e)=>{let t=e;if(r.input.shiftKey=t.keyCode==16||t.shiftKey,!vj(r,t)&&(r.input.lastKeyCode=t.keyCode,r.input.lastKeyCodeTime=Date.now(),!(Ua&&Er&&t.keyCode==13)))if(t.keyCode!=229&&r.domObserver.forceFlush(),Ql&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let n=Date.now();r.input.lastIOSEnter=n,r.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{r.input.lastIOSEnter==n&&(r.someProp("handleKeyDown",s=>s(r,go(13,"Enter"))),r.input.lastIOSEnter=0)},200)}else r.someProp("handleKeyDown",n=>n(r,t))||wR(r,t)?t.preventDefault():As(r,"key")};Pr.keyup=(r,e)=>{e.keyCode==16&&(r.input.shiftKey=!1)};Pr.keypress=(r,e)=>{let t=e;if(vj(r,t)||!t.charCode||t.ctrlKey&&!t.altKey||Cn&&t.metaKey)return;if(r.someProp("handleKeyPress",s=>s(r,t))){t.preventDefault();return}let n=r.state.selection;if(!(n instanceof He)||!n.$from.sameParent(n.$to)){let s=String.fromCharCode(t.charCode),l=()=>r.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!r.someProp("handleTextInput",c=>c(r,n.$from.pos,n.$to.pos,s,l))&&r.dispatch(l()),t.preventDefault()}};function gh(r){return{left:r.clientX,top:r.clientY}}function LR(r,e){let t=e.x-r.clientX,n=e.y-r.clientY;return t*t+n*n<100}function cx(r,e,t,n,s){if(n==-1)return!1;let l=r.state.doc.resolve(n);for(let c=l.depth+1;c>0;c--)if(r.someProp(e,u=>c>l.depth?u(r,t,l.nodeAfter,l.before(c),s,!0):u(r,t,l.node(c),l.before(c),s,!1)))return!0;return!1}function Vl(r,e,t){if(r.focused||r.focus(),r.state.selection.eq(e))return;let n=r.state.tr.setSelection(e);n.setMeta("pointer",!0),r.dispatch(n)}function BR(r,e){if(e==-1)return!1;let t=r.state.doc.resolve(e),n=t.nodeAfter;return n&&n.isAtom&&Re.isSelectable(n)?(Vl(r,new Re(t)),!0):!1}function IR(r,e){if(e==-1)return!1;let t=r.state.selection,n,s;t instanceof Re&&(n=t.node);let l=r.state.doc.resolve(e);for(let c=l.depth+1;c>0;c--){let u=c>l.depth?l.nodeAfter:l.node(c);if(Re.isSelectable(u)){n&&t.$from.depth>0&&c>=t.$from.depth&&l.before(t.$from.depth+1)==t.$from.pos?s=l.before(t.$from.depth):s=l.before(c);break}}return s!=null?(Vl(r,Re.create(r.state.doc,s)),!0):!1}function PR(r,e,t,n,s){return cx(r,"handleClickOn",e,t,n)||r.someProp("handleClick",l=>l(r,e,n))||(s?IR(r,t):BR(r,t))}function _R(r,e,t,n){return cx(r,"handleDoubleClickOn",e,t,n)||r.someProp("handleDoubleClick",s=>s(r,e,n))}function HR(r,e,t,n){return cx(r,"handleTripleClickOn",e,t,n)||r.someProp("handleTripleClick",s=>s(r,e,n))||$R(r,t,n)}function $R(r,e,t){if(t.button!=0)return!1;let n=r.state.doc;if(e==-1)return n.inlineContent?(Vl(r,He.create(n,0,n.content.size)),!0):!1;let s=n.resolve(e);for(let l=s.depth+1;l>0;l--){let c=l>s.depth?s.nodeAfter:s.node(l),u=s.before(l);if(c.inlineContent)Vl(r,He.create(n,u+1,u+1+c.content.size));else if(Re.isSelectable(c))Vl(r,Re.create(n,u));else continue;return!0}}function dx(r){return hf(r)}const yj=Cn?"metaKey":"ctrlKey";Ir.mousedown=(r,e)=>{let t=e;r.input.shiftKey=t.shiftKey;let n=dx(r),s=Date.now(),l="singleClick";s-r.input.lastClick.time<500&&LR(t,r.input.lastClick)&&!t[yj]&&r.input.lastClick.button==t.button&&(r.input.lastClick.type=="singleClick"?l="doubleClick":r.input.lastClick.type=="doubleClick"&&(l="tripleClick")),r.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:l,button:t.button};let c=r.posAtCoords(gh(t));c&&(l=="singleClick"?(r.input.mouseDown&&r.input.mouseDown.done(),r.input.mouseDown=new UR(r,c,t,!!n)):(l=="doubleClick"?_R:HR)(r,c.pos,c.inside,t)?t.preventDefault():As(r,"pointer"))};class UR{constructor(e,t,n,s){this.view=e,this.pos=t,this.event=n,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!n[yj],this.allowDefault=n.shiftKey;let l,c;if(t.inside>-1)l=e.state.doc.nodeAt(t.inside),c=t.inside;else{let p=e.state.doc.resolve(t.pos);l=p.parent,c=p.depth?p.before():0}const u=s?null:n.target,h=u?e.docView.nearestDesc(u,!0):null;this.target=h&&h.dom.nodeType==1?h.dom:null;let{selection:m}=e.state;(n.button==0&&l.type.spec.draggable&&l.type.spec.selectable!==!1||m instanceof Re&&m.from<=c&&m.to>c)&&(this.mightDrag={node:l,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Yn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),As(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Fa(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(gh(e))),this.updateAllowDefault(e),this.allowDefault||!t?As(this.view,"pointer"):PR(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Br&&this.mightDrag&&!this.mightDrag.node.isAtom||Er&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(Vl(this.view,Ue.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):As(this.view,"pointer")}move(e){this.updateAllowDefault(e),As(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ir.touchstart=r=>{r.input.lastTouch=Date.now(),dx(r),As(r,"pointer")};Ir.touchmove=r=>{r.input.lastTouch=Date.now(),As(r,"pointer")};Ir.contextmenu=r=>dx(r);function vj(r,e){return r.composing?!0:Br&&Math.abs(e.timeStamp-r.input.compositionEndedAt)<500?(r.input.compositionEndedAt=-2e8,!0):!1}const VR=Ua?5e3:-1;Pr.compositionstart=Pr.compositionupdate=r=>{if(!r.composing){r.domObserver.flush();let{state:e}=r,t=e.selection.$to;if(e.selection instanceof He&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(n=>n.type.spec.inclusive===!1)))r.markCursor=r.state.storedMarks||t.marks(),hf(r,!0),r.markCursor=null;else if(hf(r,!e.selection.empty),Yn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let n=r.domSelectionRange();for(let s=n.focusNode,l=n.focusOffset;s&&s.nodeType==1&&l!=0;){let c=l<0?s.lastChild:s.childNodes[l-1];if(!c)break;if(c.nodeType==3){let u=r.domSelection();u&&u.collapse(c,c.nodeValue.length);break}else s=c,l=-1}}r.input.composing=!0}kj(r,VR)};Pr.compositionend=(r,e)=>{r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=e.timeStamp,r.input.compositionPendingChanges=r.domObserver.pendingRecords().length?r.input.compositionID:0,r.input.compositionNode=null,r.input.compositionPendingChanges&&Promise.resolve().then(()=>r.domObserver.flush()),r.input.compositionID++,kj(r,20))};function kj(r,e){clearTimeout(r.input.composingTimeout),e>-1&&(r.input.composingTimeout=setTimeout(()=>hf(r),e))}function wj(r){for(r.composing&&(r.input.composing=!1,r.input.compositionEndedAt=YR());r.input.compositionNodes.length>0;)r.input.compositionNodes.pop().markParentsDirty()}function FR(r){let e=r.domSelectionRange();if(!e.focusNode)return null;let t=BO(e.focusNode,e.focusOffset),n=IO(e.focusNode,e.focusOffset);if(t&&n&&t!=n){let s=n.pmViewDesc,l=r.domObserver.lastChangedTextNode;if(t==l||n==l)return l;if(!s||!s.isText(n.nodeValue))return n;if(r.input.compositionNode==n){let c=t.pmViewDesc;if(!(!c||!c.isText(t.nodeValue)))return n}}return t||n}function YR(){let r=document.createEvent("Event");return r.initEvent("event",!0,!0),r.timeStamp}function hf(r,e=!1){if(!(Ua&&r.domObserver.flushingSoon>=0)){if(r.domObserver.forceFlush(),wj(r),e||r.docView&&r.docView.dirty){let t=sx(r),n=r.state.selection;return t&&!t.eq(n)?r.dispatch(r.state.tr.setSelection(t)):(r.markCursor||e)&&!n.$from.node(n.$from.sharedDepth(n.to)).inlineContent?r.dispatch(r.state.tr.deleteSelection()):r.updateState(r.state),!0}return!1}}function qR(r,e){if(!r.dom.parentNode)return;let t=r.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let n=getSelection(),s=document.createRange();s.selectNodeContents(e),r.dom.blur(),n.removeAllRanges(),n.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),r.focus()},50)}const Fc=Kr&&Rs<15||Ql&&UO<604;Ir.copy=Pr.cut=(r,e)=>{let t=e,n=r.state.selection,s=t.type=="cut";if(n.empty)return;let l=Fc?null:t.clipboardData,c=n.content(),{dom:u,text:h}=lx(r,c);l?(t.preventDefault(),l.clearData(),l.setData("text/html",u.innerHTML),l.setData("text/plain",h)):qR(r,u),s&&r.dispatch(r.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function GR(r){return r.openStart==0&&r.openEnd==0&&r.content.childCount==1?r.content.firstChild:null}function KR(r,e){if(!r.dom.parentNode)return;let t=r.input.shiftKey||r.state.selection.$from.parent.type.spec.code,n=r.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(n.contentEditable="true"),n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus();let s=r.input.shiftKey&&r.input.lastKeyCode!=45;setTimeout(()=>{r.focus(),n.parentNode&&n.parentNode.removeChild(n),t?Yc(r,n.value,null,s,e):Yc(r,n.textContent,n.innerHTML,s,e)},50)}function Yc(r,e,t,n,s){let l=hj(r,e,t,n,r.state.selection.$from);if(r.someProp("handlePaste",h=>h(r,s,l||pe.empty)))return!0;if(!l)return!1;let c=GR(l),u=c?r.state.tr.replaceSelectionWith(c,n):r.state.tr.replaceSelection(l);return r.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Sj(r){let e=r.getData("text/plain")||r.getData("Text");if(e)return e;let t=r.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Pr.paste=(r,e)=>{let t=e;if(r.composing&&!Ua)return;let n=Fc?null:t.clipboardData,s=r.input.shiftKey&&r.input.lastKeyCode!=45;n&&Yc(r,Sj(n),n.getData("text/html"),s,t)?t.preventDefault():KR(r,t)};class Nj{constructor(e,t,n){this.slice=e,this.move=t,this.node=n}}const WR=Cn?"altKey":"ctrlKey";function jj(r,e){let t=r.someProp("dragCopies",n=>!n(e));return t??!e[WR]}Ir.dragstart=(r,e)=>{let t=e,n=r.input.mouseDown;if(n&&n.done(),!t.dataTransfer)return;let s=r.state.selection,l=s.empty?null:r.posAtCoords(gh(t)),c;if(!(l&&l.pos>=s.from&&l.pos<=(s instanceof Re?s.to-1:s.to))){if(n&&n.mightDrag)c=Re.create(r.state.doc,n.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let x=r.docView.nearestDesc(t.target,!0);x&&x.node.type.spec.draggable&&x!=r.docView&&(c=Re.create(r.state.doc,x.posBefore))}}let u=(c||r.state.selection).content(),{dom:h,text:m,slice:p}=lx(r,u);(!t.dataTransfer.files.length||!Er||QN>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Fc?"Text":"text/html",h.innerHTML),t.dataTransfer.effectAllowed="copyMove",Fc||t.dataTransfer.setData("text/plain",m),r.dragging=new Nj(p,jj(r,t),c)};Ir.dragend=r=>{let e=r.dragging;window.setTimeout(()=>{r.dragging==e&&(r.dragging=null)},50)};Pr.dragover=Pr.dragenter=(r,e)=>e.preventDefault();Pr.drop=(r,e)=>{let t=e,n=r.dragging;if(r.dragging=null,!t.dataTransfer)return;let s=r.posAtCoords(gh(t));if(!s)return;let l=r.state.doc.resolve(s.pos),c=n&&n.slice;c?r.someProp("transformPasted",k=>{c=k(c,r)}):c=hj(r,Sj(t.dataTransfer),Fc?null:t.dataTransfer.getData("text/html"),!1,l);let u=!!(n&&jj(r,t));if(r.someProp("handleDrop",k=>k(r,t,c||pe.empty,u))){t.preventDefault();return}if(!c)return;t.preventDefault();let h=c?UN(r.state.doc,l.pos,c):l.pos;h==null&&(h=l.pos);let m=r.state.tr;if(u){let{node:k}=n;k?k.replace(m):m.deleteSelection()}let p=m.mapping.map(h),x=c.openStart==0&&c.openEnd==0&&c.content.childCount==1,b=m.doc;if(x?m.replaceRangeWith(p,p,c.content.firstChild):m.replaceRange(p,p,c),m.doc.eq(b))return;let v=m.doc.resolve(p);if(x&&Re.isSelectable(c.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(c.content.firstChild))m.setSelection(new Re(v));else{let k=m.mapping.map(h);m.mapping.maps[m.mapping.maps.length-1].forEach((w,S,N,T)=>k=T),m.setSelection(ox(r,v,m.doc.resolve(k)))}r.focus(),r.dispatch(m.setMeta("uiEvent","drop"))};Ir.focus=r=>{r.input.lastFocus=Date.now(),r.focused||(r.domObserver.stop(),r.dom.classList.add("ProseMirror-focused"),r.domObserver.start(),r.focused=!0,setTimeout(()=>{r.docView&&r.hasFocus()&&!r.domObserver.currentSelection.eq(r.domSelectionRange())&&Fa(r)},20))};Ir.blur=(r,e)=>{let t=e;r.focused&&(r.domObserver.stop(),r.dom.classList.remove("ProseMirror-focused"),r.domObserver.start(),t.relatedTarget&&r.dom.contains(t.relatedTarget)&&r.domObserver.currentSelection.clear(),r.focused=!1)};Ir.beforeinput=(r,e)=>{if(Er&&Ua&&e.inputType=="deleteContentBackward"){r.domObserver.flushSoon();let{domChangeCount:n}=r.input;setTimeout(()=>{if(r.input.domChangeCount!=n||(r.dom.blur(),r.focus(),r.someProp("handleKeyDown",l=>l(r,go(8,"Backspace")))))return;let{$cursor:s}=r.state.selection;s&&s.pos>0&&r.dispatch(r.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let r in Pr)Ir[r]=Pr[r];function qc(r,e){if(r==e)return!0;for(let t in r)if(r[t]!==e[t])return!1;for(let t in e)if(!(t in r))return!1;return!0}class mf{constructor(e,t){this.toDOM=e,this.spec=t||jo,this.side=this.spec.side||0}map(e,t,n,s){let{pos:l,deleted:c}=e.mapResult(t.from+s,this.side<0?-1:1);return c?null:new Lr(l-n,l-n,this)}valid(){return!0}eq(e){return this==e||e instanceof mf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&qc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ls{constructor(e,t){this.attrs=e,this.spec=t||jo}map(e,t,n,s){let l=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-n,c=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-n;return l>=c?null:new Lr(l,c,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Ls&&qc(this.attrs,e.attrs)&&qc(this.spec,e.spec)}static is(e){return e.type instanceof Ls}destroy(){}}class ux{constructor(e,t){this.attrs=e,this.spec=t||jo}map(e,t,n,s){let l=e.mapResult(t.from+s,1);if(l.deleted)return null;let c=e.mapResult(t.to+s,-1);return c.deleted||c.pos<=l.pos?null:new Lr(l.pos-n,c.pos-n,this)}valid(e,t){let{index:n,offset:s}=e.content.findIndex(t.from),l;return s==t.from&&!(l=e.child(n)).isText&&s+l.nodeSize==t.to}eq(e){return this==e||e instanceof ux&&qc(this.attrs,e.attrs)&&qc(this.spec,e.spec)}destroy(){}}class Lr{constructor(e,t,n){this.from=e,this.to=t,this.type=n}copy(e,t){return new Lr(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,n){return this.type.map(e,this,t,n)}static widget(e,t,n){return new Lr(e,e,new mf(t,n))}static inline(e,t,n,s){return new Lr(e,t,new Ls(n,s))}static node(e,t,n,s){return new Lr(e,t,new ux(n,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ls}get widget(){return this.type instanceof mf}}const Al=[],jo={};class Ot{constructor(e,t){this.local=e.length?e:Al,this.children=t.length?t:Al}static create(e,t){return t.length?pf(t,e,0,jo):Mr}find(e,t,n){let s=[];return this.findInner(e??0,t??1e9,s,0,n),s}findInner(e,t,n,s,l){for(let c=0;c<this.local.length;c++){let u=this.local[c];u.from<=t&&u.to>=e&&(!l||l(u.spec))&&n.push(u.copy(u.from+s,u.to+s))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<t&&this.children[c+1]>e){let u=this.children[c]+1;this.children[c+2].findInner(e-u,t-u,n,s+u,l)}}map(e,t,n){return this==Mr||e.maps.length==0?this:this.mapInner(e,t,0,0,n||jo)}mapInner(e,t,n,s,l){let c;for(let u=0;u<this.local.length;u++){let h=this.local[u].map(e,n,s);h&&h.type.valid(t,h)?(c||(c=[])).push(h):l.onRemove&&l.onRemove(this.local[u].spec)}return this.children.length?XR(this.children,c||[],e,t,n,s,l):c?new Ot(c.sort(Co),Al):Mr}add(e,t){return t.length?this==Mr?Ot.create(e,t):this.addInner(e,t,0):this}addInner(e,t,n){let s,l=0;e.forEach((u,h)=>{let m=h+n,p;if(p=Tj(t,u,m)){for(s||(s=this.children.slice());l<s.length&&s[l]<h;)l+=3;s[l]==h?s[l+2]=s[l+2].addInner(u,p,m+1):s.splice(l,0,h,h+u.nodeSize,pf(p,u,m+1,jo)),l+=3}});let c=Cj(l?Mj(t):t,-n);for(let u=0;u<c.length;u++)c[u].type.valid(e,c[u])||c.splice(u--,1);return new Ot(c.length?this.local.concat(c).sort(Co):this.local,s||this.children)}remove(e){return e.length==0||this==Mr?this:this.removeInner(e,0)}removeInner(e,t){let n=this.children,s=this.local;for(let l=0;l<n.length;l+=3){let c,u=n[l]+t,h=n[l+1]+t;for(let p=0,x;p<e.length;p++)(x=e[p])&&x.from>u&&x.to<h&&(e[p]=null,(c||(c=[])).push(x));if(!c)continue;n==this.children&&(n=this.children.slice());let m=n[l+2].removeInner(c,u+1);m!=Mr?n[l+2]=m:(n.splice(l,3),l-=3)}if(s.length){for(let l=0,c;l<e.length;l++)if(c=e[l])for(let u=0;u<s.length;u++)s[u].eq(c,t)&&(s==this.local&&(s=this.local.slice()),s.splice(u--,1))}return n==this.children&&s==this.local?this:s.length||n.length?new Ot(s,n):Mr}forChild(e,t){if(this==Mr)return this;if(t.isLeaf)return Ot.empty;let n,s;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(n=this.children[u+2]);break}let l=e+1,c=l+t.content.size;for(let u=0;u<this.local.length;u++){let h=this.local[u];if(h.from<c&&h.to>l&&h.type instanceof Ls){let m=Math.max(l,h.from)-l,p=Math.min(c,h.to)-l;m<p&&(s||(s=[])).push(h.copy(m,p))}}if(s){let u=new Ot(s.sort(Co),Al);return n?new Cs([u,n]):u}return n||Mr}eq(e){if(this==e)return!0;if(!(e instanceof Ot)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return fx(this.localsInner(e))}localsInner(e){if(this==Mr)return Al;if(e.inlineContent||!this.local.some(Ls.is))return this.local;let t=[];for(let n=0;n<this.local.length;n++)this.local[n].type instanceof Ls||t.push(this.local[n]);return t}forEachSet(e){e(this)}}Ot.empty=new Ot([],[]);Ot.removeOverlap=fx;const Mr=Ot.empty;class Cs{constructor(e){this.members=e}map(e,t){const n=this.members.map(s=>s.map(e,t,jo));return Cs.from(n)}forChild(e,t){if(t.isLeaf)return Ot.empty;let n=[];for(let s=0;s<this.members.length;s++){let l=this.members[s].forChild(e,t);l!=Mr&&(l instanceof Cs?n=n.concat(l.members):n.push(l))}return Cs.from(n)}eq(e){if(!(e instanceof Cs)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,n=!0;for(let s=0;s<this.members.length;s++){let l=this.members[s].localsInner(e);if(l.length)if(!t)t=l;else{n&&(t=t.slice(),n=!1);for(let c=0;c<l.length;c++)t.push(l[c])}}return t?fx(n?t:t.sort(Co)):Al}static from(e){switch(e.length){case 0:return Mr;case 1:return e[0];default:return new Cs(e.every(t=>t instanceof Ot)?e:e.reduce((t,n)=>t.concat(n instanceof Ot?n:n.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function XR(r,e,t,n,s,l,c){let u=r.slice();for(let m=0,p=l;m<t.maps.length;m++){let x=0;t.maps[m].forEach((b,v,k,w)=>{let S=w-k-(v-b);for(let N=0;N<u.length;N+=3){let T=u[N+1];if(T<0||b>T+p-x)continue;let C=u[N]+p-x;v>=C?u[N+1]=b<=C?-2:-1:b>=p&&S&&(u[N]+=S,u[N+1]+=S)}x+=S}),p=t.maps[m].map(p,-1)}let h=!1;for(let m=0;m<u.length;m+=3)if(u[m+1]<0){if(u[m+1]==-2){h=!0,u[m+1]=-1;continue}let p=t.map(r[m]+l),x=p-s;if(x<0||x>=n.content.size){h=!0;continue}let b=t.map(r[m+1]+l,-1),v=b-s,{index:k,offset:w}=n.content.findIndex(x),S=n.maybeChild(k);if(S&&w==x&&w+S.nodeSize==v){let N=u[m+2].mapInner(t,S,p+1,r[m]+l+1,c);N!=Mr?(u[m]=x,u[m+1]=v,u[m+2]=N):(u[m+1]=-2,h=!0)}else h=!0}if(h){let m=QR(u,r,e,t,s,l,c),p=pf(m,n,0,c);e=p.local;for(let x=0;x<u.length;x+=3)u[x+1]<0&&(u.splice(x,3),x-=3);for(let x=0,b=0;x<p.children.length;x+=3){let v=p.children[x];for(;b<u.length&&u[b]<v;)b+=3;u.splice(b,0,p.children[x],p.children[x+1],p.children[x+2])}}return new Ot(e.sort(Co),u)}function Cj(r,e){if(!e||!r.length)return r;let t=[];for(let n=0;n<r.length;n++){let s=r[n];t.push(new Lr(s.from+e,s.to+e,s.type))}return t}function QR(r,e,t,n,s,l,c){function u(h,m){for(let p=0;p<h.local.length;p++){let x=h.local[p].map(n,s,m);x?t.push(x):c.onRemove&&c.onRemove(h.local[p].spec)}for(let p=0;p<h.children.length;p+=3)u(h.children[p+2],h.children[p]+m+1)}for(let h=0;h<r.length;h+=3)r[h+1]==-1&&u(r[h+2],e[h]+l+1);return t}function Tj(r,e,t){if(e.isLeaf)return null;let n=t+e.nodeSize,s=null;for(let l=0,c;l<r.length;l++)(c=r[l])&&c.from>t&&c.to<n&&((s||(s=[])).push(c),r[l]=null);return s}function Mj(r){let e=[];for(let t=0;t<r.length;t++)r[t]!=null&&e.push(r[t]);return e}function pf(r,e,t,n){let s=[],l=!1;e.forEach((u,h)=>{let m=Tj(r,u,h+t);if(m){l=!0;let p=pf(m,u,t+h+1,n);p!=Mr&&s.push(h,h+u.nodeSize,p)}});let c=Cj(l?Mj(r):r,-t).sort(Co);for(let u=0;u<c.length;u++)c[u].type.valid(e,c[u])||(n.onRemove&&n.onRemove(c[u].spec),c.splice(u--,1));return c.length||s.length?new Ot(c,s):Mr}function Co(r,e){return r.from-e.from||r.to-e.to}function fx(r){let e=r;for(let t=0;t<e.length-1;t++){let n=e[t];if(n.from!=n.to)for(let s=t+1;s<e.length;s++){let l=e[s];if(l.from==n.from){l.to!=n.to&&(e==r&&(e=r.slice()),e[s]=l.copy(l.from,n.to),i1(e,s+1,l.copy(n.to,l.to)));continue}else{l.from<n.to&&(e==r&&(e=r.slice()),e[t]=n.copy(n.from,l.from),i1(e,s,n.copy(l.from,n.to)));break}}}return e}function i1(r,e,t){for(;e<r.length&&Co(t,r[e])>0;)e++;r.splice(e,0,t)}function lp(r){let e=[];return r.someProp("decorations",t=>{let n=t(r.state);n&&n!=Mr&&e.push(n)}),r.cursorWrapper&&e.push(Ot.create(r.state.doc,[r.cursorWrapper.deco])),Cs.from(e)}const JR={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ZR=Kr&&Rs<=11;class e9{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class t9{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new e9,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(n=>{for(let s=0;s<n.length;s++)this.queue.push(n[s]);Kr&&Rs<=11&&n.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),ZR&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,JR)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(e1(this.view)){if(this.suppressingSelectionUpdates)return Fa(this.view);if(Kr&&Rs<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Lo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,n;for(let l=e.focusNode;l;l=Xl(l))t.add(l);for(let l=e.anchorNode;l;l=Xl(l))if(t.has(l)){n=l;break}let s=n&&this.view.docView.nearestDesc(n);if(s&&s.ignoreMutation({type:"selection",target:n.nodeType==3?n.parentNode:n}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let n=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&e1(e)&&!this.ignoreSelectionChange(n),l=-1,c=-1,u=!1,h=[];if(e.editable)for(let p=0;p<t.length;p++){let x=this.registerMutation(t[p],h);x&&(l=l<0?x.from:Math.min(x.from,l),c=c<0?x.to:Math.max(x.to,c),x.typeOver&&(u=!0))}if(Yn&&h.length){let p=h.filter(x=>x.nodeName=="BR");if(p.length==2){let[x,b]=p;x.parentNode&&x.parentNode.parentNode==b.parentNode?b.remove():x.remove()}else{let{focusNode:x}=this.currentSelection;for(let b of p){let v=b.parentNode;v&&v.nodeName=="LI"&&(!x||a9(e,x)!=v)&&b.remove()}}}let m=null;l<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&mh(n)&&(m=sx(e))&&m.eq(Ue.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Fa(e),this.currentSelection.set(n),e.scrollToSelection()):(l>-1||s)&&(l>-1&&(e.docView.markDirty(l,c),r9(e)),this.handleDOMChange(l,c,u,h),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(n)||Fa(e),this.currentSelection.set(n))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let n=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(n==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!n||n.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let x=e.addedNodes[p];t.push(x),x.nodeType==3&&(this.lastChangedTextNode=x)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(e.target))return{from:n.posBefore,to:n.posAfter};let s=e.previousSibling,l=e.nextSibling;if(Kr&&Rs<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:x,nextSibling:b}=e.addedNodes[p];(!x||Array.prototype.indexOf.call(e.addedNodes,x)<0)&&(s=x),(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(l=b)}let c=s&&s.parentNode==e.target?vr(s)+1:0,u=n.localPosFromDOM(e.target,c,-1),h=l&&l.parentNode==e.target?vr(l):e.target.childNodes.length,m=n.localPosFromDOM(e.target,h,1);return{from:u,to:m}}else return e.type=="attributes"?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=e.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let c1=new WeakMap,d1=!1;function r9(r){if(!c1.has(r)&&(c1.set(r,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(r.dom).whiteSpace)!==-1)){if(r.requiresGeckoHackNode=Yn,d1)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),d1=!0}}function u1(r,e){let t=e.startContainer,n=e.startOffset,s=e.endContainer,l=e.endOffset,c=r.domAtPos(r.state.selection.anchor);return Lo(c.node,c.offset,s,l)&&([t,n,s,l]=[s,l,t,n]),{anchorNode:t,anchorOffset:n,focusNode:s,focusOffset:l}}function n9(r,e){if(e.getComposedRanges){let s=e.getComposedRanges(r.root)[0];if(s)return u1(r,s)}let t;function n(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return r.dom.addEventListener("beforeinput",n,!0),document.execCommand("indent"),r.dom.removeEventListener("beforeinput",n,!0),t?u1(r,t):null}function a9(r,e){for(let t=e.parentNode;t&&t!=r.dom;t=t.parentNode){let n=r.docView.nearestDesc(t,!0);if(n&&n.node.isBlock)return t}return null}function s9(r,e,t){let{node:n,fromOffset:s,toOffset:l,from:c,to:u}=r.docView.parseRange(e,t),h=r.domSelectionRange(),m,p=h.anchorNode;if(p&&r.dom.contains(p.nodeType==1?p:p.parentNode)&&(m=[{node:p,offset:h.anchorOffset}],mh(h)||m.push({node:h.focusNode,offset:h.focusOffset})),Er&&r.input.lastKeyCode===8)for(let S=l;S>s;S--){let N=n.childNodes[S-1],T=N.pmViewDesc;if(N.nodeName=="BR"&&!T){l=S;break}if(!T||T.size)break}let x=r.state.doc,b=r.someProp("domParser")||Os.fromSchema(r.state.schema),v=x.resolve(c),k=null,w=b.parse(n,{topNode:v.parent,topMatch:v.parent.contentMatchAt(v.index()),topOpen:!0,from:s,to:l,preserveWhitespace:v.parent.type.whitespace=="pre"?"full":!0,findPositions:m,ruleFromNode:o9,context:v});if(m&&m[0].pos!=null){let S=m[0].pos,N=m[1]&&m[1].pos;N==null&&(N=S),k={anchor:S+c,head:N+c}}return{doc:w,sel:k,from:c,to:u}}function o9(r){let e=r.pmViewDesc;if(e)return e.parseRule();if(r.nodeName=="BR"&&r.parentNode){if(Br&&/^(ul|ol)$/i.test(r.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(r.parentNode.lastChild==r||Br&&/^(tr|table)$/i.test(r.parentNode.nodeName))return{ignore:!0}}else if(r.nodeName=="IMG"&&r.getAttribute("mark-placeholder"))return{ignore:!0};return null}const l9=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function i9(r,e,t,n,s){let l=r.input.compositionPendingChanges||(r.composing?r.input.compositionID:0);if(r.input.compositionPendingChanges=0,e<0){let $=r.input.lastSelectionTime>Date.now()-50?r.input.lastSelectionOrigin:null,ae=sx(r,$);if(ae&&!r.state.selection.eq(ae)){if(Er&&Ua&&r.input.lastKeyCode===13&&Date.now()-100<r.input.lastKeyCodeTime&&r.someProp("handleKeyDown",ie=>ie(r,go(13,"Enter"))))return;let le=r.state.tr.setSelection(ae);$=="pointer"?le.setMeta("pointer",!0):$=="key"&&le.scrollIntoView(),l&&le.setMeta("composition",l),r.dispatch(le)}return}let c=r.state.doc.resolve(e),u=c.sharedDepth(t);e=c.before(u+1),t=r.state.doc.resolve(t).after(u+1);let h=r.state.selection,m=s9(r,e,t),p=r.state.doc,x=p.slice(m.from,m.to),b,v;r.input.lastKeyCode===8&&Date.now()-100<r.input.lastKeyCodeTime?(b=r.state.selection.to,v="end"):(b=r.state.selection.from,v="start"),r.input.lastKeyCode=null;let k=u9(x.content,m.doc.content,m.from,b,v);if(k&&r.input.domChangeCount++,(Ql&&r.input.lastIOSEnter>Date.now()-225||Ua)&&s.some($=>$.nodeType==1&&!l9.test($.nodeName))&&(!k||k.endA>=k.endB)&&r.someProp("handleKeyDown",$=>$(r,go(13,"Enter")))){r.input.lastIOSEnter=0;return}if(!k)if(n&&h instanceof He&&!h.empty&&h.$head.sameParent(h.$anchor)&&!r.composing&&!(m.sel&&m.sel.anchor!=m.sel.head))k={start:h.from,endA:h.to,endB:h.to};else{if(m.sel){let $=f1(r,r.state.doc,m.sel);if($&&!$.eq(r.state.selection)){let ae=r.state.tr.setSelection($);l&&ae.setMeta("composition",l),r.dispatch(ae)}}return}r.state.selection.from<r.state.selection.to&&k.start==k.endB&&r.state.selection instanceof He&&(k.start>r.state.selection.from&&k.start<=r.state.selection.from+2&&r.state.selection.from>=m.from?k.start=r.state.selection.from:k.endA<r.state.selection.to&&k.endA>=r.state.selection.to-2&&r.state.selection.to<=m.to&&(k.endB+=r.state.selection.to-k.endA,k.endA=r.state.selection.to)),Kr&&Rs<=11&&k.endB==k.start+1&&k.endA==k.start&&k.start>m.from&&m.doc.textBetween(k.start-m.from-1,k.start-m.from+1)==" "&&(k.start--,k.endA--,k.endB--);let w=m.doc.resolveNoCache(k.start-m.from),S=m.doc.resolveNoCache(k.endB-m.from),N=p.resolve(k.start),T=w.sameParent(S)&&w.parent.inlineContent&&N.end()>=k.endA,C;if((Ql&&r.input.lastIOSEnter>Date.now()-225&&(!T||s.some($=>$.nodeName=="DIV"||$.nodeName=="P"))||!T&&w.pos<m.doc.content.size&&(!w.sameParent(S)||!w.parent.inlineContent)&&!/\S/.test(m.doc.textBetween(w.pos,S.pos,"",""))&&(C=Ue.findFrom(m.doc.resolve(w.pos+1),1,!0))&&C.head>w.pos)&&r.someProp("handleKeyDown",$=>$(r,go(13,"Enter")))){r.input.lastIOSEnter=0;return}if(r.state.selection.anchor>k.start&&d9(p,k.start,k.endA,w,S)&&r.someProp("handleKeyDown",$=>$(r,go(8,"Backspace")))){Ua&&Er&&r.domObserver.suppressSelectionUpdates();return}Er&&k.endB==k.start&&(r.input.lastChromeDelete=Date.now()),Ua&&!T&&w.start()!=S.start()&&S.parentOffset==0&&w.depth==S.depth&&m.sel&&m.sel.anchor==m.sel.head&&m.sel.head==k.endA&&(k.endB-=2,S=m.doc.resolveNoCache(k.endB-m.from),setTimeout(()=>{r.someProp("handleKeyDown",function($){return $(r,go(13,"Enter"))})},20));let D=k.start,A=k.endA,Y=$=>{let ae=$||r.state.tr.replace(D,A,m.doc.slice(k.start-m.from,k.endB-m.from));if(m.sel){let le=f1(r,ae.doc,m.sel);le&&!(Er&&r.composing&&le.empty&&(k.start!=k.endB||r.input.lastChromeDelete<Date.now()-100)&&(le.head==D||le.head==ae.mapping.map(A)-1)||Kr&&le.empty&&le.head==D)&&ae.setSelection(le)}return l&&ae.setMeta("composition",l),ae.scrollIntoView()},I;if(T){if(w.pos==S.pos){Kr&&Rs<=11&&w.parentOffset==0&&(r.domObserver.suppressSelectionUpdates(),setTimeout(()=>Fa(r),20));let $=Y(r.state.tr.delete(D,A)),ae=p.resolve(k.start).marksAcross(p.resolve(k.endA));ae&&$.ensureMarks(ae),r.dispatch($)}else if(k.endA==k.endB&&(I=c9(w.parent.content.cut(w.parentOffset,S.parentOffset),N.parent.content.cut(N.parentOffset,k.endA-N.start())))){let $=Y(r.state.tr);I.type=="add"?$.addMark(D,A,I.mark):$.removeMark(D,A,I.mark),r.dispatch($)}else if(w.parent.child(w.index()).isText&&w.index()==S.index()-(S.textOffset?0:1)){let $=w.parent.textBetween(w.parentOffset,S.parentOffset),ae=()=>Y(r.state.tr.insertText($,D,A));r.someProp("handleTextInput",le=>le(r,D,A,$,ae))||r.dispatch(ae())}}else r.dispatch(Y())}function f1(r,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:ox(r,e.resolve(t.anchor),e.resolve(t.head))}function c9(r,e){let t=r.firstChild.marks,n=e.firstChild.marks,s=t,l=n,c,u,h;for(let p=0;p<n.length;p++)s=n[p].removeFromSet(s);for(let p=0;p<t.length;p++)l=t[p].removeFromSet(l);if(s.length==1&&l.length==0)u=s[0],c="add",h=p=>p.mark(u.addToSet(p.marks));else if(s.length==0&&l.length==1)u=l[0],c="remove",h=p=>p.mark(u.removeFromSet(p.marks));else return null;let m=[];for(let p=0;p<e.childCount;p++)m.push(h(e.child(p)));if(re.from(m).eq(r))return{mark:u,type:c}}function d9(r,e,t,n,s){if(t-e<=s.pos-n.pos||ip(n,!0,!1)<s.pos)return!1;let l=r.resolve(e);if(!n.parent.isTextblock){let u=l.nodeAfter;return u!=null&&t==e+u.nodeSize}if(l.parentOffset<l.parent.content.size||!l.parent.isTextblock)return!1;let c=r.resolve(ip(l,!0,!0));return!c.parent.isTextblock||c.pos>t||ip(c,!0,!1)<t?!1:n.parent.content.cut(n.parentOffset).eq(c.parent.content)}function ip(r,e,t){let n=r.depth,s=e?r.end():r.pos;for(;n>0&&(e||r.indexAfter(n)==r.node(n).childCount);)n--,s++,e=!1;if(t){let l=r.node(n).maybeChild(r.indexAfter(n));for(;l&&!l.isLeaf;)l=l.firstChild,s++}return s}function u9(r,e,t,n,s){let l=r.findDiffStart(e,t);if(l==null)return null;let{a:c,b:u}=r.findDiffEnd(e,t+r.size,t+e.size);if(s=="end"){let h=Math.max(0,l-Math.min(c,u));n-=c+h-l}if(c<l&&r.size<e.size){let h=n<=l&&n>=c?l-n:0;l-=h,l&&l<e.size&&h1(e.textBetween(l-1,l+1))&&(l+=h?1:-1),u=l+(u-c),c=l}else if(u<l){let h=n<=l&&n>=u?l-n:0;l-=h,l&&l<r.size&&h1(r.textBetween(l-1,l+1))&&(l+=h?1:-1),c=l+(c-u),u=l}return{start:l,endA:c,endB:u}}function h1(r){if(r.length!=2)return!1;let e=r.charCodeAt(0),t=r.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class Ej{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new AR,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(b1),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=g1(this),p1(this),this.nodeViews=x1(this),this.docView=Kw(this.state.doc,m1(this),lp(this),this.dom,this),this.domObserver=new t9(this,(n,s,l,c)=>i9(this,n,s,l,c)),this.domObserver.start(),DR(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&dg(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(b1),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let n in this._props)t[n]=this._props[n];t.state=this.state;for(let n in e)t[n]=e[n];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var n;let s=this.state,l=!1,c=!1;e.storedMarks&&this.composing&&(wj(this),c=!0),this.state=e;let u=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(u||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let v=x1(this);h9(v,this.nodeViews)&&(this.nodeViews=v,l=!0)}(u||t.handleDOMEvents!=this._props.handleDOMEvents)&&dg(this),this.editable=g1(this),p1(this);let h=lp(this),m=m1(this),p=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",x=l||!this.docView.matchesNode(e.doc,m,h);(x||!e.selection.eq(s.selection))&&(c=!0);let b=p=="preserve"&&c&&this.dom.style.overflowAnchor==null&&YO(this);if(c){this.domObserver.stop();let v=x&&(Kr||Er)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&f9(s.selection,e.selection);if(x){let k=Er?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=FR(this)),(l||!this.docView.update(e.doc,m,h,this))&&(this.docView.updateOuterDeco(m),this.docView.destroy(),this.docView=Kw(e.doc,m,h,this.dom,this)),k&&!this.trackWrites&&(v=!0)}v||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&pR(this))?Fa(this,v):(dj(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((n=this.dragging)===null||n===void 0)&&n.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():b&&qO(b)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Re){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&Uw(this,t.getBoundingClientRect(),e)}else Uw(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let n=this.directPlugins[t];n.spec.view&&this.pluginViews.push(n.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let n=this.state.plugins[t];n.spec.view&&this.pluginViews.push(n.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let n=this.pluginViews[t];n.update&&n.update(this,e)}}updateDraggedNode(e,t){let n=e.node,s=-1;if(this.state.doc.nodeAt(n.from)==n.node)s=n.from;else{let l=n.from+(this.state.doc.content.size-t.doc.content.size);(l>0&&this.state.doc.nodeAt(l))==n.node&&(s=l)}this.dragging=new Nj(e.slice,e.move,s<0?void 0:Re.create(this.state.doc,s))}someProp(e,t){let n=this._props&&this._props[e],s;if(n!=null&&(s=t?t(n):n))return s;for(let c=0;c<this.directPlugins.length;c++){let u=this.directPlugins[c].props[e];if(u!=null&&(s=t?t(u):u))return s}let l=this.state.plugins;if(l)for(let c=0;c<l.length;c++){let u=l[c].props[e];if(u!=null&&(s=t?t(u):u))return s}}hasFocus(){if(Kr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&GO(this.dom),Fa(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return JO(this,e)}coordsAtPos(e,t=1){return rj(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,n=-1){let s=this.docView.posFromDOM(e,t,n);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return nR(this,t||this.state,e)}pasteHTML(e,t){return Yc(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Yc(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return lx(this,e)}destroy(){this.docView&&(OR(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],lp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,zO())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return zR(this,e)}domSelectionRange(){let e=this.domSelection();return e?Br&&this.root.nodeType===11&&_O(this.dom.ownerDocument)==this.dom&&n9(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Ej.prototype.dispatch=function(r){let e=this._props.dispatchTransaction;e?e.call(this,r):this.updateState(this.state.apply(r))};function m1(r){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(r.editable),r.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(r.state)),t)for(let n in t)n=="class"?e.class+=" "+t[n]:n=="style"?e.style=(e.style?e.style+";":"")+t[n]:!e[n]&&n!="contenteditable"&&n!="nodeName"&&(e[n]=String(t[n]))}),e.translate||(e.translate="no"),[Lr.node(0,r.state.doc.content.size,e)]}function p1(r){if(r.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),r.cursorWrapper={dom:e,deco:Lr.widget(r.state.selection.from,e,{raw:!0,marks:r.markCursor})}}else r.cursorWrapper=null}function g1(r){return!r.someProp("editable",e=>e(r.state)===!1)}function f9(r,e){let t=Math.min(r.$anchor.sharedDepth(r.head),e.$anchor.sharedDepth(e.head));return r.$anchor.start(t)!=e.$anchor.start(t)}function x1(r){let e=Object.create(null);function t(n){for(let s in n)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=n[s])}return r.someProp("nodeViews",t),r.someProp("markViews",t),e}function h9(r,e){let t=0,n=0;for(let s in r){if(r[s]!=e[s])return!0;t++}for(let s in e)n++;return t!=n}function b1(r){if(r.spec.state||r.spec.filterTransaction||r.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ps={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},gf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},m9=typeof navigator<"u"&&/Mac/.test(navigator.platform),p9=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var kr=0;kr<10;kr++)Ps[48+kr]=Ps[96+kr]=String(kr);for(var kr=1;kr<=24;kr++)Ps[kr+111]="F"+kr;for(var kr=65;kr<=90;kr++)Ps[kr]=String.fromCharCode(kr+32),gf[kr]=String.fromCharCode(kr);for(var cp in Ps)gf.hasOwnProperty(cp)||(gf[cp]=Ps[cp]);function g9(r){var e=m9&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||p9&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?gf:Ps)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const x9=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),b9=typeof navigator<"u"&&/Win/.test(navigator.platform);function y9(r){let e=r.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let n,s,l,c;for(let u=0;u<e.length-1;u++){let h=e[u];if(/^(cmd|meta|m)$/i.test(h))c=!0;else if(/^a(lt)?$/i.test(h))n=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))l=!0;else if(/^mod$/i.test(h))x9?c=!0:s=!0;else throw new Error("Unrecognized modifier name: "+h)}return n&&(t="Alt-"+t),s&&(t="Ctrl-"+t),c&&(t="Meta-"+t),l&&(t="Shift-"+t),t}function v9(r){let e=Object.create(null);for(let t in r)e[y9(t)]=r[t];return e}function dp(r,e,t=!0){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t&&e.shiftKey&&(r="Shift-"+r),r}function k9(r){return new Ht({props:{handleKeyDown:Aj(r)}})}function Aj(r){let e=v9(r);return function(t,n){let s=g9(n),l,c=e[dp(s,n)];if(c&&c(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(n.shiftKey){let u=e[dp(s,n,!1)];if(u&&u(t.state,t.dispatch,t))return!0}if((n.altKey||n.metaKey||n.ctrlKey)&&!(b9&&n.ctrlKey&&n.altKey)&&(l=Ps[n.keyCode])&&l!=s){let u=e[dp(l,n)];if(u&&u(t.state,t.dispatch,t))return!0}}return!1}}const hx=(r,e)=>r.selection.empty?!1:(e&&e(r.tr.deleteSelection().scrollIntoView()),!0);function Dj(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("backward",r):t.parentOffset>0)?null:t}const Oj=(r,e,t)=>{let n=Dj(r,t);if(!n)return!1;let s=mx(n);if(!s){let c=n.blockRange(),u=c&&li(c);return u==null?!1:(e&&e(r.tr.lift(c,u).scrollIntoView()),!0)}let l=s.nodeBefore;if($j(r,s,e,-1))return!0;if(n.parent.content.size==0&&(Jl(l,"end")||Re.isSelectable(l)))for(let c=n.depth;;c--){let u=fh(r.doc,n.before(c),n.after(c),pe.empty);if(u&&u.slice.size<u.to-u.from){if(e){let h=r.tr.step(u);h.setSelection(Jl(l,"end")?Ue.findFrom(h.doc.resolve(h.mapping.map(s.pos,-1)),-1):Re.create(h.doc,s.pos-l.nodeSize)),e(h.scrollIntoView())}return!0}if(c==1||n.node(c-1).childCount>1)break}return l.isAtom&&s.depth==n.depth-1?(e&&e(r.tr.delete(s.pos-l.nodeSize,s.pos).scrollIntoView()),!0):!1},w9=(r,e,t)=>{let n=Dj(r,t);if(!n)return!1;let s=mx(n);return s?Rj(r,s,e):!1},S9=(r,e,t)=>{let n=Lj(r,t);if(!n)return!1;let s=px(n);return s?Rj(r,s,e):!1};function Rj(r,e,t){let n=e.nodeBefore,s=n,l=e.pos-1;for(;!s.isTextblock;l--){if(s.type.spec.isolating)return!1;let p=s.lastChild;if(!p)return!1;s=p}let c=e.nodeAfter,u=c,h=e.pos+1;for(;!u.isTextblock;h++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let m=fh(r.doc,l,h,pe.empty);if(!m||m.from!=l||m instanceof or&&m.slice.size>=h-l)return!1;if(t){let p=r.tr.step(m);p.setSelection(He.create(p.doc,l)),t(p.scrollIntoView())}return!0}function Jl(r,e,t=!1){for(let n=r;n;n=e=="start"?n.firstChild:n.lastChild){if(n.isTextblock)return!0;if(t&&n.childCount!=1)return!1}return!1}const zj=(r,e,t)=>{let{$head:n,empty:s}=r.selection,l=n;if(!s)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("backward",r):n.parentOffset>0)return!1;l=mx(n)}let c=l&&l.nodeBefore;return!c||!Re.isSelectable(c)?!1:(e&&e(r.tr.setSelection(Re.create(r.doc,l.pos-c.nodeSize)).scrollIntoView()),!0)};function mx(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){if(r.index(e)>0)return r.doc.resolve(r.before(e+1));if(r.node(e).type.spec.isolating)break}return null}function Lj(r,e){let{$cursor:t}=r.selection;return!t||(e?!e.endOfTextblock("forward",r):t.parentOffset<t.parent.content.size)?null:t}const Bj=(r,e,t)=>{let n=Lj(r,t);if(!n)return!1;let s=px(n);if(!s)return!1;let l=s.nodeAfter;if($j(r,s,e,1))return!0;if(n.parent.content.size==0&&(Jl(l,"start")||Re.isSelectable(l))){let c=fh(r.doc,n.before(),n.after(),pe.empty);if(c&&c.slice.size<c.to-c.from){if(e){let u=r.tr.step(c);u.setSelection(Jl(l,"start")?Ue.findFrom(u.doc.resolve(u.mapping.map(s.pos)),1):Re.create(u.doc,u.mapping.map(s.pos))),e(u.scrollIntoView())}return!0}}return l.isAtom&&s.depth==n.depth-1?(e&&e(r.tr.delete(s.pos,s.pos+l.nodeSize).scrollIntoView()),!0):!1},Ij=(r,e,t)=>{let{$head:n,empty:s}=r.selection,l=n;if(!s)return!1;if(n.parent.isTextblock){if(t?!t.endOfTextblock("forward",r):n.parentOffset<n.parent.content.size)return!1;l=px(n)}let c=l&&l.nodeAfter;return!c||!Re.isSelectable(c)?!1:(e&&e(r.tr.setSelection(Re.create(r.doc,l.pos)).scrollIntoView()),!0)};function px(r){if(!r.parent.type.spec.isolating)for(let e=r.depth-1;e>=0;e--){let t=r.node(e);if(r.index(e)+1<t.childCount)return r.doc.resolve(r.after(e+1));if(t.type.spec.isolating)break}return null}const N9=(r,e)=>{let t=r.selection,n=t instanceof Re,s;if(n){if(t.node.isTextblock||!Fs(r.doc,t.from))return!1;s=t.from}else if(s=uh(r.doc,t.from,-1),s==null)return!1;if(e){let l=r.tr.join(s);n&&l.setSelection(Re.create(l.doc,s-r.doc.resolve(s).nodeBefore.nodeSize)),e(l.scrollIntoView())}return!0},j9=(r,e)=>{let t=r.selection,n;if(t instanceof Re){if(t.node.isTextblock||!Fs(r.doc,t.to))return!1;n=t.to}else if(n=uh(r.doc,t.to,1),n==null)return!1;return e&&e(r.tr.join(n).scrollIntoView()),!0},C9=(r,e)=>{let{$from:t,$to:n}=r.selection,s=t.blockRange(n),l=s&&li(s);return l==null?!1:(e&&e(r.tr.lift(s,l).scrollIntoView()),!0)},Pj=(r,e)=>{let{$head:t,$anchor:n}=r.selection;return!t.parent.type.spec.code||!t.sameParent(n)?!1:(e&&e(r.tr.insertText(`
`).scrollIntoView()),!0)};function gx(r){for(let e=0;e<r.edgeCount;e++){let{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const T9=(r,e)=>{let{$head:t,$anchor:n}=r.selection;if(!t.parent.type.spec.code||!t.sameParent(n))return!1;let s=t.node(-1),l=t.indexAfter(-1),c=gx(s.contentMatchAt(l));if(!c||!s.canReplaceWith(l,l,c))return!1;if(e){let u=t.after(),h=r.tr.replaceWith(u,u,c.createAndFill());h.setSelection(Ue.near(h.doc.resolve(u),1)),e(h.scrollIntoView())}return!0},_j=(r,e)=>{let t=r.selection,{$from:n,$to:s}=t;if(t instanceof un||n.parent.inlineContent||s.parent.inlineContent)return!1;let l=gx(s.parent.contentMatchAt(s.indexAfter()));if(!l||!l.isTextblock)return!1;if(e){let c=(!n.parentOffset&&s.index()<s.parent.childCount?n:s).pos,u=r.tr.insert(c,l.createAndFill());u.setSelection(He.create(u.doc,c+1)),e(u.scrollIntoView())}return!0},Hj=(r,e)=>{let{$cursor:t}=r.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let l=t.before();if(Va(r.doc,l))return e&&e(r.tr.split(l).scrollIntoView()),!0}let n=t.blockRange(),s=n&&li(n);return s==null?!1:(e&&e(r.tr.lift(n,s).scrollIntoView()),!0)};function M9(r){return(e,t)=>{let{$from:n,$to:s}=e.selection;if(e.selection instanceof Re&&e.selection.node.isBlock)return!n.parentOffset||!Va(e.doc,n.pos)?!1:(t&&t(e.tr.split(n.pos).scrollIntoView()),!0);if(!n.depth)return!1;let l=[],c,u,h=!1,m=!1;for(let v=n.depth;;v--)if(n.node(v).isBlock){h=n.end(v)==n.pos+(n.depth-v),m=n.start(v)==n.pos-(n.depth-v),u=gx(n.node(v-1).contentMatchAt(n.indexAfter(v-1))),l.unshift(h&&u?{type:u}:null),c=v;break}else{if(v==1)return!1;l.unshift(null)}let p=e.tr;(e.selection instanceof He||e.selection instanceof un)&&p.deleteSelection();let x=p.mapping.map(n.pos),b=Va(p.doc,x,l.length,l);if(b||(l[0]=u?{type:u}:null,b=Va(p.doc,x,l.length,l)),!b)return!1;if(p.split(x,l.length,l),!h&&m&&n.node(c).type!=u){let v=p.mapping.map(n.before(c)),k=p.doc.resolve(v);u&&n.node(c-1).canReplaceWith(k.index(),k.index()+1,u)&&p.setNodeMarkup(p.mapping.map(n.before(c)),u)}return t&&t(p.scrollIntoView()),!0}}const E9=M9(),A9=(r,e)=>{let{$from:t,to:n}=r.selection,s,l=t.sharedDepth(n);return l==0?!1:(s=t.before(l),e&&e(r.tr.setSelection(Re.create(r.doc,s))),!0)};function D9(r,e,t){let n=e.nodeBefore,s=e.nodeAfter,l=e.index();return!n||!s||!n.type.compatibleContent(s.type)?!1:!n.content.size&&e.parent.canReplace(l-1,l)?(t&&t(r.tr.delete(e.pos-n.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(l,l+1)||!(s.isTextblock||Fs(r.doc,e.pos))?!1:(t&&t(r.tr.join(e.pos).scrollIntoView()),!0)}function $j(r,e,t,n){let s=e.nodeBefore,l=e.nodeAfter,c,u,h=s.type.spec.isolating||l.type.spec.isolating;if(!h&&D9(r,e,t))return!0;let m=!h&&e.parent.canReplace(e.index(),e.index()+1);if(m&&(c=(u=s.contentMatchAt(s.childCount)).findWrapping(l.type))&&u.matchType(c[0]||l.type).validEnd){if(t){let v=e.pos+l.nodeSize,k=re.empty;for(let N=c.length-1;N>=0;N--)k=re.from(c[N].create(null,k));k=re.from(s.copy(k));let w=r.tr.step(new dr(e.pos-1,v,e.pos,v,new pe(k,1,0),c.length,!0)),S=w.doc.resolve(v+2*c.length);S.nodeAfter&&S.nodeAfter.type==s.type&&Fs(w.doc,S.pos)&&w.join(S.pos),t(w.scrollIntoView())}return!0}let p=l.type.spec.isolating||n>0&&h?null:Ue.findFrom(e,1),x=p&&p.$from.blockRange(p.$to),b=x&&li(x);if(b!=null&&b>=e.depth)return t&&t(r.tr.lift(x,b).scrollIntoView()),!0;if(m&&Jl(l,"start",!0)&&Jl(s,"end")){let v=s,k=[];for(;k.push(v),!v.isTextblock;)v=v.lastChild;let w=l,S=1;for(;!w.isTextblock;w=w.firstChild)S++;if(v.canReplace(v.childCount,v.childCount,w.content)){if(t){let N=re.empty;for(let C=k.length-1;C>=0;C--)N=re.from(k[C].copy(N));let T=r.tr.step(new dr(e.pos-k.length,e.pos+l.nodeSize,e.pos+S,e.pos+l.nodeSize-S,new pe(N,k.length,0),0,!0));t(T.scrollIntoView())}return!0}}return!1}function Uj(r){return function(e,t){let n=e.selection,s=r<0?n.$from:n.$to,l=s.depth;for(;s.node(l).isInline;){if(!l)return!1;l--}return s.node(l).isTextblock?(t&&t(e.tr.setSelection(He.create(e.doc,r<0?s.start(l):s.end(l)))),!0):!1}}const O9=Uj(-1),R9=Uj(1);function z9(r,e=null){return function(t,n){let{$from:s,$to:l}=t.selection,c=s.blockRange(l),u=c&&rx(c,r,e);return u?(n&&n(t.tr.wrap(c,u).scrollIntoView()),!0):!1}}function y1(r,e=null){return function(t,n){let s=!1;for(let l=0;l<t.selection.ranges.length&&!s;l++){let{$from:{pos:c},$to:{pos:u}}=t.selection.ranges[l];t.doc.nodesBetween(c,u,(h,m)=>{if(s)return!1;if(!(!h.isTextblock||h.hasMarkup(r,e)))if(h.type==r)s=!0;else{let p=t.doc.resolve(m),x=p.index();s=p.parent.canReplaceWith(x,x+1,r)}})}if(!s)return!1;if(n){let l=t.tr;for(let c=0;c<t.selection.ranges.length;c++){let{$from:{pos:u},$to:{pos:h}}=t.selection.ranges[c];l.setBlockType(u,h,r,e)}n(l.scrollIntoView())}return!0}}function xx(...r){return function(e,t,n){for(let s=0;s<r.length;s++)if(r[s](e,t,n))return!0;return!1}}xx(hx,Oj,zj);xx(hx,Bj,Ij);xx(Pj,_j,Hj,E9);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function L9(r,e=null){return function(t,n){let{$from:s,$to:l}=t.selection,c=s.blockRange(l);if(!c)return!1;let u=n?t.tr:null;return B9(u,c,r,e)?(n&&n(u.scrollIntoView()),!0):!1}}function B9(r,e,t,n=null){let s=!1,l=e,c=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let h=c.resolve(e.start-2);l=new cf(h,h,e.depth),e.endIndex<e.parent.childCount&&(e=new cf(e.$from,c.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let u=rx(l,t,n,e);return u?(r&&I9(r,e,u,s,t),!0):!1}function I9(r,e,t,n,s){let l=re.empty;for(let p=t.length-1;p>=0;p--)l=re.from(t[p].type.create(t[p].attrs,l));r.step(new dr(e.start-(n?2:0),e.end,e.start,e.end,new pe(l,0,0),t.length,!0));let c=0;for(let p=0;p<t.length;p++)t[p].type==s&&(c=p+1);let u=t.length-c,h=e.start+t.length-(n?2:0),m=e.parent;for(let p=e.startIndex,x=e.endIndex,b=!0;p<x;p++,b=!1)!b&&Va(r.doc,h,u)&&(r.split(h,u),h+=2*u),h+=m.child(p).nodeSize;return r}function P9(r){return function(e,t){let{$from:n,$to:s}=e.selection,l=n.blockRange(s,c=>c.childCount>0&&c.firstChild.type==r);return l?t?n.node(l.depth-1).type==r?_9(e,t,r,l):H9(e,t,l):!0:!1}}function _9(r,e,t,n){let s=r.tr,l=n.end,c=n.$to.end(n.depth);l<c&&(s.step(new dr(l-1,c,l,c,new pe(re.from(t.create(null,n.parent.copy())),1,0),1,!0)),n=new cf(s.doc.resolve(n.$from.pos),s.doc.resolve(c),n.depth));const u=li(n);if(u==null)return!1;s.lift(n,u);let h=s.doc.resolve(s.mapping.map(l,-1)-1);return Fs(s.doc,h.pos)&&h.nodeBefore.type==h.nodeAfter.type&&s.join(h.pos),e(s.scrollIntoView()),!0}function H9(r,e,t){let n=r.tr,s=t.parent;for(let v=t.end,k=t.endIndex-1,w=t.startIndex;k>w;k--)v-=s.child(k).nodeSize,n.delete(v-1,v+1);let l=n.doc.resolve(t.start),c=l.nodeAfter;if(n.mapping.map(t.end)!=t.start+l.nodeAfter.nodeSize)return!1;let u=t.startIndex==0,h=t.endIndex==s.childCount,m=l.node(-1),p=l.index(-1);if(!m.canReplace(p+(u?0:1),p+1,c.content.append(h?re.empty:re.from(s))))return!1;let x=l.pos,b=x+c.nodeSize;return n.step(new dr(x-(u?1:0),b+(h?1:0),x+1,b-1,new pe((u?re.empty:re.from(s.copy(re.empty))).append(h?re.empty:re.from(s.copy(re.empty))),u?0:1,h?0:1),u?0:1)),e(n.scrollIntoView()),!0}function $9(r){return function(e,t){let{$from:n,$to:s}=e.selection,l=n.blockRange(s,m=>m.childCount>0&&m.firstChild.type==r);if(!l)return!1;let c=l.startIndex;if(c==0)return!1;let u=l.parent,h=u.child(c-1);if(h.type!=r)return!1;if(t){let m=h.lastChild&&h.lastChild.type==u.type,p=re.from(m?r.create():null),x=new pe(re.from(r.create(null,re.from(u.type.create(null,p)))),m?3:1,0),b=l.start,v=l.end;t(e.tr.step(new dr(b-(m?3:1),v,b,v,x,1,!0)).scrollIntoView())}return!0}}var U9=Object.defineProperty,Vj=(r,e)=>{for(var t in e)U9(r,t,{get:e[t],enumerable:!0})};function xh(r){const{state:e,transaction:t}=r;let{selection:n}=t,{doc:s}=t,{storedMarks:l}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return l},get selection(){return n},get doc(){return s},get tr(){return n=t.selection,s=t.doc,l=t.storedMarks,t}}}var bh=class{constructor(r){this.editor=r.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=r.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:r,editor:e,state:t}=this,{view:n}=e,{tr:s}=t,l=this.buildProps(s);return Object.fromEntries(Object.entries(r).map(([c,u])=>[c,(...m)=>{const p=u(...m)(l);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&n.dispatch(s),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(r,e=!0){const{rawCommands:t,editor:n,state:s}=this,{view:l}=n,c=[],u=!!r,h=r||s.tr,m=()=>(!u&&e&&!h.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(h),c.every(x=>x===!0)),p={...Object.fromEntries(Object.entries(t).map(([x,b])=>[x,(...k)=>{const w=this.buildProps(h,e),S=b(...k)(w);return c.push(S),p}])),run:m};return p}createCan(r){const{rawCommands:e,state:t}=this,n=!1,s=r||t.tr,l=this.buildProps(s,n);return{...Object.fromEntries(Object.entries(e).map(([u,h])=>[u,(...m)=>h(...m)({...l,dispatch:void 0})])),chain:()=>this.createChain(s,n)}}buildProps(r,e=!0){const{rawCommands:t,editor:n,state:s}=this,{view:l}=n,c={tr:r,editor:n,view:l,state:xh({state:s,transaction:r}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(r,e),can:()=>this.createCan(r),get commands(){return Object.fromEntries(Object.entries(t).map(([u,h])=>[u,(...m)=>h(...m)(c)]))}};return c}},V9=class{constructor(){this.callbacks={}}on(r,e){return this.callbacks[r]||(this.callbacks[r]=[]),this.callbacks[r].push(e),this}emit(r,...e){const t=this.callbacks[r];return t&&t.forEach(n=>n.apply(this,e)),this}off(r,e){const t=this.callbacks[r];return t&&(e?this.callbacks[r]=t.filter(n=>n!==e):delete this.callbacks[r]),this}once(r,e){const t=(...n)=>{this.off(r,t),e.apply(this,n)};return this.on(r,t)}removeAllListeners(){this.callbacks={}}};function Fj(r,e){const t=new GN(r);return e.forEach(n=>{n.steps.forEach(s=>{t.step(s)})}),t}var Yj=r=>{const e=r.childNodes;for(let t=e.length-1;t>=0;t-=1){const n=e[t];n.nodeType===3&&n.nodeValue&&/^(\n\s\s|\n)$/.test(n.nodeValue)?r.removeChild(n):n.nodeType===1&&Yj(n)}return r};function Tu(r){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${r}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Yj(t)}function Gc(r,e,t){if(r instanceof Ds||r instanceof re)return r;t={slice:!0,parseOptions:{},...t};const n=typeof r=="object"&&r!==null,s=typeof r=="string";if(n)try{if(Array.isArray(r)&&r.length>0)return re.fromArray(r.map(u=>e.nodeFromJSON(u)));const c=e.nodeFromJSON(r);return t.errorOnInvalidContent&&c.check(),c}catch(l){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:l});return console.warn("[tiptap warn]: Invalid content.","Passed value:",r,"Error:",l),Gc("",e,t)}if(s){if(t.errorOnInvalidContent){let c=!1,u="";const h=new DN({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:m=>(c=!0,u=typeof m=="string"?m:m.outerHTML,null)}]}})});if(t.slice?Os.fromSchema(h).parseSlice(Tu(r),t.parseOptions):Os.fromSchema(h).parse(Tu(r),t.parseOptions),t.errorOnInvalidContent&&c)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const l=Os.fromSchema(e);return t.slice?l.parseSlice(Tu(r),t.parseOptions).content:l.parse(Tu(r),t.parseOptions)}return Gc("",e,t)}function ug(r,e,t={},n={}){return Gc(r,e,{slice:!1,parseOptions:t,errorOnInvalidContent:n.errorOnInvalidContent})}function F9(r){for(let e=0;e<r.edgeCount;e+=1){const{type:t}=r.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function Y9(r,e,t){const n=[];return r.nodesBetween(e.from,e.to,(s,l)=>{t(s)&&n.push({node:s,pos:l})}),n}function q9(r,e){for(let t=r.depth;t>0;t-=1){const n=r.node(t);if(e(n))return{pos:t>0?r.before(t):0,start:r.start(t),depth:t,node:n}}}function yh(r){return e=>q9(e.$from,r)}function De(r,e,t){return r.config[e]===void 0&&r.parent?De(r.parent,e,t):typeof r.config[e]=="function"?r.config[e].bind({...t,parent:r.parent?De(r.parent,e,t):null}):r.config[e]}function bx(r){return r.map(e=>{const t={name:e.name,options:e.options,storage:e.storage},n=De(e,"addExtensions",t);return n?[e,...bx(n())]:e}).flat(10)}function yx(r,e){const t=Po.fromSchema(e).serializeFragment(r),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(t),s.innerHTML}function qj(r){return typeof r=="function"}function ut(r,e=void 0,...t){return qj(r)?e?r.bind(e)(...t):r(...t):r}function G9(r={}){return Object.keys(r).length===0&&r.constructor===Object}function Kc(r){const e=r.filter(s=>s.type==="extension"),t=r.filter(s=>s.type==="node"),n=r.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:n}}function Gj(r){const e=[],{nodeExtensions:t,markExtensions:n}=Kc(r),s=[...t,...n],l={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return r.forEach(c=>{const u={name:c.name,options:c.options,storage:c.storage,extensions:s},h=De(c,"addGlobalAttributes",u);if(!h)return;h().forEach(p=>{p.types.forEach(x=>{Object.entries(p.attributes).forEach(([b,v])=>{e.push({type:x,name:b,attribute:{...l,...v}})})})})}),s.forEach(c=>{const u={name:c.name,options:c.options,storage:c.storage},h=De(c,"addAttributes",u);if(!h)return;const m=h();Object.entries(m).forEach(([p,x])=>{const b={...l,...x};typeof b?.default=="function"&&(b.default=b.default()),b?.isRequired&&b?.default===void 0&&delete b.default,e.push({type:c.name,name:p,attribute:b})})}),e}function Rt(...r){return r.filter(e=>!!e).reduce((e,t)=>{const n={...e};return Object.entries(t).forEach(([s,l])=>{if(!n[s]){n[s]=l;return}if(s==="class"){const u=l?String(l).split(" "):[],h=n[s]?n[s].split(" "):[],m=u.filter(p=>!h.includes(p));n[s]=[...h,...m].join(" ")}else if(s==="style"){const u=l?l.split(";").map(p=>p.trim()).filter(Boolean):[],h=n[s]?n[s].split(";").map(p=>p.trim()).filter(Boolean):[],m=new Map;h.forEach(p=>{const[x,b]=p.split(":").map(v=>v.trim());m.set(x,b)}),u.forEach(p=>{const[x,b]=p.split(":").map(v=>v.trim());m.set(x,b)}),n[s]=Array.from(m.entries()).map(([p,x])=>`${p}: ${x}`).join("; ")}else n[s]=l}),n},{})}function xf(r,e){return e.filter(t=>t.type===r.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(r.attrs)||{}:{[t.name]:r.attrs[t.name]}).reduce((t,n)=>Rt(t,n),{})}function K9(r){return typeof r!="string"?r:r.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(r):r==="true"?!0:r==="false"?!1:r}function v1(r,e){return"style"in r?r:{...r,getAttrs:t=>{const n=r.getAttrs?r.getAttrs(t):r.attrs;if(n===!1)return!1;const s=e.reduce((l,c)=>{const u=c.attribute.parseHTML?c.attribute.parseHTML(t):K9(t.getAttribute(c.name));return u==null?l:{...l,[c.name]:u}},{});return{...n,...s}}}}function k1(r){return Object.fromEntries(Object.entries(r).filter(([e,t])=>e==="attrs"&&G9(t)?!1:t!=null))}function W9(r,e){var t;const n=Gj(r),{nodeExtensions:s,markExtensions:l}=Kc(r),c=(t=s.find(m=>De(m,"topNode")))==null?void 0:t.name,u=Object.fromEntries(s.map(m=>{const p=n.filter(N=>N.type===m.name),x={name:m.name,options:m.options,storage:m.storage,editor:e},b=r.reduce((N,T)=>{const C=De(T,"extendNodeSchema",x);return{...N,...C?C(m):{}}},{}),v=k1({...b,content:ut(De(m,"content",x)),marks:ut(De(m,"marks",x)),group:ut(De(m,"group",x)),inline:ut(De(m,"inline",x)),atom:ut(De(m,"atom",x)),selectable:ut(De(m,"selectable",x)),draggable:ut(De(m,"draggable",x)),code:ut(De(m,"code",x)),whitespace:ut(De(m,"whitespace",x)),linebreakReplacement:ut(De(m,"linebreakReplacement",x)),defining:ut(De(m,"defining",x)),isolating:ut(De(m,"isolating",x)),attrs:Object.fromEntries(p.map(N=>{var T,C;return[N.name,{default:(T=N?.attribute)==null?void 0:T.default,validate:(C=N?.attribute)==null?void 0:C.validate}]}))}),k=ut(De(m,"parseHTML",x));k&&(v.parseDOM=k.map(N=>v1(N,p)));const w=De(m,"renderHTML",x);w&&(v.toDOM=N=>w({node:N,HTMLAttributes:xf(N,p)}));const S=De(m,"renderText",x);return S&&(v.toText=S),[m.name,v]})),h=Object.fromEntries(l.map(m=>{const p=n.filter(S=>S.type===m.name),x={name:m.name,options:m.options,storage:m.storage,editor:e},b=r.reduce((S,N)=>{const T=De(N,"extendMarkSchema",x);return{...S,...T?T(m):{}}},{}),v=k1({...b,inclusive:ut(De(m,"inclusive",x)),excludes:ut(De(m,"excludes",x)),group:ut(De(m,"group",x)),spanning:ut(De(m,"spanning",x)),code:ut(De(m,"code",x)),attrs:Object.fromEntries(p.map(S=>{var N,T;return[S.name,{default:(N=S?.attribute)==null?void 0:N.default,validate:(T=S?.attribute)==null?void 0:T.validate}]}))}),k=ut(De(m,"parseHTML",x));k&&(v.parseDOM=k.map(S=>v1(S,p)));const w=De(m,"renderHTML",x);return w&&(v.toDOM=S=>w({mark:S,HTMLAttributes:xf(S,p)})),[m.name,v]}));return new DN({topNode:c,nodes:u,marks:h})}function X9(r){const e=r.filter((t,n)=>r.indexOf(t)!==n);return Array.from(new Set(e))}function vx(r){return r.sort((t,n)=>{const s=De(t,"priority")||100,l=De(n,"priority")||100;return s>l?-1:s<l?1:0})}function Kj(r){const e=vx(bx(r)),t=X9(e.map(n=>n.name));return t.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${t.map(n=>`'${n}'`).join(", ")}]. This can lead to issues.`),e}function Wj(r,e,t){const{from:n,to:s}=e,{blockSeparator:l=`

`,textSerializers:c={}}=t||{};let u="";return r.nodesBetween(n,s,(h,m,p,x)=>{var b;h.isBlock&&m>n&&(u+=l);const v=c?.[h.type.name];if(v)return p&&(u+=v({node:h,pos:m,parent:p,index:x,range:e})),!1;h.isText&&(u+=(b=h?.text)==null?void 0:b.slice(Math.max(n,m)-m,s-m))}),u}function Q9(r,e){const t={from:0,to:r.content.size};return Wj(r,t,e)}function Xj(r){return Object.fromEntries(Object.entries(r.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}function Ga(r,e){if(typeof r=="string"){if(!e.marks[r])throw Error(`There is no mark type named '${r}'. Maybe you forgot to add the extension?`);return e.marks[r]}return r}function Qj(r,e){const t=Ga(e,r.schema),{from:n,to:s,empty:l}=r.selection,c=[];l?(r.storedMarks&&c.push(...r.storedMarks),c.push(...r.selection.$head.marks())):r.doc.nodesBetween(n,s,h=>{c.push(...h.marks)});const u=c.find(h=>h.type.name===t.name);return u?{...u.attrs}:{}}function Wt(r,e){if(typeof r=="string"){if(!e.nodes[r])throw Error(`There is no node type named '${r}'. Maybe you forgot to add the extension?`);return e.nodes[r]}return r}function J9(r,e){const t=Wt(e,r.schema),{from:n,to:s}=r.selection,l=[];r.doc.nodesBetween(n,s,u=>{l.push(u)});const c=l.reverse().find(u=>u.type.name===t.name);return c?{...c.attrs}:{}}function vh(r,e){return e.nodes[r]?"node":e.marks[r]?"mark":null}function Jj(r,e){const t=vh(typeof e=="string"?e:e.name,r.schema);return t==="node"?J9(r,e):t==="mark"?Qj(r,e):{}}function Z9(r,e=JSON.stringify){const t={};return r.filter(n=>{const s=e(n);return Object.prototype.hasOwnProperty.call(t,s)?!1:t[s]=!0})}function e8(r){const e=Z9(r);return e.length===1?e:e.filter((t,n)=>!e.filter((l,c)=>c!==n).some(l=>t.oldRange.from>=l.oldRange.from&&t.oldRange.to<=l.oldRange.to&&t.newRange.from>=l.newRange.from&&t.newRange.to<=l.newRange.to))}function Zj(r){const{mapping:e,steps:t}=r,n=[];return e.maps.forEach((s,l)=>{const c=[];if(s.ranges.length)s.forEach((u,h)=>{c.push({from:u,to:h})});else{const{from:u,to:h}=t[l];if(u===void 0||h===void 0)return;c.push({from:u,to:h})}c.forEach(({from:u,to:h})=>{const m=e.slice(l).map(u,-1),p=e.slice(l).map(h),x=e.invert().map(m,-1),b=e.invert().map(p);n.push({oldRange:{from:x,to:b},newRange:{from:m,to:p}})})}),e8(n)}function kx(r){return Object.prototype.toString.call(r)==="[object RegExp]"}function bf(r,e,t={strict:!0}){const n=Object.keys(e);return n.length?n.every(s=>t.strict?e[s]===r[s]:kx(e[s])?e[s].test(r[s]):e[s]===r[s]):!0}function e5(r,e,t={}){return r.find(n=>n.type===e&&bf(Object.fromEntries(Object.keys(t).map(s=>[s,n.attrs[s]])),t))}function w1(r,e,t={}){return!!e5(r,e,t)}function wx(r,e,t){var n;if(!r||!e)return;let s=r.parent.childAfter(r.parentOffset);if((!s.node||!s.node.marks.some(p=>p.type===e))&&(s=r.parent.childBefore(r.parentOffset)),!s.node||!s.node.marks.some(p=>p.type===e)||(t=t||((n=s.node.marks[0])==null?void 0:n.attrs),!e5([...s.node.marks],e,t)))return;let c=s.index,u=r.start()+s.offset,h=c+1,m=u+s.node.nodeSize;for(;c>0&&w1([...r.parent.child(c-1).marks],e,t);)c-=1,u-=r.parent.child(c).nodeSize;for(;h<r.parent.childCount&&w1([...r.parent.child(h).marks],e,t);)m+=r.parent.child(h).nodeSize,h+=1;return{from:u,to:m}}function Sx(r,e,t){const n=[];return r===e?t.resolve(r).marks().forEach(s=>{const l=t.resolve(r),c=wx(l,s.type);c&&n.push({mark:s,...c})}):t.nodesBetween(r,e,(s,l)=>{!s||s?.nodeSize===void 0||n.push(...s.marks.map(c=>({from:l,to:l+s.nodeSize,mark:c})))}),n}var t8=(r,e,t,n=20)=>{const s=r.doc.resolve(t);let l=n,c=null;for(;l>0&&c===null;){const u=s.node(l);u?.type.name===e?c=u:l-=1}return[c,l]};function up(r,e){return e.nodes[r]||e.marks[r]||null}function Yu(r,e,t){return Object.fromEntries(Object.entries(t).filter(([n])=>{const s=r.find(l=>l.type===e&&l.name===n);return s?s.attribute.keepOnSplit:!1}))}var r8=(r,e=500)=>{let t="";const n=r.parentOffset;return r.parent.nodesBetween(Math.max(0,n-e),n,(s,l,c,u)=>{var h,m;const p=((m=(h=s.type.spec).toText)==null?void 0:m.call(h,{node:s,pos:l,parent:c,index:u}))||s.textContent||"%leaf%";t+=s.isAtom&&!s.isText?p:p.slice(0,Math.max(0,n-l))}),t};function fg(r,e,t={}){const{empty:n,ranges:s}=r.selection,l=e?Ga(e,r.schema):null;if(n)return!!(r.storedMarks||r.selection.$from.marks()).filter(x=>l?l.name===x.type.name:!0).find(x=>bf(x.attrs,t,{strict:!1}));let c=0;const u=[];if(s.forEach(({$from:x,$to:b})=>{const v=x.pos,k=b.pos;r.doc.nodesBetween(v,k,(w,S)=>{if(!w.isText&&!w.marks.length)return;const N=Math.max(v,S),T=Math.min(k,S+w.nodeSize),C=T-N;c+=C,u.push(...w.marks.map(D=>({mark:D,from:N,to:T})))})}),c===0)return!1;const h=u.filter(x=>l?l.name===x.mark.type.name:!0).filter(x=>bf(x.mark.attrs,t,{strict:!1})).reduce((x,b)=>x+b.to-b.from,0),m=u.filter(x=>l?x.mark.type!==l&&x.mark.type.excludes(l):!0).reduce((x,b)=>x+b.to-b.from,0);return(h>0?h+m:h)>=c}function _s(r,e,t={}){const{from:n,to:s,empty:l}=r.selection,c=e?Wt(e,r.schema):null,u=[];r.doc.nodesBetween(n,s,(x,b)=>{if(x.isText)return;const v=Math.max(n,b),k=Math.min(s,b+x.nodeSize);u.push({node:x,from:v,to:k})});const h=s-n,m=u.filter(x=>c?c.name===x.node.type.name:!0).filter(x=>bf(x.node.attrs,t,{strict:!1}));return l?!!m.length:m.reduce((x,b)=>x+b.to-b.from,0)>=h}function n8(r,e,t={}){if(!e)return _s(r,null,t)||fg(r,null,t);const n=vh(e,r.schema);return n==="node"?_s(r,e,t):n==="mark"?fg(r,e,t):!1}var a8=(r,e)=>{const{$from:t,$to:n,$anchor:s}=r.selection;if(e){const l=yh(u=>u.type.name===e)(r.selection);if(!l)return!1;const c=r.doc.resolve(l.pos+1);return s.pos+1===c.end()}return!(n.parentOffset<n.parent.nodeSize-2||t.pos!==n.pos)},s8=r=>{const{$from:e,$to:t}=r.selection;return!(e.parentOffset>0||e.pos!==t.pos)};function S1(r,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===r.name):e}function N1(r,e){const{nodeExtensions:t}=Kc(e),n=t.find(c=>c.name===r);if(!n)return!1;const s={name:n.name,options:n.options,storage:n.storage},l=ut(De(n,"group",s));return typeof l!="string"?!1:l.split(" ").includes("list")}function kh(r,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var n;if(t){if(r.type.name==="hardBreak")return!0;if(r.isText)return/^\s*$/m.test((n=r.text)!=null?n:"")}if(r.isText)return!r.text;if(r.isAtom||r.isLeaf)return!1;if(r.content.childCount===0)return!0;if(e){let s=!0;return r.content.forEach(l=>{s!==!1&&(kh(l,{ignoreWhitespace:t,checkChildren:e})||(s=!1))}),s}return!1}function t5(r){return r instanceof Re}function r5(r){return r instanceof He}function vo(r=0,e=0,t=0){return Math.min(Math.max(r,e),t)}function n5(r,e=null){if(!e)return null;const t=Ue.atStart(r),n=Ue.atEnd(r);if(e==="start"||e===!0)return t;if(e==="end")return n;const s=t.from,l=n.to;return e==="all"?He.create(r,vo(0,s,l),vo(r.content.size,s,l)):He.create(r,vo(e,s,l),vo(e,s,l))}function o8(r,e,t){const n=r.steps.length-1;if(n<e)return;const s=r.steps[n];if(!(s instanceof or||s instanceof dr))return;const l=r.mapping.maps[n];let c=0;l.forEach((u,h,m,p)=>{c===0&&(c=p)}),r.setSelection(Ue.near(r.doc.resolve(c),t))}var wh=class{constructor(r){this.find=r.find,this.handler=r.handler}},l8=(r,e)=>{if(kx(e))return e.exec(r);const t=e(r);if(!t)return null;const n=[t.text];return n.index=t.index,n.input=r,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),n.push(t.replaceWith)),n};function Mu(r){var e;const{editor:t,from:n,to:s,text:l,rules:c,plugin:u}=r,{view:h}=t;if(h.composing)return!1;const m=h.state.doc.resolve(n);if(m.parent.type.spec.code||(e=m.nodeBefore||m.nodeAfter)!=null&&e.marks.find(b=>b.type.spec.code))return!1;let p=!1;const x=r8(m)+l;return c.forEach(b=>{if(p)return;const v=l8(x,b.find);if(!v)return;const k=h.state.tr,w=xh({state:h.state,transaction:k}),S={from:n-(v[0].length-l.length),to:s},{commands:N,chain:T,can:C}=new bh({editor:t,state:w});b.handler({state:w,range:S,match:v,commands:N,chain:T,can:C})===null||!k.steps.length||(k.setMeta(u,{transform:k,from:n,to:s,text:l}),h.dispatch(k),p=!0)}),p}function i8(r){const{editor:e,rules:t}=r,n=new Ht({state:{init(){return null},apply(s,l,c){const u=s.getMeta(n);if(u)return u;const h=s.getMeta("applyInputRules");return!!h&&setTimeout(()=>{let{text:p}=h;typeof p=="string"?p=p:p=yx(re.from(p),c.schema);const{from:x}=h,b=x+p.length;Mu({editor:e,from:x,to:b,text:p,rules:t,plugin:n})}),s.selectionSet||s.docChanged?null:l}},props:{handleTextInput(s,l,c,u){return Mu({editor:e,from:l,to:c,text:u,rules:t,plugin:n})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:l}=s.state.selection;l&&Mu({editor:e,from:l.pos,to:l.pos,text:"",rules:t,plugin:n})}),!1)},handleKeyDown(s,l){if(l.key!=="Enter")return!1;const{$cursor:c}=s.state.selection;return c?Mu({editor:e,from:c.pos,to:c.pos,text:`
`,rules:t,plugin:n}):!1}},isInputRules:!0});return n}function c8(r){return Object.prototype.toString.call(r).slice(8,-1)}function Eu(r){return c8(r)!=="Object"?!1:r.constructor===Object&&Object.getPrototypeOf(r)===Object.prototype}function a5(r,e){const t={...r};return Eu(r)&&Eu(e)&&Object.keys(e).forEach(n=>{Eu(e[n])&&Eu(r[n])?t[n]=a5(r[n],e[n]):t[n]=e[n]}),t}var Nx=class{constructor(r={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...r},this.name=this.config.name}get options(){return{...ut(De(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...ut(De(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(r={}){const e=this.extend({...this.config,addOptions:()=>a5(this.options,r)});return e.name=this.name,e.parent=this.parent,e}extend(r={}){const e=new this.constructor({...this.config,...r});return e.parent=this,this.child=e,e.name="name"in r?r.name:e.parent.name,e}},ga=class s5 extends Nx{constructor(){super(...arguments),this.type="mark"}static create(e={}){const t=typeof e=="function"?e():e;return new s5(t)}static handleExit({editor:e,mark:t}){const{tr:n}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const c=s.marks();if(!!!c.find(m=>m?.type.name===t.name))return!1;const h=c.find(m=>m?.type.name===t.name);return h&&n.removeStoredMark(h),n.insertText(" ",s.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function d8(r){return typeof r=="number"}var u8=class{constructor(r){this.find=r.find,this.handler=r.handler}},f8=(r,e,t)=>{if(kx(e))return[...r.matchAll(e)];const n=e(r,t);return n?n.map(s=>{const l=[s.text];return l.index=s.index,l.input=r,l.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),l.push(s.replaceWith)),l}):[]};function h8(r){const{editor:e,state:t,from:n,to:s,rule:l,pasteEvent:c,dropEvent:u}=r,{commands:h,chain:m,can:p}=new bh({editor:e,state:t}),x=[];return t.doc.nodesBetween(n,s,(v,k)=>{var w,S,N,T,C;if((S=(w=v.type)==null?void 0:w.spec)!=null&&S.code||!(v.isText||v.isTextblock||v.isInline))return;const D=(C=(T=(N=v.content)==null?void 0:N.size)!=null?T:v.nodeSize)!=null?C:0,A=Math.max(n,k),Y=Math.min(s,k+D);if(A>=Y)return;const I=v.isText?v.text||"":v.textBetween(A-k,Y-k,void 0,"");f8(I,l.find,c).forEach(ae=>{if(ae.index===void 0)return;const le=A+ae.index+1,ie=le+ae[0].length,he={from:t.tr.mapping.map(le),to:t.tr.mapping.map(ie)},ye=l.handler({state:t,range:he,match:ae,commands:h,chain:m,can:p,pasteEvent:c,dropEvent:u});x.push(ye)})}),x.every(v=>v!==null)}var Au=null,m8=r=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)==null||e.setData("text/html",r),t};function p8(r){const{editor:e,rules:t}=r;let n=null,s=!1,l=!1,c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const h=({state:p,from:x,to:b,rule:v,pasteEvt:k})=>{const w=p.tr,S=xh({state:p,transaction:w});if(!(!h8({editor:e,state:S,from:Math.max(x-1,0),to:b.b-1,rule:v,pasteEvent:k,dropEvent:u})||!w.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,w}};return t.map(p=>new Ht({view(x){const b=k=>{var w;n=(w=x.dom.parentElement)!=null&&w.contains(k.target)?x.dom.parentElement:null,n&&(Au=e)},v=()=>{Au&&(Au=null)};return window.addEventListener("dragstart",b),window.addEventListener("dragend",v),{destroy(){window.removeEventListener("dragstart",b),window.removeEventListener("dragend",v)}}},props:{handleDOMEvents:{drop:(x,b)=>{if(l=n===x.dom.parentElement,u=b,!l){const v=Au;v?.isEditable&&setTimeout(()=>{const k=v.state.selection;k&&v.commands.deleteRange({from:k.from,to:k.to})},10)}return!1},paste:(x,b)=>{var v;const k=(v=b.clipboardData)==null?void 0:v.getData("text/html");return c=b,s=!!k?.includes("data-pm-slice"),!1}}},appendTransaction:(x,b,v)=>{const k=x[0],w=k.getMeta("uiEvent")==="paste"&&!s,S=k.getMeta("uiEvent")==="drop"&&!l,N=k.getMeta("applyPasteRules"),T=!!N;if(!w&&!S&&!T)return;if(T){let{text:A}=N;typeof A=="string"?A=A:A=yx(re.from(A),v.schema);const{from:Y}=N,I=Y+A.length,$=m8(A);return h({rule:p,state:v,from:Y,to:{b:I},pasteEvt:$})}const C=b.doc.content.findDiffStart(v.doc.content),D=b.doc.content.findDiffEnd(v.doc.content);if(!(!d8(C)||!D||C===D.b))return h({rule:p,state:v,from:C,to:D,pasteEvt:c})}}))}var Sh=class{constructor(r,e){this.splittableMarks=[],this.editor=e,this.extensions=Kj(r),this.schema=W9(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((r,e)=>{const t={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:up(e.name,this.schema)},n=De(e,"addCommands",t);return n?{...r,...n()}:r},{})}get plugins(){const{editor:r}=this;return vx([...this.extensions].reverse()).map(n=>{const s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:r,type:up(n.name,this.schema)},l=[],c=De(n,"addKeyboardShortcuts",s);let u={};if(n.type==="mark"&&De(n,"exitable",s)&&(u.ArrowRight=()=>ga.handleExit({editor:r,mark:n})),c){const b=Object.fromEntries(Object.entries(c()).map(([v,k])=>[v,()=>k({editor:r})]));u={...u,...b}}const h=k9(u);l.push(h);const m=De(n,"addInputRules",s);if(S1(n,r.options.enableInputRules)&&m){const b=m();if(b&&b.length){const v=i8({editor:r,rules:b}),k=Array.isArray(v)?v:[v];l.push(...k)}}const p=De(n,"addPasteRules",s);if(S1(n,r.options.enablePasteRules)&&p){const b=p();if(b&&b.length){const v=p8({editor:r,rules:b});l.push(...v)}}const x=De(n,"addProseMirrorPlugins",s);if(x){const b=x();l.push(...b)}return l}).flat()}get attributes(){return Gj(this.extensions)}get nodeViews(){const{editor:r}=this,{nodeExtensions:e}=Kc(this.extensions);return Object.fromEntries(e.filter(t=>!!De(t,"addNodeView")).map(t=>{const n=this.attributes.filter(u=>u.type===t.name),s={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:r,type:Wt(t.name,this.schema)},l=De(t,"addNodeView",s);if(!l)return[];const c=(u,h,m,p,x)=>{const b=xf(u,n);return l()({node:u,view:h,getPos:m,decorations:p,innerDecorations:x,editor:r,extension:t,HTMLAttributes:b})};return[t.name,c]}))}get markViews(){const{editor:r}=this,{markExtensions:e}=Kc(this.extensions);return Object.fromEntries(e.filter(t=>!!De(t,"addMarkView")).map(t=>{const n=this.attributes.filter(u=>u.type===t.name),s={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:r,type:Ga(t.name,this.schema)},l=De(t,"addMarkView",s);if(!l)return[];const c=(u,h,m)=>{const p=xf(u,n);return l()({mark:u,view:h,inline:m,editor:r,extension:t,HTMLAttributes:p,updateAttributes:x=>{Dz(u,r,x)}})};return[t.name,c]}))}setupExtensions(){const r=this.extensions;this.editor.extensionStorage=Object.fromEntries(r.map(e=>[e.name,e.storage])),r.forEach(e=>{var t;const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:up(e.name,this.schema)};e.type==="mark"&&((t=ut(De(e,"keepOnSplit",n)))==null||t)&&this.splittableMarks.push(e.name);const s=De(e,"onBeforeCreate",n),l=De(e,"onCreate",n),c=De(e,"onUpdate",n),u=De(e,"onSelectionUpdate",n),h=De(e,"onTransaction",n),m=De(e,"onFocus",n),p=De(e,"onBlur",n),x=De(e,"onDestroy",n);s&&this.editor.on("beforeCreate",s),l&&this.editor.on("create",l),c&&this.editor.on("update",c),u&&this.editor.on("selectionUpdate",u),h&&this.editor.on("transaction",h),m&&this.editor.on("focus",m),p&&this.editor.on("blur",p),x&&this.editor.on("destroy",x)})}};Sh.resolve=Kj;Sh.sort=vx;Sh.flatten=bx;var g8={};Vj(g8,{ClipboardTextSerializer:()=>l5,Commands:()=>d5,Delete:()=>u5,Drop:()=>f5,Editable:()=>h5,FocusEvents:()=>p5,Keymap:()=>g5,Paste:()=>x5,Tabindex:()=>b5,focusEventsPluginKey:()=>m5});var wt=class o5 extends Nx{constructor(){super(...arguments),this.type="extension"}static create(e={}){const t=typeof e=="function"?e():e;return new o5(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}},l5=wt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Ht({key:new fr("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:r}=this,{state:e,schema:t}=r,{doc:n,selection:s}=e,{ranges:l}=s,c=Math.min(...l.map(p=>p.$from.pos)),u=Math.max(...l.map(p=>p.$to.pos)),h=Xj(t);return Wj(n,{from:c,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:h})}}})]}}),i5={};Vj(i5,{blur:()=>x8,clearContent:()=>b8,clearNodes:()=>y8,command:()=>v8,createParagraphNear:()=>k8,cut:()=>w8,deleteCurrentNode:()=>S8,deleteNode:()=>N8,deleteRange:()=>j8,deleteSelection:()=>C8,enter:()=>T8,exitCode:()=>M8,extendMarkRange:()=>E8,first:()=>A8,focus:()=>O8,forEach:()=>R8,insertContent:()=>z8,insertContentAt:()=>B8,joinBackward:()=>_8,joinDown:()=>P8,joinForward:()=>H8,joinItemBackward:()=>$8,joinItemForward:()=>U8,joinTextblockBackward:()=>V8,joinTextblockForward:()=>F8,joinUp:()=>I8,keyboardShortcut:()=>q8,lift:()=>G8,liftEmptyBlock:()=>K8,liftListItem:()=>W8,newlineInCode:()=>X8,resetAttributes:()=>Q8,scrollIntoView:()=>J8,selectAll:()=>Z8,selectNodeBackward:()=>ez,selectNodeForward:()=>tz,selectParentNode:()=>rz,selectTextblockEnd:()=>nz,selectTextblockStart:()=>az,setContent:()=>sz,setMark:()=>lz,setMeta:()=>iz,setNode:()=>cz,setNodeSelection:()=>dz,setTextSelection:()=>uz,sinkListItem:()=>fz,splitBlock:()=>hz,splitListItem:()=>mz,toggleList:()=>pz,toggleMark:()=>gz,toggleNode:()=>xz,toggleWrap:()=>bz,undoInputRule:()=>yz,unsetAllMarks:()=>vz,unsetMark:()=>kz,updateAttributes:()=>wz,wrapIn:()=>Sz,wrapInList:()=>Nz});var x8=()=>({editor:r,view:e})=>(requestAnimationFrame(()=>{var t;r.isDestroyed||(e.dom.blur(),(t=window?.getSelection())==null||t.removeAllRanges())}),!0),b8=(r=!0)=>({commands:e})=>e.setContent("",{emitUpdate:r}),y8=()=>({state:r,tr:e,dispatch:t})=>{const{selection:n}=e,{ranges:s}=n;return t&&s.forEach(({$from:l,$to:c})=>{r.doc.nodesBetween(l.pos,c.pos,(u,h)=>{if(u.type.isText)return;const{doc:m,mapping:p}=e,x=m.resolve(p.map(h)),b=m.resolve(p.map(h+u.nodeSize)),v=x.blockRange(b);if(!v)return;const k=li(v);if(u.type.isTextblock){const{defaultType:w}=x.parent.contentMatchAt(x.index());e.setNodeMarkup(v.start,w)}(k||k===0)&&e.lift(v,k)})}),!0},v8=r=>e=>r(e),k8=()=>({state:r,dispatch:e})=>_j(r,e),w8=(r,e)=>({editor:t,tr:n})=>{const{state:s}=t,l=s.doc.slice(r.from,r.to);n.deleteRange(r.from,r.to);const c=n.mapping.map(e);return n.insert(c,l.content),n.setSelection(new He(n.doc.resolve(Math.max(c-1,0)))),!0},S8=()=>({tr:r,dispatch:e})=>{const{selection:t}=r,n=t.$anchor.node();if(n.content.size>0)return!1;const s=r.selection.$anchor;for(let l=s.depth;l>0;l-=1)if(s.node(l).type===n.type){if(e){const u=s.before(l),h=s.after(l);r.delete(u,h).scrollIntoView()}return!0}return!1},N8=r=>({tr:e,state:t,dispatch:n})=>{const s=Wt(r,t.schema),l=e.selection.$anchor;for(let c=l.depth;c>0;c-=1)if(l.node(c).type===s){if(n){const h=l.before(c),m=l.after(c);e.delete(h,m).scrollIntoView()}return!0}return!1},j8=r=>({tr:e,dispatch:t})=>{const{from:n,to:s}=r;return t&&e.delete(n,s),!0},C8=()=>({state:r,dispatch:e})=>hx(r,e),T8=()=>({commands:r})=>r.keyboardShortcut("Enter"),M8=()=>({state:r,dispatch:e})=>T9(r,e),E8=(r,e={})=>({tr:t,state:n,dispatch:s})=>{const l=Ga(r,n.schema),{doc:c,selection:u}=t,{$from:h,from:m,to:p}=u;if(s){const x=wx(h,l,e);if(x&&x.from<=m&&x.to>=p){const b=He.create(c,x.from,x.to);t.setSelection(b)}}return!0},A8=r=>e=>{const t=typeof r=="function"?r(e):r;for(let n=0;n<t.length;n+=1)if(t[n](e))return!0;return!1};function D8(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function jx(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var O8=(r=null,e={})=>({editor:t,view:n,tr:s,dispatch:l})=>{e={scrollIntoView:!0,...e};const c=()=>{(jx()||D8())&&n.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(n.focus(),e?.scrollIntoView&&t.commands.scrollIntoView())})};if(n.hasFocus()&&r===null||r===!1)return!0;if(l&&r===null&&!r5(t.state.selection))return c(),!0;const u=n5(s.doc,r)||t.state.selection,h=t.state.selection.eq(u);return l&&(h||s.setSelection(u),h&&s.storedMarks&&s.setStoredMarks(s.storedMarks),c()),!0},R8=(r,e)=>t=>r.every((n,s)=>e(n,{...t,index:s})),z8=(r,e)=>({tr:t,commands:n})=>n.insertContentAt({from:t.selection.from,to:t.selection.to},r,e),L8=r=>!("type"in r),B8=(r,e,t)=>({tr:n,dispatch:s,editor:l})=>{var c;if(s){t={parseOptions:l.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let u;const{selection:h}=l.state,m=N=>{l.emit("contentError",{editor:l,error:N,disableCollaboration:()=>{"collaboration"in l.storage&&typeof l.storage.collaboration=="object"&&l.storage.collaboration&&(l.storage.collaboration.isDisabled=!0)}})},p={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!l.options.enableContentCheck&&l.options.emitContentError)try{Gc(e,l.schema,{parseOptions:p,errorOnInvalidContent:!0})}catch(N){m(N)}try{u=Gc(e,l.schema,{parseOptions:p,errorOnInvalidContent:(c=t.errorOnInvalidContent)!=null?c:l.options.enableContentCheck})}catch(N){return m(N),!1}let{from:x,to:b}=typeof r=="number"?{from:r,to:r}:{from:r.from,to:r.to},v=!0,k=!0;if((L8(u)?u:[u]).forEach(N=>{N.check(),v=v?N.isText&&N.marks.length===0:!1,k=k?N.isBlock:!1}),x===b&&k){const{parent:N}=n.doc.resolve(x);N.isTextblock&&!N.type.spec.code&&!N.childCount&&(x-=1,b+=1)}let S;if(v){if(Array.isArray(e))S=e.map(N=>N.text||"").join("");else if(e instanceof re){let N="";e.forEach(T=>{T.text&&(N+=T.text)}),S=N}else typeof e=="object"&&e&&e.text?S=e.text:S=e;n.insertText(S,x,b)}else{S=u;const N=h.$from.parentOffset===0,T=h.$from.node().isText||h.$from.node().isTextblock,C=h.$from.node().content.size>0;N&&T&&C&&(x=Math.max(0,x-1)),n.replaceWith(x,b,S)}t.updateSelection&&o8(n,n.steps.length-1,-1),t.applyInputRules&&n.setMeta("applyInputRules",{from:x,text:S}),t.applyPasteRules&&n.setMeta("applyPasteRules",{from:x,text:S})}return!0},I8=()=>({state:r,dispatch:e})=>N9(r,e),P8=()=>({state:r,dispatch:e})=>j9(r,e),_8=()=>({state:r,dispatch:e})=>Oj(r,e),H8=()=>({state:r,dispatch:e})=>Bj(r,e),$8=()=>({state:r,dispatch:e,tr:t})=>{try{const n=uh(r.doc,r.selection.$from.pos,-1);return n==null?!1:(t.join(n,2),e&&e(t),!0)}catch{return!1}},U8=()=>({state:r,dispatch:e,tr:t})=>{try{const n=uh(r.doc,r.selection.$from.pos,1);return n==null?!1:(t.join(n,2),e&&e(t),!0)}catch{return!1}},V8=()=>({state:r,dispatch:e})=>w9(r,e),F8=()=>({state:r,dispatch:e})=>S9(r,e);function c5(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function Y8(r){const e=r.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let n,s,l,c;for(let u=0;u<e.length-1;u+=1){const h=e[u];if(/^(cmd|meta|m)$/i.test(h))c=!0;else if(/^a(lt)?$/i.test(h))n=!0;else if(/^(c|ctrl|control)$/i.test(h))s=!0;else if(/^s(hift)?$/i.test(h))l=!0;else if(/^mod$/i.test(h))jx()||c5()?c=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${h}`)}return n&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),c&&(t=`Meta-${t}`),l&&(t=`Shift-${t}`),t}var q8=r=>({editor:e,view:t,tr:n,dispatch:s})=>{const l=Y8(r).split(/-(?!$)/),c=l.find(m=>!["Alt","Ctrl","Meta","Shift"].includes(m)),u=new KeyboardEvent("keydown",{key:c==="Space"?" ":c,altKey:l.includes("Alt"),ctrlKey:l.includes("Ctrl"),metaKey:l.includes("Meta"),shiftKey:l.includes("Shift"),bubbles:!0,cancelable:!0}),h=e.captureTransaction(()=>{t.someProp("handleKeyDown",m=>m(t,u))});return h?.steps.forEach(m=>{const p=m.map(n.mapping);p&&s&&n.maybeStep(p)}),!0},G8=(r,e={})=>({state:t,dispatch:n})=>{const s=Wt(r,t.schema);return _s(t,s,e)?C9(t,n):!1},K8=()=>({state:r,dispatch:e})=>Hj(r,e),W8=r=>({state:e,dispatch:t})=>{const n=Wt(r,e.schema);return P9(n)(e,t)},X8=()=>({state:r,dispatch:e})=>Pj(r,e);function j1(r,e){const t=typeof e=="string"?[e]:e;return Object.keys(r).reduce((n,s)=>(t.includes(s)||(n[s]=r[s]),n),{})}var Q8=(r,e)=>({tr:t,state:n,dispatch:s})=>{let l=null,c=null;const u=vh(typeof r=="string"?r:r.name,n.schema);return u?(u==="node"&&(l=Wt(r,n.schema)),u==="mark"&&(c=Ga(r,n.schema)),s&&t.selection.ranges.forEach(h=>{n.doc.nodesBetween(h.$from.pos,h.$to.pos,(m,p)=>{l&&l===m.type&&t.setNodeMarkup(p,void 0,j1(m.attrs,e)),c&&m.marks.length&&m.marks.forEach(x=>{c===x.type&&t.addMark(p,p+m.nodeSize,c.create(j1(x.attrs,e)))})})}),!0):!1},J8=()=>({tr:r,dispatch:e})=>(e&&r.scrollIntoView(),!0),Z8=()=>({tr:r,dispatch:e})=>{if(e){const t=new un(r.doc);r.setSelection(t)}return!0},ez=()=>({state:r,dispatch:e})=>zj(r,e),tz=()=>({state:r,dispatch:e})=>Ij(r,e),rz=()=>({state:r,dispatch:e})=>A9(r,e),nz=()=>({state:r,dispatch:e})=>R9(r,e),az=()=>({state:r,dispatch:e})=>O9(r,e),sz=(r,{errorOnInvalidContent:e,emitUpdate:t=!0,parseOptions:n={}}={})=>({editor:s,tr:l,dispatch:c,commands:u})=>{const{doc:h}=l;if(n.preserveWhitespace!=="full"){const m=ug(r,s.schema,n,{errorOnInvalidContent:e??s.options.enableContentCheck});return c&&l.replaceWith(0,h.content.size,m).setMeta("preventUpdate",!t),!0}return c&&l.setMeta("preventUpdate",!t),u.insertContentAt({from:0,to:h.content.size},r,{parseOptions:n,errorOnInvalidContent:e??s.options.enableContentCheck})};function oz(r,e,t){var n;const{selection:s}=e;let l=null;if(r5(s)&&(l=s.$cursor),l){const u=(n=r.storedMarks)!=null?n:l.marks();return!!t.isInSet(u)||!u.some(h=>h.type.excludes(t))}const{ranges:c}=s;return c.some(({$from:u,$to:h})=>{let m=u.depth===0?r.doc.inlineContent&&r.doc.type.allowsMarkType(t):!1;return r.doc.nodesBetween(u.pos,h.pos,(p,x,b)=>{if(m)return!1;if(p.isInline){const v=!b||b.type.allowsMarkType(t),k=!!t.isInSet(p.marks)||!p.marks.some(w=>w.type.excludes(t));m=v&&k}return!m}),m})}var lz=(r,e={})=>({tr:t,state:n,dispatch:s})=>{const{selection:l}=t,{empty:c,ranges:u}=l,h=Ga(r,n.schema);if(s)if(c){const m=Qj(n,h);t.addStoredMark(h.create({...m,...e}))}else u.forEach(m=>{const p=m.$from.pos,x=m.$to.pos;n.doc.nodesBetween(p,x,(b,v)=>{const k=Math.max(v,p),w=Math.min(v+b.nodeSize,x);b.marks.find(N=>N.type===h)?b.marks.forEach(N=>{h===N.type&&t.addMark(k,w,h.create({...N.attrs,...e}))}):t.addMark(k,w,h.create(e))})});return oz(n,t,h)},iz=(r,e)=>({tr:t})=>(t.setMeta(r,e),!0),cz=(r,e={})=>({state:t,dispatch:n,chain:s})=>{const l=Wt(r,t.schema);let c;return t.selection.$anchor.sameParent(t.selection.$head)&&(c=t.selection.$anchor.parent.attrs),l.isTextblock?s().command(({commands:u})=>y1(l,{...c,...e})(t)?!0:u.clearNodes()).command(({state:u})=>y1(l,{...c,...e})(u,n)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},dz=r=>({tr:e,dispatch:t})=>{if(t){const{doc:n}=e,s=vo(r,0,n.content.size),l=Re.create(n,s);e.setSelection(l)}return!0},uz=r=>({tr:e,dispatch:t})=>{if(t){const{doc:n}=e,{from:s,to:l}=typeof r=="number"?{from:r,to:r}:r,c=He.atStart(n).from,u=He.atEnd(n).to,h=vo(s,c,u),m=vo(l,c,u),p=He.create(n,h,m);e.setSelection(p)}return!0},fz=r=>({state:e,dispatch:t})=>{const n=Wt(r,e.schema);return $9(n)(e,t)};function C1(r,e){const t=r.storedMarks||r.selection.$to.parentOffset&&r.selection.$from.marks();if(t){const n=t.filter(s=>e?.includes(s.type.name));r.tr.ensureMarks(n)}}var hz=({keepMarks:r=!0}={})=>({tr:e,state:t,dispatch:n,editor:s})=>{const{selection:l,doc:c}=e,{$from:u,$to:h}=l,m=s.extensionManager.attributes,p=Yu(m,u.node().type.name,u.node().attrs);if(l instanceof Re&&l.node.isBlock)return!u.parentOffset||!Va(c,u.pos)?!1:(n&&(r&&C1(t,s.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const x=h.parentOffset===h.parent.content.size,b=u.depth===0?void 0:F9(u.node(-1).contentMatchAt(u.indexAfter(-1)));let v=x&&b?[{type:b,attrs:p}]:void 0,k=Va(e.doc,e.mapping.map(u.pos),1,v);if(!v&&!k&&Va(e.doc,e.mapping.map(u.pos),1,b?[{type:b}]:void 0)&&(k=!0,v=b?[{type:b,attrs:p}]:void 0),n){if(k&&(l instanceof He&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,v),b&&!x&&!u.parentOffset&&u.parent.type!==b)){const w=e.mapping.map(u.before()),S=e.doc.resolve(w);u.node(-1).canReplaceWith(S.index(),S.index()+1,b)&&e.setNodeMarkup(e.mapping.map(u.before()),b)}r&&C1(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return k},mz=(r,e={})=>({tr:t,state:n,dispatch:s,editor:l})=>{var c;const u=Wt(r,n.schema),{$from:h,$to:m}=n.selection,p=n.selection.node;if(p&&p.isBlock||h.depth<2||!h.sameParent(m))return!1;const x=h.node(-1);if(x.type!==u)return!1;const b=l.extensionManager.attributes;if(h.parent.content.size===0&&h.node(-1).childCount===h.indexAfter(-1)){if(h.depth===2||h.node(-3).type!==u||h.index(-2)!==h.node(-2).childCount-1)return!1;if(s){let N=re.empty;const T=h.index(-1)?1:h.index(-2)?2:3;for(let $=h.depth-T;$>=h.depth-3;$-=1)N=re.from(h.node($).copy(N));const C=h.indexAfter(-1)<h.node(-2).childCount?1:h.indexAfter(-2)<h.node(-3).childCount?2:3,D={...Yu(b,h.node().type.name,h.node().attrs),...e},A=((c=u.contentMatch.defaultType)==null?void 0:c.createAndFill(D))||void 0;N=N.append(re.from(u.createAndFill(null,A)||void 0));const Y=h.before(h.depth-(T-1));t.replace(Y,h.after(-C),new pe(N,4-T,0));let I=-1;t.doc.nodesBetween(Y,t.doc.content.size,($,ae)=>{if(I>-1)return!1;$.isTextblock&&$.content.size===0&&(I=ae+1)}),I>-1&&t.setSelection(He.near(t.doc.resolve(I))),t.scrollIntoView()}return!0}const v=m.pos===h.end()?x.contentMatchAt(0).defaultType:null,k={...Yu(b,x.type.name,x.attrs),...e},w={...Yu(b,h.node().type.name,h.node().attrs),...e};t.delete(h.pos,m.pos);const S=v?[{type:u,attrs:k},{type:v,attrs:w}]:[{type:u,attrs:k}];if(!Va(t.doc,h.pos,2))return!1;if(s){const{selection:N,storedMarks:T}=n,{splittableMarks:C}=l.extensionManager,D=T||N.$to.parentOffset&&N.$from.marks();if(t.split(h.pos,2,S).scrollIntoView(),!D||!s)return!0;const A=D.filter(Y=>C.includes(Y.type.name));t.ensureMarks(A)}return!0},fp=(r,e)=>{const t=yh(c=>c.type===e)(r.selection);if(!t)return!0;const n=r.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(n===void 0)return!0;const s=r.doc.nodeAt(n);return t.node.type===s?.type&&Fs(r.doc,t.pos)&&r.join(t.pos),!0},hp=(r,e)=>{const t=yh(c=>c.type===e)(r.selection);if(!t)return!0;const n=r.doc.resolve(t.start).after(t.depth);if(n===void 0)return!0;const s=r.doc.nodeAt(n);return t.node.type===s?.type&&Fs(r.doc,n)&&r.join(n),!0},pz=(r,e,t,n={})=>({editor:s,tr:l,state:c,dispatch:u,chain:h,commands:m,can:p})=>{const{extensions:x,splittableMarks:b}=s.extensionManager,v=Wt(r,c.schema),k=Wt(e,c.schema),{selection:w,storedMarks:S}=c,{$from:N,$to:T}=w,C=N.blockRange(T),D=S||w.$to.parentOffset&&w.$from.marks();if(!C)return!1;const A=yh(Y=>N1(Y.type.name,x))(w);if(C.depth>=1&&A&&C.depth-A.depth<=1){if(A.node.type===v)return m.liftListItem(k);if(N1(A.node.type.name,x)&&v.validContent(A.node.content)&&u)return h().command(()=>(l.setNodeMarkup(A.pos,v),!0)).command(()=>fp(l,v)).command(()=>hp(l,v)).run()}return!t||!D||!u?h().command(()=>p().wrapInList(v,n)?!0:m.clearNodes()).wrapInList(v,n).command(()=>fp(l,v)).command(()=>hp(l,v)).run():h().command(()=>{const Y=p().wrapInList(v,n),I=D.filter($=>b.includes($.type.name));return l.ensureMarks(I),Y?!0:m.clearNodes()}).wrapInList(v,n).command(()=>fp(l,v)).command(()=>hp(l,v)).run()},gz=(r,e={},t={})=>({state:n,commands:s})=>{const{extendEmptyMarkRange:l=!1}=t,c=Ga(r,n.schema);return fg(n,c,e)?s.unsetMark(c,{extendEmptyMarkRange:l}):s.setMark(c,e)},xz=(r,e,t={})=>({state:n,commands:s})=>{const l=Wt(r,n.schema),c=Wt(e,n.schema),u=_s(n,l,t);let h;return n.selection.$anchor.sameParent(n.selection.$head)&&(h=n.selection.$anchor.parent.attrs),u?s.setNode(c,h):s.setNode(l,{...h,...t})},bz=(r,e={})=>({state:t,commands:n})=>{const s=Wt(r,t.schema);return _s(t,s,e)?n.lift(s):n.wrapIn(s,e)},yz=()=>({state:r,dispatch:e})=>{const t=r.plugins;for(let n=0;n<t.length;n+=1){const s=t[n];let l;if(s.spec.isInputRules&&(l=s.getState(r))){if(e){const c=r.tr,u=l.transform;for(let h=u.steps.length-1;h>=0;h-=1)c.step(u.steps[h].invert(u.docs[h]));if(l.text){const h=c.doc.resolve(l.from).marks();c.replaceWith(l.from,l.to,r.schema.text(l.text,h))}else c.delete(l.from,l.to)}return!0}}return!1},vz=()=>({tr:r,dispatch:e})=>{const{selection:t}=r,{empty:n,ranges:s}=t;return n||e&&s.forEach(l=>{r.removeMark(l.$from.pos,l.$to.pos)}),!0},kz=(r,e={})=>({tr:t,state:n,dispatch:s})=>{var l;const{extendEmptyMarkRange:c=!1}=e,{selection:u}=t,h=Ga(r,n.schema),{$from:m,empty:p,ranges:x}=u;if(!s)return!0;if(p&&c){let{from:b,to:v}=u;const k=(l=m.marks().find(S=>S.type===h))==null?void 0:l.attrs,w=wx(m,h,k);w&&(b=w.from,v=w.to),t.removeMark(b,v,h)}else x.forEach(b=>{t.removeMark(b.$from.pos,b.$to.pos,h)});return t.removeStoredMark(h),!0},wz=(r,e={})=>({tr:t,state:n,dispatch:s})=>{let l=null,c=null;const u=vh(typeof r=="string"?r:r.name,n.schema);return u?(u==="node"&&(l=Wt(r,n.schema)),u==="mark"&&(c=Ga(r,n.schema)),s&&t.selection.ranges.forEach(h=>{const m=h.$from.pos,p=h.$to.pos;let x,b,v,k;t.selection.empty?n.doc.nodesBetween(m,p,(w,S)=>{l&&l===w.type&&(v=Math.max(S,m),k=Math.min(S+w.nodeSize,p),x=S,b=w)}):n.doc.nodesBetween(m,p,(w,S)=>{S<m&&l&&l===w.type&&(v=Math.max(S,m),k=Math.min(S+w.nodeSize,p),x=S,b=w),S>=m&&S<=p&&(l&&l===w.type&&t.setNodeMarkup(S,void 0,{...w.attrs,...e}),c&&w.marks.length&&w.marks.forEach(N=>{if(c===N.type){const T=Math.max(S,m),C=Math.min(S+w.nodeSize,p);t.addMark(T,C,c.create({...N.attrs,...e}))}}))}),b&&(x!==void 0&&t.setNodeMarkup(x,void 0,{...b.attrs,...e}),c&&b.marks.length&&b.marks.forEach(w=>{c===w.type&&t.addMark(v,k,c.create({...w.attrs,...e}))}))}),!0):!1},Sz=(r,e={})=>({state:t,dispatch:n})=>{const s=Wt(r,t.schema);return z9(s,e)(t,n)},Nz=(r,e={})=>({state:t,dispatch:n})=>{const s=Wt(r,t.schema);return L9(s,e)(t,n)},d5=wt.create({name:"commands",addCommands(){return{...i5}}}),u5=wt.create({name:"delete",onUpdate({transaction:r,appendedTransactions:e}){var t,n,s;const l=()=>{var c,u,h,m;if((m=(h=(u=(c=this.editor.options.coreExtensionOptions)==null?void 0:c.delete)==null?void 0:u.filterTransaction)==null?void 0:h.call(u,r))!=null?m:r.getMeta("y-sync$"))return;const p=Fj(r.before,[r,...e]);Zj(p).forEach(v=>{p.mapping.mapResult(v.oldRange.from).deletedAfter&&p.mapping.mapResult(v.oldRange.to).deletedBefore&&p.before.nodesBetween(v.oldRange.from,v.oldRange.to,(k,w)=>{const S=w+k.nodeSize-2,N=v.oldRange.from<=w&&S<=v.oldRange.to;this.editor.emit("delete",{type:"node",node:k,from:w,to:S,newFrom:p.mapping.map(w),newTo:p.mapping.map(S),deletedRange:v.oldRange,newRange:v.newRange,partial:!N,editor:this.editor,transaction:r,combinedTransform:p})})});const b=p.mapping;p.steps.forEach((v,k)=>{var w,S;if(v instanceof $n){const N=b.slice(k).map(v.from,-1),T=b.slice(k).map(v.to),C=b.invert().map(N,-1),D=b.invert().map(T),A=(w=p.doc.nodeAt(N-1))==null?void 0:w.marks.some(I=>I.eq(v.mark)),Y=(S=p.doc.nodeAt(T))==null?void 0:S.marks.some(I=>I.eq(v.mark));this.editor.emit("delete",{type:"mark",mark:v.mark,from:v.from,to:v.to,deletedRange:{from:C,to:D},newRange:{from:N,to:T},partial:!!(Y||A),editor:this.editor,transaction:r,combinedTransform:p})}})};(s=(n=(t=this.editor.options.coreExtensionOptions)==null?void 0:t.delete)==null?void 0:n.async)==null||s?setTimeout(l,0):l()}}),f5=wt.create({name:"drop",addProseMirrorPlugins(){return[new Ht({key:new fr("tiptapDrop"),props:{handleDrop:(r,e,t,n)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:n})}}})]}}),h5=wt.create({name:"editable",addProseMirrorPlugins(){return[new Ht({key:new fr("editable"),props:{editable:()=>this.editor.options.editable}})]}}),m5=new fr("focusEvents"),p5=wt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:r}=this;return[new Ht({key:m5,props:{handleDOMEvents:{focus:(e,t)=>{r.isFocused=!0;const n=r.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(n),!1},blur:(e,t)=>{r.isFocused=!1;const n=r.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(n),!1}}}})]}}),g5=wt.create({name:"keymap",addKeyboardShortcuts(){const r=()=>this.editor.commands.first(({commands:c})=>[()=>c.undoInputRule(),()=>c.command(({tr:u})=>{const{selection:h,doc:m}=u,{empty:p,$anchor:x}=h,{pos:b,parent:v}=x,k=x.parent.isTextblock&&b>0?u.doc.resolve(b-1):x,w=k.parent.type.spec.isolating,S=x.pos-x.parentOffset,N=w&&k.parent.childCount===1?S===x.pos:Ue.atStart(m).from===b;return!p||!v.type.isTextblock||v.textContent.length||!N||N&&x.parent.type.name==="paragraph"?!1:c.clearNodes()}),()=>c.deleteSelection(),()=>c.joinBackward(),()=>c.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:c})=>[()=>c.deleteSelection(),()=>c.deleteCurrentNode(),()=>c.joinForward(),()=>c.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:c})=>[()=>c.newlineInCode(),()=>c.createParagraphNear(),()=>c.liftEmptyBlock(),()=>c.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:r,"Mod-Backspace":r,"Shift-Backspace":r,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...n},l={...n,"Ctrl-h":r,"Alt-Backspace":r,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return jx()||c5()?l:s},addProseMirrorPlugins(){return[new Ht({key:new fr("clearDocument"),appendTransaction:(r,e,t)=>{if(r.some(w=>w.getMeta("composition")))return;const n=r.some(w=>w.docChanged)&&!e.doc.eq(t.doc),s=r.some(w=>w.getMeta("preventClearDocument"));if(!n||s)return;const{empty:l,from:c,to:u}=e.selection,h=Ue.atStart(e.doc).from,m=Ue.atEnd(e.doc).to;if(l||!(c===h&&u===m)||!kh(t.doc))return;const b=t.tr,v=xh({state:t,transaction:b}),{commands:k}=new bh({editor:this.editor,state:v});if(k.clearNodes(),!!b.steps.length)return b}})]}}),x5=wt.create({name:"paste",addProseMirrorPlugins(){return[new Ht({key:new fr("tiptapPaste"),props:{handlePaste:(r,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),b5=wt.create({name:"tabindex",addProseMirrorPlugins(){return[new Ht({key:new fr("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),jz=class Dl{constructor(e,t,n=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=n,this.resolvedPos=e,this.editor=t,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,n=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,n=this.to-1}this.editor.commands.insertContentAt({from:t,to:n},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Dl(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Dl(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Dl(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,n)=>{const s=t.isBlock&&!t.isTextblock,l=t.isAtom&&!t.isText,c=this.pos+n+(l?0:1);if(c<0||c>this.resolvedPos.doc.nodeSize-2)return;const u=this.resolvedPos.doc.resolve(c);if(!s&&u.depth<=this.depth)return;const h=new Dl(u,this.editor,s,s?t:null);s&&(h.actualDepth=this.depth+1),e.push(new Dl(u,this.editor,s,s?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let n=null,s=this.parent;for(;s&&!n;){if(s.node.type.name===e)if(Object.keys(t).length>0){const l=s.node.attrs,c=Object.keys(t);for(let u=0;u<c.length;u+=1){const h=c[u];if(l[h]!==t[h])break}}else n=s;s=s.parent}return n}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},n=!1){let s=[];if(!this.children||this.children.length===0)return s;const l=Object.keys(t);return this.children.forEach(c=>{n&&s.length>0||(c.node.type.name===e&&l.every(h=>t[h]===c.node.attrs[h])&&s.push(c),!(n&&s.length>0)&&(s=s.concat(c.querySelectorAll(e,t,n))))}),s}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}},Cz=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function Tz(r,e,t){const n=document.querySelector("style[data-tiptap-style]");if(n!==null)return n;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=r,document.getElementsByTagName("head")[0].appendChild(s),s}var Mz=class extends V9{constructor(r={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(r),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:s,moved:l})=>this.options.onDrop(n,s,l)),this.on("paste",({event:n,slice:s})=>this.options.onPaste(n,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),t=n5(e,this.options.autofocus);this.editorState=zl.create({doc:e,schema:this.schema,selection:t||void 0}),this.options.element&&this.mount(this.options.element)}mount(r){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(r),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const r=this.editorView.dom;r?.editor&&delete r.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(r){console.warn("Failed to remove CSS element:",r)}this.css=null}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=Tz(Cz,this.options.injectNonce))}setOptions(r={}){this.options={...this.options,...r},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(r,e=!0){this.setOptions({editable:r}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:r=>{this.editorState=r},dispatch:r=>{this.editorState=this.state.apply(r)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(r,e)=>{if(e==="state")return this.editorState;if(e in r)return Reflect.get(r,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(r,e){const t=qj(e)?e(r,[...this.state.plugins]):[...this.state.plugins,r],n=this.state.reconfigure({plugins:t});return this.view.updateState(n),n}unregisterPlugin(r){if(this.isDestroyed)return;const e=this.state.plugins;let t=e;if([].concat(r).forEach(s=>{const l=typeof s=="string"?`${s}$`:s.key;t=t.filter(c=>!c.key.startsWith(l))}),e.length===t.length)return;const n=this.state.reconfigure({plugins:t});return this.view.updateState(n),n}createExtensionManager(){var r,e;const n=[...this.options.enableCoreExtensions?[h5,l5.configure({blockSeparator:(e=(r=this.options.coreExtensionOptions)==null?void 0:r.clipboardTextSerializer)==null?void 0:e.blockSeparator}),d5,p5,g5,b5,f5,x5,u5].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s?.type));this.extensionManager=new Sh(n,this)}createCommandManager(){this.commandManager=new bh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let r;try{r=ug(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(t=>t.name!=="collaboration"),this.createExtensionManager()}}),r=ug(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return r}createView(r){var e;this.editorView=new Ej(r,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)==null?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState});const t=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(t),this.createNodeViews(),this.prependClass(),this.injectCSS();const n=this.view.dom;n.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(r){this.isCapturingTransaction=!0,r(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(r){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=r;return}r.steps.forEach(m=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(m)});return}const{state:e,transactions:t}=this.state.applyTransaction(r),n=!this.state.selection.eq(e.selection),s=t.includes(r),l=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:r,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:r,appendedTransactions:t.slice(1)}),n&&this.emit("selectionUpdate",{editor:this,transaction:r});const c=t.findLast(m=>m.getMeta("focus")||m.getMeta("blur")),u=c?.getMeta("focus"),h=c?.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:c}),h&&this.emit("blur",{editor:this,event:h.event,transaction:c}),!(r.getMeta("preventUpdate")||!t.some(m=>m.docChanged)||l.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:r,appendedTransactions:t.slice(1)})}getAttributes(r){return Jj(this.state,r)}isActive(r,e){const t=typeof r=="string"?r:null,n=typeof r=="string"?e:r;return n8(this.state,t,n)}getJSON(){return this.state.doc.toJSON()}getHTML(){return yx(this.state.doc.content,this.schema)}getText(r){const{blockSeparator:e=`

`,textSerializers:t={}}=r||{};return Q9(this.state.doc,{blockSeparator:e,textSerializers:{...Xj(this.schema),...t}})}get isEmpty(){return kh(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var r,e;return(e=(r=this.editorView)==null?void 0:r.isDestroyed)!=null?e:!0}$node(r,e){var t;return((t=this.$doc)==null?void 0:t.querySelector(r,e))||null}$nodes(r,e){var t;return((t=this.$doc)==null?void 0:t.querySelectorAll(r,e))||null}$pos(r){const e=this.state.doc.resolve(r);return new jz(e,this)}get $doc(){return this.$pos(0)}};function Io(r){return new wh({find:r.find,handler:({state:e,range:t,match:n})=>{const s=ut(r.getAttributes,void 0,n);if(s===!1||s===null)return null;const{tr:l}=e,c=n[n.length-1],u=n[0];if(c){const h=u.search(/\S/),m=t.from+u.indexOf(c),p=m+c.length;if(Sx(t.from,t.to,e.doc).filter(v=>v.mark.type.excluded.find(w=>w===r.type&&w!==v.mark.type)).filter(v=>v.to>m).length)return null;p<t.to&&l.delete(p,t.to),m>t.from&&l.delete(t.from+h,m);const b=t.from+h+c.length;l.addMark(t.from+h,b,r.type.create(s||{})),l.removeStoredMark(r.type)}}})}function Ez(r){return new wh({find:r.find,handler:({state:e,range:t,match:n})=>{const s=ut(r.getAttributes,void 0,n)||{},{tr:l}=e,c=t.from;let u=t.to;const h=r.type.create(s);if(n[1]){const m=n[0].lastIndexOf(n[1]);let p=c+m;p>u?p=u:u=p+n[1].length;const x=n[0][n[0].length-1];l.insertText(x,c+n[0].length-1),l.replaceWith(p,u,h)}else if(n[0]){const m=r.type.isInline?c:c-1;l.insert(m,r.type.create(s)).delete(l.mapping.map(c),l.mapping.map(u))}l.scrollIntoView()}})}function hg(r){return new wh({find:r.find,handler:({state:e,range:t,match:n})=>{const s=e.doc.resolve(t.from),l=ut(r.getAttributes,void 0,n)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),r.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,r.type,l)}})}function Zl(r){return new wh({find:r.find,handler:({state:e,range:t,match:n,chain:s})=>{const l=ut(r.getAttributes,void 0,n)||{},c=e.tr.delete(t.from,t.to),h=c.doc.resolve(t.from).blockRange(),m=h&&rx(h,r.type,l);if(!m)return null;if(c.wrap(h,m),r.keepMarks&&r.editor){const{selection:x,storedMarks:b}=e,{splittableMarks:v}=r.editor.extensionManager,k=b||x.$to.parentOffset&&x.$from.marks();if(k){const w=k.filter(S=>v.includes(S.type.name));c.ensureMarks(w)}}if(r.keepAttributes){const x=r.type.name==="bulletList"||r.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(x,l).run()}const p=c.doc.resolve(t.from-1).nodeBefore;p&&p.type===r.type&&Fs(c.doc,t.from-1)&&(!r.joinPredicate||r.joinPredicate(n,p))&&c.join(t.from-1)}})}function Az(r,e){const{selection:t}=r,{$from:n}=t;if(t instanceof Re){const l=n.index();return n.parent.canReplaceWith(l,l+1,e)}let s=n.depth;for(;s>=0;){const l=n.index(s);if(n.node(s).contentMatchAt(l).matchType(e))return!0;s-=1}return!1}function Dz(r,e,t={}){const{state:n}=e,{doc:s,tr:l}=n,c=r;s.descendants((u,h)=>{const m=l.mapping.map(h),p=l.mapping.map(h)+u.nodeSize;let x=null;if(u.marks.forEach(v=>{if(v!==c)return!1;x=v}),!x)return;let b=!1;if(Object.keys(t).forEach(v=>{t[v]!==x.attrs[v]&&(b=!0)}),b){const v=r.type.create({...r.attrs,...t});l.removeMark(m,p,r.type),l.addMark(m,p,v)}}),l.docChanged&&e.view.dispatch(l)}var fn=class y5 extends Nx{constructor(){super(...arguments),this.type="node"}static create(e={}){const t=typeof e=="function"?e():e;return new y5(t)}configure(e){return super.configure(e)}extend(e){const t=typeof e=="function"?e():e;return super.extend(t)}};function Hs(r){return new u8({find:r.find,handler:({state:e,range:t,match:n,pasteEvent:s})=>{const l=ut(r.getAttributes,void 0,n,s);if(l===!1||l===null)return null;const{tr:c}=e,u=n[n.length-1],h=n[0];let m=t.to;if(u){const p=h.search(/\S/),x=t.from+h.indexOf(u),b=x+u.length;if(Sx(t.from,t.to,e.doc).filter(k=>k.mark.type.excluded.find(S=>S===r.type&&S!==k.mark.type)).filter(k=>k.to>x).length)return null;b<t.to&&c.delete(b,t.to),x>t.from&&c.delete(t.from+p,x),m=t.from+p+u.length,c.addMark(t.from+p,m,r.type.create(l||{})),c.removeStoredMark(r.type)}}})}var mp,T1;function Oz(){return T1||(T1=1,mp=function r(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,s,l;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(s=n;s--!==0;)if(!r(e[s],t[s]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;for(s of e.entries())if(!r(s[1],t.get(s[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s of e.entries())if(!t.has(s[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(s=n;s--!==0;)if(e[s]!==t[s])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(l=Object.keys(e),n=l.length,n!==Object.keys(t).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(t,l[s]))return!1;for(s=n;s--!==0;){var c=l[s];if(!(c==="_owner"&&e.$$typeof)&&!r(e[c],t[c]))return!1}return!0}return e!==e&&t!==t}),mp}var Rz=Oz();const zz=X1(Rz);var Lz=(...r)=>e=>{r.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},Bz=({contentComponent:r})=>{const e=pN.useSyncExternalStore(r.subscribe,r.getSnapshot,r.getServerSnapshot);return i.jsx(i.Fragment,{children:Object.values(e)})};function Iz(){const r=new Set;let e={};return{subscribe(t){return r.add(t),()=>{r.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,n){e={...e,[t]:J1.createPortal(n.reactElement,n.element,t)},r.forEach(s=>s())},removeRenderer(t){const n={...e};delete n[t],e=n,r.forEach(s=>s())}}}var Pz=class extends P.Component{constructor(r){var e;super(r),this.editorContentRef=P.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=r.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const r=this.props.editor;if(r&&!r.isDestroyed&&r.options.element){if(r.contentComponent)return;const e=this.editorContentRef.current;e.append(...r.options.element.childNodes),r.setOptions({element:e}),r.contentComponent=Iz(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=r.contentComponent.subscribe(()=>{this.setState(t=>t.hasContentComponentInitialized?t:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),r.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var r;const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!((r=e.options.element)!=null&&r.firstChild)))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:r,innerRef:e,...t}=this.props;return i.jsxs(i.Fragment,{children:[i.jsx("div",{ref:Lz(e,this.editorContentRef),...t}),r?.contentComponent&&i.jsx(Bz,{contentComponent:r.contentComponent})]})}},_z=M.forwardRef((r,e)=>{const t=P.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[r.editor]);return P.createElement(Pz,{key:t,innerRef:e,...r})}),Hz=P.memo(_z),$z=typeof window<"u"?M.useLayoutEffect:M.useEffect,Uz=class{constructor(r){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=r,this.lastSnapshot={editor:r,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(r){return this.subscribers.add(r),()=>{this.subscribers.delete(r)}}watch(r){if(this.editor=r,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(n=>n())},t=this.editor;return t.on("transaction",e),()=>{t.off("transaction",e)}}}};function Vz(r){var e;const[t]=M.useState(()=>new Uz(r.editor)),n=h3.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,r.selector,(e=r.equalityFn)!=null?e:zz);return $z(()=>t.watch(r.editor),[r.editor,t]),M.useDebugValue(n),n}var Fz=!1,mg=typeof window>"u",Yz=mg||!!(typeof window<"u"&&window.next),qz=class v5{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?mg||Yz?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...n)=>{var s,l;return(l=(s=this.options.current).onBeforeCreate)==null?void 0:l.call(s,...n)},onBlur:(...n)=>{var s,l;return(l=(s=this.options.current).onBlur)==null?void 0:l.call(s,...n)},onCreate:(...n)=>{var s,l;return(l=(s=this.options.current).onCreate)==null?void 0:l.call(s,...n)},onDestroy:(...n)=>{var s,l;return(l=(s=this.options.current).onDestroy)==null?void 0:l.call(s,...n)},onFocus:(...n)=>{var s,l;return(l=(s=this.options.current).onFocus)==null?void 0:l.call(s,...n)},onSelectionUpdate:(...n)=>{var s,l;return(l=(s=this.options.current).onSelectionUpdate)==null?void 0:l.call(s,...n)},onTransaction:(...n)=>{var s,l;return(l=(s=this.options.current).onTransaction)==null?void 0:l.call(s,...n)},onUpdate:(...n)=>{var s,l;return(l=(s=this.options.current).onUpdate)==null?void 0:l.call(s,...n)},onContentError:(...n)=>{var s,l;return(l=(s=this.options.current).onContentError)==null?void 0:l.call(s,...n)},onDrop:(...n)=>{var s,l;return(l=(s=this.options.current).onDrop)==null?void 0:l.call(s,...n)},onPaste:(...n)=>{var s,l;return(l=(s=this.options.current).onPaste)==null?void 0:l.call(s,...n)},onDelete:(...n)=>{var s,l;return(l=(s=this.options.current).onDelete)==null?void 0:l.call(s,...n)}};return new Mz(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(n=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(n)?!0:n==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((s,l)=>{var c;return s===((c=t.extensions)==null?void 0:c[l])}):e[n]===t[n])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?v5.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((n,s)=>n===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function Gz(r={},e=[]){const t=M.useRef(r);t.current=r;const[n]=M.useState(()=>new qz(t)),s=pN.useSyncExternalStore(n.subscribe,n.getEditor,n.getServerSnapshot);return M.useDebugValue(s),M.useEffect(n.onRender(e)),Vz({editor:s,selector:({transactionNumber:l})=>r.shouldRerenderOnTransaction===!1||r.shouldRerenderOnTransaction===void 0?null:r.immediatelyRender&&l===0?0:l+1}),s}var Kz=M.createContext({editor:null});Kz.Consumer;var Wz=M.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),Xz=()=>M.useContext(Wz);P.forwardRef((r,e)=>{const{onDragStart:t}=Xz(),n=r.as||"div";return i.jsx(n,{...r,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...r.style}})});P.createContext({markViewContentRef:()=>{}});var yf=(r,e)=>{if(r==="slot")return 0;if(r instanceof Function)return r(e);const{children:t,...n}=e??{};if(r==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[r,n,t]},Qz=/^\s*>\s$/,k5=fn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:r}){return yf("blockquote",{...Rt(this.options.HTMLAttributes,r),children:yf("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:r})=>r.wrapIn(this.name),toggleBlockquote:()=>({commands:r})=>r.toggleWrap(this.name),unsetBlockquote:()=>({commands:r})=>r.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Zl({find:Qz,type:this.type})]}}),Jz=k5,Zz=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,eL=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,tL=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,rL=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,nL=ga.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:r=>r.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:r=>r.type.name===this.name},{style:"font-weight",getAttrs:r=>/^(bold(er)?|[5-9]\d{2,})$/.test(r)&&null}]},renderHTML({HTMLAttributes:r}){return yf("strong",{...Rt(this.options.HTMLAttributes,r),children:yf("slot",{})})},addCommands(){return{setBold:()=>({commands:r})=>r.setMark(this.name),toggleBold:()=>({commands:r})=>r.toggleMark(this.name),unsetBold:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Io({find:Zz,type:this.type}),Io({find:tL,type:this.type})]},addPasteRules(){return[Hs({find:eL,type:this.type}),Hs({find:rL,type:this.type})]}}),aL=/(^|[^`])`([^`]+)`(?!`)/,sL=/(^|[^`])`([^`]+)`(?!`)/g,oL=ga.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:r}){return["code",Rt(this.options.HTMLAttributes,r),0]},addCommands(){return{setCode:()=>({commands:r})=>r.setMark(this.name),toggleCode:()=>({commands:r})=>r.toggleMark(this.name),unsetCode:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Io({find:aL,type:this.type})]},addPasteRules(){return[Hs({find:sL,type:this.type})]}}),lL=/^```([a-z]+)?[\s\n]$/,iL=/^~~~([a-z]+)?[\s\n]$/,cL=fn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:r=>{var e;const{languageClassPrefix:t}=this.options,l=[...((e=r.firstElementChild)==null?void 0:e.classList)||[]].filter(c=>c.startsWith(t)).map(c=>c.replace(t,""))[0];return l||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:r,HTMLAttributes:e}){return["pre",Rt(this.options.HTMLAttributes,e),["code",{class:r.attrs.language?this.options.languageClassPrefix+r.attrs.language:null},0]]},addCommands(){return{setCodeBlock:r=>({commands:e})=>e.setNode(this.name,r),toggleCodeBlock:r=>({commands:e})=>e.toggleNode(this.name,"paragraph",r)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:r,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!r||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:r})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=r,{selection:t}=e,{$from:n,empty:s}=t;if(!s||n.parent.type!==this.type)return!1;const l=n.parentOffset===n.parent.nodeSize-2,c=n.parent.textContent.endsWith(`

`);return!l||!c?!1:r.chain().command(({tr:u})=>(u.delete(n.pos-2,n.pos),!0)).exitCode().run()},ArrowDown:({editor:r})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=r,{selection:t,doc:n}=e,{$from:s,empty:l}=t;if(!l||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const u=s.after();return u===void 0?!1:n.nodeAt(u)?r.commands.command(({tr:m})=>(m.setSelection(Ue.near(n.resolve(u))),!0)):r.commands.exitCode()}}},addInputRules(){return[hg({find:lL,type:this.type,getAttributes:r=>({language:r[1]})}),hg({find:iL,type:this.type,getAttributes:r=>({language:r[1]})})]},addProseMirrorPlugins(){return[new Ht({key:new fr("codeBlockVSCodeHandler"),props:{handlePaste:(r,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),n=e.clipboardData.getData("vscode-editor-data"),s=n?JSON.parse(n):void 0,l=s?.mode;if(!t||!l)return!1;const{tr:c,schema:u}=r.state,h=u.text(t.replace(/\r\n?/g,`
`));return c.replaceSelectionWith(this.type.create({language:l},h)),c.selection.$from.parent.type!==this.type&&c.setSelection(He.near(c.doc.resolve(Math.max(0,c.selection.from-2)))),c.setMeta("paste",!0),r.dispatch(c),!0}}})]}}),dL=fn.create({name:"doc",topNode:!0,content:"block+"}),uL=fn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:r}){return["br",Rt(this.options.HTMLAttributes,r)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:r,chain:e,state:t,editor:n})=>r.first([()=>r.exitCode(),()=>r.command(()=>{const{selection:s,storedMarks:l}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:c}=this.options,{splittableMarks:u}=n.extensionManager,h=l||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:m,dispatch:p})=>{if(p&&h&&c){const x=h.filter(b=>u.includes(b.type.name));m.ensureMarks(x)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),w5=fn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(r=>({tag:`h${r}`,attrs:{level:r}}))},renderHTML({node:r,HTMLAttributes:e}){return[`h${this.options.levels.includes(r.attrs.level)?r.attrs.level:this.options.levels[0]}`,Rt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:r=>({commands:e})=>this.options.levels.includes(r.level)?e.setNode(this.name,r):!1,toggleHeading:r=>({commands:e})=>this.options.levels.includes(r.level)?e.toggleNode(this.name,"paragraph",r):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((r,e)=>({...r,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(r=>hg({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${r}})\\s$`),type:this.type,getAttributes:{level:r}}))}}),fL=w5,hL=fn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:r}){return["hr",Rt(this.options.HTMLAttributes,r)]},addCommands(){return{setHorizontalRule:()=>({chain:r,state:e})=>{if(!Az(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$to:n}=t,s=r();return t5(t)?s.insertContentAt(n.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:l,dispatch:c})=>{var u;if(c){const{$to:h}=l.selection,m=h.end();if(h.nodeAfter)h.nodeAfter.isTextblock?l.setSelection(He.create(l.doc,h.pos+1)):h.nodeAfter.isBlock?l.setSelection(Re.create(l.doc,h.pos)):l.setSelection(He.create(l.doc,h.pos));else{const p=(u=h.parent.type.contentMatch.defaultType)==null?void 0:u.create();p&&(l.insert(m,p),l.setSelection(He.create(l.doc,m+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Ez({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),mL=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,pL=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,gL=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,xL=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,S5=ga.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:r=>r.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:r=>r.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:r}){return["em",Rt(this.options.HTMLAttributes,r),0]},addCommands(){return{setItalic:()=>({commands:r})=>r.setMark(this.name),toggleItalic:()=>({commands:r})=>r.toggleMark(this.name),unsetItalic:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Io({find:mL,type:this.type}),Io({find:gL,type:this.type})]},addPasteRules(){return[Hs({find:pL,type:this.type}),Hs({find:xL,type:this.type})]}}),bL=S5;const yL="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",vL="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",pg="numeric",gg="ascii",xg="alpha",Cc="asciinumeric",pc="alphanumeric",bg="domain",N5="emoji",kL="scheme",wL="slashscheme",pp="whitespace";function SL(r,e){return r in e||(e[r]=[]),e[r]}function ko(r,e,t){e[pg]&&(e[Cc]=!0,e[pc]=!0),e[gg]&&(e[Cc]=!0,e[xg]=!0),e[Cc]&&(e[pc]=!0),e[xg]&&(e[pc]=!0),e[pc]&&(e[bg]=!0),e[N5]&&(e[bg]=!0);for(const n in e){const s=SL(n,t);s.indexOf(r)<0&&s.push(r)}}function NL(r,e){const t={};for(const n in e)e[n].indexOf(r)>=0&&(t[n]=!0);return t}function Gr(r=null){this.j={},this.jr=[],this.jd=null,this.t=r}Gr.groups={};Gr.prototype={accepts(){return!!this.t},go(r){const e=this,t=e.j[r];if(t)return t;for(let n=0;n<e.jr.length;n++){const s=e.jr[n][0],l=e.jr[n][1];if(l&&s.test(r))return l}return e.jd},has(r,e=!1){return e?r in this.j:!!this.go(r)},ta(r,e,t,n){for(let s=0;s<r.length;s++)this.tt(r[s],e,t,n)},tr(r,e,t,n){n=n||Gr.groups;let s;return e&&e.j?s=e:(s=new Gr(e),t&&n&&ko(e,t,n)),this.jr.push([r,s]),s},ts(r,e,t,n){let s=this;const l=r.length;if(!l)return s;for(let c=0;c<l-1;c++)s=s.tt(r[c]);return s.tt(r[l-1],e,t,n)},tt(r,e,t,n){n=n||Gr.groups;const s=this;if(e&&e.j)return s.j[r]=e,e;const l=e;let c,u=s.go(r);if(u?(c=new Gr,Object.assign(c.j,u.j),c.jr.push.apply(c.jr,u.jr),c.jd=u.jd,c.t=u.t):c=new Gr,l){if(n)if(c.t&&typeof c.t=="string"){const h=Object.assign(NL(c.t,n),t);ko(l,h,n)}else t&&ko(l,t,n);c.t=l}return s.j[r]=c,c}};const Ve=(r,e,t,n,s)=>r.ta(e,t,n,s),Pt=(r,e,t,n,s)=>r.tr(e,t,n,s),M1=(r,e,t,n,s)=>r.ts(e,t,n,s),se=(r,e,t,n,s)=>r.tt(e,t,n,s),Pa="WORD",yg="UWORD",j5="ASCIINUMERICAL",C5="ALPHANUMERICAL",Wc="LOCALHOST",vg="TLD",kg="UTLD",qu="SCHEME",Ol="SLASH_SCHEME",Cx="NUM",wg="WS",Tx="NL",Tc="OPENBRACE",Mc="CLOSEBRACE",vf="OPENBRACKET",kf="CLOSEBRACKET",wf="OPENPAREN",Sf="CLOSEPAREN",Nf="OPENANGLEBRACKET",jf="CLOSEANGLEBRACKET",Cf="FULLWIDTHLEFTPAREN",Tf="FULLWIDTHRIGHTPAREN",Mf="LEFTCORNERBRACKET",Ef="RIGHTCORNERBRACKET",Af="LEFTWHITECORNERBRACKET",Df="RIGHTWHITECORNERBRACKET",Of="FULLWIDTHLESSTHAN",Rf="FULLWIDTHGREATERTHAN",zf="AMPERSAND",Lf="APOSTROPHE",Bf="ASTERISK",Ns="AT",If="BACKSLASH",Pf="BACKTICK",_f="CARET",Ts="COLON",Mx="COMMA",Hf="DOLLAR",ra="DOT",$f="EQUALS",Ex="EXCLAMATION",jn="HYPHEN",Ec="PERCENT",Uf="PIPE",Vf="PLUS",Ff="POUND",Ac="QUERY",Ax="QUOTE",T5="FULLWIDTHMIDDLEDOT",Dx="SEMI",na="SLASH",Dc="TILDE",Yf="UNDERSCORE",M5="EMOJI",qf="SYM";var E5=Object.freeze({__proto__:null,ALPHANUMERICAL:C5,AMPERSAND:zf,APOSTROPHE:Lf,ASCIINUMERICAL:j5,ASTERISK:Bf,AT:Ns,BACKSLASH:If,BACKTICK:Pf,CARET:_f,CLOSEANGLEBRACKET:jf,CLOSEBRACE:Mc,CLOSEBRACKET:kf,CLOSEPAREN:Sf,COLON:Ts,COMMA:Mx,DOLLAR:Hf,DOT:ra,EMOJI:M5,EQUALS:$f,EXCLAMATION:Ex,FULLWIDTHGREATERTHAN:Rf,FULLWIDTHLEFTPAREN:Cf,FULLWIDTHLESSTHAN:Of,FULLWIDTHMIDDLEDOT:T5,FULLWIDTHRIGHTPAREN:Tf,HYPHEN:jn,LEFTCORNERBRACKET:Mf,LEFTWHITECORNERBRACKET:Af,LOCALHOST:Wc,NL:Tx,NUM:Cx,OPENANGLEBRACKET:Nf,OPENBRACE:Tc,OPENBRACKET:vf,OPENPAREN:wf,PERCENT:Ec,PIPE:Uf,PLUS:Vf,POUND:Ff,QUERY:Ac,QUOTE:Ax,RIGHTCORNERBRACKET:Ef,RIGHTWHITECORNERBRACKET:Df,SCHEME:qu,SEMI:Dx,SLASH:na,SLASH_SCHEME:Ol,SYM:qf,TILDE:Dc,TLD:vg,UNDERSCORE:Yf,UTLD:kg,UWORD:yg,WORD:Pa,WS:wg});const La=/[a-z]/,ic=new RegExp("\\p{L}","u"),gp=new RegExp("\\p{Emoji}","u"),Ba=/\d/,xp=/\s/,E1="\r",bp=`
`,jL="",CL="",yp="";let Du=null,Ou=null;function TL(r=[]){const e={};Gr.groups=e;const t=new Gr;Du==null&&(Du=A1(yL)),Ou==null&&(Ou=A1(vL)),se(t,"'",Lf),se(t,"{",Tc),se(t,"}",Mc),se(t,"[",vf),se(t,"]",kf),se(t,"(",wf),se(t,")",Sf),se(t,"<",Nf),se(t,">",jf),se(t,"",Cf),se(t,"",Tf),se(t,"",Mf),se(t,"",Ef),se(t,"",Af),se(t,"",Df),se(t,"",Of),se(t,"",Rf),se(t,"&",zf),se(t,"*",Bf),se(t,"@",Ns),se(t,"`",Pf),se(t,"^",_f),se(t,":",Ts),se(t,",",Mx),se(t,"$",Hf),se(t,".",ra),se(t,"=",$f),se(t,"!",Ex),se(t,"-",jn),se(t,"%",Ec),se(t,"|",Uf),se(t,"+",Vf),se(t,"#",Ff),se(t,"?",Ac),se(t,'"',Ax),se(t,"/",na),se(t,";",Dx),se(t,"~",Dc),se(t,"_",Yf),se(t,"\\",If),se(t,"",T5);const n=Pt(t,Ba,Cx,{[pg]:!0});Pt(n,Ba,n);const s=Pt(n,La,j5,{[Cc]:!0}),l=Pt(n,ic,C5,{[pc]:!0}),c=Pt(t,La,Pa,{[gg]:!0});Pt(c,Ba,s),Pt(c,La,c),Pt(s,Ba,s),Pt(s,La,s);const u=Pt(t,ic,yg,{[xg]:!0});Pt(u,La),Pt(u,Ba,l),Pt(u,ic,u),Pt(l,Ba,l),Pt(l,La),Pt(l,ic,l);const h=se(t,bp,Tx,{[pp]:!0}),m=se(t,E1,wg,{[pp]:!0}),p=Pt(t,xp,wg,{[pp]:!0});se(t,yp,p),se(m,bp,h),se(m,yp,p),Pt(m,xp,p),se(p,E1),se(p,bp),Pt(p,xp,p),se(p,yp,p);const x=Pt(t,gp,M5,{[N5]:!0});se(x,"#"),Pt(x,gp,x),se(x,jL,x);const b=se(x,CL);se(b,"#"),Pt(b,gp,x);const v=[[La,c],[Ba,s]],k=[[La,null],[ic,u],[Ba,l]];for(let w=0;w<Du.length;w++)vs(t,Du[w],vg,Pa,v);for(let w=0;w<Ou.length;w++)vs(t,Ou[w],kg,yg,k);ko(vg,{tld:!0,ascii:!0},e),ko(kg,{utld:!0,alpha:!0},e),vs(t,"file",qu,Pa,v),vs(t,"mailto",qu,Pa,v),vs(t,"http",Ol,Pa,v),vs(t,"https",Ol,Pa,v),vs(t,"ftp",Ol,Pa,v),vs(t,"ftps",Ol,Pa,v),ko(qu,{scheme:!0,ascii:!0},e),ko(Ol,{slashscheme:!0,ascii:!0},e),r=r.sort((w,S)=>w[0]>S[0]?1:-1);for(let w=0;w<r.length;w++){const S=r[w][0],T=r[w][1]?{[kL]:!0}:{[wL]:!0};S.indexOf("-")>=0?T[bg]=!0:La.test(S)?Ba.test(S)?T[Cc]=!0:T[gg]=!0:T[pg]=!0,M1(t,S,S,T)}return M1(t,"localhost",Wc,{ascii:!0}),t.jd=new Gr(qf),{start:t,tokens:Object.assign({groups:e},E5)}}function A5(r,e){const t=ML(e.replace(/[A-Z]/g,u=>u.toLowerCase())),n=t.length,s=[];let l=0,c=0;for(;c<n;){let u=r,h=null,m=0,p=null,x=-1,b=-1;for(;c<n&&(h=u.go(t[c]));)u=h,u.accepts()?(x=0,b=0,p=u):x>=0&&(x+=t[c].length,b++),m+=t[c].length,l+=t[c].length,c++;l-=x,c-=b,m-=x,s.push({t:p.t,v:e.slice(l-m,l),s:l-m,e:l})}return s}function ML(r){const e=[],t=r.length;let n=0;for(;n<t;){let s=r.charCodeAt(n),l,c=s<55296||s>56319||n+1===t||(l=r.charCodeAt(n+1))<56320||l>57343?r[n]:r.slice(n,n+2);e.push(c),n+=c.length}return e}function vs(r,e,t,n,s){let l;const c=e.length;for(let u=0;u<c-1;u++){const h=e[u];r.j[h]?l=r.j[h]:(l=new Gr(n),l.jr=s.slice(),r.j[h]=l),r=l}return l=new Gr(t),l.jr=s.slice(),r.j[e[c-1]]=l,l}function A1(r){const e=[],t=[];let n=0,s="0123456789";for(;n<r.length;){let l=0;for(;s.indexOf(r[n+l])>=0;)l++;if(l>0){e.push(t.join(""));for(let c=parseInt(r.substring(n,n+l),10);c>0;c--)t.pop();n+=l}else t.push(r[n]),n++}return e}const Xc={defaultProtocol:"http",events:null,format:D1,formatHref:D1,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Ox(r,e=null){let t=Object.assign({},Xc);r&&(t=Object.assign(t,r instanceof Ox?r.o:r));const n=t.ignoreTags,s=[];for(let l=0;l<n.length;l++)s.push(n[l].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=s}Ox.prototype={o:Xc,ignoreTags:[],defaultRender(r){return r},check(r){return this.get("validate",r.toString(),r)},get(r,e,t){const n=e!=null;let s=this.o[r];return s&&(typeof s=="object"?(s=t.t in s?s[t.t]:Xc[r],typeof s=="function"&&n&&(s=s(e,t))):typeof s=="function"&&n&&(s=s(e,t.t,t)),s)},getObj(r,e,t){let n=this.o[r];return typeof n=="function"&&e!=null&&(n=n(e,t.t,t)),n},render(r){const e=r.render(this);return(this.get("render",null,r)||this.defaultRender)(e,r.t,r)}};function D1(r){return r}function D5(r,e){this.t="token",this.v=r,this.tk=e}D5.prototype={isLink:!1,toString(){return this.v},toHref(r){return this.toString()},toFormattedString(r){const e=this.toString(),t=r.get("truncate",e,this),n=r.get("format",e,this);return t&&n.length>t?n.substring(0,t)+"":n},toFormattedHref(r){return r.get("formatHref",this.toHref(r.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(r=Xc.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(r),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(r){return{type:this.t,value:this.toFormattedString(r),isLink:this.isLink,href:this.toFormattedHref(r),start:this.startIndex(),end:this.endIndex()}},validate(r){return r.get("validate",this.toString(),this)},render(r){const e=this,t=this.toHref(r.get("defaultProtocol")),n=r.get("formatHref",t,this),s=r.get("tagName",t,e),l=this.toFormattedString(r),c={},u=r.get("className",t,e),h=r.get("target",t,e),m=r.get("rel",t,e),p=r.getObj("attributes",t,e),x=r.getObj("events",t,e);return c.href=n,u&&(c.class=u),h&&(c.target=h),m&&(c.rel=m),p&&Object.assign(c,p),{tagName:s,attributes:c,content:l,eventListeners:x}}};function Nh(r,e){class t extends D5{constructor(s,l){super(s,l),this.t=r}}for(const n in e)t.prototype[n]=e[n];return t.t=r,t}const O1=Nh("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),R1=Nh("text"),EL=Nh("nl"),Ru=Nh("url",{isLink:!0,toHref(r=Xc.defaultProtocol){return this.hasProtocol()?this.v:`${r}://${this.v}`},hasProtocol(){const r=this.tk;return r.length>=2&&r[0].t!==Wc&&r[1].t===Ts}}),Nn=r=>new Gr(r);function AL({groups:r}){const e=r.domain.concat([zf,Bf,Ns,If,Pf,_f,Hf,$f,jn,Cx,Ec,Uf,Vf,Ff,na,qf,Dc,Yf]),t=[Lf,Ts,Mx,ra,Ex,Ec,Ac,Ax,Dx,Nf,jf,Tc,Mc,kf,vf,wf,Sf,Cf,Tf,Mf,Ef,Af,Df,Of,Rf],n=[zf,Lf,Bf,If,Pf,_f,Hf,$f,jn,Tc,Mc,Ec,Uf,Vf,Ff,Ac,na,qf,Dc,Yf],s=Nn(),l=se(s,Dc);Ve(l,n,l),Ve(l,r.domain,l);const c=Nn(),u=Nn(),h=Nn();Ve(s,r.domain,c),Ve(s,r.scheme,u),Ve(s,r.slashscheme,h),Ve(c,n,l),Ve(c,r.domain,c);const m=se(c,Ns);se(l,Ns,m),se(u,Ns,m),se(h,Ns,m);const p=se(l,ra);Ve(p,n,l),Ve(p,r.domain,l);const x=Nn();Ve(m,r.domain,x),Ve(x,r.domain,x);const b=se(x,ra);Ve(b,r.domain,x);const v=Nn(O1);Ve(b,r.tld,v),Ve(b,r.utld,v),se(m,Wc,v);const k=se(x,jn);se(k,jn,k),Ve(k,r.domain,x),Ve(v,r.domain,x),se(v,ra,b),se(v,jn,k);const w=se(v,Ts);Ve(w,r.numeric,O1);const S=se(c,jn),N=se(c,ra);se(S,jn,S),Ve(S,r.domain,c),Ve(N,n,l),Ve(N,r.domain,c);const T=Nn(Ru);Ve(N,r.tld,T),Ve(N,r.utld,T),Ve(T,r.domain,c),Ve(T,n,l),se(T,ra,N),se(T,jn,S),se(T,Ns,m);const C=se(T,Ts),D=Nn(Ru);Ve(C,r.numeric,D);const A=Nn(Ru),Y=Nn();Ve(A,e,A),Ve(A,t,Y),Ve(Y,e,A),Ve(Y,t,Y),se(T,na,A),se(D,na,A);const I=se(u,Ts),$=se(h,Ts),ae=se($,na),le=se(ae,na);Ve(u,r.domain,c),se(u,ra,N),se(u,jn,S),Ve(h,r.domain,c),se(h,ra,N),se(h,jn,S),Ve(I,r.domain,A),se(I,na,A),se(I,Ac,A),Ve(le,r.domain,A),Ve(le,e,A),se(le,na,A);const ie=[[Tc,Mc],[vf,kf],[wf,Sf],[Nf,jf],[Cf,Tf],[Mf,Ef],[Af,Df],[Of,Rf]];for(let he=0;he<ie.length;he++){const[ye,fe]=ie[he],ve=se(A,ye);se(Y,ye,ve),se(ve,fe,A);const B=Nn(Ru);Ve(ve,e,B);const W=Nn();Ve(ve,t),Ve(B,e,B),Ve(B,t,W),Ve(W,e,B),Ve(W,t,W),se(B,fe,A),se(W,fe,A)}return se(s,Wc,T),se(s,Tx,EL),{start:s,tokens:E5}}function DL(r,e,t){let n=t.length,s=0,l=[],c=[];for(;s<n;){let u=r,h=null,m=null,p=0,x=null,b=-1;for(;s<n&&!(h=u.go(t[s].t));)c.push(t[s++]);for(;s<n&&(m=h||u.go(t[s].t));)h=null,u=m,u.accepts()?(b=0,x=u):b>=0&&b++,s++,p++;if(b<0)s-=p,s<n&&(c.push(t[s]),s++);else{c.length>0&&(l.push(vp(R1,e,c)),c=[]),s-=b,p-=b;const v=x.t,k=t.slice(s-p,s);l.push(vp(v,e,k))}}return c.length>0&&l.push(vp(R1,e,c)),l}function vp(r,e,t){const n=t[0].s,s=t[t.length-1].e,l=e.slice(n,s);return new r(l,t)}const OL=typeof console<"u"&&console&&console.warn||(()=>{}),RL="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Ct={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function zL(){return Gr.groups={},Ct.scanner=null,Ct.parser=null,Ct.tokenQueue=[],Ct.pluginQueue=[],Ct.customSchemes=[],Ct.initialized=!1,Ct}function z1(r,e=!1){if(Ct.initialized&&OL(`linkifyjs: already initialized - will not register custom scheme "${r}" ${RL}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(r))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Ct.customSchemes.push([r,e])}function LL(){Ct.scanner=TL(Ct.customSchemes);for(let r=0;r<Ct.tokenQueue.length;r++)Ct.tokenQueue[r][1]({scanner:Ct.scanner});Ct.parser=AL(Ct.scanner.tokens);for(let r=0;r<Ct.pluginQueue.length;r++)Ct.pluginQueue[r][1]({scanner:Ct.scanner,parser:Ct.parser});return Ct.initialized=!0,Ct}function Rx(r){return Ct.initialized||LL(),DL(Ct.parser.start,r,A5(Ct.scanner.start,r))}Rx.scan=A5;function O5(r,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const n=new Ox(t),s=Rx(r),l=[];for(let c=0;c<s.length;c++){const u=s[c];u.isLink&&(!e||u.t===e)&&n.check(u)&&l.push(u.toFormattedObject(n))}return l}var zx="[\0- -\u2029]",BL=new RegExp(zx),IL=new RegExp(`${zx}$`),PL=new RegExp(zx,"g");function _L(r){return r.length===1?r[0].isLink:r.length===3&&r[1].isLink?["()","[]"].includes(r[0].value+r[2].value):!1}function HL(r){return new Ht({key:new fr("autolink"),appendTransaction:(e,t,n)=>{const s=e.some(m=>m.docChanged)&&!t.doc.eq(n.doc),l=e.some(m=>m.getMeta("preventAutolink"));if(!s||l)return;const{tr:c}=n,u=Fj(t.doc,[...e]);if(Zj(u).forEach(({newRange:m})=>{const p=Y9(n.doc,m,v=>v.isTextblock);let x,b;if(p.length>1)x=p[0],b=n.doc.textBetween(x.pos,x.pos+x.node.nodeSize,void 0," ");else if(p.length){const v=n.doc.textBetween(m.from,m.to," "," ");if(!IL.test(v))return;x=p[0],b=n.doc.textBetween(x.pos,m.to,void 0," ")}if(x&&b){const v=b.split(BL).filter(Boolean);if(v.length<=0)return!1;const k=v[v.length-1],w=x.pos+b.lastIndexOf(k);if(!k)return!1;const S=Rx(k).map(N=>N.toObject(r.defaultProtocol));if(!_L(S))return!1;S.filter(N=>N.isLink).map(N=>({...N,from:w+N.start+1,to:w+N.end+1})).filter(N=>n.schema.marks.code?!n.doc.rangeHasMark(N.from,N.to,n.schema.marks.code):!0).filter(N=>r.validate(N.value)).filter(N=>r.shouldAutoLink(N.value)).forEach(N=>{Sx(N.from,N.to,n.doc).some(T=>T.mark.type===r.type)||c.addMark(N.from,N.to,r.type.create({href:N.href}))})}}),!!c.steps.length)return c}})}function $L(r){return new Ht({key:new fr("handleClickLink"),props:{handleClick:(e,t,n)=>{var s,l;if(n.button!==0||!e.editable)return!1;let c=null;if(n.target instanceof HTMLAnchorElement)c=n.target;else{let p=n.target;const x=[];for(;p.nodeName!=="DIV";)x.push(p),p=p.parentNode;c=x.find(b=>b.nodeName==="A")}if(!c)return!1;const u=Jj(e.state,r.type.name),h=(s=c?.href)!=null?s:u.href,m=(l=c?.target)!=null?l:u.target;return r.enableClickSelection&&r.editor.commands.extendMarkRange(r.type.name),c&&h?(window.open(h,m),!0):!1}}})}function UL(r){return new Ht({key:new fr("handlePasteLink"),props:{handlePaste:(e,t,n)=>{const{state:s}=e,{selection:l}=s,{empty:c}=l;if(c)return!1;let u="";n.content.forEach(m=>{u+=m.textContent});const h=O5(u,{defaultProtocol:r.defaultProtocol}).find(m=>m.isLink&&m.value===u);return!u||!h?!1:r.editor.commands.setMark(r.type,{href:h.href})}}})}function ho(r,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(n=>{const s=typeof n=="string"?n:n.scheme;s&&t.push(s)}),!r||r.replace(PL,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var R5=ga.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(r=>{if(typeof r=="string"){z1(r);return}z1(r.scheme,r.optionalSlashes)})},onDestroy(){zL()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(r,e)=>!!ho(r,e.protocols),validate:r=>!!r,shouldAutoLink:r=>!!r}},addAttributes(){return{href:{default:null,parseHTML(r){return r.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:r=>{const e=r.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!ho(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:r}){return this.options.isAllowedUri(r.href,{defaultValidate:e=>!!ho(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Rt(this.options.HTMLAttributes,r),0]:["a",Rt(this.options.HTMLAttributes,{...r,href:""}),0]},addCommands(){return{setLink:r=>({chain:e})=>{const{href:t}=r;return this.options.isAllowedUri(t,{defaultValidate:n=>!!ho(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,r).setMeta("preventAutolink",!0).run():!1},toggleLink:r=>({chain:e})=>{const{href:t}=r||{};return t&&!this.options.isAllowedUri(t,{defaultValidate:n=>!!ho(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,r,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:r})=>r().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Hs({find:r=>{const e=[];if(r){const{protocols:t,defaultProtocol:n}=this.options,s=O5(r).filter(l=>l.isLink&&this.options.isAllowedUri(l.value,{defaultValidate:c=>!!ho(c,t),protocols:t,defaultProtocol:n}));s.length&&s.forEach(l=>e.push({text:l.value,data:{href:l.href},index:l.start}))}return e},type:this.type,getAttributes:r=>{var e;return{href:(e=r.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const r=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&r.push(HL({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:n=>this.options.isAllowedUri(n,{defaultValidate:s=>!!ho(s,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&r.push($L({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&r.push(UL({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),r}}),VL=R5,FL=Object.defineProperty,YL=(r,e)=>{for(var t in e)FL(r,t,{get:e[t],enumerable:!0})},qL="listItem",L1="textStyle",B1=/^\s*([-+*])\s$/,Lx=fn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:r}){return["ul",Rt(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleBulletList:()=>({commands:r,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(qL,this.editor.getAttributes(L1)).run():r.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let r=Zl({find:B1,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(r=Zl({find:B1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(L1),editor:this.editor})),[r]}}),Bx=fn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:r}){return["li",Rt(this.options.HTMLAttributes,r),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),GL={};YL(GL,{findListItemPos:()=>rd,getNextListDepth:()=>Ix,handleBackspace:()=>Sg,handleDelete:()=>Ng,hasListBefore:()=>z5,hasListItemAfter:()=>KL,hasListItemBefore:()=>L5,listItemHasSubList:()=>B5,nextListIsDeeper:()=>I5,nextListIsHigher:()=>P5});var rd=(r,e)=>{const{$from:t}=e.selection,n=Wt(r,e.schema);let s=null,l=t.depth,c=t.pos,u=null;for(;l>0&&u===null;)s=t.node(l),s.type===n?u=l:(l-=1,c-=1);return u===null?null:{$pos:e.doc.resolve(c),depth:u}},Ix=(r,e)=>{const t=rd(r,e);if(!t)return!1;const[,n]=t8(e,r,t.$pos.pos+4);return n},z5=(r,e,t)=>{const{$anchor:n}=r.selection,s=Math.max(0,n.pos-2),l=r.doc.resolve(s).node();return!(!l||!t.includes(l.type.name))},L5=(r,e)=>{var t;const{$anchor:n}=e.selection,s=e.doc.resolve(n.pos-2);return!(s.index()===0||((t=s.nodeBefore)==null?void 0:t.type.name)!==r)},B5=(r,e,t)=>{if(!t)return!1;const n=Wt(r,e.schema);let s=!1;return t.descendants(l=>{l.type===n&&(s=!0)}),s},Sg=(r,e,t)=>{if(r.commands.undoInputRule())return!0;if(r.state.selection.from!==r.state.selection.to)return!1;if(!_s(r.state,e)&&z5(r.state,e,t)){const{$anchor:u}=r.state.selection,h=r.state.doc.resolve(u.before()-1),m=[];h.node().descendants((b,v)=>{b.type.name===e&&m.push({node:b,pos:v})});const p=m.at(-1);if(!p)return!1;const x=r.state.doc.resolve(h.start()+p.pos+1);return r.chain().cut({from:u.start()-1,to:u.end()+1},x.end()).joinForward().run()}if(!_s(r.state,e)||!s8(r.state))return!1;const n=rd(e,r.state);if(!n)return!1;const l=r.state.doc.resolve(n.$pos.pos-2).node(n.depth),c=B5(e,r.state,l);return L5(e,r.state)&&!c?r.commands.joinItemBackward():r.chain().liftListItem(e).run()},I5=(r,e)=>{const t=Ix(r,e),n=rd(r,e);return!n||!t?!1:t>n.depth},P5=(r,e)=>{const t=Ix(r,e),n=rd(r,e);return!n||!t?!1:t<n.depth},Ng=(r,e)=>{if(!_s(r.state,e)||!a8(r.state,e))return!1;const{selection:t}=r.state,{$from:n,$to:s}=t;return!t.empty&&n.sameParent(s)?!1:I5(e,r.state)?r.chain().focus(r.state.selection.from+4).lift(e).joinBackward().run():P5(e,r.state)?r.chain().joinForward().joinBackward().run():r.commands.joinItemForward()},KL=(r,e)=>{var t;const{$anchor:n}=e.selection,s=e.doc.resolve(n.pos-n.parentOffset-2);return!(s.index()===s.parent.childCount-1||((t=s.nodeAfter)==null?void 0:t.type.name)!==r)},_5=wt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:r})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{r.state.schema.nodes[t]!==void 0&&Ng(r,t)&&(e=!0)}),e},"Mod-Delete":({editor:r})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t})=>{r.state.schema.nodes[t]!==void 0&&Ng(r,t)&&(e=!0)}),e},Backspace:({editor:r})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:n})=>{r.state.schema.nodes[t]!==void 0&&Sg(r,t,n)&&(e=!0)}),e},"Mod-Backspace":({editor:r})=>{let e=!1;return this.options.listTypes.forEach(({itemName:t,wrapperNames:n})=>{r.state.schema.nodes[t]!==void 0&&Sg(r,t,n)&&(e=!0)}),e}}}}),WL="listItem",I1="textStyle",P1=/^(\d+)\.\s$/,Px=fn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:r=>r.hasAttribute("start")?parseInt(r.getAttribute("start")||"",10):1},type:{default:null,parseHTML:r=>r.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:r}){const{start:e,...t}=r;return e===1?["ol",Rt(this.options.HTMLAttributes,t),0]:["ol",Rt(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleOrderedList:()=>({commands:r,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(WL,this.editor.getAttributes(I1)).run():r.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let r=Zl({find:P1,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(r=Zl({find:P1,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(I1)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[r]}}),XL=/^\s*(\[([( |x])?\])\s$/,QL=fn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:r=>{const e=r.getAttribute("data-checked");return e===""||e==="true"},renderHTML:r=>({"data-checked":r.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:r,HTMLAttributes:e}){return["li",Rt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:r.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const r={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...r,Tab:()=>this.editor.commands.sinkListItem(this.name)}:r},addNodeView(){return({node:r,HTMLAttributes:e,getPos:t,editor:n})=>{const s=document.createElement("li"),l=document.createElement("label"),c=document.createElement("span"),u=document.createElement("input"),h=document.createElement("div"),m=p=>{var x,b;u.ariaLabel=((b=(x=this.options.a11y)==null?void 0:x.checkboxLabel)==null?void 0:b.call(x,p,u.checked))||`Task item checkbox for ${p.textContent||"empty task item"}`};return m(r),l.contentEditable="false",u.type="checkbox",u.addEventListener("mousedown",p=>p.preventDefault()),u.addEventListener("change",p=>{if(!n.isEditable&&!this.options.onReadOnlyChecked){u.checked=!u.checked;return}const{checked:x}=p.target;n.isEditable&&typeof t=="function"&&n.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:b})=>{const v=t();if(typeof v!="number")return!1;const k=b.doc.nodeAt(v);return b.setNodeMarkup(v,void 0,{...k?.attrs,checked:x}),!0}).run(),!n.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(r,x)||(u.checked=!u.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([p,x])=>{s.setAttribute(p,x)}),s.dataset.checked=r.attrs.checked,u.checked=r.attrs.checked,l.append(u,c),s.append(l,h),Object.entries(e).forEach(([p,x])=>{s.setAttribute(p,x)}),{dom:s,contentDOM:h,update:p=>p.type!==this.type?!1:(s.dataset.checked=p.attrs.checked,u.checked=p.attrs.checked,m(p),!0)}}},addInputRules(){return[Zl({find:XL,type:this.type,getAttributes:r=>({checked:r[r.length-1]==="x"})})]}}),JL=fn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:r}){return["ul",Rt(this.options.HTMLAttributes,r,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:r})=>r.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});wt.create({name:"listKit",addExtensions(){const r=[];return this.options.bulletList!==!1&&r.push(Lx.configure(this.options.bulletList)),this.options.listItem!==!1&&r.push(Bx.configure(this.options.listItem)),this.options.listKeymap!==!1&&r.push(_5.configure(this.options.listKeymap)),this.options.orderedList!==!1&&r.push(Px.configure(this.options.orderedList)),this.options.taskItem!==!1&&r.push(QL.configure(this.options.taskItem)),this.options.taskList!==!1&&r.push(JL.configure(this.options.taskList)),r}});var ZL=fn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:r}){return["p",Rt(this.options.HTMLAttributes,r),0]},addCommands(){return{setParagraph:()=>({commands:r})=>r.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),e7=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,t7=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,r7=ga.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:r=>r.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["s",Rt(this.options.HTMLAttributes,r),0]},addCommands(){return{setStrike:()=>({commands:r})=>r.setMark(this.name),toggleStrike:()=>({commands:r})=>r.toggleMark(this.name),unsetStrike:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Io({find:e7,type:this.type})]},addPasteRules(){return[Hs({find:t7,type:this.type})]}}),n7=fn.create({name:"text",group:"inline"}),H5=ga.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:r=>r.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:r}){return["u",Rt(this.options.HTMLAttributes,r),0]},addCommands(){return{setUnderline:()=>({commands:r})=>r.setMark(this.name),toggleUnderline:()=>({commands:r})=>r.toggleMark(this.name),unsetUnderline:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),a7=H5;function s7(r={}){return new Ht({view(e){return new o7(e,r)}})}class o7{constructor(e,t){var n;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(n=t.width)!==null&&n!==void 0?n:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let l=c=>{this[s](c)};return e.dom.addEventListener(s,l),{name:s,handler:l}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,n,s=this.editorView.dom,l=s.getBoundingClientRect(),c=l.width/s.offsetWidth,u=l.height/s.offsetHeight;if(t){let x=e.nodeBefore,b=e.nodeAfter;if(x||b){let v=this.editorView.nodeDOM(this.cursorPos-(x?x.nodeSize:0));if(v){let k=v.getBoundingClientRect(),w=x?k.bottom:k.top;x&&b&&(w=(w+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let S=this.width/2*u;n={left:k.left,right:k.right,top:w-S,bottom:w+S}}}}if(!n){let x=this.editorView.coordsAtPos(this.cursorPos),b=this.width/2*c;n={left:x.left-b,right:x.left+b,top:x.top,bottom:x.bottom}}let h=this.editorView.dom.offsetParent;this.element||(this.element=h.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let m,p;if(!h||h==document.body&&getComputedStyle(h).position=="static")m=-pageXOffset,p=-pageYOffset;else{let x=h.getBoundingClientRect(),b=x.width/h.offsetWidth,v=x.height/h.offsetHeight;m=x.left-h.scrollLeft*b,p=x.top-h.scrollTop*v}this.element.style.left=(n.left-m)/c+"px",this.element.style.top=(n.top-p)/u+"px",this.element.style.width=(n.right-n.left)/c+"px",this.element.style.height=(n.bottom-n.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),n=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=n&&n.type.spec.disableDropCursor,l=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!l){let c=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=UN(this.editorView.state.doc,c,this.editorView.dragging.slice);u!=null&&(c=u)}this.setCursor(c),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class _t extends Ue{constructor(e){super(e,e)}map(e,t){let n=e.resolve(t.map(this.head));return _t.valid(n)?new _t(n):Ue.near(n)}content(){return pe.empty}eq(e){return e instanceof _t&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new _t(e.resolve(t.pos))}getBookmark(){return new _x(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!l7(e)||!i7(e))return!1;let n=t.type.spec.allowGapCursor;if(n!=null)return n;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,n=!1){e:for(;;){if(!n&&_t.valid(e))return e;let s=e.pos,l=null;for(let c=e.depth;;c--){let u=e.node(c);if(t>0?e.indexAfter(c)<u.childCount:e.index(c)>0){l=u.child(t>0?e.indexAfter(c):e.index(c)-1);break}else if(c==0)return null;s+=t;let h=e.doc.resolve(s);if(_t.valid(h))return h}for(;;){let c=t>0?l.firstChild:l.lastChild;if(!c){if(l.isAtom&&!l.isText&&!Re.isSelectable(l)){e=e.doc.resolve(s+l.nodeSize*t),n=!1;continue e}break}l=c,s+=t;let u=e.doc.resolve(s);if(_t.valid(u))return u}return null}}}_t.prototype.visible=!1;_t.findFrom=_t.findGapCursorFrom;Ue.jsonID("gapcursor",_t);class _x{constructor(e){this.pos=e}map(e){return new _x(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return _t.valid(t)?new _t(t):Ue.near(t)}}function l7(r){for(let e=r.depth;e>=0;e--){let t=r.index(e),n=r.node(e);if(t==0){if(n.type.spec.isolating)return!0;continue}for(let s=n.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function i7(r){for(let e=r.depth;e>=0;e--){let t=r.indexAfter(e),n=r.node(e);if(t==n.childCount){if(n.type.spec.isolating)return!0;continue}for(let s=n.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function c7(){return new Ht({props:{decorations:h7,createSelectionBetween(r,e,t){return e.pos==t.pos&&_t.valid(t)?new _t(t):null},handleClick:u7,handleKeyDown:d7,handleDOMEvents:{beforeinput:f7}}})}const d7=Aj({ArrowLeft:zu("horiz",-1),ArrowRight:zu("horiz",1),ArrowUp:zu("vert",-1),ArrowDown:zu("vert",1)});function zu(r,e){const t=r=="vert"?e>0?"down":"up":e>0?"right":"left";return function(n,s,l){let c=n.selection,u=e>0?c.$to:c.$from,h=c.empty;if(c instanceof He){if(!l.endOfTextblock(t)||u.depth==0)return!1;h=!1,u=n.doc.resolve(e>0?u.after():u.before())}let m=_t.findGapCursorFrom(u,e,h);return m?(s&&s(n.tr.setSelection(new _t(m))),!0):!1}}function u7(r,e,t){if(!r||!r.editable)return!1;let n=r.state.doc.resolve(e);if(!_t.valid(n))return!1;let s=r.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&Re.isSelectable(r.state.doc.nodeAt(s.inside))?!1:(r.dispatch(r.state.tr.setSelection(new _t(n))),!0)}function f7(r,e){if(e.inputType!="insertCompositionText"||!(r.state.selection instanceof _t))return!1;let{$from:t}=r.state.selection,n=t.parent.contentMatchAt(t.index()).findWrapping(r.state.schema.nodes.text);if(!n)return!1;let s=re.empty;for(let c=n.length-1;c>=0;c--)s=re.from(n[c].createAndFill(null,s));let l=r.state.tr.replace(t.pos,t.pos,new pe(s,0,0));return l.setSelection(He.near(l.doc.resolve(t.pos+1))),r.dispatch(l),!1}function h7(r){if(!(r.selection instanceof _t))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ot.create(r.doc,[Lr.widget(r.selection.head,e,{key:"gapcursor"})])}var Gf=200,ur=function(){};ur.prototype.append=function(e){return e.length?(e=ur.from(e),!this.length&&e||e.length<Gf&&this.leafAppend(e)||this.length<Gf&&e.leafPrepend(this)||this.appendInner(e)):this};ur.prototype.prepend=function(e){return e.length?ur.from(e).append(this):this};ur.prototype.appendInner=function(e){return new m7(this,e)};ur.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?ur.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};ur.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ur.prototype.forEach=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length),t<=n?this.forEachInner(e,t,n,0):this.forEachInvertedInner(e,t,n,0)};ur.prototype.map=function(e,t,n){t===void 0&&(t=0),n===void 0&&(n=this.length);var s=[];return this.forEach(function(l,c){return s.push(e(l,c))},t,n),s};ur.from=function(e){return e instanceof ur?e:e&&e.length?new $5(e):ur.empty};var $5=(function(r){function e(n){r.call(this),this.values=n}r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,l){return s==0&&l==this.length?this:new e(this.values.slice(s,l))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,l,c,u){for(var h=l;h<c;h++)if(s(this.values[h],u+h)===!1)return!1},e.prototype.forEachInvertedInner=function(s,l,c,u){for(var h=l-1;h>=c;h--)if(s(this.values[h],u+h)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=Gf)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=Gf)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e})(ur);ur.empty=new $5([]);var m7=(function(r){function e(t,n){r.call(this),this.left=t,this.right=n,this.length=t.length+n.length,this.depth=Math.max(t.depth,n.depth)+1}return r&&(e.__proto__=r),e.prototype=Object.create(r&&r.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(n){return n<this.left.length?this.left.get(n):this.right.get(n-this.left.length)},e.prototype.forEachInner=function(n,s,l,c){var u=this.left.length;if(s<u&&this.left.forEachInner(n,s,Math.min(l,u),c)===!1||l>u&&this.right.forEachInner(n,Math.max(s-u,0),Math.min(this.length,l)-u,c+u)===!1)return!1},e.prototype.forEachInvertedInner=function(n,s,l,c){var u=this.left.length;if(s>u&&this.right.forEachInvertedInner(n,s-u,Math.max(l,u)-u,c+u)===!1||l<u&&this.left.forEachInvertedInner(n,Math.min(s,u),l,c)===!1)return!1},e.prototype.sliceInner=function(n,s){if(n==0&&s==this.length)return this;var l=this.left.length;return s<=l?this.left.slice(n,s):n>=l?this.right.slice(n-l,s-l):this.left.slice(n,l).append(this.right.slice(0,s-l))},e.prototype.leafAppend=function(n){var s=this.right.leafAppend(n);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(n){var s=this.left.leafPrepend(n);if(s)return new e(s,this.right)},e.prototype.appendInner=function(n){return this.left.depth>=Math.max(this.right.depth,n.depth)+1?new e(this.left,new e(this.right,n)):new e(this,n)},e})(ur);const p7=500;class Pn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let n=this.items.length;for(;;n--)if(this.items.get(n-1).selection){--n;break}let s,l;t&&(s=this.remapping(n,this.items.length),l=s.maps.length);let c=e.tr,u,h,m=[],p=[];return this.items.forEach((x,b)=>{if(!x.step){s||(s=this.remapping(n,b+1),l=s.maps.length),l--,p.push(x);return}if(s){p.push(new aa(x.map));let v=x.step.map(s.slice(l)),k;v&&c.maybeStep(v).doc&&(k=c.mapping.maps[c.mapping.maps.length-1],m.push(new aa(k,void 0,void 0,m.length+p.length))),l--,k&&s.appendMap(k,l)}else c.maybeStep(x.step);if(x.selection)return u=s?x.selection.map(s.slice(l)):x.selection,h=new Pn(this.items.slice(0,n).append(p.reverse().concat(m)),this.eventCount-1),!1},this.items.length,0),{remaining:h,transform:c,selection:u}}addTransform(e,t,n,s){let l=[],c=this.eventCount,u=this.items,h=!s&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let x=e.steps[p].invert(e.docs[p]),b=new aa(e.mapping.maps[p],x,t),v;(v=h&&h.merge(b))&&(b=v,p?l.pop():u=u.slice(0,u.length-1)),l.push(b),t&&(c++,t=void 0),s||(h=b)}let m=c-n.depth;return m>x7&&(u=g7(u,m),c-=m),new Pn(u.append(l),c)}remapping(e,t){let n=new Uc;return this.items.forEach((s,l)=>{let c=s.mirrorOffset!=null&&l-s.mirrorOffset>=e?n.maps.length-s.mirrorOffset:void 0;n.appendMap(s.map,c)},e,t),n}addMaps(e){return this.eventCount==0?this:new Pn(this.items.append(e.map(t=>new aa(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let n=[],s=Math.max(0,this.items.length-t),l=e.mapping,c=e.steps.length,u=this.eventCount;this.items.forEach(b=>{b.selection&&u--},s);let h=t;this.items.forEach(b=>{let v=l.getMirror(--h);if(v==null)return;c=Math.min(c,v);let k=l.maps[v];if(b.step){let w=e.steps[v].invert(e.docs[v]),S=b.selection&&b.selection.map(l.slice(h+1,v));S&&u++,n.push(new aa(k,w,S))}else n.push(new aa(k))},s);let m=[];for(let b=t;b<c;b++)m.push(new aa(l.maps[b]));let p=this.items.slice(0,s).append(m).append(n),x=new Pn(p,u);return x.emptyItemCount()>p7&&(x=x.compress(this.items.length-n.length)),x}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),n=t.maps.length,s=[],l=0;return this.items.forEach((c,u)=>{if(u>=e)s.push(c),c.selection&&l++;else if(c.step){let h=c.step.map(t.slice(n)),m=h&&h.getMap();if(n--,m&&t.appendMap(m,n),h){let p=c.selection&&c.selection.map(t.slice(n));p&&l++;let x=new aa(m.invert(),h,p),b,v=s.length-1;(b=s.length&&s[v].merge(x))?s[v]=b:s.push(x)}}else c.map&&n--},this.items.length,0),new Pn(ur.from(s.reverse()),l)}}Pn.empty=new Pn(ur.empty,0);function g7(r,e){let t;return r.forEach((n,s)=>{if(n.selection&&e--==0)return t=s,!1}),r.slice(t)}class aa{constructor(e,t,n,s){this.map=e,this.step=t,this.selection=n,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new aa(t.getMap().invert(),t,this.selection)}}}class js{constructor(e,t,n,s,l){this.done=e,this.undone=t,this.prevRanges=n,this.prevTime=s,this.prevComposition=l}}const x7=20;function b7(r,e,t,n){let s=t.getMeta(To),l;if(s)return s.historyState;t.getMeta(k7)&&(r=new js(r.done,r.undone,null,0,-1));let c=t.getMeta("appendedTransaction");if(t.steps.length==0)return r;if(c&&c.getMeta(To))return c.getMeta(To).redo?new js(r.done.addTransform(t,void 0,n,Gu(e)),r.undone,_1(t.mapping.maps),r.prevTime,r.prevComposition):new js(r.done,r.undone.addTransform(t,void 0,n,Gu(e)),null,r.prevTime,r.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(c&&c.getMeta("addToHistory")===!1)){let u=t.getMeta("composition"),h=r.prevTime==0||!c&&r.prevComposition!=u&&(r.prevTime<(t.time||0)-n.newGroupDelay||!y7(t,r.prevRanges)),m=c?kp(r.prevRanges,t.mapping):_1(t.mapping.maps);return new js(r.done.addTransform(t,h?e.selection.getBookmark():void 0,n,Gu(e)),Pn.empty,m,t.time,u??r.prevComposition)}else return(l=t.getMeta("rebased"))?new js(r.done.rebased(t,l),r.undone.rebased(t,l),kp(r.prevRanges,t.mapping),r.prevTime,r.prevComposition):new js(r.done.addMaps(t.mapping.maps),r.undone.addMaps(t.mapping.maps),kp(r.prevRanges,t.mapping),r.prevTime,r.prevComposition)}function y7(r,e){if(!e)return!1;if(!r.docChanged)return!0;let t=!1;return r.mapping.maps[0].forEach((n,s)=>{for(let l=0;l<e.length;l+=2)n<=e[l+1]&&s>=e[l]&&(t=!0)}),t}function _1(r){let e=[];for(let t=r.length-1;t>=0&&e.length==0;t--)r[t].forEach((n,s,l,c)=>e.push(l,c));return e}function kp(r,e){if(!r)return null;let t=[];for(let n=0;n<r.length;n+=2){let s=e.map(r[n],1),l=e.map(r[n+1],-1);s<=l&&t.push(s,l)}return t}function v7(r,e,t){let n=Gu(e),s=To.get(e).spec.config,l=(t?r.undone:r.done).popEvent(e,n);if(!l)return null;let c=l.selection.resolve(l.transform.doc),u=(t?r.done:r.undone).addTransform(l.transform,e.selection.getBookmark(),s,n),h=new js(t?u:l.remaining,t?l.remaining:u,null,0,-1);return l.transform.setSelection(c).setMeta(To,{redo:t,historyState:h})}let wp=!1,H1=null;function Gu(r){let e=r.plugins;if(H1!=e){wp=!1,H1=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){wp=!0;break}}return wp}const To=new fr("history"),k7=new fr("closeHistory");function w7(r={}){return r={depth:r.depth||100,newGroupDelay:r.newGroupDelay||500},new Ht({key:To,state:{init(){return new js(Pn.empty,Pn.empty,null,0,-1)},apply(e,t,n){return b7(t,n,e,r)}},config:r,props:{handleDOMEvents:{beforeinput(e,t){let n=t.inputType,s=n=="historyUndo"?V5:n=="historyRedo"?F5:null;return s?(t.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function U5(r,e){return(t,n)=>{let s=To.getState(t);if(!s||(r?s.undone:s.done).eventCount==0)return!1;if(n){let l=v7(s,t,r);l&&n(e?l.scrollIntoView():l)}return!0}}const V5=U5(!1,!0),F5=U5(!0,!0);wt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:r=>r.length,wordCounter:r=>r.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=r=>{const e=r?.node||this.editor.state.doc;if((r?.mode||this.options.mode)==="textSize"){const n=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(n)}return e.nodeSize},this.storage.words=r=>{const e=r?.node||this.editor.state.doc,t=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(t)}},addProseMirrorPlugins(){let r=!1;return[new Ht({key:new fr("characterCount"),appendTransaction:(e,t,n)=>{if(r)return;const s=this.options.limit;if(s==null||s===0){r=!0;return}const l=this.storage.characters({node:n.doc});if(l>s){const c=l-s,u=0,h=c;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const m=n.tr.deleteRange(u,h);return r=!0,m}r=!0},filterTransaction:(e,t)=>{const n=this.options.limit;if(!e.docChanged||n===0||n===null||n===void 0)return!0;const s=this.storage.characters({node:t.doc}),l=this.storage.characters({node:e.doc});if(l<=n||s>n&&l>n&&l<=s)return!0;if(s>n&&l>n&&l>s||!e.getMeta("paste"))return!1;const u=e.selection.$head.pos,h=l-n,m=u-h,p=u;return e.deleteRange(m,p),!(this.storage.characters({node:e.doc})>n)}})]}});var S7=wt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[s7(this.options)]}});wt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Ht({key:new fr("focus"),props:{decorations:({doc:r,selection:e})=>{const{isEditable:t,isFocused:n}=this.editor,{anchor:s}=e,l=[];if(!t||!n)return Ot.create(r,[]);let c=0;this.options.mode==="deepest"&&r.descendants((h,m)=>{if(h.isText)return;if(!(s>=m&&s<=m+h.nodeSize-1))return!1;c+=1});let u=0;return r.descendants((h,m)=>{if(h.isText||!(s>=m&&s<=m+h.nodeSize-1))return!1;if(u+=1,this.options.mode==="deepest"&&c-u>0||this.options.mode==="shallowest"&&u>1)return this.options.mode==="deepest";l.push(Lr.node(m,m+h.nodeSize,{class:this.options.className}))}),Ot.create(r,l)}}})]}});var N7=wt.create({name:"gapCursor",addProseMirrorPlugins(){return[c7()]},extendNodeSchema(r){var e;const t={name:r.name,options:r.options,storage:r.storage};return{allowGapCursor:(e=ut(De(r,"allowGapCursor",t)))!=null?e:null}}}),j7=wt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ht({key:new fr("placeholder"),props:{decorations:({doc:r,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:n}=e,s=[];if(!t)return null;const l=this.editor.isEmpty;return r.descendants((c,u)=>{const h=n>=u&&n<=u+c.nodeSize,m=!c.isLeaf&&kh(c);if((h||!this.options.showOnlyCurrent)&&m){const p=[this.options.emptyNodeClass];l&&p.push(this.options.emptyEditorClass);const x=Lr.node(u,u+c.nodeSize,{class:p.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:c,pos:u,hasAnchor:h}):this.options.placeholder});s.push(x)}return this.options.includeChildren}),Ot.create(r,s)}}})]}});wt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:r,options:e}=this;return[new Ht({key:new fr("selection"),props:{decorations(t){return t.selection.empty||r.isFocused||!r.isEditable||t5(t.selection)||r.view.dragging?null:Ot.create(t.doc,[Lr.inline(t.selection.from,t.selection.to,{class:e.className})])}}})]}});function $1({types:r,node:e}){return e&&Array.isArray(r)&&r.includes(e.type)||e?.type===r}var C7=wt.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const r=new fr(this.name),e=Object.entries(this.editor.schema.nodes).map(([,t])=>t).filter(t=>(this.options.notAfter||[]).concat(this.options.node).includes(t.name));return[new Ht({key:r,appendTransaction:(t,n,s)=>{const{doc:l,tr:c,schema:u}=s,h=r.getState(s),m=l.content.size,p=u.nodes[this.options.node];if(h)return c.insert(m,p.create())},state:{init:(t,n)=>{const s=n.tr.doc.lastChild;return!$1({node:s,types:e})},apply:(t,n)=>{if(!t.docChanged)return n;const s=t.doc.lastChild;return!$1({node:s,types:e})}}})]}}),T7=wt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:r,dispatch:e})=>V5(r,e),redo:()=>({state:r,dispatch:e})=>F5(r,e)}},addProseMirrorPlugins(){return[w7(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),M7=wt.create({name:"starterKit",addExtensions(){var r,e,t,n;const s=[];return this.options.bold!==!1&&s.push(nL.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(k5.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(Lx.configure(this.options.bulletList)),this.options.code!==!1&&s.push(oL.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(cL.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(dL.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(S7.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(N7.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(uL.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(w5.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(T7.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(hL.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(S5.configure(this.options.italic)),this.options.listItem!==!1&&s.push(Bx.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(_5.configure((r=this.options)==null?void 0:r.listKeymap)),this.options.link!==!1&&s.push(R5.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(Px.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(ZL.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(r7.configure(this.options.strike)),this.options.text!==!1&&s.push(n7.configure(this.options.text)),this.options.underline!==!1&&s.push(H5.configure((t=this.options)==null?void 0:t.underline)),this.options.trailingNode!==!1&&s.push(C7.configure((n=this.options)==null?void 0:n.trailingNode)),s}}),E7=M7,A7=j7,D7=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,O7=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,R7=ga.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:r=>r.getAttribute("data-color")||r.style.backgroundColor,renderHTML:r=>r.color?{"data-color":r.color,style:`background-color: ${r.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:r}){return["mark",Rt(this.options.HTMLAttributes,r),0]},addCommands(){return{setHighlight:r=>({commands:e})=>e.setMark(this.name,r),toggleHighlight:r=>({commands:e})=>e.toggleMark(this.name,r),unsetHighlight:()=>({commands:r})=>r.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Io({find:D7,type:this.type})]},addPasteRules(){return[Hs({find:O7,type:this.type})]}}),z7=R7,L7=wt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:r=>{const e=r.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:r=>r.textAlign?{style:`text-align: ${r.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:r=>({commands:e})=>this.options.alignments.includes(r)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:r})).every(t=>t):!1,unsetTextAlign:()=>({commands:r})=>this.options.types.map(e=>r.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:r=>({editor:e,commands:t})=>this.options.alignments.includes(r)?e.isActive({textAlign:r})?t.unsetTextAlign():t.setTextAlign(r):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),B7=L7,I7=r=>{if(!r.children.length)return;const e=r.querySelectorAll("span");e&&e.forEach(t=>{var n,s;const l=t.getAttribute("style"),c=(s=(n=t.parentElement)==null?void 0:n.closest("span"))==null?void 0:s.getAttribute("style");t.setAttribute("style",`${c};${l}`)})},Y5=ga.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!0}},parseHTML(){return[{tag:"span",consuming:!1,getAttrs:r=>r.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&I7(r),{}):!1}]},renderHTML({HTMLAttributes:r}){return["span",Rt(this.options.HTMLAttributes,r),0]},addCommands(){return{toggleTextStyle:r=>({commands:e})=>e.toggleMark(this.name,r),removeEmptyTextStyle:()=>({tr:r})=>{const{selection:e}=r;return r.doc.nodesBetween(e.from,e.to,(t,n)=>{if(t.isTextblock)return!0;t.marks.filter(s=>s.type===this.type).some(s=>Object.values(s.attrs).some(l=>!!l))||r.removeMark(n,n+t.nodeSize,this.type)}),!0}}}}),P7=wt.create({name:"backgroundColor",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{backgroundColor:{default:null,parseHTML:r=>{var e;return(e=r.style.backgroundColor)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:r=>r.backgroundColor?{style:`background-color: ${r.backgroundColor}`}:{}}}}]},addCommands(){return{setBackgroundColor:r=>({chain:e})=>e().setMark("textStyle",{backgroundColor:r}).run(),unsetBackgroundColor:()=>({chain:r})=>r().setMark("textStyle",{backgroundColor:null}).removeEmptyTextStyle().run()}}}),_7=wt.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:r=>{var e;return(e=r.style.color)==null?void 0:e.replace(/['"]+/g,"")},renderHTML:r=>r.color?{style:`color: ${r.color}`}:{}}}}]},addCommands(){return{setColor:r=>({chain:e})=>e().setMark("textStyle",{color:r}).run(),unsetColor:()=>({chain:r})=>r().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),q5=wt.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:r=>r.style.fontFamily,renderHTML:r=>r.fontFamily?{style:`font-family: ${r.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:r=>({chain:e})=>e().setMark("textStyle",{fontFamily:r}).run(),unsetFontFamily:()=>({chain:r})=>r().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),H7=wt.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:r=>r.style.fontSize,renderHTML:r=>r.fontSize?{style:`font-size: ${r.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:r=>({chain:e})=>e().setMark("textStyle",{fontSize:r}).run(),unsetFontSize:()=>({chain:r})=>r().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),$7=wt.create({name:"lineHeight",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:null,parseHTML:r=>r.style.lineHeight,renderHTML:r=>r.lineHeight?{style:`line-height: ${r.lineHeight}`}:{}}}}]},addCommands(){return{setLineHeight:r=>({chain:e})=>e().setMark("textStyle",{lineHeight:r}).run(),unsetLineHeight:()=>({chain:r})=>r().setMark("textStyle",{lineHeight:null}).removeEmptyTextStyle().run()}}});wt.create({name:"textStyleKit",addExtensions(){const r=[];return this.options.backgroundColor!==!1&&r.push(P7.configure(this.options.backgroundColor)),this.options.color!==!1&&r.push(_7.configure(this.options.color)),this.options.fontFamily!==!1&&r.push(q5.configure(this.options.fontFamily)),this.options.fontSize!==!1&&r.push(H7.configure(this.options.fontSize)),this.options.lineHeight!==!1&&r.push($7.configure(this.options.lineHeight)),this.options.textStyle!==!1&&r.push(Y5.configure(this.options.textStyle)),r}});var U7=q5,V7=Lx,F7=Px,Y7=Bx;const q7=M.forwardRef(function({value:e,onChange:t,placeholder:n},s){const[l,c]=P.useState(16),u=(N,T=10,C=48)=>Math.min(C,Math.max(T,N)),h=N=>{if(!N)return 16;const T=N.getAttributes("textStyle")?.fontSize,C=N.getAttributes("fontSize")?.size,D=N.getAttributes("heading")?.fontSize,A=T??C??D;if(!A)return N.isActive("heading",{level:1})?28:N.isActive("heading",{level:2})?24:N.isActive("heading",{level:3})?20:N.isActive("heading",{level:4})?18:16;if(typeof A=="number")return u(A);const Y=String(A).match(/(\d+)(px)?/);return u(Y?parseInt(Y[1],10):16)},m=P.useMemo(()=>fL.extend({addAttributes(){return{fontSize:{default:null,parseHTML:N=>N.style.fontSize||null,renderHTML:N=>N.fontSize?{style:`font-size: ${N.fontSize}`}:{}}}}}),[]),p=P.useMemo(()=>ga.create({name:"fontSize",inclusive:!0,addAttributes(){return{size:{default:null,parseHTML:N=>N.style.fontSize||null,renderHTML:N=>N.size?{style:`font-size: ${N.size}`}:{}}}},parseHTML(){return[{tag:'span[style*="font-size"]'}]},renderHTML({HTMLAttributes:N}){return["span",Rt(N),0]},addCommands(){return{setFontSize:N=>({chain:T})=>T().setMark("fontSize",{size:N}).run(),unsetFontSize:()=>({chain:N})=>N().unsetMark("fontSize").run()}}}),[]),x=P.useMemo(()=>({system:"system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif",sans:"Inter, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif",serif:'Georgia, Cambria, "Times New Roman", Times, serif',mono:'SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace'}),[]),b=P.useCallback(N=>{if(!N)return"default";for(const[T,C]of Object.entries(x))if(N===C)return T;return"default"},[x]),v=Gz({content:e||"",extensions:[E7.configure({heading:!1,italic:!1,blockquote:!1,bulletList:!1,orderedList:!1,listItem:!1}),m.configure({levels:[1,2,3,4]}),p,Jz,V7,F7,Y7,bL,a7,VL.configure({openOnClick:!0}),A7.configure({placeholder:n||"Write notes..."}),z7.configure({multicolor:!1}),B7.configure({types:["heading","paragraph"]}),Y5,U7],editorProps:{attributes:{class:"tiptap prose dark:prose-invert max-w-none min-h-[280px] outline-none px-4 py-3"}},onUpdate:({editor:N})=>t(N.getHTML()),onSelectionUpdate:({editor:N})=>{c(h(N))},onCreate:({editor:N})=>{c(h(N))}}),k=N=>()=>{N()};if(P.useEffect(()=>{if(!v)return;const N=v.getHTML();typeof e=="string"&&e!==N&&v.commands.setContent(e,{emitUpdate:!1})},[e,v]),M.useImperativeHandle(s,()=>({getHTML:()=>v?.getHTML()??"",setHTML:N=>{v&&v.commands.setContent(N,{emitUpdate:!0})}}),[v]),!v)return null;const w="h-8 w-8 rounded-xl bg-transparent text-neutral-700 hover:bg-black/5 dark:text-neutral-200 dark:hover:bg-white/10",S="ring-1 ring-black/10 dark:ring-white/15 bg-black/5 dark:bg-white/10";return i.jsxs("div",{className:"rounded-2xl border border-black/10 dark:border-white/10 bg-white/80 dark:bg-neutral-900/60",children:[i.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-2 border-b border-black/10 dark:border-white/10",children:[i.jsxs(yt,{value:b(v.getAttributes("textStyle")?.fontFamily),onValueChange:N=>{const T=v.chain().focus();if(N==="default"){T.unsetFontFamily().run();return}const C=x[N];T.setFontFamily(C).run()},children:[i.jsx(gt,{className:"h-8 rounded-xl w-[180px] bg-white/70 dark:bg-neutral-900/60",children:i.jsx(vt,{placeholder:"Font family"})}),i.jsxs(xt,{className:"rounded-xl border border-black/10 dark:border-white/10 bg-white/90 dark:bg-neutral-900/90 backdrop-blur shadow-xl data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95",children:[i.jsx(Oe,{value:"default",children:"Default"}),i.jsx(Oe,{value:"system",children:"System UI"}),i.jsx(Oe,{value:"sans",children:"Sans-serif"}),i.jsx(Oe,{value:"serif",children:"Serif"}),i.jsx(Oe,{value:"mono",children:"Monospace"})]})]}),i.jsxs("div",{className:"flex gap-1 pl-1 border-l border-black/10 dark:border-white/10",children:[i.jsx(K,{"aria-label":"Bold",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().toggleBold().run()),className:`${w} ${v.isActive("bold")?S:""}`,children:i.jsx(BM,{className:"h-4 w-4"})}),i.jsx(K,{"aria-label":"Italic",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().toggleItalic().run()),className:`${w} ${v.isActive("italic")?S:""}`,children:i.jsx(IM,{className:"h-4 w-4"})}),i.jsx(K,{"aria-label":"Underline",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().toggleUnderline().run()),className:`${w} ${v.isActive("underline")?S:""}`,children:i.jsx(PM,{className:"h-4 w-4"})}),i.jsx(K,{"aria-label":"Strikethrough",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().toggleStrike().run()),className:`${w} ${v.isActive("strike")?S:""}`,children:i.jsx(_M,{className:"h-4 w-4"})}),i.jsx(K,{"aria-label":"Code",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().toggleCode().run()),className:`${w} ${v.isActive("code")?S:""}`,children:i.jsx(Mk,{className:"h-4 w-4"})}),i.jsx(K,{"aria-label":"Highlight",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().toggleHighlight().run()),className:`${w} ${v.isActive("highlight")?S:""}`,children:i.jsx(HM,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex gap-1 pl-1 border-l border-black/10 dark:border-white/10",children:[i.jsx(K,{"aria-label":"Bullet list",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().toggleBulletList().run()),className:`${w} ${v.isActive("bulletList")?S:""}`,children:i.jsx($M,{className:"h-4 w-4"})}),i.jsx(K,{"aria-label":"Ordered list",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().toggleOrderedList().run()),className:`${w} ${v.isActive("orderedList")?S:""}`,children:i.jsx(UM,{className:"h-4 w-4"})}),i.jsx(K,{"aria-label":"Blockquote",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().toggleBlockquote().run()),className:`${w} ${v.isActive("blockquote")?S:""}`,children:i.jsx(VM,{className:"h-4 w-4"})}),i.jsx(K,{"aria-label":"Divider",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().setHorizontalRule().run()),className:`${w}`,children:i.jsx(Ek,{className:"h-4 w-4"})}),i.jsx(K,{"aria-label":"Code block",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().toggleCodeBlock().run()),className:`${w} ${v.isActive("codeBlock")?S:""}`,children:i.jsx(Mk,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex gap-1 pl-1 border-l border-black/10 dark:border-white/10",children:[i.jsx(K,{"aria-label":"Align left",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().setTextAlign("left").run()),className:`${w} ${v.isActive({textAlign:"left"})?S:""}`,children:i.jsx(FM,{className:"h-4 w-4"})}),i.jsx(K,{"aria-label":"Align center",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().setTextAlign("center").run()),className:`${w} ${v.isActive({textAlign:"center"})?S:""}`,children:i.jsx(YM,{className:"h-4 w-4"})}),i.jsx(K,{"aria-label":"Align right",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().setTextAlign("right").run()),className:`${w} ${v.isActive({textAlign:"right"})?S:""}`,children:i.jsx(qM,{className:"h-4 w-4"})}),i.jsx(K,{"aria-label":"Justify",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().setTextAlign("justify").run()),className:`${w} ${v.isActive({textAlign:"justify"})?S:""}`,children:i.jsx(GM,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex items-center gap-1 pl-1 border-l border-black/10 dark:border-white/10",children:[i.jsx(K,{"aria-label":"Decrease font size",size:"icon",variant:"ghost",className:`${w}`,onClick:()=>{const N=u(l-1);c(N),v.chain().focus().setMark("textStyle",{fontSize:`${N}px`}).setMark("fontSize",{size:`${N}px`}).run()},children:i.jsx(Ek,{className:"h-4 w-4"})}),i.jsx("input",{type:"number",value:l,onChange:N=>{const T=u(parseInt(N.target.value||"0",10));c(T),v.chain().focus().setMark("textStyle",{fontSize:`${T}px`}).setMark("fontSize",{size:`${T}px`}).run()},className:"h-8 w-16 rounded-xl border border-black/10 dark:border-white/10 bg-white/70 dark:bg-neutral-900/60 text-center text-sm"}),i.jsx(K,{"aria-label":"Increase font size",size:"icon",variant:"ghost",className:`${w}`,onClick:()=>{const N=u(l+1);c(N),v.chain().focus().setMark("textStyle",{fontSize:`${N}px`}).setMark("fontSize",{size:`${N}px`}).run()},children:i.jsx(cn,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"ml-auto flex gap-1",children:[i.jsx(K,{"aria-label":"Undo",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().undo().run()),className:`${w}`,children:i.jsx(KM,{className:"h-4 w-4"})}),i.jsx(K,{"aria-label":"Redo",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().redo().run()),className:`${w}`,children:i.jsx(WM,{className:"h-4 w-4"})}),i.jsx(K,{"aria-label":"Clear formatting",size:"icon",variant:"ghost",onClick:k(()=>v.chain().focus().unsetAllMarks().clearNodes().run()),className:`${w}`,children:i.jsx(XM,{className:"h-4 w-4"})})]})]}),i.jsx(Hz,{editor:v})]})});function G5(){return typeof navigator.storage?.getDirectory=="function"}async function G7(r,e){let t=r;for(const n of e)t=await t.getDirectoryHandle(n,{create:!0});return t}async function Kf(r,e){try{if(!G5())return{ok:!0,url:URL.createObjectURL(e)};const t=await navigator.storage.getDirectory(),n=r.split("/").filter(Boolean),s=n.pop(),u=await(await(await G7(t,n)).getFileHandle(s,{create:!0})).createWritable();return await u.write(e),await u.close(),{ok:!0}}catch(t){return{ok:!1,error:t?.message||"OPFS write failed"}}}async function Hx(r){try{if(!G5())return;const e=await navigator.storage.getDirectory(),t=r.split("/").filter(Boolean),n=t.pop();if(!n)return;let s=e;for(const u of t)s=await s.getDirectoryHandle(u,{create:!1});const c=await(await s.getFileHandle(n,{create:!1})).getFile();return URL.createObjectURL(c)}catch{return}}const K7=1,W7=1e6;let Sp=0;function X7(){return Sp=(Sp+1)%Number.MAX_SAFE_INTEGER,Sp.toString()}const Np=new Map,U1=r=>{if(Np.has(r))return;const e=setTimeout(()=>{Np.delete(r),Oc({type:"REMOVE_TOAST",toastId:r})},W7);Np.set(r,e)},Q7=(r,e)=>{switch(e.type){case"ADD_TOAST":return{...r,toasts:[e.toast,...r.toasts].slice(0,K7)};case"UPDATE_TOAST":return{...r,toasts:r.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=e;return t?U1(t):r.toasts.forEach(n=>{U1(n.id)}),{...r,toasts:r.toasts.map(n=>n.id===t||t===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(t=>t.id!==e.toastId)}}},Ku=[];let Wu={toasts:[]};function Oc(r){Wu=Q7(Wu,r),Ku.forEach(e=>{e(Wu)})}function J7({...r}){const e=X7(),t=s=>Oc({type:"UPDATE_TOAST",toast:{...s,id:e}}),n=()=>Oc({type:"DISMISS_TOAST",toastId:e});return Oc({type:"ADD_TOAST",toast:{...r,id:e,open:!0,onOpenChange:s=>{s||n()}}}),{id:e,dismiss:n,update:t}}function Z7(){const[r,e]=M.useState(Wu);return M.useEffect(()=>(Ku.push(e),()=>{const t=Ku.indexOf(e);t>-1&&Ku.splice(t,1)}),[r]),{...r,toast:J7,dismiss:t=>Oc({type:"DISMISS_TOAST",toastId:t})}}const eB=["S","M","T","W","Th","F","S2"],tB=`
  .light-scrollbar::-webkit-scrollbar { width: 10px; height: 10px; }
  .light-scrollbar::-webkit-scrollbar-track { background: rgba(0,0,0,0.05); border-radius: 5px; }
  .light-scrollbar::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.20); border-radius: 5px; }
  .light-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,0.30); }
  .dark-scrollbar::-webkit-scrollbar { width: 10px; height: 10px; }
  .dark-scrollbar::-webkit-scrollbar-track { background: rgba(255,255,255,0.10); border-radius: 5px; }
  .dark-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.20); border-radius: 5px; }
  .dark-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.30); }
`;function V1(){const{toast:r}=Z7(),e=_r(),t=P.useMemo(()=>{const O=Gn[e.palette],ce=Math.min(.5,Math.max(0,e.accent/150)),Te=Math.round(ce*255).toString(16).padStart(2,"0"),Zt=window.matchMedia("(prefers-color-scheme: dark)").matches,Ze=e.mode==="dark"||e.mode==="system"&&Zt?"linear-gradient(135deg, #0b0f19 0%, #0a0a0a 70%)":"linear-gradient(135deg, #ffffff 0%, #f8fbff 65%)",Rn=`radial-gradient(circle at 10% 0%, ${O[0]}${Te} 0%, transparent 40%)`,mn=`radial-gradient(circle at 90% 10%, ${O[3]}${Te} 0%, transparent 45%)`,Xr=`radial-gradient(circle at 50% 120%, ${O[2]}${Te} 0%, transparent 55%)`;return{backgroundImage:`${Rn}, ${mn}, ${Xr}, ${Ze}`,backgroundRepeat:"no-repeat, no-repeat, no-repeat, no-repeat",backgroundAttachment:"fixed, fixed, scroll, fixed",backgroundPosition:"10% 0%, 90% 10%, 50% 100%, 0 0"}},[e.accent,e.mode,e.palette]),n=window.matchMedia("(prefers-color-scheme: dark)").matches,s=e.mode==="dark"||e.mode==="system"&&n,l=zr(O=>O.years),c=zr(O=>O.selectedYearId),u=ar(O=>O.selectedYearId),h=ar(O=>O.selectedTermId),m=ar(O=>O.setSelectedYear),p=ar(O=>O.setSelectedTerm),x=Ft(O=>O.years),b=Ft(O=>O.selectedYearId),v=!0;P.useEffect(()=>{const O=FS();O.isValid||(console.warn("Data validation failed:",O.errors),r({title:"Data Issue Detected",description:"Some data may be corrupted. The application will attempt to recover automatically.",variant:"destructive"}))},[r]);const k=u||c||l[0]?.id,w=l.find(O=>O.id===k),S=h?w?.terms?.find(O=>O.id===h):w?.terms?.[0],N=x.find(O=>O.id===(b||x[0]?.id)),T=_n(O=>O.tasks),C=_n(O=>O.addTask),D=_n(O=>O.updateTask),A=_n(O=>O.removeTask),[Y,I]=P.useState(!1),[$,ae]=P.useState(""),[le,ie]=P.useState(""),[he,ye]=P.useState(""),[fe,ve]=P.useState("Not Started"),[B,W]=P.useState(!1),L=P.useMemo(()=>`${k||"y"}::${S?.id||"t"}`,[k,S?.id]),H=ar(O=>O.byYearTerm[L]||[]),Q=ar(O=>O.selectedCourseId),ue=ar(O=>O.setSelectedCourse),Ae=ar(O=>O.addCourse),me=ar(O=>O.updateCourse),be=ar(O=>O.addModule),$e=ar(O=>O.updateModule),_e=ar(O=>O.removeModule),de=ar(O=>O.ensureFolder),ne=ar(O=>O.renameFolder),ge=ar(O=>O.addFileToFolder),Z=ar(O=>O.moveFile),oe=ar(O=>O.updateWeeklyAttendance),Le=ar(O=>O.getWeeklyAttendance),it=(()=>{const O=new Date,ce=new Date(O.getFullYear(),0,1),Te=Math.ceil(((O.getTime()-ce.getTime())/864e5+ce.getDay()+1)/7);return`${O.getFullYear()}-${String(Te).padStart(2,"0")}`})(),zt=H.find(O=>O.id===Q),Yt=zt?Le(L,zt.id,it):Array.from({length:7},()=>!1),Et=(O,ce)=>{zt&&oe(L,zt.id,it,O,ce)};P.useEffect(()=>{if(!u&&k&&m(k),!h&&S?.id&&p(S.id),!H.length&&k&&S?.id){const O=Ae(L,{title:"Course Title",code:""});ue(O)}},[v,H.length,k,S?.id,Ae,ue,L,u,h,m,p]);const te=H.find(O=>O.id===Q)||H[0],hn=P.useMemo(()=>{if(!te||!T||T.length===0)return console.log(" CoursePlanner: No course or no tasks",{course:te,tasksLength:T?.length||0}),[];const O=[te.code?.trim().toUpperCase(),te.code?.trim(),te.code?.trim().toLowerCase(),te.title?.trim(),te.id].filter(Boolean),Te=(N?.terms?.[0]?.courses||[]).find(Ze=>Ze.code?.trim()&&te.code?.trim()&&Ze.code.trim().toUpperCase()===te.code.trim().toUpperCase()||Ze.name?.trim()&&te.title?.trim()&&Ze.name.trim()===te.title.trim());Te&&O.push(Te.code?.trim().toUpperCase(),Te.code?.trim(),Te.name?.trim(),Te.id);const Zt=[...new Set(O)].filter(Boolean);console.log(" CoursePlanner Comprehensive Debug:",{course:{id:te.id,code:te.code,title:te.title},matchingAcademicCourse:Te,uniqueIdentifiers:Zt,allTasks:T.map(Ze=>({id:Ze.id,title:Ze.title,courseId:Ze.courseId,yearId:Ze.yearId,termId:Ze.termId})),totalTasks:T.length});const Tt=T.filter(Ze=>{if(!Ze.courseId)return!1;const Rn=Zt.some(mn=>Ze.courseId===mn||Ze.courseId.toUpperCase()===mn?.toUpperCase());return Rn&&console.log(` Task matched: "${Ze.title}" (courseId: "${Ze.courseId}") matches course "${te.code||te.title}"`),Rn});return console.log(` Found ${Tt.length} tasks for course "${te.code||te.title}":`,Tt),Tt},[T,te,N]),hr=()=>{if(!$.trim()||!k||!S?.id||!te?.id){I(!1);return}const O=te.code?.trim().toUpperCase()||te.title?.trim()||te.id;console.log(" Adding task from Course Planner:",{courseId:O,course:{code:te.code,title:te.title,id:te.id},task:$.trim()});const ce={id:crypto.randomUUID(),yearId:k,termId:S.id,courseId:O,title:$.trim(),status:fe,dueDate:le||void 0,dueTime:he||void 0,grade:void 0};C(ce),ae(""),ie(""),ye(""),ve("Not Started"),I(!1),r({title:"Task Added",description:`Added "${$.trim()}" to ${te.code||te.title}`})},St=S,mr=P.useMemo(()=>{if(!te||!St)return{time:"",room:""};const O=Ze=>(Ze||"").trim().toLowerCase(),ce=te.linkedSlotId?St.slots.find(Ze=>Ze.id===te.linkedSlotId):void 0,Te=St.slots.find(Ze=>Ze.courseCode&&O(Ze.courseCode)===O(te.code)),Zt=St.slots.find(Ze=>te.title&&Ze.title&&O(Ze.title)===O(te.title)),Tt=ce||Te||Zt;return Tt?{time:`${Tt.start}${Tt.end}`,room:Tt.room||"",slotId:Tt.id}:{time:"",room:"",slotId:void 0}},[te,St]);P.useEffect(()=>{if(!te)return;const O=mr.slotId;O&&te.linkedSlotId!==O&&me(L,{...te,linkedSlotId:O}),!O&&te.linkedSlotId&&(St?.slots.some(Te=>Te.id===te.linkedSlotId)||me(L,{...te,linkedSlotId:void 0}))},[mr,te,L,me,St]);const[Qe,Wr]=P.useState(te?.modules?.[0]?.id),Wn=P.useRef(null),[$t,Nt]=P.useState(new Map),Nr=P.useRef(null),[jr,Xn]=P.useState(!1),[G,xe]=P.useState(null),[Ie,Ce]=P.useState(""),Ge=te?.modules;P.useEffect(()=>{const O=Ge?.map(ce=>ce.id)??[];O.length!==0&&(!Qe||!O.includes(Qe))&&Wr(O[0])},[Ge,Qe]);const Fe=P.useCallback((O,ce)=>{te&&(Nr.current&&clearTimeout(Nr.current),Nt(Te=>new Map(Te.set(O,ce))),Nr.current=setTimeout(()=>{try{const Te=ce.trim(),Zt=te.modules.find(Tt=>Tt.id===O);if(Zt&&Zt.html===Te)return;$e(L,te.id,O,Te),Nt(Tt=>{const Ze=new Map(Tt);return Ze.delete(O),Ze}),console.log(` Module ${O} content saved successfully`)}catch(Te){console.error(` Failed to save module ${O}:`,Te),r({title:"Save Error",description:"Failed to save module content. Please try again.",variant:"destructive"})}},1e3))},[te,L,$e,r]);P.useEffect(()=>()=>{Nr.current&&clearTimeout(Nr.current)},[]);const Lt=P.useCallback(()=>{te&&($t.forEach((O,ce)=>{try{$e(L,te.id,ce,O.trim()),console.log(` Force saved module ${ce}`)}catch(Te){console.error(` Failed to force save module ${ce}:`,Te)}}),Nt(new Map))},[te,L,$e,$t]);P.useEffect(()=>{if($t.size===0)return;const O=setInterval(()=>{$t.size>0&&(console.log(` Auto-saving ${$t.size} pending changes...`),Lt())},3e4);return()=>clearInterval(O)},[$t.size,Lt]);const Dn=async(O,ce)=>{if(!(!ce||!te))for(const Te of Array.from(ce)){const Zt=`AQ/Courses/${k}/${S?.id}/${te.id}/${O}/${Te.name}`,Tt=await Kf(Zt,Te);ge(L,te.id,O,{id:Math.random().toString(36).slice(2,8),name:Te.name,size:Te.size,opfsPath:Tt.ok&&!("url"in Tt)?Zt:void 0,url:Tt.ok&&"url"in Tt?Tt.url:void 0})}},[Hr,xa]=P.useState("root"),[At,Cr]=P.useState(""),[nd,_o]=P.useState(null),[ci,Ka]=P.useState("");P.useEffect(()=>{if(!te)return;de(L,te.id,"root"),new Set(te.folders.map(ce=>ce.path)).has(Hr)||xa("root")},[te,L,de,Hr]);const di=()=>{if(!te)return;const O=At.trim();O&&(de(L,te.id,O),Cr(""))},ad=async O=>{try{const ce=O.url||(O.opfsPath?await Hx(O.opfsPath):void 0);if(!ce)return;const Te=document.createElement("a");Te.href=ce,Te.target="_blank",Te.download=O.name,document.body.appendChild(Te),Te.click(),Te.remove(),O.url||setTimeout(()=>URL.revokeObjectURL(ce),1500)}catch{}},Ho=P.useCallback(async()=>{if(!te||!Qe)return;const O=te.modules.find(Xr=>Xr.id===Qe);if(!O)return;const ce=Wn.current?.getHTML()??O.html??"";$e(L,te.id,Qe,ce);const Te=ce,Zt=(O.title||Qe).replace(/[^\w-]+/g,"-"),Tt=k||"year",Ze=S?.id||"term",Rn=`${Zt||"module"}.html`,mn=`AQ/Courses/${Tt}/${Ze}/${te.id}/notes/${Rn}`;try{const Xr=new File([Te],Rn,{type:"text/html"}),pr=await Kf(mn,Xr);if(pr.ok){if("url"in pr&&pr.url){const $r=document.createElement("a");$r.href=pr.url,$r.download=Rn,document.body.appendChild($r),$r.click(),$r.remove(),setTimeout(()=>URL.revokeObjectURL(pr.url),1500)}r({title:"Notes saved",description:`${O.title||"Module"} saved${"url"in pr?" (downloaded)":""}.`})}else{const $r="error"in pr?pr.error:"Unknown error";r({title:"Save failed",description:$r})}}catch(Xr){const pr=Xr instanceof Error?Xr.message:String(Xr);r({title:"Save failed",description:pr})}},[te,Qe,$e,L,k,S?.id,r]);P.useEffect(()=>{const O=()=>{if(Lt(),te&&Qe){const ce=Wn.current?.getHTML()??"";if(ce.trim())try{$e(L,te.id,Qe,ce.trim()),console.log(` Final save on unmount for module ${Qe}`)}catch(Te){console.error(" Failed to save on unmount:",Te)}}};return window.addEventListener("beforeunload",O),()=>{window.removeEventListener("beforeunload",O)}},[te,Qe,L,$e,Lt]);const On=P.useRef(Ho);return P.useEffect(()=>{On.current=Ho},[Ho]),P.useEffect(()=>{const O=ce=>{(ce.ctrlKey||ce.metaKey)&&(ce.key==="s"||ce.key==="S")&&(ce.preventDefault(),On.current())};return window.addEventListener("keydown",O),()=>window.removeEventListener("keydown",O)},[]),i.jsxs("div",{className:"min-h-screen w-full overflow-x-hidden",style:t,children:[i.jsx("style",{children:tB}),i.jsxs("div",{className:"max-w-[1400px] mx-auto px-3 py-6 space-y-6",children:[i.jsx("div",{className:"relative",children:i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Mn,{className:"h-5 w-5"}),i.jsx("h1",{className:"text-2xl font-bold",children:"Course Planner"})]}),i.jsx(oi,{active:"courses"})]}),i.jsxs("div",{className:"flex flex-col items-end gap-2 shrink-0",children:[i.jsxs(yt,{value:te?.id??"",onValueChange:O=>{if(O==="__add_new__"){const ce=Ae(L,{title:"New Course",code:""});ue(ce)}else ue(O)},children:[i.jsx(gt,{className:`h-9 rounded-xl border border-black/10 bg-white/80 dark:bg-neutral-900/60 backdrop-blur min-w-[240px] \r
                                       hover:bg-white/90 dark:hover:bg-neutral-900/70 transition-all duration-200 hover:scale-[1.02] hover:shadow-md`,children:i.jsx(vt,{placeholder:"Select course"})}),i.jsxs(xt,{className:"rounded-xl border border-black/10 dark:border-white/10 bg-white/90 dark:bg-neutral-900/90 backdrop-blur shadow-xl data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95",children:[H.map(O=>i.jsxs(Oe,{value:O.id,className:"cursor-pointer hover:bg-white/60 dark:hover:bg-neutral-800/60 transition-colors duration-200",children:[i.jsx("span",{className:"font-medium",children:O.code||""}),O.title?i.jsxs("span",{className:"opacity-70",children:[O.code?"  ":"",O.title]}):null]},O.id)),i.jsx("div",{className:"my-1 border-t border-black/10 dark:border-white/10"}),i.jsx(Oe,{value:"__add_new__",className:"cursor-pointer hover:bg-white/60 dark:hover:bg-neutral-800/60 transition-colors duration-200",children:i.jsxs("span",{className:"inline-flex items-center",children:[i.jsx(cn,{className:"h-4 w-4 mr-2"})," Add New Course"]})})]})]}),i.jsxs(K,{size:"sm",className:`h-8 rounded-2xl px-3 bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                          text-gray-700 dark:text-gray-200 hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 \r
                          hover:text-blue-700 dark:hover:text-blue-300 shadow-md hover:shadow-lg backdrop-blur-sm \r
                          border border-gray-200/60 dark:border-gray-600/40 hover:border-blue-200/60 dark:hover:border-blue-400/30\r
                          transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0\r
                          font-medium tracking-wide`,onClick:()=>W(!0),title:"Select school year and term",children:[w?.label||"Select Year"," ",S?` ${S.name||`Term ${S.id}`}`:""," ",i.jsx("span",{className:"ml-1 opacity-60",children:""})]})]})]})}),i.jsxs("div",{className:"grid grid-cols-12 gap-6 items-start",children:[i.jsxs("div",{className:"col-span-12 lg:col-span-4 space-y-6",children:[i.jsx(Ne,{className:"border-0 shadow-xl rounded-3xl bg-gradient-to-br from-white/95 to-white/85 dark:from-neutral-900/80 dark:to-neutral-800/70 backdrop-blur-xl",children:i.jsxs(je,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx("div",{className:"p-2 rounded-2xl bg-gradient-to-br from-blue-500/20 to-indigo-500/20 dark:from-blue-400/20 dark:to-indigo-400/20",children:i.jsx(Mn,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),i.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100",children:"This Week"})]}),i.jsx("div",{className:"grid grid-cols-7 gap-3",children:eB.map((O,ce)=>i.jsxs("label",{className:`inline-flex flex-col items-center text-xs rounded-2xl p-3 cursor-pointer \r
                                bg-gradient-to-br from-white/70 to-white/50 dark:from-neutral-800/50 dark:to-neutral-900/40\r
                                hover:from-blue-50/80 hover:to-indigo-50/60 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30\r
                                border border-gray-200/40 dark:border-gray-600/30 hover:border-blue-200/60 dark:hover:border-blue-400/40\r
                                transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-1 \r
                                shadow-sm hover:shadow-md backdrop-blur-sm group`,children:[i.jsx("input",{type:"checkbox",checked:Yt[ce]||!1,onChange:Te=>Et(ce,Te.target.checked),className:"h-4 w-4 accent-blue-600 dark:accent-blue-400 rounded transition-all duration-200 group-hover:scale-110"}),i.jsx("span",{className:"mt-2 text-gray-600 dark:text-gray-300 font-medium group-hover:text-blue-700 dark:group-hover:text-blue-300 transition-colors duration-200",children:O})]},ce))}),i.jsx("div",{className:"mt-4 p-3 rounded-2xl bg-gradient-to-r from-blue-50/60 to-indigo-50/40 dark:from-blue-950/30 dark:to-indigo-950/20 border border-blue-200/30 dark:border-blue-700/30",children:i.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-300 font-medium",children:" Track your weekly attendance and completion progress to track your weekly scheduled classes for this course"})})]})}),i.jsx(Ne,{className:"border-0 shadow-lg rounded-3xl bg-white/80 dark:bg-neutral-900/60",children:i.jsxs(je,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Task Tracker"}),i.jsxs(K,{size:"sm",variant:"outline",className:`rounded-2xl bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                              text-gray-700 dark:text-gray-200 hover:from-green-50/90 hover:to-emerald-50/80 dark:hover:from-green-950/40 dark:hover:to-emerald-950/30 \r
                              hover:text-green-700 dark:hover:text-green-300 shadow-md hover:shadow-lg backdrop-blur-sm \r
                              border border-gray-200/60 dark:border-gray-600/40 hover:border-green-200/60 dark:hover:border-green-400/30\r
                              transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0\r
                              font-medium tracking-wide`,onClick:()=>I(!0),children:[i.jsx(cn,{className:"h-4 w-4 mr-1"})," Add Task"]})]}),i.jsx("div",{className:"space-y-2",children:hn.length===0?i.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[i.jsx(yc,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{className:"text-sm",children:"No tasks for this course yet."}),i.jsx("p",{className:"text-xs mt-1",children:'Click "Add Task" to get started!'})]}):hn.map(O=>i.jsxs("div",{className:`grid grid-cols-[1fr_auto_auto] gap-3 items-center p-3 rounded-xl \r
                                 bg-gradient-to-r from-white/90 to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/80\r
                                 border border-gray-200/60 dark:border-gray-600/40 shadow-sm hover:shadow-md\r
                                 transition-all duration-200`,children:[i.jsxs("div",{className:"min-w-0",children:[i.jsx("div",{className:"font-medium text-gray-800 dark:text-gray-200 truncate",children:O.title}),O.dueDate&&i.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Due: ",new Date(O.dueDate).toLocaleDateString(),O.dueTime&&` at ${O.dueTime}`]})]}),i.jsxs("select",{className:`h-8 rounded-lg border border-gray-200/60 dark:border-gray-600/40 \r
                                   bg-white/90 dark:bg-gray-800/90 px-2 text-xs\r
                                   focus:border-blue-400/60 dark:focus:border-purple-400/60\r
                                   focus:ring-2 focus:ring-blue-100/50 dark:focus:ring-purple-900/30`,value:O.status,onChange:ce=>D(O.id,{status:ce.target.value}),children:[i.jsx("option",{value:"Not Started",children:" Not Started"}),i.jsx("option",{value:"In Progress",children:" In Progress"}),i.jsx("option",{value:"Completed",children:" Completed"})]}),i.jsx(K,{size:"sm",variant:"outline",className:`rounded-lg bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                                    text-gray-700 dark:text-gray-200 hover:from-red-50/90 hover:to-red-100/80 dark:hover:from-red-950/40 dark:hover:to-red-900/30 \r
                                    hover:text-red-700 dark:hover:text-red-300 shadow-sm hover:shadow-md backdrop-blur-sm \r
                                    border border-gray-200/60 dark:border-gray-600/40 hover:border-red-200/60 dark:hover:border-red-400/30\r
                                    transition-all duration-200 hover:scale-105 active:scale-95\r
                                    font-medium tracking-wide h-8 px-2`,onClick:()=>A(O.id),children:i.jsx(Un,{className:"h-3 w-3"})})]},O.id))})]})}),i.jsx(Ne,{className:"border-0 shadow-lg rounded-3xl bg-white/80 dark:bg-neutral-900/60",children:i.jsxs(je,{className:"p-4 space-y-3",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Course Files"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(yt,{value:Hr,onValueChange:xa,children:[i.jsx(gt,{className:"h-9 rounded-xl min-w-[180px] bg-white/80 dark:bg-neutral-900/60",children:i.jsx(vt,{placeholder:"Upload to"})}),i.jsx(xt,{children:te?.folders.map(O=>i.jsx(Oe,{value:O.path,children:O.path},O.id))})]}),i.jsx(Ee,{type:"file",multiple:!0,onChange:O=>Dn(Hr,O.target.files)})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ee,{placeholder:"New folder name (e.g., lectures/week1)",value:At,onChange:O=>Cr(O.target.value)}),i.jsx(K,{className:`rounded-2xl bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                              text-gray-700 dark:text-gray-200 hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 \r
                              hover:text-blue-700 dark:hover:text-blue-300 shadow-md hover:shadow-lg backdrop-blur-sm \r
                              border border-gray-200/60 dark:border-gray-600/40 hover:border-blue-200/60 dark:hover:border-blue-400/30\r
                              transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0\r
                              font-medium tracking-wide`,onClick:di,children:"Add Folder"})]}),i.jsx("div",{className:"space-y-3",children:te?.folders.map(O=>i.jsxs("div",{className:"rounded-xl border border-black/10 dark:border-white/10 p-3 bg-white/70 dark:bg-neutral-900/60",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[nd===O.id?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ee,{value:ci,onChange:ce=>Ka(ce.target.value),className:"h-8"}),i.jsx(K,{size:"sm",className:`rounded-2xl bg-gradient-to-r from-green-600/90 to-emerald-600/90 dark:from-green-500/90 dark:to-emerald-500/90\r
                                        hover:from-green-700/95 hover:to-emerald-700/95 dark:hover:from-green-400/95 dark:hover:to-emerald-400/95\r
                                        text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                                        hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0\r
                                        font-medium tracking-wide backdrop-blur-md\r
                                        ring-2 ring-green-200/50 dark:ring-green-400/30 hover:ring-green-300/60 dark:hover:ring-green-300/40`,onClick:()=>{if(!te)return;const ce=ci.trim();ce&&(ne(L,te.id,O.id,ce),_o(null),Ka(""))},children:"Save"}),i.jsx(K,{size:"sm",variant:"outline",className:`rounded-2xl bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                                        text-gray-700 dark:text-gray-200 hover:from-gray-50/90 hover:to-gray-100/80 dark:hover:from-gray-750/40 dark:hover:to-gray-850/30 \r
                                        shadow-md hover:shadow-lg backdrop-blur-sm border border-gray-200/60 dark:border-gray-600/40\r
                                        transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0 \r
                                        font-medium tracking-wide`,onClick:()=>{_o(null),Ka("")},children:"Cancel"})]}):i.jsx("div",{className:"text-xs font-semibold",children:O.path}),nd!==O.id&&i.jsx(K,{size:"sm",variant:"outline",className:`rounded-2xl bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                                      text-gray-700 dark:text-gray-200 hover:from-amber-50/90 hover:to-yellow-50/80 dark:hover:from-amber-950/40 dark:hover:to-yellow-950/30 \r
                                      hover:text-amber-700 dark:hover:text-amber-300 shadow-md hover:shadow-lg backdrop-blur-sm \r
                                      border border-gray-200/60 dark:border-gray-600/40 hover:border-amber-200/60 dark:hover:border-amber-400/30\r
                                      transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0\r
                                      font-medium tracking-wide`,onClick:()=>{_o(O.id),Ka(O.path)},children:"Rename"})]}),O.files.length===0?i.jsx("div",{className:"text-xs text-muted-foreground",children:"No files"}):i.jsx("div",{className:`overflow-x-auto ${s?"dark-scrollbar":"light-scrollbar"}`,children:i.jsxs("div",{className:"min-w-[420px]",children:[i.jsxs("div",{className:"grid grid-cols-[1fr_90px_180px] gap-2 px-2 py-1 text-[11px] text-muted-foreground border-b border-black/10 dark:border-white/10",children:[i.jsx("div",{children:"Name"}),i.jsx("div",{className:"text-right",children:"Size"}),i.jsx("div",{className:"text-right",children:"Actions"})]}),O.files.map(ce=>i.jsxs("div",{className:"grid grid-cols-[1fr_90px_180px] gap-2 items-center px-2 py-1 border-b border-black/5 dark:border-white/5 text-xs",children:[i.jsx("div",{className:"truncate",title:ce.name,children:ce.name}),i.jsxs("div",{className:"text-right",children:[(ce.size/1024).toFixed(1)," KB"]}),i.jsxs("div",{className:"flex items-center justify-end gap-2",children:[i.jsx(K,{size:"sm",variant:"outline",className:`rounded-2xl bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                                              text-gray-700 dark:text-gray-200 hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 \r
                                              hover:text-blue-700 dark:hover:text-blue-300 shadow-md hover:shadow-lg backdrop-blur-sm \r
                                              border border-gray-200/60 dark:border-gray-600/40 hover:border-blue-200/60 dark:hover:border-blue-400/30\r
                                              transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0\r
                                              font-medium tracking-wide`,onClick:()=>ad(ce),children:"Open"}),i.jsxs(yt,{value:O.path,onValueChange:Te=>{te&&Te!==O.path&&Z(L,te.id,ce.id,O.path,Te)},children:[i.jsx(gt,{className:"h-8 w-[140px]",children:i.jsx(vt,{placeholder:"Move to"})}),i.jsx(xt,{children:te.folders.map(Te=>i.jsx(Oe,{value:Te.path,children:Te.path},Te.id))})]})]})]},ce.id))]})})]},O.id))})]})})]}),i.jsxs("div",{className:"col-span-12 lg:col-span-8 space-y-6",children:[i.jsx(Ne,{className:"border-0 shadow-xl rounded-3xl bg-gradient-to-br from-white/95 to-white/85 dark:from-neutral-900/80 dark:to-neutral-800/70 backdrop-blur-xl",children:i.jsxs(je,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[i.jsx("div",{className:"p-2 rounded-2xl bg-gradient-to-br from-emerald-500/20 to-teal-500/20 dark:from-emerald-400/20 dark:to-teal-400/20",children:i.jsx(QM,{className:"h-4 w-4 text-emerald-600 dark:text-emerald-400"})}),i.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100",children:"Course Information"})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx(ot,{htmlFor:"courseTitle",className:"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2 block",children:"Course Title"}),i.jsx(Ee,{id:"courseTitle",value:te?.title||"",onChange:O=>me(L,{...te,title:O.target.value}),placeholder:"e.g., Introduction to Computer Science",className:`border-0 shadow-lg rounded-2xl bg-gradient-to-br from-white/90 to-white/70 dark:from-neutral-800/60 dark:to-neutral-900/50 \r
                                backdrop-blur-sm placeholder:text-gray-400 dark:placeholder:text-gray-500 \r
                                focus:shadow-xl focus:scale-[1.02] transition-all duration-200\r
                                hover:shadow-md hover:bg-gradient-to-br hover:from-white hover:to-white/90 \r
                                dark:hover:from-neutral-800/80 dark:hover:to-neutral-900/70`})]}),i.jsxs("div",{className:"w-40",children:[i.jsx(ot,{htmlFor:"courseCode",className:"text-xs font-medium text-gray-600 dark:text-gray-300 mb-2 block",children:"Course Code"}),i.jsx(Ee,{id:"courseCode",value:te?.code||"",onChange:O=>me(L,{...te,code:O.target.value}),placeholder:"CS101",className:`border-0 shadow-lg rounded-2xl bg-gradient-to-br from-white/90 to-white/70 dark:from-neutral-800/60 dark:to-neutral-900/50 \r
                                backdrop-blur-sm placeholder:text-gray-400 dark:placeholder:text-gray-500 \r
                                focus:shadow-xl focus:scale-[1.02] transition-all duration-200\r
                                hover:shadow-md hover:bg-gradient-to-br hover:from-white hover:to-white/90 \r
                                dark:hover:from-neutral-800/80 dark:hover:to-neutral-900/70`})]})]}),i.jsx("div",{className:"mt-4 p-3 rounded-2xl bg-gradient-to-r from-emerald-50/60 to-teal-50/40 dark:from-emerald-950/30 dark:to-teal-950/20 border border-emerald-200/30 dark:border-emerald-700/30",children:i.jsx("div",{className:"text-xs text-emerald-700 dark:text-emerald-300 font-medium",children:" Enter your course details to begin organizing modules and assignments"})})]})}),i.jsx(Ne,{className:"border-0 shadow-xl rounded-3xl bg-gradient-to-br from-white/95 to-white/85 dark:from-neutral-900/80 dark:to-neutral-800/70 backdrop-blur-xl",children:i.jsxs(je,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[i.jsx("div",{className:"p-2 rounded-2xl bg-gradient-to-br from-purple-500/20 to-violet-500/20 dark:from-purple-400/20 dark:to-violet-400/20",children:i.jsx(JM,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})}),i.jsx("div",{className:"text-sm font-semibold text-gray-800 dark:text-gray-100",children:"Course Details"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(ot,{htmlFor:"instructor",className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:" Instructor"}),i.jsx(Ee,{id:"instructor",value:te?.instructor||"",onChange:O=>me(L,{...te,instructor:O.target.value}),placeholder:"Professor Name",className:`border-0 shadow-lg rounded-2xl bg-gradient-to-br from-white/90 to-white/70 dark:from-neutral-800/60 dark:to-neutral-900/50 \r
                                backdrop-blur-sm placeholder:text-gray-400 dark:placeholder:text-gray-500 \r
                                focus:shadow-xl focus:scale-[1.02] transition-all duration-200\r
                                hover:shadow-md hover:bg-gradient-to-br hover:from-white hover:to-white/90 \r
                                dark:hover:from-neutral-800/80 dark:hover:to-neutral-900/70`})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ot,{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:" Class Time"}),i.jsx(Ee,{disabled:!0,value:mr.time,className:`border-0 shadow-lg rounded-2xl bg-gradient-to-br from-gray-100/90 to-gray-100/70 dark:from-neutral-700/60 dark:to-neutral-800/50 \r
                                backdrop-blur-sm text-gray-500 dark:text-gray-400 cursor-not-allowed`})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ot,{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:" Room No."}),i.jsx(Ee,{disabled:!0,value:mr.room,className:`border-0 shadow-lg rounded-2xl bg-gradient-to-br from-gray-100/90 to-gray-100/70 dark:from-neutral-700/60 dark:to-neutral-800/50 \r
                                backdrop-blur-sm text-gray-500 dark:text-gray-400 cursor-not-allowed`})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(ot,{htmlFor:"syllabus",className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:" Syllabus URL"}),i.jsx(Ee,{id:"syllabus",value:te?.syllabusUrl||"",onChange:O=>me(L,{...te,syllabusUrl:O.target.value}),placeholder:"https://example.com/syllabus",className:`border-0 shadow-lg rounded-2xl bg-gradient-to-br from-white/90 to-white/70 dark:from-neutral-800/60 dark:to-neutral-900/50 \r
                                backdrop-blur-sm placeholder:text-gray-400 dark:placeholder:text-gray-500 \r
                                focus:shadow-xl focus:scale-[1.02] transition-all duration-200\r
                                hover:shadow-md hover:bg-gradient-to-br hover:from-white hover:to-white/90 \r
                                dark:hover:from-neutral-800/80 dark:hover:to-neutral-900/70`})]})]}),i.jsx("div",{className:"mt-4 p-3 rounded-2xl bg-gradient-to-r from-purple-50/60 to-violet-50/40 dark:from-purple-950/30 dark:to-violet-950/20 border border-purple-200/30 dark:border-purple-700/30",children:i.jsx("div",{className:"text-xs text-purple-700 dark:text-purple-300 font-medium",children:" Class schedule auto-updates based on your selections above"})})]})}),i.jsx(Ne,{className:"border-0 shadow-lg rounded-3xl bg-white/80 dark:bg-neutral-900/60",children:i.jsxs(je,{className:"p-3",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Notes"}),$t.has(Qe||"")&&i.jsxs("div",{className:"flex items-center gap-1 text-xs text-amber-600 dark:text-amber-400",children:[i.jsx("div",{className:"w-2 h-2 bg-amber-500 rounded-full animate-pulse"}),i.jsx("span",{children:"Unsaved changes"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[$t.size>0&&i.jsxs(K,{size:"sm",variant:"outline",className:"h-8 rounded-2xl px-3 text-xs",onClick:Lt,children:["Save All (",$t.size,")"]}),i.jsxs(K,{size:"sm",className:`h-8 rounded-2xl px-3 bg-gradient-to-r from-green-600/90 to-emerald-600/90 dark:from-green-500/90 dark:to-emerald-500/90\r
                                hover:from-green-700/95 hover:to-emerald-700/95 dark:hover:from-green-400/95 dark:hover:to-emerald-400/95\r
                                text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                                hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0\r
                                font-medium tracking-wide backdrop-blur-md\r
                                ring-2 ring-green-200/50 dark:ring-green-400/30 hover:ring-green-300/60 dark:hover:ring-green-300/40`,onClick:Ho,disabled:!te||!Qe,children:[i.jsx(ZM,{className:"h-4 w-4 mr-1"})," Save"]})]})]}),i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsxs("div",{className:"flex flex-col gap-2 pt-1",children:[i.jsx("div",{className:"text-xs font-semibold text-muted-foreground mb-1"}),i.jsxs("div",{className:"flex flex-col gap-2",children:[te?.modules.map(O=>i.jsxs("div",{className:"relative group",children:[i.jsx(K,{type:"button",variant:O.id===Qe?"default":"outline",size:"icon",className:`h-8 w-8 rounded-2xl transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0 shadow-md hover:shadow-lg
                              ${O.id===Qe?"bg-gradient-to-r from-blue-600/90 to-indigo-600/90 dark:from-blue-500/90 dark:to-indigo-500/90 text-white ring-2 ring-blue-200/50 dark:ring-blue-400/30 backdrop-blur-sm hover:from-blue-700/95 hover:to-indigo-700/95 dark:hover:from-blue-400/95 dark:hover:to-indigo-400/95":"bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 text-gray-700 dark:text-gray-200 hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 hover:text-blue-700 dark:hover:text-blue-300 border border-gray-200/60 dark:border-gray-600/40 hover:border-blue-200/60 dark:hover:border-blue-400/30"}`,onClick:()=>Wr(O.id),title:O.title,children:i.jsx("span",{className:"text-[11px] font-semibold",children:O.title})}),i.jsx("button",{"aria-label":"Remove module",className:"hidden group-hover:flex absolute -top-1 -right-1 h-5 w-5 items-center justify-center rounded-full bg-red-500 hover:bg-red-600 text-white text-[10px] shadow-lg transition-all duration-200 hover:scale-110",onClick:ce=>{ce.preventDefault(),ce.stopPropagation(),xe({id:O.id,title:O.title}),Ce(""),Xn(!0)},children:""})]},O.id)),i.jsx(K,{type:"button",variant:"outline",size:"icon",className:`h-8 w-8 rounded-2xl bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 \r
                                  text-gray-700 dark:text-gray-200 hover:from-green-50/90 hover:to-emerald-50/80 dark:hover:from-green-950/40 dark:hover:to-emerald-950/30 \r
                                  hover:text-green-700 dark:hover:text-green-300 shadow-md hover:shadow-lg backdrop-blur-sm \r
                                  border border-gray-200/60 dark:border-gray-600/40 hover:border-green-200/60 dark:hover:border-green-400/30\r
                                  transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0`,onClick:()=>{const O=`M${(te?.modules.length||0)+1}`,ce=be(L,te.id,O);Wr(ce)},title:"Add module",children:i.jsx(cn,{className:"h-4 w-4"})})]})]}),i.jsx("div",{className:"flex-1 min-w-0",children:te&&Qe?i.jsx(q7,{ref:Wn,value:te.modules.find(O=>O.id===Qe)?.html||"",onChange:O=>Fe(Qe,O),placeholder:"Write your module notes here"}):i.jsx("div",{className:"text-sm text-muted-foreground p-4",children:"Select a module on the left or create a new one."})})]})]})})]})]})]}),i.jsx(wr,{open:jr,onOpenChange:O=>{Xn(O),O||(xe(null),Ce(""))},children:i.jsxs(lr,{className:"rounded-2xl",children:[i.jsxs(ir,{children:[i.jsx(cr,{children:"Delete module?"}),i.jsx(_g,{children:"This will permanently remove the module and its notes from this course. To confirm, type the module title below."})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"text-sm",children:["Module: ",i.jsx("span",{className:"font-semibold",children:G?.title})]}),i.jsx(Ee,{autoFocus:!0,placeholder:"Type module title to confirm",value:Ie,onChange:O=>Ce(O.target.value)})]}),i.jsxs(Sr,{children:[i.jsx(K,{variant:"outline",onClick:()=>{Xn(!1),xe(null),Ce("")},children:"Cancel"}),i.jsx(K,{variant:"destructive",disabled:!G||Ie.trim()!==(G?.title||"")||!te,onClick:()=>{if(!te||!G)return;const O=te.modules.find(ce=>ce.id!==G.id)?.id;_e(L,te.id,G.id),Qe===G.id&&Wr(O),Xn(!1),xe(null),Ce("")},children:"Delete"})]})]})}),i.jsx(wr,{open:Y,onOpenChange:I,children:i.jsxs(lr,{className:`max-w-lg border-0 shadow-2xl rounded-3xl bg-gradient-to-br from-white/95 via-white/90 to-white/85 \r
                                dark:from-neutral-900/95 dark:via-neutral-900/90 dark:to-neutral-800/85 backdrop-blur-md\r
                                ring-1 ring-white/20 dark:ring-white/10`,children:[i.jsx(ir,{className:"pb-4 border-b border-gray-200/30 dark:border-gray-700/30",children:i.jsxs(cr,{className:`text-2xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 \r
                                  dark:from-blue-400 dark:via-purple-400 dark:to-blue-300 bg-clip-text text-transparent\r
                                  flex items-center gap-3`,children:[i.jsx("div",{className:`p-2 rounded-xl bg-gradient-to-br from-blue-50/80 to-indigo-50/60 dark:from-blue-950/40 dark:to-indigo-950/30 \r
                            border border-blue-100/50 dark:border-blue-800/30 shadow-lg`,children:i.jsx(yc,{className:"h-5 w-5 text-blue-600 dark:text-blue-400"})}),"Add Task to ",te?.code||te?.title]})}),i.jsxs("div",{className:"space-y-5 py-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-500"}),"Task Title"]}),i.jsx(Ee,{value:$,onChange:O=>ae(O.target.value),placeholder:"e.g., Assignment 3, Lab Report, Final Project...",className:`rounded-xl border-2 border-gray-200/60 dark:border-gray-600/40 \r
                         bg-gradient-to-r from-white/90 to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/80\r
                         backdrop-blur-md focus:border-blue-400/60 dark:focus:border-purple-400/60\r
                         focus:ring-4 focus:ring-blue-100/50 dark:focus:ring-purple-900/30\r
                         transition-all duration-300 hover:shadow-lg focus:shadow-xl\r
                         text-gray-800 dark:text-gray-200 placeholder:text-gray-500 dark:placeholder:text-gray-400\r
                         h-11 px-4`})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-emerald-500 to-teal-500"}),"Due Date"]}),i.jsx(Ee,{type:"date",value:le,onChange:O=>ie(O.target.value),className:`rounded-xl border-2 border-gray-200/60 dark:border-gray-600/40 \r
                           bg-gradient-to-r from-white/90 to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/80\r
                           backdrop-blur-md focus:border-emerald-400/60 dark:focus:border-teal-400/60\r
                           focus:ring-4 focus:ring-emerald-100/50 dark:focus:ring-teal-900/30\r
                           transition-all duration-300 hover:shadow-lg focus:shadow-xl\r
                           text-gray-800 dark:text-gray-200 h-11 px-4`})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-amber-500 to-orange-500"}),"Due Time"]}),i.jsx(Ee,{type:"time",value:he,onChange:O=>ye(O.target.value),className:`rounded-xl border-2 border-gray-200/60 dark:border-gray-600/40 \r
                           bg-gradient-to-r from-white/90 to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/80\r
                           backdrop-blur-md focus:border-amber-400/60 dark:focus:border-orange-400/60\r
                           focus:ring-4 focus:ring-amber-100/50 dark:focus:ring-orange-900/30\r
                           transition-all duration-300 hover:shadow-lg focus:shadow-xl\r
                           text-gray-800 dark:text-gray-200 h-11 px-4`})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 flex items-center gap-2",children:[i.jsx("span",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-purple-500 to-pink-500"}),"Status"]}),i.jsxs("select",{className:`w-full h-11 px-4 rounded-xl border-2 border-gray-200/60 dark:border-gray-600/40 \r
                         bg-gradient-to-r from-white/90 to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/80\r
                         backdrop-blur-md focus:border-purple-400/60 dark:focus:border-pink-400/60\r
                         focus:ring-4 focus:ring-purple-100/50 dark:focus:ring-pink-900/30\r
                         transition-all duration-300 hover:shadow-lg focus:shadow-xl\r
                         text-gray-800 dark:text-gray-200 cursor-pointer\r
                         focus:outline-none appearance-none`,value:fe,onChange:O=>ve(O.target.value),style:{backgroundImage:`url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e")`,backgroundPosition:"right 0.5rem center",backgroundRepeat:"no-repeat",backgroundSize:"1.5em 1.5em",paddingRight:"2.5rem"},children:[i.jsx("option",{value:"Not Started",children:" Not Started"}),i.jsx("option",{value:"In Progress",children:" In Progress"}),i.jsx("option",{value:"Completed",children:" Completed"})]})]})]}),i.jsxs(Sr,{className:"pt-6 border-t border-gray-200/30 dark:border-gray-700/30 gap-3",children:[i.jsx(K,{variant:"outline",className:`rounded-2xl border-2 bg-gradient-to-r from-white/90 to-gray-50/80 dark:from-gray-800/90 dark:to-gray-900/80 \r
                       backdrop-blur-md hover:from-red-50/90 hover:to-pink-50/80 dark:hover:from-red-950/40 dark:hover:to-pink-950/30 \r
                       border-gray-200/60 dark:border-gray-600/40 hover:border-red-200/60 dark:hover:border-red-400/30\r
                       shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95\r
                       text-gray-700 dark:text-gray-200 hover:text-red-700 dark:hover:text-red-300\r
                       font-medium tracking-wide px-6 py-2 flex-1`,onClick:()=>I(!1),children:i.jsx("span",{className:"relative z-10",children:"Cancel"})}),i.jsx(K,{className:`rounded-2xl bg-gradient-to-r from-blue-600 via-purple-600 to-blue-700 \r
                       dark:from-blue-500 dark:via-purple-500 dark:to-blue-600\r
                       hover:from-blue-700 hover:via-purple-700 hover:to-blue-800\r
                       dark:hover:from-blue-600 dark:hover:via-purple-600 dark:hover:to-blue-700\r
                       shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105 active:scale-95\r
                       text-white font-medium tracking-wide px-6 py-2 flex-1\r
                       border-0 ring-2 ring-blue-200/50 dark:ring-purple-400/30`,onClick:hr,children:i.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[i.jsx("span",{children:"Add Task"}),i.jsx("span",{className:"text-lg",children:""})]})})]})]})}),i.jsx(wr,{open:B,onOpenChange:W,children:i.jsxs(lr,{className:"max-w-lg bg-white/95 dark:bg-neutral-900/95 backdrop-blur-xl border-0 shadow-2xl rounded-3xl",children:[i.jsx(ir,{className:"pb-4 border-b border-gray-200/50 dark:border-gray-700/50",children:i.jsx(cr,{className:"text-xl font-semibold bg-gradient-to-r from-blue-600 to-indigo-600 dark:from-blue-400 dark:to-indigo-400 bg-clip-text text-transparent",children:"Select School Year & Term"})}),i.jsxs("div",{className:"space-y-6 py-4",children:[i.jsxs("div",{children:[i.jsx(ot,{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block",children:"School Year"}),i.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:l.length===0?i.jsx("div",{className:"text-sm text-muted-foreground p-4 text-center bg-gray-50/50 dark:bg-neutral-800/50 rounded-xl",children:"No school years available. Please add years in Schedule Planner first."}):l.map(O=>i.jsx(K,{variant:O.id===k?"default":"outline",className:`w-full justify-start rounded-2xl transition-all duration-200 font-medium tracking-wide h-10
                        ${O.id===k?"bg-gradient-to-r from-blue-600/90 to-indigo-600/90 dark:from-blue-500/90 dark:to-indigo-500/90 text-white shadow-lg ring-2 ring-blue-200/50 dark:ring-blue-400/30":"bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 text-gray-700 dark:text-gray-200 hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30"}
                        hover:scale-[1.02] active:scale-[0.98]`,onClick:()=>{m(O.id),O.terms?.[0]&&p(O.terms[0].id)},children:O.label},O.id))})]}),w?.terms&&w.terms.length>0&&i.jsxs("div",{children:[i.jsx(ot,{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 block",children:"Term"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:w.terms.map(O=>i.jsx(K,{variant:O.id===S?.id?"default":"outline",className:`justify-center rounded-2xl transition-all duration-200 font-medium tracking-wide h-10
                        ${O.id===S?.id?"bg-gradient-to-r from-green-600/90 to-emerald-600/90 dark:from-green-500/90 dark:to-emerald-500/90 text-white shadow-lg ring-2 ring-green-200/50 dark:ring-green-400/30":"bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 text-gray-700 dark:text-gray-200 hover:from-green-50/90 hover:to-emerald-50/80 dark:hover:from-green-950/40 dark:hover:to-emerald-950/30"}
                        hover:scale-[1.02] active:scale-[0.98]`,onClick:()=>p(O.id),children:O.name},O.id))})]})]}),i.jsx(Sr,{className:"pt-4 border-t border-gray-200/50 dark:border-gray-700/50",children:i.jsx(K,{onClick:()=>W(!1),className:`rounded-2xl bg-gradient-to-r from-blue-600/90 to-indigo-600/90 dark:from-blue-500/90 dark:to-indigo-500/90\r
                        hover:from-blue-700/95 hover:to-indigo-700/95 dark:hover:from-blue-400/95 dark:hover:to-indigo-400/95\r
                        text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 \r
                        hover:scale-[1.02] active:scale-[0.98] hover:-translate-y-0.5 active:translate-y-0\r
                        font-medium tracking-wide backdrop-blur-md`,children:"Done"})})]})})]})}function $x(){const r=_r(),e=Gn[r.palette],[t,n]=P.useState(r.accent);return P.useEffect(()=>n(r.accent),[r.accent]),P.useMemo(()=>{const s=Math.min(.35,Math.max(.12,t/260)),l=Math.round(s*255).toString(16).padStart(2,"0"),c=typeof window<"u"&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)").matches:!1,h=r.mode==="dark"||r.mode==="system"&&c?"linear-gradient(135deg, #0b0f19 0%, #0a0a0a 70%)":"linear-gradient(135deg, #ffffff 0%, #f8fbff 65%)",m=`radial-gradient(circle at 8% 0%, ${e[0]}${l} 0%, transparent 40%)`,p=`radial-gradient(circle at 92% 12%, ${e[3]}${l} 0%, transparent 45%)`,x=`radial-gradient(circle at 50% 120%, ${e[2]}${l} 0%, transparent 55%)`;return{backgroundImage:`${m}, ${p}, ${x}, ${h}`,backgroundRepeat:"no-repeat, no-repeat, no-repeat, no-repeat",backgroundAttachment:"fixed, fixed, scroll, fixed",backgroundPosition:"8% 0%, 92% 12%, 50% 100%, 0 0"}},[t,r.mode,e])}function F1(){return{id:crypto.randomUUID(),status:"Not Started",name:"",location:"",dueDate:"",submittedDate:"",resume:!1,essay:!1,otherDocs:!1,otherDocsPaths:[],amountAwarded:void 0}}const Lu=An()(qn((r,e)=>({rows:Array.from({length:9},()=>F1()),addRow:()=>{const t=F1();return r({rows:[...e().rows,t]}),t.id},updateRow:(t,n)=>r({rows:e().rows.map(s=>s.id===t?{...s,...n}:s)}),removeRow:t=>r({rows:e().rows.filter(n=>n.id!==t)}),setRows:t=>r({rows:t})}),{name:"aq:scholarships"})),rB=`
	.light-scrollbar::-webkit-scrollbar { width: 10px; height: 10px; }
	.light-scrollbar::-webkit-scrollbar-track { background: rgba(0,0,0,0.05); border-radius: 5px; }
	.light-scrollbar::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.20); border-radius: 5px; }
	.light-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,0.30); }
	.dark-scrollbar::-webkit-scrollbar { width: 10px; height: 10px; }
	.dark-scrollbar::-webkit-scrollbar-track { background: rgba(255,255,255,0.10); border-radius: 5px; }
	.dark-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.20); border-radius: 5px; }
	.dark-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.30); }
`;function nB(){const r=$x(),e=_r(),t=Gn[e.palette],n=$s(),s=Lu(S=>S.rows),l=Lu(S=>S.addRow),c=Lu(S=>S.updateRow),u=Lu(S=>S.removeRow);function h(S,N){c(S,N)}function m(){l()}async function p(S,N){return new Promise(T=>{const C=document.createElement("input");C.type="file",C.accept=".pdf,.doc,.docx,.txt,.rtf,.md,.png,.jpg,.jpeg,.heic,.webp,.ppt,.pptx,.xls,.xlsx,application/*,text/*,image/*",N==="otherDocs"&&(C.multiple=!0),C.onchange=async()=>{const D=C.files?Array.from(C.files):[];if(!D.length)return T();const A=[];for(const I of D){const $=I.name.replace(/[^a-zA-Z0-9._-]/g,"_"),ae=`scholarships/${S}/${N}/${Date.now()}_${$}`;(await Kf(ae,I)).ok&&A.push(ae)}const Y=s.find(I=>I.id===S);if(Y){const I={};N==="resume"&&(I.resume=!0,I.resumePath=A[0]),N==="essay"&&(I.essay=!0,I.essayPath=A[0]),N==="otherDocs"&&(I.otherDocs=!0,I.otherDocsPaths=[...Y.otherDocsPaths??[],...A]),c(S,I)}T()},C.click()})}async function x(S,N){const T=N==="resume"?S.resumePath:N==="essay"?S.essayPath:S.otherDocsPaths&&S.otherDocsPaths.length?S.otherDocsPaths[S.otherDocsPaths.length-1]:void 0;if(!T)return;const C=await Hx(T);C&&window.open(C,"_blank")}function b(S){if(!S)return;const N=new Date,T=new Date(N.getFullYear(),N.getMonth(),N.getDate()).getTime(),C=new Date(S);if(Number.isNaN(C.getTime()))return;const D=new Date(C.getFullYear(),C.getMonth(),C.getDate()).getTime();return Math.round((D-T)/(1e3*60*60*24))}const v=P.useMemo(()=>new Intl.DateTimeFormat(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"}).format(new Date),[]),k=P.useMemo(()=>{const S={Received:0,Applied:0,"In-Progress":0,Rejected:0,"Not Started":0};for(const N of s)S[N.status]++;return S},[s]),w=P.useMemo(()=>[{name:"Received",value:k.Received},{name:"Applied",value:k.Applied},{name:"In-Progress",value:k["In-Progress"]},{name:"Rejected",value:k.Rejected},{name:"Not Started",value:k["Not Started"]}],[k]);return i.jsxs("div",{className:"min-h-screen w-full",style:r,children:[i.jsx("style",{children:rB}),i.jsxs("div",{className:"max-w-[1400px] mx-auto px-3 py-6 space-y-6",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsx("div",{className:"flex-1 min-w-0",children:i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Mn,{className:"h-5 w-5"}),i.jsx("h1",{className:"text-2xl font-bold",children:"Scholarships"})]}),i.jsx(oi,{active:"scholarships"})]})}),i.jsx(Ne,{className:"shrink-0 shadow-xl rounded-3xl bg-white/80 dark:bg-neutral-900/60 backdrop-blur-md border border-white/20 dark:border-gray-600/20 w-[200px] sm:w-[220px]",children:i.jsxs(je,{className:"p-4",children:[i.jsx("div",{className:"h-32",children:i.jsx(la,{width:"100%",height:"100%",children:i.jsxs(Xf,{children:[i.jsx(Qf,{dataKey:"value",data:w,innerRadius:38,outerRadius:50,startAngle:90,endAngle:-270,paddingAngle:2,cornerRadius:3,stroke:"transparent",children:w.map((S,N)=>i.jsx(Jf,{fill:t[N%t.length]},N))}),i.jsx(ia,{})]})})}),i.jsx("div",{className:"text-center text-sm mt-1",children:"Status mix"}),i.jsx("div",{className:"text-center text-xs text-muted-foreground",children:v})]})})]}),i.jsx(Ne,{className:"shadow-xl rounded-3xl bg-white/80 dark:bg-neutral-900/60 backdrop-blur-md border border-white/20 dark:border-gray-600/20",children:i.jsxs(je,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("div",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200",children:"Applications"}),i.jsxs(K,{size:"sm",className:`rounded-2xl bg-gradient-to-r from-green-600 to-emerald-600 dark:from-green-500 dark:to-emerald-500 \r
										  hover:from-green-700 hover:to-emerald-700 dark:hover:from-green-400 dark:hover:to-emerald-400 \r
										  text-white shadow-md hover:shadow-lg transition-all duration-200 font-medium tracking-wide\r
										  border-0 backdrop-blur-sm hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0\r
										  ring-2 ring-green-200/50 dark:ring-green-400/30 hover:ring-green-300/60 dark:hover:ring-green-300/40`,onClick:m,children:[i.jsx(cn,{className:"h-4 w-4 mr-1"}),"Add Scholarship"]})]}),i.jsx("div",{className:"w-full overflow-x-auto rounded-2xl border border-black/10 dark:border-white/10 bg-white/70 dark:bg-neutral-900/50 shadow-sm backdrop-blur-sm",children:i.jsxs("table",{className:"w-full text-xs",children:[i.jsx("thead",{className:"sticky top-0 bg-white/70 dark:bg-neutral-900/50 backdrop-blur-md supports-[backdrop-filter]:bg-white/60 dark:supports-[backdrop-filter]:bg-neutral-900/40 border-b border-black/10 dark:border-white/10",children:i.jsxs("tr",{className:"text-left",children:[i.jsx("th",{className:"px-3 py-2 w-[50px] font-semibold text-gray-700 dark:text-gray-200"}),i.jsx("th",{className:"px-3 py-2 w-[170px] font-semibold text-gray-700 dark:text-gray-200",children:"Status"}),i.jsx("th",{className:"px-3 py-2 w-[320px] font-semibold text-gray-700 dark:text-gray-200",children:"Scholarship Name"}),i.jsx("th",{className:"px-3 py-2 w-[180px] font-semibold text-gray-700 dark:text-gray-200",children:"Location"}),i.jsx("th",{className:"px-3 py-2 w-[140px] font-semibold text-gray-700 dark:text-gray-200",children:"Date Due"}),i.jsx("th",{className:"px-3 py-2 w-[110px] font-semibold text-gray-700 dark:text-gray-200",children:"Days Left"}),i.jsx("th",{className:"px-3 py-2 w-[150px] font-semibold text-gray-700 dark:text-gray-200",children:"Date Submitted"}),i.jsx("th",{className:"px-3 py-2 w-[110px] font-semibold text-gray-700 dark:text-gray-200",children:"Resume"}),i.jsx("th",{className:"px-3 py-2 w-[90px] font-semibold text-gray-700 dark:text-gray-200",children:"Essay"}),i.jsx("th",{className:"px-3 py-2 w-[150px] font-semibold text-gray-700 dark:text-gray-200",children:"Other Documents"}),i.jsx("th",{className:"px-3 py-2 w-[160px] font-semibold text-gray-700 dark:text-gray-200",children:"Amount Awarded"})]})}),i.jsx("tbody",{children:s.map(S=>i.jsxs("tr",{className:"border-t border-black/5 dark:border-white/10 hover:bg-white/30 dark:hover:bg-neutral-700/20 transition-colors duration-200",children:[i.jsx("td",{className:"px-2 py-2",children:i.jsx(K,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-lg bg-white/80 dark:bg-neutral-900/60 border-black/10 text-neutral-600 hover:text-red-600 hover:bg-red-50 dark:text-neutral-300 dark:hover:text-red-400 dark:hover:bg-red-950/30","aria-label":"Delete row",onClick:()=>u(S.id),children:i.jsx(Un,{className:"h-3 w-3"})})}),i.jsx("td",{className:"px-2 py-2",children:i.jsxs(yt,{value:S.status,onValueChange:N=>h(S.id,{status:N}),children:[i.jsx(gt,{className:`h-8 text-left rounded-lg bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40 \r
																			  focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
																			  transition-all duration-200 backdrop-blur-sm text-xs`,children:i.jsx(vt,{placeholder:"Status"})}),i.jsx(xt,{className:"bg-white/95 dark:bg-neutral-800/95 backdrop-blur-md border border-gray-200/50 dark:border-gray-600/30 rounded-xl shadow-lg",children:["Received","Applied","In-Progress","Rejected","Not Started"].map(N=>i.jsx(Oe,{value:N,children:N},N))})]})}),i.jsx("td",{className:"px-2 py-2",children:i.jsx(Ee,{className:`h-8 rounded-lg bg-white/80 dark:bg-neutral-900/60 border-gray-200/60 dark:border-gray-600/40 \r
															  focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
															  transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs`,value:S.name,onChange:N=>h(S.id,{name:N.target.value}),placeholder:"Scholarship name"})}),i.jsx("td",{className:"px-2 py-2",children:i.jsx(Ee,{className:`h-8 rounded-lg bg-white/80 dark:bg-neutral-900/60 border-gray-200/60 dark:border-gray-600/40 \r
															  focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
															  transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs`,value:S.location,onChange:N=>h(S.id,{location:N.target.value}),placeholder:"Location"})}),i.jsx("td",{className:"px-2 py-2",children:i.jsx(Ee,{className:`h-8 rounded-lg bg-white/80 dark:bg-neutral-900/60 border-gray-200/60 dark:border-gray-600/40 \r
															  focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
															  transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs`,type:"date",value:S.dueDate||"",onChange:N=>h(S.id,{dueDate:N.target.value})})}),i.jsx("td",{className:"px-2 py-2 text-center",children:(()=>{const N=b(S.dueDate);if(N===void 0)return i.jsx("span",{className:"text-muted-foreground text-xs",children:""});const T=N<0?"text-red-500":N===0?"text-amber-600":"";return i.jsxs("span",{className:`${T} text-xs font-medium`,children:[N,"d"]})})()}),i.jsx("td",{className:"px-2 py-2",children:i.jsx(Ee,{className:`h-8 rounded-lg bg-white/80 dark:bg-neutral-900/60 border-gray-200/60 dark:border-gray-600/40 \r
															  focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
															  transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs`,type:"date",value:S.submittedDate||"",onChange:N=>h(S.id,{submittedDate:N.target.value})})}),i.jsx("td",{className:"px-2 py-2",children:i.jsx(K,{variant:"link",size:"sm",className:"group h-8 px-0 bg-transparent hover:bg-transparent focus-visible:bg-transparent active:bg-transparent text-neutral-600 hover:text-neutral-900 dark:text-neutral-300 dark:hover:text-white",title:S.resumePath?S.resumePath.split("/").pop():void 0,"aria-label":S.resume?"Open resume":"Attach resume",onClick:()=>S.resumePath?x(S,"resume"):p(S.id,"resume"),children:S.resume?i.jsx("span",{className:"text-xs",children:"Attached"}):i.jsx(vc,{className:"h-4 w-4 text-neutral-600 dark:text-neutral-300 group-hover:text-neutral-900 dark:group-hover:text-white"})})}),i.jsx("td",{className:"px-2 py-2",children:i.jsx(K,{variant:"link",size:"sm",className:"group h-6 w-6 px-0 bg-transparent hover:bg-transparent focus-visible:bg-transparent active:bg-transparent text-neutral-600 hover:text-neutral-900 dark:text-neutral-300 dark:hover:text-white",title:S.essayPath?S.essayPath.split("/").pop():void 0,"aria-label":S.essay?"Open essay":"Attach essay",onClick:()=>S.essayPath?x(S,"essay"):p(S.id,"essay"),children:S.essay?i.jsx("span",{className:"text-xs",children:"Attached"}):i.jsx(vc,{className:"h-4 w-4 text-neutral-600 dark:text-neutral-300 group-hover:text-neutral-900 dark:group-hover:text-white"})})}),i.jsx("td",{className:"px-2 py-2",children:i.jsx(K,{variant:"link",size:"sm",className:"group h-6 w-6 px-0 bg-transparent hover:bg-transparent focus-visible:bg-transparent active:bg-transparent text-neutral-600 hover:text-neutral-900 dark:text-neutral-300 dark:hover:text-white",title:S.otherDocsPaths&&S.otherDocsPaths.length?`${S.otherDocsPaths.length} file(s)`:void 0,"aria-label":S.otherDocs?"Open other documents":"Attach other documents",onClick:()=>S.otherDocsPaths&&S.otherDocsPaths.length?x(S,"otherDocs"):p(S.id,"otherDocs"),children:S.otherDocs?i.jsx("span",{className:"text-xs",children:`${S.otherDocsPaths?.length??0} file(s)`}):i.jsx(vc,{className:"h-4 w-4 text-neutral-600 dark:text-neutral-300 group-hover:text-neutral-900 dark:group-hover:text-white"})})}),i.jsx("td",{className:"px-2 py-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-muted-foreground w-8 text-right text-xs",children:new Intl.NumberFormat(void 0,{style:"currency",currency:n.preferredCurrency}).formatToParts(0).find(N=>N.type==="currency")?.value}),i.jsx(Ee,{className:`h-8 rounded-lg bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40 \r
																  focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
																  transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs`,type:"number",step:"0.01",value:S.amountAwarded??"",onChange:N=>h(S.id,{amountAwarded:N.target.value===""?void 0:Number(N.target.value)}),placeholder:"0.00"})]})})]},S.id))})]})})]})})]})]})}const Bu=An()(qn((r,e)=>({rows:Array.from({length:9}).map(()=>({id:crypto.randomUUID(),classLabel:"",title:"",company:"",status:"Ordered",purchasedOn:"",returnBy:"",linkUrl:void 0,filePath:void 0})),addRow:()=>{const t={id:crypto.randomUUID(),classLabel:"",title:"",company:"",status:"Ordered",purchasedOn:"",returnBy:"",linkUrl:void 0,filePath:void 0};return r({rows:[...e().rows,t]}),t.id},updateRow:(t,n)=>r({rows:e().rows.map(s=>s.id===t?{...s,...n}:s)}),removeRow:t=>r({rows:e().rows.filter(n=>n.id!==t)}),setRows:t=>r({rows:t})}),{name:"aq:textbooks"})),aB=`
	.light-scrollbar::-webkit-scrollbar { width: 10px; height: 10px; }
	.light-scrollbar::-webkit-scrollbar-track { background: rgba(0,0,0,0.05); border-radius: 5px; }
	.light-scrollbar::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.20); border-radius: 5px; }
	.light-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,0.30); }
	.dark-scrollbar::-webkit-scrollbar { width: 10px; height: 10px; }
	.dark-scrollbar::-webkit-scrollbar-track { background: rgba(255,255,255,0.10); border-radius: 5px; }
	.dark-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.20); border-radius: 5px; }
	.dark-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.30); }
`;function sB(){const r=$x(),e=_r(),t=Gn[e.palette],n=Ft(),s=P.useMemo(()=>{const k=new Set;for(const w of n.years)for(const S of w.terms)for(const N of S.courses){const T=[N.code,N.name].filter(Boolean).join("  ").trim();T&&k.add(T)}return Array.from(k).sort((w,S)=>w.localeCompare(S))},[n.years]),l=Bu(k=>k.rows),c=Bu(k=>k.addRow),u=Bu(k=>k.updateRow),h=Bu(k=>k.removeRow);function m(k,w){u(k,w)}function p(){const k=c();s.length&&u(k,{classLabel:s[0]})}async function x(k){if(k.status==="Digital"){if(k.linkUrl){window.open(k.linkUrl,"_blank");return}const w=window.prompt("Enter textbook link (URL)");w&&/^https?:\/\//i.test(w)&&m(k.id,{linkUrl:w});return}if(k.filePath){const w=await Hx(k.filePath);w&&window.open(w,"_blank");return}await new Promise(w=>{const S=document.createElement("input");S.type="file",S.accept=".pdf,.doc,.docx,.png,.jpg,.jpeg,.heic,.webp,.epub,.mobi,.txt,application/*,image/*,text/*",S.onchange=async()=>{const N=S.files?.[0];if(!N)return w();const T=N.name.replace(/[^a-zA-Z0-9._-]/g,"_"),C=`textbooks/${k.id}/${Date.now()}_${T}`;(await Kf(C,N)).ok&&m(k.id,{filePath:C}),w()},S.click()})}const b=P.useMemo(()=>{const k={Ordered:0,Shipped:0,Received:0,Returned:0,Digital:0};for(const w of l)k[w.status]++;return k},[l]),v=P.useMemo(()=>[{name:"Ordered",v:b.Ordered},{name:"Shipped",v:b.Shipped},{name:"Received",v:b.Received},{name:"Returned",v:b.Returned},{name:"Digital",v:b.Digital}],[b]);return i.jsxs("div",{className:"min-h-screen w-full",style:r,children:[i.jsx("style",{children:aB}),i.jsxs("div",{className:"max-w-[1400px] mx-auto px-3 py-6 space-y-6",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsx("div",{className:"flex-1 min-w-0",children:i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Mn,{className:"h-5 w-5"}),i.jsx("h1",{className:"text-2xl font-bold",children:"Textbooks"})]}),i.jsx(oi,{active:"textbooks"})]})}),i.jsx(Ne,{className:"shrink-0 border-0 shadow-lg rounded-3xl bg-white/80 dark:bg-neutral-900/60 w-[260px]",children:i.jsxs(je,{className:"p-4",children:[i.jsx("div",{className:"h-36",children:i.jsx(la,{width:"100%",height:"100%",children:i.jsxs(zc,{data:v,barSize:16,children:[i.jsx(Il,{strokeDasharray:"3 3",opacity:.25}),i.jsx(Pl,{dataKey:"name",tickLine:!1,axisLine:!1,fontSize:10}),i.jsx(ia,{}),i.jsx(Lc,{dataKey:"v",fill:t[0],radius:[6,6,0,0],isAnimationActive:!0})]})})}),i.jsx("div",{className:"text-center text-sm mt-1",children:"Status overview"})]})})]}),i.jsx(Ne,{className:"border-0 shadow-lg rounded-3xl bg-white/80 dark:bg-neutral-900/60",children:i.jsxs(je,{className:"p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("div",{className:"text-sm font-semibold",children:"Books"}),i.jsxs(K,{size:"sm",className:`rounded-2xl bg-gradient-to-r from-green-600/90 to-emerald-600/90 dark:from-green-500/90 dark:to-emerald-500/90 \r
																		hover:from-green-700/95 hover:to-emerald-700/95 dark:hover:from-green-400/95 dark:hover:to-emerald-400/95\r
																		text-white shadow-lg ring-2 ring-green-200/50 dark:ring-green-400/30 backdrop-blur-sm border-0\r
																		transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0 \r
																		font-medium tracking-wide hover:ring-green-300/60 dark:hover:ring-green-300/40`,onClick:p,children:[i.jsx(cn,{className:"h-4 w-4 mr-1"}),"Add Row"]})]}),i.jsx("div",{className:"w-full overflow-x-auto rounded-2xl border border-black/10 dark:border-white/10 bg-white/70 dark:bg-neutral-900/50 shadow-sm",children:i.jsxs("table",{className:"w-full text-xs",children:[i.jsx("thead",{className:"sticky top-0 bg-white/70 dark:bg-neutral-900/50 backdrop-blur supports-[backdrop-filter]:bg-white/60 dark:supports-[backdrop-filter]:bg-neutral-900/40",children:i.jsxs("tr",{className:"text-left",children:[i.jsx("th",{className:"px-3 py-2 w-[50px]"}),i.jsx("th",{className:"px-3 py-2 w-[220px]",children:"Class"}),i.jsx("th",{className:"px-3 py-2 w-[260px]",children:"Textbook Title"}),i.jsx("th",{className:"px-3 py-2 w-[200px]",children:"Company"}),i.jsx("th",{className:"px-3 py-2 w-[220px]",children:"Book Link"}),i.jsx("th",{className:"px-3 py-2 w-[150px]",children:"Status"}),i.jsx("th",{className:"px-3 py-2 w-[150px]",children:"Purchased On"}),i.jsx("th",{className:"px-3 py-2 w-[150px]",children:"Return By"})]})}),i.jsx("tbody",{children:l.map(k=>i.jsxs("tr",{className:"border-t border-black/5 dark:border-white/10",children:[i.jsx("td",{className:"px-2 py-2",children:i.jsx(K,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-lg bg-white/80 dark:bg-neutral-900/60 border-black/10 text-neutral-600 hover:text-red-600 hover:bg-red-50 dark:text-neutral-300 dark:hover:text-red-400 dark:hover:bg-red-950/30","aria-label":"Delete row",onClick:()=>h(k.id),children:i.jsx(Un,{className:"h-4 w-4 bg-white/80 dark:bg-neutral-900/60 border-black/10"})})}),i.jsx("td",{className:"px-2 py-2",children:i.jsxs(yt,{value:k.classLabel,onValueChange:w=>m(k.id,{classLabel:w}),children:[i.jsx(gt,{className:"h-8 text-left text-xs bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40",children:i.jsx(vt,{placeholder:"Select class"})}),i.jsx(xt,{className:"bg-white/90 dark:bg-neutral-900/90 backdrop-blur border border-black/10 dark:border-white/10 max-h-72 overflow-auto",children:s.length?s.map(w=>i.jsx(Oe,{value:w,children:w},w)):i.jsx(Oe,{disabled:!0,value:"__no_courses__",children:"No courses yet"})})]})}),i.jsx("td",{className:"px-2 py-2",children:i.jsx(Ee,{className:"h-8 rounded-lg bg-white/80 dark:bg-neutral-900/60 border-gray-200/60 dark:border-gray-600/40 focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20 transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs",value:k.title,onChange:w=>m(k.id,{title:w.target.value}),placeholder:"Title"})}),i.jsx("td",{className:"px-2 py-2",children:i.jsx(Ee,{className:"h-8 rounded-lg bg-white/80 dark:bg-neutral-900/60 border-gray-200/60 dark:border-gray-600/40 focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20 transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs",value:k.company,onChange:w=>m(k.id,{company:w.target.value}),placeholder:"Publisher / Company"})}),i.jsx("td",{className:"px-2 py-2",children:k.status==="Digital"?i.jsxs("div",{className:"flex items-center gap-2 h-8 rounded-lg border border-black/10 dark:border-white/10 bg-white/80 dark:bg-neutral-900/60 px-2",children:[i.jsx(Ee,{className:"h-6 flex-1 bg-transparent border-0 focus-visible:ring-0 focus-visible:ring-offset-0 placeholder:text-neutral-500 text-xs",placeholder:"https://...",value:k.linkUrl||"",onChange:w=>m(k.id,{linkUrl:w.target.value}),onKeyDown:w=>{if(w.key==="Enter"){const S=(w.currentTarget.value||"").trim();/^https?:\/\//i.test(S)&&window.open(S,"_blank")}}}),i.jsx(K,{variant:"ghost",size:"icon",className:"group h-6 w-6 bg-transparent hover:bg-transparent focus-visible:bg-transparent active:bg-transparent text-neutral-600 hover:text-neutral-900 dark:text-neutral-300 dark:hover:text-white dark:bg-transparent dark:hover:bg-transparent",onClick:()=>{const w=(k.linkUrl||"").trim();if(/^https?:\/\//i.test(w))window.open(w,"_blank");else{const S=window.prompt("Enter textbook link (URL)",w);S&&/^https?:\/\//i.test(S)&&m(k.id,{linkUrl:S})}},"aria-label":k.linkUrl?"Open textbook link":"Attach textbook link",children:i.jsx(vc,{className:"h-4 w-4 text-neutral-600 dark:text-neutral-300 group-hover:text-neutral-900 dark:group-hover:text-white"})})]}):i.jsx("div",{className:"flex items-center gap-2 h-8 rounded-lg border border-black/10 dark:border-white/10 bg-white/80 dark:bg-neutral-900/60 px-2",children:i.jsx(K,{variant:"ghost",size:"sm",className:"group h-6 px-1 bg-transparent hover:bg-transparent focus-visible:bg-transparent active:bg-transparent text-neutral-600 hover:text-neutral-900 dark:text-neutral-300 dark:hover:text-white dark:bg-transparent dark:hover:bg-transparent","aria-label":k.filePath?"Open textbook file":"Attach textbook file",onClick:()=>x(k),children:k.filePath?i.jsx("span",{className:"text-xs",children:"Attached"}):i.jsx(vc,{className:"h-4 w-4 text-neutral-600 dark:text-neutral-300 group-hover:text-neutral-900 dark:group-hover:text-white"})})})}),i.jsx("td",{className:"px-2 py-2",children:i.jsxs(yt,{value:k.status,onValueChange:w=>m(k.id,{status:w}),children:[i.jsx(gt,{className:"h-8 text-left text-xs bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40",children:i.jsx(vt,{placeholder:"Status"})}),i.jsx(xt,{className:"bg-white/90 dark:bg-neutral-900/90 backdrop-blur border border-black/10 dark:border-white/10",children:["Ordered","Shipped","Received","Returned","Digital"].map(w=>i.jsx(Oe,{value:w,children:w},w))})]})}),i.jsx("td",{className:"px-2 py-2",children:i.jsx(Ee,{className:"h-8 rounded-lg bg-white/80 dark:bg-neutral-900/60 border-gray-200/60 dark:border-gray-600/40 focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20 transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs",type:"date",value:k.purchasedOn||"",onChange:w=>m(k.id,{purchasedOn:w.target.value})})}),i.jsx("td",{className:"px-2 py-2",children:i.jsx(Ee,{className:"h-8 rounded-lg bg-white/80 dark:bg-neutral-900/60 border-gray-200/60 dark:border-gray-600/40 focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20 transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs",type:"date",value:k.returnBy||"",onChange:w=>m(k.id,{returnBy:w.target.value})})})]},k.id))})]})})]})})]})]})}var jh="Switch",[oB,FB]=ri(jh),[lB,iB]=oB(jh),K5=M.forwardRef((r,e)=>{const{__scopeSwitch:t,name:n,checked:s,defaultChecked:l,required:c,disabled:u,value:h="on",onCheckedChange:m,form:p,...x}=r,[b,v]=M.useState(null),k=ft(e,C=>v(C)),w=M.useRef(!1),S=b?p||!!b.closest("form"):!0,[N,T]=Bc({prop:s,defaultProp:l??!1,onChange:m,caller:jh});return i.jsxs(lB,{scope:t,checked:N,disabled:u,children:[i.jsx(rt.button,{type:"button",role:"switch","aria-checked":N,"aria-required":c,"data-state":J5(N),"data-disabled":u?"":void 0,disabled:u,value:h,...x,ref:k,onClick:at(r.onClick,C=>{T(D=>!D),S&&(w.current=C.isPropagationStopped(),w.current||C.stopPropagation())})}),S&&i.jsx(Q5,{control:b,bubbles:!w.current,name:n,value:h,checked:N,required:c,disabled:u,form:p,style:{transform:"translateX(-100%)"}})]})});K5.displayName=jh;var W5="SwitchThumb",X5=M.forwardRef((r,e)=>{const{__scopeSwitch:t,...n}=r,s=iB(W5,t);return i.jsx(rt.span,{"data-state":J5(s.checked),"data-disabled":s.disabled?"":void 0,...n,ref:e})});X5.displayName=W5;var cB="SwitchBubbleInput",Q5=M.forwardRef(({__scopeSwitch:r,control:e,checked:t,bubbles:n=!0,...s},l)=>{const c=M.useRef(null),u=ft(c,l),h=Wg(t),m=qg(e);return M.useEffect(()=>{const p=c.current;if(!p)return;const x=window.HTMLInputElement.prototype,v=Object.getOwnPropertyDescriptor(x,"checked").set;if(h!==t&&v){const k=new Event("click",{bubbles:n});v.call(p,t),p.dispatchEvent(k)}},[h,t,n]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:t,...s,tabIndex:-1,ref:u,style:{...s.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Q5.displayName=cB;function J5(r){return r?"checked":"unchecked"}var Z5=K5,dB=X5;const an=M.forwardRef(({className:r,...e},t)=>i.jsx(Z5,{className:lt("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...e,ref:t,children:i.jsx(dB,{className:lt("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));an.displayName=Z5.displayName;var eC=["PageUp","PageDown"],tC=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],rC={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ii="Slider",[jg,uB,fB]=s2(ii),[nC,YB]=ri(ii,[fB]),[hB,Ch]=nC(ii),aC=M.forwardRef((r,e)=>{const{name:t,min:n=0,max:s=100,step:l=1,orientation:c="horizontal",disabled:u=!1,minStepsBetweenThumbs:h=0,defaultValue:m=[n],value:p,onValueChange:x=()=>{},onValueCommit:b=()=>{},inverted:v=!1,form:k,...w}=r,S=M.useRef(new Set),N=M.useRef(0),C=c==="horizontal"?mB:pB,[D=[],A]=Bc({prop:p,defaultProp:m,onChange:ie=>{[...S.current][N.current]?.focus(),x(ie)}}),Y=M.useRef(D);function I(ie){const he=vB(D,ie);le(ie,he)}function $(ie){le(ie,N.current)}function ae(){const ie=Y.current[N.current];D[N.current]!==ie&&b(D)}function le(ie,he,{commit:ye}={commit:!1}){const fe=NB(l),ve=jB(Math.round((ie-n)/l)*l+n,fe),B=Ju(ve,[n,s]);A((W=[])=>{const L=bB(W,B,he);if(SB(L,h*l)){N.current=L.indexOf(B);const H=String(L)!==String(W);return H&&ye&&b(L),H?L:W}else return W})}return i.jsx(hB,{scope:r.__scopeSlider,name:t,disabled:u,min:n,max:s,valueIndexToChangeRef:N,thumbs:S.current,values:D,orientation:c,form:k,children:i.jsx(jg.Provider,{scope:r.__scopeSlider,children:i.jsx(jg.Slot,{scope:r.__scopeSlider,children:i.jsx(C,{"aria-disabled":u,"data-disabled":u?"":void 0,...w,ref:e,onPointerDown:at(w.onPointerDown,()=>{u||(Y.current=D)}),min:n,max:s,inverted:v,onSlideStart:u?void 0:I,onSlideMove:u?void 0:$,onSlideEnd:u?void 0:ae,onHomeKeyDown:()=>!u&&le(n,0,{commit:!0}),onEndKeyDown:()=>!u&&le(s,D.length-1,{commit:!0}),onStepKeyDown:({event:ie,direction:he})=>{if(!u){const ve=eC.includes(ie.key)||ie.shiftKey&&tC.includes(ie.key)?10:1,B=N.current,W=D[B],L=l*ve*he;le(W+L,B,{commit:!0})}}})})})})});aC.displayName=ii;var[sC,oC]=nC(ii,{startEdge:"left",endEdge:"right",size:"width",direction:1}),mB=M.forwardRef((r,e)=>{const{min:t,max:n,dir:s,inverted:l,onSlideStart:c,onSlideMove:u,onSlideEnd:h,onStepKeyDown:m,...p}=r,[x,b]=M.useState(null),v=ft(e,C=>b(C)),k=M.useRef(void 0),w=o2(s),S=w==="ltr",N=S&&!l||!S&&l;function T(C){const D=k.current||x.getBoundingClientRect(),A=[0,D.width],I=Ux(A,N?[t,n]:[n,t]);return k.current=D,I(C-D.left)}return i.jsx(sC,{scope:r.__scopeSlider,startEdge:N?"left":"right",endEdge:N?"right":"left",direction:N?1:-1,size:"width",children:i.jsx(lC,{dir:w,"data-orientation":"horizontal",...p,ref:v,style:{...p.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:C=>{const D=T(C.clientX);c?.(D)},onSlideMove:C=>{const D=T(C.clientX);u?.(D)},onSlideEnd:()=>{k.current=void 0,h?.()},onStepKeyDown:C=>{const A=rC[N?"from-left":"from-right"].includes(C.key);m?.({event:C,direction:A?-1:1})}})})}),pB=M.forwardRef((r,e)=>{const{min:t,max:n,inverted:s,onSlideStart:l,onSlideMove:c,onSlideEnd:u,onStepKeyDown:h,...m}=r,p=M.useRef(null),x=ft(e,p),b=M.useRef(void 0),v=!s;function k(w){const S=b.current||p.current.getBoundingClientRect(),N=[0,S.height],C=Ux(N,v?[n,t]:[t,n]);return b.current=S,C(w-S.top)}return i.jsx(sC,{scope:r.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:i.jsx(lC,{"data-orientation":"vertical",...m,ref:x,style:{...m.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const S=k(w.clientY);l?.(S)},onSlideMove:w=>{const S=k(w.clientY);c?.(S)},onSlideEnd:()=>{b.current=void 0,u?.()},onStepKeyDown:w=>{const N=rC[v?"from-bottom":"from-top"].includes(w.key);h?.({event:w,direction:N?-1:1})}})})}),lC=M.forwardRef((r,e)=>{const{__scopeSlider:t,onSlideStart:n,onSlideMove:s,onSlideEnd:l,onHomeKeyDown:c,onEndKeyDown:u,onStepKeyDown:h,...m}=r,p=Ch(ii,t);return i.jsx(rt.span,{...m,ref:e,onKeyDown:at(r.onKeyDown,x=>{x.key==="Home"?(c(x),x.preventDefault()):x.key==="End"?(u(x),x.preventDefault()):eC.concat(tC).includes(x.key)&&(h(x),x.preventDefault())}),onPointerDown:at(r.onPointerDown,x=>{const b=x.target;b.setPointerCapture(x.pointerId),x.preventDefault(),p.thumbs.has(b)?b.focus():n(x)}),onPointerMove:at(r.onPointerMove,x=>{x.target.hasPointerCapture(x.pointerId)&&s(x)}),onPointerUp:at(r.onPointerUp,x=>{const b=x.target;b.hasPointerCapture(x.pointerId)&&(b.releasePointerCapture(x.pointerId),l(x))})})}),iC="SliderTrack",cC=M.forwardRef((r,e)=>{const{__scopeSlider:t,...n}=r,s=Ch(iC,t);return i.jsx(rt.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...n,ref:e})});cC.displayName=iC;var Cg="SliderRange",dC=M.forwardRef((r,e)=>{const{__scopeSlider:t,...n}=r,s=Ch(Cg,t),l=oC(Cg,t),c=M.useRef(null),u=ft(e,c),h=s.values.length,m=s.values.map(b=>hC(b,s.min,s.max)),p=h>1?Math.min(...m):0,x=100-Math.max(...m);return i.jsx(rt.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...n,ref:u,style:{...r.style,[l.startEdge]:p+"%",[l.endEdge]:x+"%"}})});dC.displayName=Cg;var Tg="SliderThumb",uC=M.forwardRef((r,e)=>{const t=uB(r.__scopeSlider),[n,s]=M.useState(null),l=ft(e,u=>s(u)),c=M.useMemo(()=>n?t().findIndex(u=>u.ref.current===n):-1,[t,n]);return i.jsx(gB,{...r,ref:l,index:c})}),gB=M.forwardRef((r,e)=>{const{__scopeSlider:t,index:n,name:s,...l}=r,c=Ch(Tg,t),u=oC(Tg,t),[h,m]=M.useState(null),p=ft(e,T=>m(T)),x=h?c.form||!!h.closest("form"):!0,b=qg(h),v=c.values[n],k=v===void 0?0:hC(v,c.min,c.max),w=yB(n,c.values.length),S=b?.[u.size],N=S?kB(S,k,u.direction):0;return M.useEffect(()=>{if(h)return c.thumbs.add(h),()=>{c.thumbs.delete(h)}},[h,c.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[u.startEdge]:`calc(${k}% + ${N}px)`},children:[i.jsx(jg.ItemSlot,{scope:r.__scopeSlider,children:i.jsx(rt.span,{role:"slider","aria-label":r["aria-label"]||w,"aria-valuemin":c.min,"aria-valuenow":v,"aria-valuemax":c.max,"aria-orientation":c.orientation,"data-orientation":c.orientation,"data-disabled":c.disabled?"":void 0,tabIndex:c.disabled?void 0:0,...l,ref:p,style:v===void 0?{display:"none"}:r.style,onFocus:at(r.onFocus,()=>{c.valueIndexToChangeRef.current=n})})}),x&&i.jsx(fC,{name:s??(c.name?c.name+(c.values.length>1?"[]":""):void 0),form:c.form,value:v},n)]})});uC.displayName=Tg;var xB="RadioBubbleInput",fC=M.forwardRef(({__scopeSlider:r,value:e,...t},n)=>{const s=M.useRef(null),l=ft(s,n),c=Wg(e);return M.useEffect(()=>{const u=s.current;if(!u)return;const h=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(h,"value").set;if(c!==e&&p){const x=new Event("input",{bubbles:!0});p.call(u,e),u.dispatchEvent(x)}},[c,e]),i.jsx(rt.input,{style:{display:"none"},...t,ref:l,defaultValue:e})});fC.displayName=xB;function bB(r=[],e,t){const n=[...r];return n[t]=e,n.sort((s,l)=>s-l)}function hC(r,e,t){const l=100/(t-e)*(r-e);return Ju(l,[0,100])}function yB(r,e){return e>2?`Value ${r+1} of ${e}`:e===2?["Minimum","Maximum"][r]:void 0}function vB(r,e){if(r.length===1)return 0;const t=r.map(s=>Math.abs(s-e)),n=Math.min(...t);return t.indexOf(n)}function kB(r,e,t){const n=r/2,l=Ux([0,50],[0,n]);return(n-l(e)*t)*t}function wB(r){return r.slice(0,-1).map((e,t)=>r[t+1]-e)}function SB(r,e){if(e>0){const t=wB(r);return Math.min(...t)>=e}return!0}function Ux(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(r[1]-r[0]);return e[0]+n*(t-r[0])}}function NB(r){return(String(r).split(".")[1]||"").length}function jB(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}var mC=aC,CB=cC,TB=dC,MB=uC;const Fl=M.forwardRef(({className:r,...e},t)=>i.jsxs(mC,{ref:t,className:lt("relative flex w-full touch-none select-none items-center",r),...e,children:[i.jsx(CB,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:i.jsx(TB,{className:"absolute h-full bg-primary"})}),i.jsx(MB,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));Fl.displayName=mC.displayName;function EB(){const r=$s(),[e,t]=M.useState(sr.getMasterVolume()),[n,s]=M.useState(sr.isBackgroundMusicEnabled()),[l,c]=M.useState(sr.getBackgroundMusicVolume());M.useEffect(()=>{t(sr.getMasterVolume()),s(sr.isBackgroundMusicEnabled()),c(sr.getBackgroundMusicVolume())},[]);const u=x=>{r.set({soundsEnabled:x}),sr.setEnabled(x)},h=x=>{const b=x[0];t(b),sr.setMasterVolume(b)},m=x=>{s(x),sr.setBackgroundMusicEnabled(x)},p=x=>{const b=x[0];c(b),sr.setBackgroundMusicVolume(b)};return i.jsxs("div",{className:"p-4 rounded-2xl bg-neutral-50/50 dark:bg-neutral-800/30",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300 flex items-center gap-2",children:[r.soundsEnabled?i.jsx(e3,{className:"w-4 h-4"}):i.jsx(t3,{className:"w-4 h-4"}),"Sound Effects"]}),i.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Play audio feedback for interactions and achievements"})]}),i.jsx(an,{checked:r.soundsEnabled,onCheckedChange:u})]}),r.soundsEnabled&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-2 block",children:["Master Volume: ",Math.round(e*100),"%"]}),i.jsx(Fl,{value:[e],onValueChange:h,max:1,min:0,step:.1,className:"w-full"})]}),i.jsxs("div",{className:"border-t border-neutral-200 dark:border-neutral-700 pt-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300 flex items-center gap-2",children:[i.jsx(r3,{className:"w-4 h-4"}),"Background Music"]}),i.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Ambient golden hour background music"})]}),i.jsx(an,{checked:n,onCheckedChange:m})]}),n&&i.jsxs("div",{children:[i.jsxs("label",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-2 block",children:["Background Music Volume: ",Math.round(l*100),"%"]}),i.jsx(Fl,{value:[l],onValueChange:p,max:1,min:0,step:.05,className:"w-full"})]})]})]})]})}const AB=`
	.light-scrollbar::-webkit-scrollbar { width: 10px; height: 10px; }
	.light-scrollbar::-webkit-scrollbar-track { background: rgba(0,0,0,0.05); border-radius: 5px; }
	.light-scrollbar::-webkit-scrollbar-thumb { background: rgba(0,0,0,0.20); border-radius: 5px; }
	.light-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(0,0,0,0.30); }
	.dark-scrollbar::-webkit-scrollbar { width: 10px; height: 10px; }
	.dark-scrollbar::-webkit-scrollbar-track { background: rgba(255,255,255,0.10); border-radius: 5px; }
	.dark-scrollbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.20); border-radius: 5px; }
	.dark-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.30); }
`;function DB(){const r=$x(),e=_r(),t=$s(),n=Dr(),[s,l]=M.useState(!1);function c(b){const v=document.getElementById(b);v&&v.scrollIntoView({behavior:"smooth",block:"start"})}async function u(){const b={settings:localStorage.getItem("aq:settings"),theme:localStorage.getItem("aq:theme"),plan:localStorage.getItem("aq:academic-plan"),schedule:localStorage.getItem("aq:schedule"),tasks:localStorage.getItem("aq:tasks"),scholarships:localStorage.getItem("aq:scholarships"),textbooks:localStorage.getItem("aq:textbooks"),studySessions:localStorage.getItem("aq:study-sessions"),gamification:localStorage.getItem("aq:gamification")},v=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),k=URL.createObjectURL(v),w=document.createElement("a");w.href=k,w.download="academicquest-backup.json",w.click(),URL.revokeObjectURL(k)}async function h(){const b=document.createElement("input");b.type="file",b.accept="application/json",b.onchange=async()=>{const v=b.files?.[0];if(!v)return;const k=await v.text();try{const w=JSON.parse(k);w.settings&&localStorage.setItem("aq:settings",w.settings),w.theme&&localStorage.setItem("aq:theme",w.theme),w.plan&&localStorage.setItem("aq:academic-plan",w.plan),w.schedule&&localStorage.setItem("aq:schedule",w.schedule),w.tasks&&localStorage.setItem("aq:tasks",w.tasks),w.scholarships&&localStorage.setItem("aq:scholarships",w.scholarships),w.textbooks&&localStorage.setItem("aq:textbooks",w.textbooks),w.studySessions&&localStorage.setItem("aq:study-sessions",w.studySessions),w.gamification&&localStorage.setItem("aq:gamification",w.gamification),window.location.reload()}catch{alert("Invalid backup file")}},b.click()}const m=()=>{confirm("Are you sure you want to reset all gamification data? This will clear your level, XP, badges, and streaks. This action cannot be undone.")&&(localStorage.removeItem("aq:gamification"),window.location.reload())},p=()=>{confirm("Are you sure you want to reset your streaks? This will set your current and longest streaks to 0.")&&n.updateStats({streakDays:0,longestStreak:0})},x=()=>{confirm("Are you sure you want to clear ALL data? This will reset everything including settings, academic plans, tasks, and gamification progress. This action cannot be undone.")&&(Object.keys(localStorage).filter(v=>v.startsWith("aq:")).forEach(v=>localStorage.removeItem(v)),window.location.reload())};return i.jsxs("div",{className:"min-h-screen w-full",style:r,children:[i.jsx("style",{children:AB}),i.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-6 space-y-6",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex flex-col gap-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(W1,{className:"h-5 w-5"}),i.jsx("h1",{className:"text-2xl font-bold",children:"Settings"})]}),i.jsx(oi,{active:"settings"})]}),i.jsx("div",{className:"flex items-center gap-3",children:i.jsxs(K,{variant:"outline",className:`rounded-2xl border-2 bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/90 dark:to-neutral-900/80 \r
										backdrop-blur-md hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 \r
										border-neutral-200/60 dark:border-neutral-600/40 hover:border-blue-200/60 dark:hover:border-indigo-400/30\r
										shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95\r
										text-neutral-700 dark:text-neutral-200 hover:text-blue-700 dark:hover:text-indigo-300\r
										font-medium tracking-wide`,onClick:h,children:[i.jsx(Ak,{className:"h-4 w-4 mr-2"}),"Import Backup"]})})]}),i.jsxs("div",{className:"flex gap-8 lg:gap-12",children:[i.jsx("div",{className:"w-64 shrink-0 sticky top-6 self-start",children:i.jsx(Ne,{className:"border-0 bg-white/80 dark:bg-neutral-900/60 rounded-3xl shadow-xl backdrop-blur-md",children:i.jsxs(je,{className:"p-6",children:[i.jsx("div",{className:"text-xs uppercase tracking-wider text-neutral-500 dark:text-neutral-400 mb-4 font-medium",children:"Quick Navigation"}),i.jsx("div",{className:"flex flex-col gap-2",children:[{id:"appearance",label:"Appearance",icon:""},{id:"pomodoro",label:"Pomodoro Timer",icon:""},{id:"nav-defaults",label:"Navigation & Defaults",icon:""},{id:"notifications",label:"Notifications",icon:""},{id:"gamification",label:"Gamification",icon:""},{id:"data",label:"Data Management",icon:""}].map(({id:b,label:v,icon:k})=>i.jsxs(K,{variant:"ghost",className:`justify-start rounded-2xl h-11 px-4 text-left font-medium\r
													bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/60 dark:to-neutral-900/70\r
													border border-neutral-200/40 dark:border-neutral-700/40\r
													hover:from-neutral-50/90 hover:to-neutral-100/80 \r
													dark:hover:from-neutral-700/60 dark:hover:to-neutral-800/80 \r
													hover:border-neutral-300/60 dark:hover:border-neutral-600/60\r
													transition-all duration-200 hover:scale-[1.02] hover:-translate-y-0.5\r
													text-neutral-700 dark:text-neutral-200 hover:text-neutral-900 dark:hover:text-neutral-100\r
													shadow-sm hover:shadow-md`,onClick:()=>c(b),children:[i.jsx("span",{className:"mr-3 text-base",children:k}),v]},b))})]})})}),i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"mx-auto max-w-4xl space-y-8",children:[i.jsx(Ne,{id:"appearance",className:"border-0 bg-white/80 dark:bg-neutral-900/60 rounded-3xl shadow-xl backdrop-blur-md",children:i.jsxs(je,{className:"p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-purple-100 to-pink-100 dark:from-purple-900/30 dark:to-pink-900/30",children:i.jsx("span",{className:"text-xl",children:""})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-neutral-900 dark:text-neutral-100",children:"Appearance"}),i.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"Customize the look and feel of your interface"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Theme mode"}),i.jsxs(yt,{value:e.mode,onValueChange:b=>e.setMode(b),children:[i.jsx(gt,{className:"h-10 rounded-2xl border-neutral-200/60 dark:border-neutral-600/40 bg-white/90 dark:bg-neutral-800/80",children:i.jsx(vt,{placeholder:"Mode"})}),i.jsxs(xt,{className:"rounded-2xl border-neutral-200/60 dark:border-neutral-600/40",children:[i.jsx(Oe,{value:"light",children:" Light"}),i.jsx(Oe,{value:"dark",children:" Dark"}),i.jsx(Oe,{value:"system",children:" System"})]})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Color palette"}),i.jsxs(yt,{value:e.palette,onValueChange:b=>e.setPalette(b),children:[i.jsx(gt,{className:"h-10 rounded-2xl border-neutral-200/60 dark:border-neutral-600/40 bg-white/90 dark:bg-neutral-800/80",children:i.jsx(vt,{placeholder:"Palette"})}),i.jsx(xt,{className:"rounded-2xl border-neutral-200/60 dark:border-neutral-600/40",children:Object.keys(Gn).map(b=>i.jsx(Oe,{value:b,children:b},b))})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Font family"}),i.jsxs(yt,{value:e.font,onValueChange:b=>e.setFont(b),children:[i.jsx(gt,{className:"h-10 rounded-2xl border-neutral-200/60 dark:border-neutral-600/40 bg-white/90 dark:bg-neutral-800/80",children:i.jsx(vt,{placeholder:"Font"})}),i.jsx(xt,{className:"rounded-2xl border-neutral-200/60 dark:border-neutral-600/40",children:["Inter","Poppins","Nunito","Outfit","Roboto","Lato","Montserrat","Source Sans 3"].map(b=>i.jsx(Oe,{value:b,children:b},b))})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Accent intensity"}),i.jsxs("div",{className:"pt-3",children:[i.jsx(Fl,{value:[e.accent],min:0,max:100,step:1,onValueChange:([b])=>e.setAccent(b),className:"w-full"}),i.jsxs("div",{className:"flex justify-between text-xs text-neutral-500 mt-1",children:[i.jsx("span",{children:"Subtle"}),i.jsx("span",{children:"Bold"})]})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Border radius"}),i.jsxs("div",{className:"pt-3",children:[i.jsx(Fl,{value:[e.radius],min:8,max:24,step:1,onValueChange:([b])=>e.setRadius(b),className:"w-full"}),i.jsxs("div",{className:"flex justify-between text-xs text-neutral-500 mt-1",children:[i.jsx("span",{children:"Sharp"}),i.jsx("span",{children:"Rounded"})]})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Text scale"}),i.jsxs("div",{className:"pt-3",children:[i.jsx(Fl,{value:[e.textScale*100],min:90,max:110,step:1,onValueChange:([b])=>e.setTextScale(Number((b/100).toFixed(2))),className:"w-full"}),i.jsxs("div",{className:"flex justify-between text-xs text-neutral-500 mt-1",children:[i.jsx("span",{children:"90%"}),i.jsx("span",{children:"110%"})]})]})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-8 pt-6 border-t border-neutral-200/60 dark:border-neutral-700/60",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-neutral-50/50 dark:bg-neutral-800/30",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Reduced motion"}),i.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Minimize animations for accessibility"})]}),i.jsx(an,{checked:t.reducedMotion,onCheckedChange:b=>t.set({reducedMotion:b})})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-neutral-50/50 dark:bg-neutral-800/30",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Gradients"}),i.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Enable gradient backgrounds"})]}),i.jsx(an,{checked:t.gradientsEnabled,onCheckedChange:b=>t.set({gradientsEnabled:b})})]})]})]})}),i.jsx(Ne,{id:"pomodoro",className:"border-0 bg-white/80 dark:bg-neutral-900/60 rounded-3xl shadow-xl backdrop-blur-md",children:i.jsxs(je,{className:"p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-orange-100 to-red-100 dark:from-orange-900/30 dark:to-red-900/30",children:i.jsx("span",{className:"text-xl",children:""})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-neutral-900 dark:text-neutral-100",children:"Pomodoro Timer"}),i.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"Configure your focus timer preferences"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Timer position"}),i.jsxs(yt,{value:t.pomodoroPosition,onValueChange:b=>t.set({pomodoroPosition:b}),children:[i.jsx(gt,{className:"h-10 rounded-2xl border-neutral-200/60 dark:border-neutral-600/40 bg-white/90 dark:bg-neutral-800/80",children:i.jsx(vt,{placeholder:"Position"})}),i.jsxs(xt,{className:"rounded-2xl border-neutral-200/60 dark:border-neutral-600/40",children:[i.jsx(Oe,{value:"draggable",children:" Draggable (Snap to corners)"}),i.jsx(Oe,{value:"tl",children:" Static - Top Left"}),i.jsx(Oe,{value:"tr",children:" Static - Top Right"}),i.jsx(Oe,{value:"bl",children:" Static - Bottom Left"}),i.jsx(Oe,{value:"br",children:" Static - Bottom Right"})]})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Timer size"}),i.jsxs(yt,{value:t.pomodoroSize,onValueChange:b=>t.set({pomodoroSize:b}),children:[i.jsx(gt,{className:"h-10 rounded-2xl border-neutral-200/60 dark:border-neutral-600/40 bg-white/90 dark:bg-neutral-800/80",children:i.jsx(vt,{placeholder:"Size"})}),i.jsxs(xt,{className:"rounded-2xl border-neutral-200/60 dark:border-neutral-600/40",children:[i.jsx(Oe,{value:"small",children:" Small"}),i.jsx(Oe,{value:"medium",children:" Medium"}),i.jsx(Oe,{value:"large",children:" Large"})]})]})]})]}),i.jsx("div",{className:"mt-8 pt-6 border-t border-neutral-200/60 dark:border-neutral-700/60",children:i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-neutral-50/50 dark:bg-neutral-800/30",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Auto-hide when not running"}),i.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Hide timer when not actively counting down"})]}),i.jsx(an,{checked:t.pomodoroAutoHide,onCheckedChange:b=>t.set({pomodoroAutoHide:b})})]})})]})}),i.jsx(Ne,{id:"nav-defaults",className:"border-0 bg-white/80 dark:bg-neutral-900/60 rounded-3xl shadow-xl backdrop-blur-md",children:i.jsxs(je,{className:"p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-blue-100 to-cyan-100 dark:from-blue-900/30 dark:to-cyan-900/30",children:i.jsx("span",{className:"text-xl",children:""})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-neutral-900 dark:text-neutral-100",children:"Navigation & Defaults"}),i.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"Set your preferred navigation and format options"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Default page"}),i.jsxs(yt,{value:t.defaultRoute,onValueChange:b=>t.set({defaultRoute:b}),children:[i.jsx(gt,{className:"h-10 rounded-2xl border-neutral-200/60 dark:border-neutral-600/40 bg-white/90 dark:bg-neutral-800/80",children:i.jsx(vt,{placeholder:"Route"})}),i.jsx(xt,{className:"rounded-2xl border-neutral-200/60 dark:border-neutral-600/40",children:[{value:"/",label:" Dashboard"},{value:"/planner",label:" Academic Planner"},{value:"/tasks",label:" Tasks"},{value:"/schedule",label:" Schedule"},{value:"/course-planner",label:" Course Planner"},{value:"/scholarships",label:" Scholarships"},{value:"/textbooks",label:" Textbooks"},{value:"/settings",label:" Settings"}].map(b=>i.jsx(Oe,{value:b.value,children:b.label},b.value))})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Week starts on"}),i.jsxs(yt,{value:String(t.weekStart),onValueChange:b=>t.set({weekStart:Number(b)}),children:[i.jsx(gt,{className:"h-10 rounded-2xl border-neutral-200/60 dark:border-neutral-600/40 bg-white/90 dark:bg-neutral-800/80",children:i.jsx(vt,{})}),i.jsxs(xt,{className:"rounded-2xl border-neutral-200/60 dark:border-neutral-600/40",children:[i.jsx(Oe,{value:"0",children:" Sunday"}),i.jsx(Oe,{value:"1",children:" Monday"})]})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Time format"}),i.jsxs(yt,{value:t.time24h?"24":"12",onValueChange:b=>t.set({time24h:b==="24"}),children:[i.jsx(gt,{className:"h-10 rounded-2xl border-neutral-200/60 dark:border-neutral-600/40 bg-white/90 dark:bg-neutral-800/80",children:i.jsx(vt,{})}),i.jsxs(xt,{className:"rounded-2xl border-neutral-200/60 dark:border-neutral-600/40",children:[i.jsx(Oe,{value:"12",children:" 12-hour (AM/PM)"}),i.jsx(Oe,{value:"24",children:" 24-hour"})]})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Date format"}),i.jsxs(yt,{value:t.dateFormat,onValueChange:b=>t.set({dateFormat:b}),children:[i.jsx(gt,{className:"h-10 rounded-2xl border-neutral-200/60 dark:border-neutral-600/40 bg-white/90 dark:bg-neutral-800/80",children:i.jsx(vt,{})}),i.jsxs(xt,{className:"rounded-2xl border-neutral-200/60 dark:border-neutral-600/40",children:[i.jsx(Oe,{value:"auto",children:" Auto"}),i.jsx(Oe,{value:"MM/DD/YYYY",children:" MM/DD/YYYY"}),i.jsx(Oe,{value:"DD/MM/YYYY",children:" DD/MM/YYYY"}),i.jsx(Oe,{value:"YYYY-MM-DD",children:" YYYY-MM-DD"})]})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Autosave interval"}),i.jsxs(yt,{value:String(t.autosaveSeconds),onValueChange:b=>t.set({autosaveSeconds:Number(b)}),children:[i.jsx(gt,{className:"h-10 rounded-2xl border-neutral-200/60 dark:border-neutral-600/40 bg-white/90 dark:bg-neutral-800/80",children:i.jsx(vt,{})}),i.jsx(xt,{className:"rounded-2xl border-neutral-200/60 dark:border-neutral-600/40",children:[{value:10,label:" 10 seconds"},{value:30,label:" 30 seconds"},{value:60,label:" 1 minute"},{value:120,label:" 2 minutes"}].map(b=>i.jsx(Oe,{value:String(b.value),children:b.label},b.value))})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Currency"}),i.jsxs(yt,{value:t.preferredCurrency,onValueChange:b=>t.set({preferredCurrency:b}),children:[i.jsx(gt,{className:"h-10 rounded-2xl border-neutral-200/60 dark:border-neutral-600/40 bg-white/90 dark:bg-neutral-800/80",children:i.jsx(vt,{})}),i.jsx(xt,{className:"rounded-2xl border-neutral-200/60 dark:border-neutral-600/40",children:["USD","EUR","GBP","CAD","AUD","JPY","INR","CNY","KRW","NGN","ZAR","PHP"].map(b=>i.jsxs(Oe,{value:b,children:[" ",b]},b))})]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"GPA scale"}),i.jsxs(yt,{value:t.gpaScale,onValueChange:b=>t.set({gpaScale:b}),children:[i.jsx(gt,{className:"h-10 rounded-2xl border-neutral-200/60 dark:border-neutral-600/40 bg-white/90 dark:bg-neutral-800/80",children:i.jsx(vt,{})}),i.jsxs(xt,{className:"rounded-2xl border-neutral-200/60 dark:border-neutral-600/40",children:[i.jsx(Oe,{value:"4-highest",children:" 4.00 is highest"}),i.jsx(Oe,{value:"1-highest",children:" 1.00 is highest"})]})]})]})]}),i.jsx("div",{className:"mt-8 pt-6 border-t border-neutral-200/60 dark:border-neutral-700/60",children:i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-neutral-50/50 dark:bg-neutral-800/30",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Ask before leaving"}),i.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Show confirmation dialog when navigating away with unsaved changes"})]}),i.jsx(an,{checked:t.askBeforeLeave,onCheckedChange:b=>t.set({askBeforeLeave:b})})]})})]})}),i.jsx(Ne,{id:"notifications",className:"border-0 bg-white/80 dark:bg-neutral-900/60 rounded-3xl shadow-xl backdrop-blur-md",children:i.jsxs(je,{className:"p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-green-100 to-emerald-100 dark:from-green-900/30 dark:to-emerald-900/30",children:i.jsx("span",{className:"text-xl",children:""})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-neutral-900 dark:text-neutral-100",children:"Notifications & Effects"}),i.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"Configure alerts and visual feedback preferences"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-neutral-50/50 dark:bg-neutral-800/30",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"App notifications"}),i.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Enable browser notifications for important updates"})]}),i.jsx(an,{checked:t.notificationsEnabled,onCheckedChange:b=>t.set({notificationsEnabled:b})})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-neutral-50/50 dark:bg-neutral-800/30",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Confetti effects"}),i.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Celebrate achievements with confetti animations"})]}),i.jsx(an,{checked:t.confettiEnabled,onCheckedChange:b=>t.set({confettiEnabled:b})})]}),i.jsx("div",{className:"col-span-1 md:col-span-2",children:i.jsx(EB,{})}),i.jsx("div",{className:"col-span-1 md:col-span-2",children:i.jsxs("div",{className:"p-4 rounded-2xl bg-neutral-50/50 dark:bg-neutral-800/30",children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300 mb-3 block",children:"Quiet hours"}),i.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-3",children:"Set time range when notifications should be disabled"}),i.jsxs("div",{className:"flex gap-3 items-center",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-1 block",children:"Start time"}),i.jsx(Ee,{className:"h-10 rounded-2xl border-neutral-200/60 dark:border-neutral-600/40 bg-white/90 dark:bg-neutral-800/80",value:t.quietStart,onChange:b=>t.set({quietStart:b.target.value}),placeholder:"22:00"})]}),i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"text-xs text-neutral-500 dark:text-neutral-400 mb-1 block",children:"End time"}),i.jsx(Ee,{className:"h-10 rounded-2xl border-neutral-200/60 dark:border-neutral-600/40 bg-white/90 dark:bg-neutral-800/80",value:t.quietEnd,onChange:b=>t.set({quietEnd:b.target.value}),placeholder:"08:00"})]})]})]})})]})]})}),i.jsx(Ne,{id:"gamification",className:"border-0 bg-white/80 dark:bg-neutral-900/60 rounded-3xl shadow-xl backdrop-blur-md",children:i.jsxs(je,{className:"p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-yellow-100 to-amber-100 dark:from-yellow-900/30 dark:to-amber-900/30",children:i.jsx(wo,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-neutral-900 dark:text-neutral-100",children:"Gamification System"}),i.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"Track your progress and earn achievements"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8 p-6 rounded-2xl bg-gradient-to-br from-neutral-50/80 to-neutral-100/60 dark:from-neutral-800/50 dark:to-neutral-900/40 border border-neutral-200/60 dark:border-neutral-700/60",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-2 rounded-2xl bg-gradient-to-br from-blue-100 to-indigo-100 dark:from-blue-900/40 dark:to-indigo-900/40",children:i.jsx("span",{className:"text-xl",children:""})}),i.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Level"}),i.jsx("div",{className:"text-2xl font-bold text-neutral-900 dark:text-neutral-100",children:Math.floor(n.stats.totalXp/500)+1})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-2 rounded-2xl bg-gradient-to-br from-purple-100 to-pink-100 dark:from-purple-900/40 dark:to-pink-900/40",children:i.jsx("span",{className:"text-xl",children:""})}),i.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"XP"}),i.jsx("div",{className:"text-2xl font-bold text-neutral-900 dark:text-neutral-100",children:n.stats.totalXp})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-2 rounded-2xl bg-gradient-to-br from-yellow-100 to-orange-100 dark:from-yellow-900/40 dark:to-orange-900/40",children:i.jsx("span",{className:"text-xl",children:""})}),i.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Badges"}),i.jsx("div",{className:"text-2xl font-bold text-neutral-900 dark:text-neutral-100",children:n.stats.badges.filter(b=>b.unlocked).length})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto mb-2 rounded-2xl bg-gradient-to-br from-green-100 to-emerald-100 dark:from-green-900/40 dark:to-emerald-900/40",children:i.jsx("span",{className:"text-xl",children:""})}),i.jsx("div",{className:"text-sm text-neutral-500 dark:text-neutral-400",children:"Streak"}),i.jsx("div",{className:"text-2xl font-bold text-neutral-900 dark:text-neutral-100",children:n.stats.streakDays})]})]}),n.stats.badges.filter(b=>b.unlocked).length>0&&i.jsxs("div",{className:"mb-8 p-6 rounded-2xl bg-gradient-to-br from-neutral-50/80 to-neutral-100/60 dark:from-neutral-800/50 dark:to-neutral-900/40 border border-neutral-200/60 dark:border-neutral-700/60",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-yellow-100 to-amber-100 dark:from-yellow-900/40 dark:to-amber-900/40",children:i.jsx("span",{className:"text-xl",children:""})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-neutral-900 dark:text-neutral-100",children:"Earned Badges"}),i.jsxs("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:[n.stats.badges.filter(b=>b.unlocked).length," of ",n.stats.badges.length," badges unlocked"]})]})]}),i.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4",children:n.stats.badges.filter(b=>b.unlocked).sort((b,v)=>{const k={legendary:4,epic:3,rare:2,common:1},w=(k[v.rarity]||0)-(k[b.rarity]||0);return w!==0?w:b.name.localeCompare(v.name)}).map(b=>i.jsxs("div",{className:`relative p-4 rounded-2xl text-center transition-all duration-300 hover:scale-105 cursor-pointer shadow-lg hover:shadow-xl ${b.rarity==="legendary"?"bg-gradient-to-br from-yellow-100 via-amber-100 to-orange-100 dark:from-yellow-900/30 dark:via-amber-900/30 dark:to-orange-900/30 border-2 border-yellow-300/60 dark:border-yellow-600/60":b.rarity==="epic"?"bg-gradient-to-br from-purple-100 via-pink-100 to-rose-100 dark:from-purple-900/30 dark:via-pink-900/30 dark:to-rose-900/30 border-2 border-purple-300/60 dark:border-purple-600/60":b.rarity==="rare"?"bg-gradient-to-br from-blue-100 via-indigo-100 to-cyan-100 dark:from-blue-900/30 dark:via-indigo-900/30 dark:to-cyan-900/30 border-2 border-blue-300/60 dark:border-blue-600/60":"bg-gradient-to-br from-green-100 via-emerald-100 to-teal-100 dark:from-green-900/30 dark:via-emerald-900/30 dark:to-teal-900/30 border-2 border-green-300/60 dark:border-green-600/60"}`,title:`${b.name}: ${b.description}${b.unlockedAt?` (Earned: ${new Date(b.unlockedAt).toLocaleDateString()})`:""}`,children:[i.jsx("div",{className:`absolute top-1 right-1 w-2 h-2 rounded-full ${b.rarity==="legendary"?"bg-yellow-500 shadow-yellow-300/50":b.rarity==="epic"?"bg-purple-500 shadow-purple-300/50":b.rarity==="rare"?"bg-blue-500 shadow-blue-300/50":"bg-green-500 shadow-green-300/50"} shadow-lg`}),i.jsx("div",{className:"text-3xl mb-2",children:b.icon}),i.jsx("div",{className:"text-sm font-bold text-neutral-900 dark:text-neutral-100 mb-1",children:b.name}),i.jsx("div",{className:"text-xs text-neutral-600 dark:text-neutral-400 leading-tight",children:b.description}),b.maxProgress&&b.maxProgress>1&&i.jsx("div",{className:"mt-2 w-full bg-neutral-200 dark:bg-neutral-700 rounded-full h-1.5",children:i.jsx("div",{className:`h-1.5 rounded-full transition-all duration-300 ${b.rarity==="legendary"?"bg-yellow-500":b.rarity==="epic"?"bg-purple-500":b.rarity==="rare"?"bg-blue-500":"bg-green-500"}`,style:{width:"100%"}})}),b.unlockedAt&&i.jsx("div",{className:"text-xs text-neutral-500 dark:text-neutral-400 mt-1",children:new Date(b.unlockedAt).toLocaleDateString()})]},b.id))}),n.stats.badges.filter(b=>b.unlocked).length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"text-6xl mb-4 opacity-50",children:""}),i.jsx("h3",{className:"text-lg font-medium text-neutral-600 dark:text-neutral-400 mb-2",children:"No Badges Earned Yet"}),i.jsx("p",{className:"text-sm text-neutral-500 dark:text-neutral-500",children:"Complete tasks, attend classes, and maintain streaks to earn your first badges!"})]})]}),"									",i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-neutral-50/50 dark:bg-neutral-800/30",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Enable gamification"}),i.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Track XP, levels, and achievements"})]}),i.jsx(an,{checked:t.gamificationEnabled,onCheckedChange:b=>t.set({gamificationEnabled:b})})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-neutral-50/50 dark:bg-neutral-800/30",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Show panel"}),i.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Display gamification panel in dashboard"})]}),i.jsx(an,{checked:s,onCheckedChange:l})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-neutral-50/50 dark:bg-neutral-800/30",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Show streaks"}),i.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Display daily streak counters"})]}),i.jsx(an,{checked:t.showStreaks,onCheckedChange:b=>t.set({showStreaks:b})})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 rounded-2xl bg-neutral-50/50 dark:bg-neutral-800/30",children:[i.jsxs("div",{children:[i.jsx("label",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Achievements"}),i.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:"Enable achievement notifications"})]}),i.jsx(an,{checked:t.achievements,onCheckedChange:b=>t.set({achievements:b})})]})]}),i.jsx("div",{className:"pt-6 border-t border-neutral-200/60 dark:border-neutral-700/60",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs(K,{onClick:p,variant:"outline",className:`rounded-2xl border-2 bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/90 dark:to-neutral-900/80 \r
														backdrop-blur-md hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 \r
														border-neutral-200/60 dark:border-neutral-600/40 hover:border-blue-200/60 dark:hover:border-indigo-400/30\r
														shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95\r
														text-neutral-700 dark:text-neutral-200 hover:text-blue-700 dark:hover:text-indigo-300\r
														font-medium tracking-wide h-12`,children:[i.jsx(ql,{className:"mr-2 text-blue-500 dark:text-blue-400",size:16}),"Reset Streaks"]}),i.jsxs(K,{onClick:m,variant:"outline",className:`rounded-2xl border-2 bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/90 dark:to-neutral-900/80 \r
														backdrop-blur-md hover:from-red-50/90 hover:to-pink-50/80 dark:hover:from-red-950/40 dark:hover:to-pink-950/30 \r
														border-neutral-200/60 dark:border-neutral-600/40 hover:border-red-200/60 dark:hover:border-red-400/30\r
														shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95\r
														text-neutral-700 dark:text-neutral-200 hover:text-red-700 dark:hover:text-red-300\r
														font-medium tracking-wide h-12`,children:[i.jsx(Y1,{className:"mr-2 text-red-500 dark:text-red-400",size:16}),"Reset All Progress"]})]})})]})}),i.jsx(Ne,{id:"data",className:"border-0 bg-white/80 dark:bg-neutral-900/60 rounded-3xl shadow-xl backdrop-blur-md",children:i.jsxs(je,{className:"p-8",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-indigo-100 to-purple-100 dark:from-indigo-900/30 dark:to-purple-900/30",children:i.jsx("span",{className:"text-xl",children:""})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-neutral-900 dark:text-neutral-100",children:"Data Management"}),i.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"Export, import, or reset your Academic Quest data"})]})]}),i.jsx("div",{className:"p-6 rounded-2xl bg-gradient-to-br from-neutral-50/80 to-neutral-100/60 dark:from-neutral-800/50 dark:to-neutral-900/40 border border-neutral-200/60 dark:border-neutral-700/60 mb-6",children:i.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[i.jsx("div",{className:"p-2 rounded-xl bg-blue-100 dark:bg-blue-900/30",children:i.jsx(jp,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-medium text-neutral-900 dark:text-neutral-100",children:"What's included in backups?"}),i.jsx("p",{className:"text-sm text-neutral-600 dark:text-neutral-400 mt-1",children:"Export includes all your data: settings, theme preferences, academic plans, schedules, tasks, scholarships, textbooks, study sessions, and gamification progress as a JSON file."})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(K,{variant:"outline",onClick:u,className:`rounded-2xl border-2 bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/90 dark:to-neutral-900/80 \r
													backdrop-blur-md hover:from-green-50/90 hover:to-emerald-50/80 dark:hover:from-green-950/40 dark:hover:to-emerald-950/30 \r
													border-neutral-200/60 dark:border-neutral-600/40 hover:border-green-200/60 dark:hover:border-emerald-400/30\r
													shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95\r
													text-neutral-700 dark:text-neutral-200 hover:text-green-700 dark:hover:text-emerald-300\r
													font-medium tracking-wide h-14`,children:[i.jsx(jp,{size:18,className:"mr-2"}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-medium",children:"Export"}),i.jsx("div",{className:"text-xs opacity-75",children:"Download backup"})]})]}),i.jsxs(K,{variant:"outline",onClick:h,className:`rounded-2xl border-2 bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/90 dark:to-neutral-900/80 \r
													backdrop-blur-md hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 \r
													border-neutral-200/60 dark:border-neutral-600/40 hover:border-blue-200/60 dark:hover:border-indigo-400/30\r
													shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95\r
													text-neutral-700 dark:text-neutral-200 hover:text-blue-700 dark:hover:text-indigo-300\r
													font-medium tracking-wide h-14`,children:[i.jsx(Ak,{size:18,className:"mr-2"}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-medium",children:"Import"}),i.jsx("div",{className:"text-xs opacity-75",children:"Restore backup"})]})]}),i.jsxs(K,{variant:"outline",onClick:x,className:`rounded-2xl border-2 bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/90 dark:to-neutral-900/80 \r
													backdrop-blur-md hover:from-red-50/90 hover:to-pink-50/80 dark:hover:from-red-950/40 dark:hover:to-pink-950/30 \r
													border-neutral-200/60 dark:border-neutral-600/40 hover:border-red-200/60 dark:hover:border-red-400/30\r
													shadow-lg hover:shadow-xl transition-all duration-200 hover:scale-105 active:scale-95\r
													text-neutral-700 dark:text-neutral-200 hover:text-red-700 dark:hover:text-red-300\r
													font-medium tracking-wide h-14`,children:[i.jsx(Un,{size:18,className:"mr-2"}),i.jsxs("div",{className:"text-left",children:[i.jsx("div",{className:"font-medium",children:"Clear All"}),i.jsx("div",{className:"text-xs opacity-75",children:" Reset everything"})]})]})]})]})})]})})]})]})]})}function OB(){const r=$s(),[e,t]=P.useState(()=>r.pomodoroPosition!=="draggable"?r.pomodoroPosition:localStorage.getItem("aq:pomo-corner")||"br");P.useEffect(()=>{r.pomodoroPosition==="draggable"&&localStorage.setItem("aq:pomo-corner",e)},[e,r.pomodoroPosition]),P.useEffect(()=>{r.pomodoroPosition!=="draggable"&&t(r.pomodoroPosition)},[r.pomodoroPosition]),P.useEffect(()=>{const s=c=>{c.key==="aq:pomo-corner"&&c.newValue&&r.pomodoroPosition==="draggable"&&t(c.newValue)},l=c=>{c.detail?.corner&&r.pomodoroPosition==="draggable"&&t(c.detail.corner)};return window.addEventListener("storage",s),window.addEventListener("pomo-show",l),()=>{window.removeEventListener("storage",s),window.removeEventListener("pomo-show",l)}},[r.pomodoroPosition]);const n=P.useMemo(()=>{const s={position:"fixed",zIndex:50};switch(e){case"tl":return{...s,top:16,left:16};case"tr":return{...s,top:16,right:16};case"bl":return{...s,bottom:16,left:16};case"br":return{...s,bottom:16,right:16}}},[e]);return{corner:e,setCorner:t,style:n}}function RB(){const r=_r(),e=$s(),t=Gn[r.palette],{setCorner:n,style:s}=OB(),l=rh(Z=>Z.add),c=Ft(Z=>Z.years),u=Ft(Z=>Z.selectedYearId),[h,m]=P.useState(()=>localStorage.getItem("aq:pomo-running")==="true"),[p,x]=P.useState(()=>{const Z=localStorage.getItem("aq:pomo-seconds");return Z?Number(Z):1500}),[b,v]=P.useState(()=>localStorage.getItem("aq:pomo-start")),[k,w]=P.useState(()=>Number(localStorage.getItem("aq:pomo-work"))||25),[S,N]=P.useState(()=>Number(localStorage.getItem("aq:pomo-short"))||5),[T,C]=P.useState(()=>Number(localStorage.getItem("aq:pomo-long"))||15),[D,A]=P.useState(!1),[Y,I]=P.useState(!1),[$,ae]=P.useState(!1);P.useEffect(()=>{localStorage.setItem("aq:pomo-work",String(k))},[k]),P.useEffect(()=>{localStorage.setItem("aq:pomo-short",String(S))},[S]),P.useEffect(()=>{localStorage.setItem("aq:pomo-long",String(T))},[T]),P.useEffect(()=>{localStorage.setItem("aq:pomo-running",String(h))},[h]),P.useEffect(()=>{localStorage.setItem("aq:pomo-seconds",String(p))},[p]),P.useEffect(()=>{b?localStorage.setItem("aq:pomo-start",b):localStorage.removeItem("aq:pomo-start")},[b]);const le=P.useCallback((Z,oe)=>{const Le=u||c[0]?.id,Je=c.find(zt=>zt.id===Le)?.terms?.[0]?.id,it=Math.round((oe.getTime()-Z.getTime())/6e4);l({id:crypto.randomUUID(),yearId:Le,termId:Je,courseId:void 0,source:"pomodoro",start:Z.toISOString(),end:oe.toISOString(),durationMin:Math.max(1,it),note:"Pomodoro session"}),v(null),localStorage.removeItem("aq:pomo-start")},[u,c,l]);P.useEffect(()=>{const Z=localStorage.getItem("aq:pomo-start");if(localStorage.getItem("aq:pomo-running")==="true"&&Z){const Le=new Date(Z),Je=new Date,it=Math.floor((Je.getTime()-Le.getTime())/1e3),zt=Number(localStorage.getItem("aq:pomo-seconds"))||k*60,Yt=Math.max(0,zt-it);Yt>0?(x(Yt),m(!0)):(m(!1),x(0),le(Le,Je))}},[k,le]),P.useEffect(()=>{if(!h)return;const Z=setInterval(()=>x(oe=>Math.max(0,oe-1)),1e3);return()=>clearInterval(Z)},[h]),P.useEffect(()=>{if(!h||p>0)return;m(!1);const Z=b||localStorage.getItem("aq:pomo-start"),oe=new Date,Le=Z?new Date(Z):new Date(oe.getTime()-k*60*1e3);le(Le,oe)},[h,p,b,k,le]);const ie=Math.floor(p/60),he=p%60,ye=P.useRef(null),fe=P.useRef(null),[ve,B]=P.useState(!1),[W,L]=P.useState(!1);P.useEffect(()=>{const Z=ye.current,oe=fe.current;if(!Z||!oe||e.pomodoroPosition!=="draggable")return;let Le=0,Je=0,it=0,zt=0,Yt=!1;const Et=hr=>{Yt=!0,B(!0);const St=oe.getBoundingClientRect();it=St.left,zt=St.top,Le=hr.clientX,Je=hr.clientY,document.addEventListener("mousemove",te),document.addEventListener("mouseup",hn),hr.preventDefault(),hr.stopPropagation()},te=hr=>{if(!Yt||!oe)return;const St=hr.clientX-Le,mr=hr.clientY-Je;oe.style.visibility="visible",oe.style.display="block",oe.style.transition="none",oe.style.left=`${it+St}px`,oe.style.top=`${zt+mr}px`,oe.style.right="auto",oe.style.bottom="auto"},hn=()=>{if(!Yt||!oe)return;Yt=!1,B(!1);const hr=window.innerWidth,St=window.innerHeight,mr=oe.getBoundingClientRect(),Qe=[{c:"tl",x:16,y:16},{c:"tr",x:hr-mr.width-16,y:16},{c:"bl",x:16,y:St-mr.height-16},{c:"br",x:hr-mr.width-16,y:St-mr.height-16}];let Wr=Qe[0],Wn=1/0;Qe.forEach($t=>{const Nt=Math.hypot(mr.left-$t.x,mr.top-$t.y);Nt<Wn&&(Wr=$t,Wn=Nt)}),n(Wr.c),L(!0),setTimeout(()=>L(!1),180),oe.style.transition="",oe.style.left="",oe.style.top="",oe.style.right="",oe.style.bottom="",oe.style.visibility="visible",oe.style.display="block",document.removeEventListener("mousemove",te),document.removeEventListener("mouseup",hn)};return Z.addEventListener("mousedown",Et),()=>{Z.removeEventListener("mousedown",Et),document.removeEventListener("mousemove",te),document.removeEventListener("mouseup",hn)}},[n,e.pomodoroPosition]);const H={background:"linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.70))",border:"1px solid rgba(0,0,0,0.08)",borderRadius:24,padding:"8px 10px",boxShadow:"0 8px 20px rgba(0,0,0,0.08)",backdropFilter:"blur(8px)"},Q={background:"linear-gradient(180deg, rgba(28,28,28,0.85), rgba(22,22,22,0.60))",border:"1px solid rgba(255,255,255,0.08)"},ue=window.matchMedia("(prefers-color-scheme: dark)").matches,Ae=r.mode==="dark"||r.mode==="system"&&ue,me=h||$,be=!e.pomodoroAutoHide||h||$,_e=(()=>{switch(e.pomodoroSize){case"small":return .8;case"large":return 1.2;default:return 1}})(),ne=(()=>{const oe=e.pomodoroPosition==="draggable"?224:204;return{collapsed:`${88*_e}px`,expanded:`${oe*_e}px`}})(),ge={...s,transition:ve?"none":"all 180ms cubic-bezier(.2,.8,.2,1)",transform:W?"scale(1.03)":"scale(1.0)",userSelect:"none",touchAction:"none",pointerEvents:"auto",visibility:be?"visible":"hidden",display:be?"block":"none",opacity:be?1:0};return i.jsxs("div",{ref:fe,style:ge,children:[i.jsx("div",{className:"group select-none transition-all duration-200 overflow-hidden",style:{...H,...Ae?Q:{},width:me?ne.expanded:ne.collapsed,transform:`scale(${_e})`},children:i.jsxs("div",{className:`flex items-center ${me?"justify-between":"gap-2"}`,children:[e.pomodoroPosition==="draggable"&&i.jsx("div",{ref:ye,className:"cursor-grab active:cursor-grabbing flex-shrink-0",style:{cursor:ve?"grabbing":"grab"},children:i.jsx(n3,{className:"h-3.5 w-3.5 opacity-60"})}),i.jsx("button",{className:"h-8 w-8 rounded-xl focus:outline-none flex-shrink-0 cursor-pointer",title:"Pomodoro",onClick:()=>ae(Z=>!Z),style:{background:`linear-gradient(135deg, ${t[0]}dd, ${t[3]}dd)`,border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:"#ffffff",fontSize:`${14*_e}px`,fontWeight:"bold"},children:""}),me&&i.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[i.jsxs("div",{className:"font-semibold tabular-nums text-center",style:{minWidth:`${48*_e}px`,fontSize:`${14*_e}px`},children:[String(ie).padStart(2,"0"),":",String(he).padStart(2,"0")]}),(h||p<k*60)&&i.jsx("button",{className:"rounded-xl focus:outline-none flex-shrink-0 cursor-pointer hover:opacity-70 transition-opacity",onClick:()=>m(!h),style:{width:`${24*_e}px`,height:`${24*_e}px`,background:"transparent",border:"none",display:"flex",alignItems:"center",justifyContent:"center",color:Ae?t[1]:t[3],padding:0},title:h?"Pause":"Resume",children:h?i.jsx(Tp,{style:{width:`${14*_e}px`,height:`${14*_e}px`}}):i.jsx(Mp,{style:{width:`${14*_e}px`,height:`${14*_e}px`}})}),i.jsx(K,{size:"sm",className:"rounded-xl px-3",style:{height:`${32*_e}px`,fontSize:`${12*_e}px`},variant:"outline",onClick:()=>{A(!0)},children:h?"Running":"Open"})]})]})}),i.jsx(wr,{open:D,onOpenChange:A,children:i.jsxs(lr,{className:"max-w-lg border-0 shadow-2xl rounded-3xl bg-gradient-to-br from-white to-slate-50/90 dark:from-neutral-900 dark:to-neutral-800/90 backdrop-blur-lg",children:[i.jsx(ir,{className:"pb-6",children:i.jsxs(cr,{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl",children:i.jsx(K1,{size:18,className:"text-white"})}),"Pomodoro Timer"]})}),i.jsxs("div",{className:"space-y-6 px-2",children:[i.jsxs("div",{className:"text-center bg-gradient-to-br from-neutral-50 to-neutral-100 dark:from-neutral-800/50 dark:to-neutral-700/50 rounded-3xl p-6 border border-neutral-200/50 dark:border-neutral-600/50",children:[i.jsxs("div",{className:"text-7xl font-extrabold tabular-nums mb-4 bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:[String(ie).padStart(2,"0"),":",String(he).padStart(2,"0")]}),i.jsxs("div",{className:"flex gap-2 justify-center flex-wrap",children:[i.jsxs(K,{className:"rounded-2xl border-0 px-4 py-2.5 font-semibold shadow-lg hover:shadow-xl transition-all duration-200 text-sm",style:{background:"linear-gradient(135deg, #059669, #0891b2)",color:"white"},onClick:()=>{x(k*60),m(!0),v(new Date().toISOString())},children:[i.jsx(Mp,{className:"h-3.5 w-3.5 mr-1.5"}),"Start Work"]}),i.jsxs(K,{className:"rounded-2xl px-4 py-2.5 font-semibold shadow-md hover:shadow-lg transition-all duration-200 text-sm",variant:"outline",style:{borderColor:"#e5e7eb",color:"#6b7280",background:"rgba(255,255,255,0.8)"},onClick:()=>m(!1),children:[i.jsx(Tp,{className:"h-3.5 w-3.5 mr-1.5"}),"Pause"]}),i.jsxs(K,{className:"rounded-2xl px-4 py-2.5 font-semibold shadow-md hover:shadow-lg transition-all duration-200 text-sm",variant:"outline",style:{borderColor:"#e5e7eb",color:"#6b7280",background:"rgba(255,255,255,0.8)"},onClick:()=>{x(k*60),m(!1),v(null)},children:[i.jsx(Qc,{className:"h-3.5 w-3.5 mr-1.5"}),"Reset"]})]})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Work (min)"}),i.jsx(Ee,{type:"number",min:1,value:k,onChange:Z=>w(Math.max(1,Number(Z.target.value)||0)),className:"rounded-xl border-neutral-200 dark:border-neutral-700 focus:border-indigo-500 focus:ring-indigo-500 text-sm h-10"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Short Break"}),i.jsx(Ee,{type:"number",min:1,value:S,onChange:Z=>N(Math.max(1,Number(Z.target.value)||0)),className:"rounded-xl border-neutral-200 dark:border-neutral-700 focus:border-indigo-500 focus:ring-indigo-500 text-sm h-10"})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Long Break"}),i.jsx(Ee,{type:"number",min:1,value:T,onChange:Z=>C(Math.max(1,Number(Z.target.value)||0)),className:"rounded-xl border-neutral-200 dark:border-neutral-700 focus:border-indigo-500 focus:ring-indigo-500 text-sm h-10"})]})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(K,{className:"rounded-2xl px-3 py-2 font-semibold flex-1 shadow-md hover:shadow-lg transition-all duration-200 text-sm",variant:"outline",style:{borderColor:"#0891b2",color:"#0891b2",background:"rgba(8, 145, 178, 0.1)"},onClick:()=>x(S*60),children:"Short Break"}),i.jsx(K,{className:"rounded-2xl px-3 py-2 font-semibold flex-1 shadow-md hover:shadow-lg transition-all duration-200 text-sm",variant:"outline",style:{borderColor:"#7c3aed",color:"#7c3aed",background:"rgba(124, 58, 237, 0.1)"},onClick:()=>x(T*60),children:"Long Break"})]}),i.jsx("div",{className:"border-t border-neutral-200/50 dark:border-neutral-700/50 pt-4",children:i.jsx(K,{className:"rounded-2xl px-4 py-2 font-semibold w-full shadow-md hover:shadow-lg transition-all duration-200 text-sm",variant:"outline",style:{borderColor:"#e5e7eb",color:"#6b7280",background:"rgba(255,255,255,0.8)"},onClick:()=>I(!0),children:"Log Study Session"})})]}),i.jsx(Sr,{className:"pt-4",children:i.jsx(K,{className:"rounded-2xl px-6 py-2 font-semibold shadow-md hover:shadow-lg transition-all duration-200 text-sm",variant:"outline",style:{borderColor:"#e5e7eb",color:"#6b7280",background:"rgba(255,255,255,0.8)"},onClick:()=>A(!1),children:"Close"})})]})}),i.jsx(wr,{open:Y,onOpenChange:I,children:i.jsxs(lr,{className:"max-w-lg border-0 shadow-2xl rounded-3xl bg-gradient-to-br from-white to-slate-50/90 dark:from-neutral-900 dark:to-neutral-800/90 backdrop-blur-lg",children:[i.jsx(ir,{className:"pb-6",children:i.jsxs(cr,{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent flex items-center gap-3",children:[i.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl",children:i.jsx(Mg,{size:18,className:"text-white"})}),"Log Study Session"]})}),i.jsx(zB,{onClose:()=>I(!1)})]})})]})}function zB({onClose:r}){const e=rh(C=>C.add),t=Ft(C=>C.years),s=Ft(C=>C.selectedYearId)||t[0]?.id,l=t.find(C=>C.id===s),c=P.useMemo(()=>l?.terms||[],[l?.terms]),[u,h]=P.useState(()=>c[0]?.id),[m,p]=P.useState(void 0),[x,b]=P.useState(()=>new Date().toISOString().slice(0,10)),[v,k]=P.useState(1),[w,S]=P.useState("");P.useEffect(()=>{!u&&c.length>0&&h(c[0].id)},[c,u]);const N=P.useMemo(()=>c.find(D=>D.id===u)?.courses||[],[c,u]);P.useEffect(()=>{p(void 0)},[u]);const T=()=>{if(v<=0)return;const C=Math.round(v*60),D=new Date(`${x}T12:00:00`),A=new Date(D.getTime()-C*6e4);e({id:crypto.randomUUID(),yearId:s,termId:u,courseId:m,source:"manual",start:A.toISOString(),end:D.toISOString(),durationMin:C,note:w||`${v} hour${v!==1?"s":""} of study`}),r()};return i.jsxs("div",{className:"space-y-6 px-2",children:[i.jsxs("div",{className:"text-center bg-gradient-to-br from-neutral-50 to-neutral-100 dark:from-neutral-800/50 dark:to-neutral-700/50 rounded-3xl p-6 border border-neutral-200/50 dark:border-neutral-600/50",children:[i.jsx("div",{className:"text-xl font-bold mb-2 bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Add Study Session"}),i.jsx("div",{className:"text-sm text-neutral-600 dark:text-neutral-400",children:"Record your learning progress manually"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Date"}),i.jsx(Ee,{type:"date",className:"rounded-xl border-neutral-200 dark:border-neutral-700 focus:border-indigo-500 focus:ring-indigo-500 text-sm h-10",value:x,onChange:C=>b(C.target.value)})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Hours Studied"}),i.jsx(Ee,{type:"number",min:.25,step:.25,className:"rounded-xl border-neutral-200 dark:border-neutral-700 focus:border-indigo-500 focus:ring-indigo-500 text-sm h-10",value:v,onChange:C=>k(Math.max(.25,Number(C.target.value)||1)),placeholder:"e.g., 2.5"})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Term"}),i.jsxs(yt,{value:u,onValueChange:C=>h(C),children:[i.jsx(gt,{className:"rounded-xl border-neutral-200 dark:border-neutral-700 focus:border-indigo-500 focus:ring-indigo-500 h-10",children:i.jsx(vt,{placeholder:"Select term"})}),i.jsx(xt,{className:"rounded-xl border-neutral-200 dark:border-neutral-700",children:c.map(C=>i.jsx(Oe,{value:C.id,children:C.name},C.id))})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Course (optional)"}),i.jsxs(yt,{value:m||"general",onValueChange:C=>p(C==="general"?void 0:C),children:[i.jsx(gt,{className:"rounded-xl border-neutral-200 dark:border-neutral-700 focus:border-indigo-500 focus:ring-indigo-500 h-10",children:i.jsx(vt,{placeholder:"Pick course"})}),i.jsxs(xt,{className:"rounded-xl border-neutral-200 dark:border-neutral-700",children:[i.jsx(Oe,{value:"general",children:"General Study"}),N.map(C=>{const D=C.code&&C.name?`${C.code} - ${C.name}`:C.code||C.name||"Course";return i.jsx(Oe,{value:C.id,children:D},C.id)})]})]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-xs font-medium text-neutral-700 dark:text-neutral-300",children:"Notes (optional)"}),i.jsx(Ee,{placeholder:"What did you study?",className:"rounded-xl border-neutral-200 dark:border-neutral-700 focus:border-indigo-500 focus:ring-indigo-500 text-sm h-10",value:w,onChange:C=>S(C.target.value)})]}),i.jsxs(Sr,{className:"gap-3 pt-4",children:[i.jsx(K,{className:"rounded-2xl px-6 py-2 font-semibold shadow-md hover:shadow-lg transition-all duration-200 text-sm",variant:"outline",style:{borderColor:"#e5e7eb",color:"#6b7280",background:"rgba(255,255,255,0.8)"},onClick:r,children:"Cancel"}),i.jsxs(K,{className:"rounded-2xl px-6 py-2 font-semibold shadow-lg hover:shadow-xl transition-all duration-200 text-sm",style:{background:"linear-gradient(135deg, #4f46e5, #7c3aed)",color:"white",border:"none"},onClick:T,disabled:v<=0,children:[i.jsx(Mg,{className:"h-3.5 w-3.5 mr-1.5"}),"Log ",v," Hour",v!==1?"s":""]})]})]})}function Ia({children:r}){const e=_r(),t=Gn[e.palette],[n,s]=P.useState(e.accent);P.useEffect(()=>s(e.accent),[e.accent]);const l=P.useMemo(()=>{const c=Math.min(.35,Math.max(.12,n/260)),u=Math.round(c*255).toString(16).padStart(2,"0");return{position:"fixed",left:"50%",transform:"translateX(-50%)",bottom:"-15vh",width:"120vw",height:"50vh",backgroundImage:`radial-gradient(closest-side at 50% 50%, ${t[2]+u} 0%, transparent 70%)`,pointerEvents:"none",zIndex:0,filter:"blur(12px)"}},[n,t]);return P.useEffect(()=>{const c=window.matchMedia("(prefers-color-scheme: dark)").matches,u=e.mode==="dark"||e.mode==="system"&&c;document.documentElement.classList.toggle("dark",u);const h={Inter:"'Inter', ui-sans-serif, system-ui, sans-serif",Poppins:"'Poppins', ui-sans-serif, system-ui, sans-serif",Nunito:"'Nunito', ui-sans-serif, system-ui, sans-serif",Outfit:"'Outfit', ui-sans-serif, system-ui, sans-serif",Roboto:"Roboto, ui-sans-serif, system-ui, sans-serif",Lato:"Lato, ui-sans-serif, system-ui, sans-serif",Montserrat:"Montserrat, ui-sans-serif, system-ui, sans-serif","Source Sans 3":"'Source Sans 3', ui-sans-serif, system-ui, sans-serif"};document.body.style.fontFamily=h[e.font]||h.Inter},[e.mode,e.font]),P.useEffect(()=>{const c=window.matchMedia("(prefers-color-scheme: dark)").matches,u=e.mode==="dark"||e.mode==="system"&&c,h=Math.min(.35,Math.max(.12,n/260)),m=Math.round(h*255).toString(16).padStart(2,"0"),p=Math.max(.28,h),x=Math.round(p*255).toString(16).padStart(2,"0"),b=u?"linear-gradient(135deg, #0b0f19 0%, #0a0a0a 70%)":"linear-gradient(135deg, #ffffff 0%, #f8fbff 65%)",v=`radial-gradient(circle at 10% 0%, ${t[0]}${m} 0%, transparent 40%)`,k=`radial-gradient(circle at 90% 10%, ${t[3]}${m} 0%, transparent 45%)`,w=`radial-gradient(circle at 50% 120%, ${t[2]}${x} 0%, transparent 60%)`;return document.body.style.backgroundImage=`${v}, ${k}, ${w}, ${b}`,document.body.style.backgroundRepeat="no-repeat, no-repeat, no-repeat, no-repeat",document.body.style.backgroundAttachment="fixed, fixed, scroll, fixed",document.body.style.backgroundPosition="10% 0%, 90% 10%, 50% 100%, 0 0",document.body.style.backgroundSize="auto, auto, 120vw 60vh, auto",document.body.style.backgroundColor=u?"#0a0a0a":"#ffffff",document.documentElement.style.minHeight="100%",document.body.style.minHeight="100%",()=>{}},[e.mode,e.palette,t,n]),i.jsxs(i.Fragment,{children:[i.jsx("div",{"aria-hidden":!0,style:l}),i.jsx("div",{style:{position:"relative",zIndex:1},children:r}),i.jsx(RB,{})]})}function LB(){const r=_r(),e=Gn[r.palette],[t,n]=P.useState(r.accent);return P.useEffect(()=>n(r.accent),[r.accent]),P.useMemo(()=>{const s=Math.min(.35,Math.max(.12,t/260)),l=Math.round(s*255).toString(16).padStart(2,"0"),c=window.matchMedia("(prefers-color-scheme: dark)").matches,h=r.mode==="dark"||r.mode==="system"&&c?"linear-gradient(135deg, #0b0f19 0%, #0a0a0a 70%)":"linear-gradient(135deg, #ffffff 0%, #f8fbff 65%)",m=`radial-gradient(circle at 8% 0%, ${e[0]}${l} 0%, transparent 40%)`,p=`radial-gradient(circle at 92% 12%, ${e[3]}${l} 0%, transparent 45%)`,x=`radial-gradient(circle at 50% 120%, ${e[2]}${l} 0%, transparent 55%)`;return{backgroundImage:`${m}, ${p}, ${x}, ${h}`,backgroundRepeat:"no-repeat, no-repeat, no-repeat, no-repeat",backgroundAttachment:"fixed, fixed, scroll, fixed",backgroundPosition:"8% 0%, 92% 12%, 50% 100%, 0 0"}},[t,r.mode,e])}function BB(){const r=LB(),e=Ft(H=>H.years),t=Ft(H=>H.selectedYearId),[n,s]=P.useState(()=>t||e[0]?.id),[l,c]=P.useState(()=>e[0]?.terms[0]?.id);P.useEffect(()=>{if(!e.length)return;const H=e.find(ue=>ue.id===n)||e[0],Q=H.terms.find(ue=>ue.id===l)||H.terms[0];H.id!==n&&s(H.id),Q?.id!==l&&c(Q?.id)},[e,n,l]);const u=P.useMemo(()=>e.find(H=>H.id===n),[e,n]),h=P.useMemo(()=>u?.terms.find(H=>H.id===l),[u,l]),m=P.useMemo(()=>(h?.courses||[]).filter(H=>H.code?.trim()||H.name?.trim()),[h]),p=P.useCallback(H=>{if(!H)return null;let Q=m.find(ue=>ue.id===H);return Q||(Q=m.find(ue=>ue.code?.trim().toUpperCase()===H.toUpperCase())),Q||(Q=m.find(ue=>ue.name?.trim()===H)),Q},[m]),x=P.useCallback(H=>{const Q=H.code?.trim(),ue=H.name?.trim();return Q&&ue?ue.length<=15?`${Q}  ${ue}`:`${Q}  ${ue.substring(0,12)}...`:Q||ue||"Untitled"},[]),b=_n(H=>H.tasks),v=_n(H=>H.addTask),k=_n(H=>H.updateTask),w=_n(H=>H.removeTask),S=u&&h?`${u.id}:${h.id}`:"",N=P.useMemo(()=>u4(b,n,l),[b,n,l]),[T,C]=P.useState(!1),D=Math.max(0,20-N.length),[A,Y]=P.useState(new Set);P.useEffect(()=>{Y(new Set)},[S]);function I(H,Q){if(!u||!h||A.has(H))return;const ue={id:crypto.randomUUID(),yearId:u.id,termId:h.id,courseId:Q.courseId,title:Q.title||"",status:Q.status||"Not Started",dueDate:Q.dueDate,dueTime:Q.dueTime,grade:Q.grade};v(ue);const Ae=new Set(A);Ae.add(H),Y(Ae)}const $=P.useMemo(()=>Array.from({length:D}).map((H,Q)=>({id:`ph:${Q}`,courseId:"",title:"",status:"Not Started",dueDate:"",dueTime:"",grade:""})),[D]),ae=P.useMemo(()=>{const H=[...N];return T&&H.sort((Q,ue)=>{const Ae=L(Q.dueDate),me=L(ue.dueDate);if(Ae===void 0&&me===void 0)return 0;if(Ae===void 0)return 1;if(me===void 0)return-1;const be=Ae-me;if(be!==0)return be;const $e={"Not Started":0,"In Progress":1,Completed:2};return $e[Q.status]-$e[ue.status]}),[...H,...$]},[N,$,T]),le=N.filter(H=>(H.title?.trim()?.length??0)>0),ie=le.filter(H=>H.status==="Completed").length,he=le.length?Math.round(ie/le.length*100):0,ye=[{name:"done",value:he},{name:"left",value:100-he}];function fe(){!u||!h||v({id:crypto.randomUUID(),yearId:u.id,termId:h.id,courseId:"",title:"",status:"Not Started",dueDate:void 0,dueTime:void 0,grade:void 0})}const[ve,B]=P.useState(!1);function W(H,Q){s(H),c(Q),B(!1)}function L(H){if(!H)return;const Q=new Date,ue=new Date(Q.getFullYear(),Q.getMonth(),Q.getDate()),Ae=new Date(H),be=(new Date(Ae.getFullYear(),Ae.getMonth(),Ae.getDate()).getTime()-ue.getTime())/(1e3*60*60*24);return Math.round(be)}return i.jsx("div",{className:"min-h-screen w-full",style:r,children:i.jsxs("div",{className:"max-w-[1400px] mx-auto px-4 py-7 space-y-6",children:[i.jsxs("div",{className:"flex items-start justify-between gap-4",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Mn,{className:"h-5 w-5"}),i.jsx("h1",{className:"text-2xl font-bold",children:"Task Tracker"})]}),i.jsx("div",{className:"mt-2 min-w-0",children:i.jsx(oi,{active:"tasks"})})]}),i.jsx(Ne,{className:`shrink-0 border-0 shadow-xl rounded-3xl bg-white/80 dark:bg-neutral-900/60 backdrop-blur-xl \r
                          ring-1 ring-gray-200/50 dark:ring-gray-600/50 w-[176px] sm:w-[200px] md:w-[220px] \r
                          hover:shadow-2xl transition-all duration-300`,children:i.jsxs(je,{className:"p-3 sm:p-3 md:p-4",children:[i.jsx("div",{className:"h-28 sm:h-28 md:h-32",children:i.jsx(la,{width:"100%",height:"100%",children:i.jsxs(Xf,{children:[i.jsx(Qf,{dataKey:"value",data:ye,innerRadius:36,outerRadius:48,startAngle:90,endAngle:-270,paddingAngle:2,cornerRadius:3,stroke:"transparent",children:ye.map((H,Q)=>i.jsx(Jf,{fill:Q===0?"hsl(var(--primary))":"#e5e7eb"},Q))}),i.jsx(ia,{})]})})}),i.jsxs("div",{className:"text-center text-sm mt-1 font-semibold text-gray-700 dark:text-gray-200",children:[he,"% Completed"]})]})})]}),i.jsxs(Ne,{className:`border-0 shadow-xl rounded-3xl bg-white/80 dark:bg-neutral-900/60 backdrop-blur-xl \r
                        ring-1 ring-gray-200/50 dark:ring-gray-600/50 overflow-hidden hover:shadow-2xl transition-all duration-300`,children:[i.jsxs(qr,{className:`flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between bg-gradient-to-r \r
                                from-white/50 to-gray-50/30 dark:from-neutral-800/50 dark:to-neutral-900/30 backdrop-blur-md\r
                                border-b border-gray-200/60 dark:border-gray-600/40`,children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Mn,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"}),u&&h?i.jsxs("span",{className:"font-semibold text-gray-800 dark:text-gray-100",children:[u.label,"  ",h.name]}):i.jsx("span",{className:"font-semibold text-gray-800 dark:text-gray-100",children:"Current Term"})]}),i.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:new Date().toLocaleDateString(void 0,{weekday:"short",month:"short",day:"numeric",year:"numeric"})})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs(wr,{open:ve,onOpenChange:B,children:[i.jsx(K,{variant:"outline",className:`rounded-2xl bg-gradient-to-r from-white/95 to-white/85 dark:from-gray-800/80 dark:to-gray-900/70 \r
                            text-gray-700 dark:text-gray-200 hover:from-cyan-50/90 hover:to-blue-50/80 dark:hover:from-cyan-950/40 dark:hover:to-blue-950/30 \r
                            hover:text-cyan-700 dark:hover:text-cyan-300 shadow-md hover:shadow-lg backdrop-blur-sm \r
                            border border-gray-200/60 dark:border-gray-600/40 hover:border-cyan-200/60 dark:hover:border-cyan-400/30\r
                            transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0`,onClick:()=>B(!0),children:u&&h?`${u.label}  ${h.name}`:"Select Term"}),i.jsxs(lr,{className:`max-w-md rounded-3xl bg-white/95 dark:bg-neutral-900/95 backdrop-blur-xl border-0 shadow-2xl \r
                                          ring-1 ring-gray-200/50 dark:ring-gray-600/50`,children:[i.jsx(ir,{children:i.jsx(cr,{className:"text-xl font-semibold text-gray-800 dark:text-gray-100",children:"Select School Year  Term"})}),i.jsx("div",{className:"space-y-4 max-h-[60vh] overflow-auto",children:e.map(H=>i.jsxs("div",{className:`rounded-2xl bg-gradient-to-r from-white/60 to-gray-50/40 dark:from-gray-800/60 dark:to-gray-900/40 \r
                                                backdrop-blur-md border border-gray-200/60 dark:border-gray-600/40 p-4 shadow-md`,children:[i.jsx("div",{className:"text-sm font-semibold mb-3 text-gray-700 dark:text-gray-200",children:H.label}),i.jsx("div",{className:"flex flex-wrap gap-2",children:H.terms.map(Q=>i.jsx(K,{variant:H.id===n&&Q.id===l?"default":"outline",className:`rounded-2xl transition-all duration-300 font-medium tracking-wide
                                ${H.id===n&&Q.id===l?"bg-gradient-to-r from-cyan-600/90 to-blue-600/90 dark:from-cyan-500/90 dark:to-blue-500/90 text-white shadow-lg ring-2 ring-cyan-200/50 dark:ring-cyan-400/30 backdrop-blur-md hover:from-cyan-700/95 hover:to-blue-700/95 dark:hover:from-cyan-400/95 dark:hover:to-blue-400/95":"bg-gradient-to-r from-white/80 to-gray-50/70 dark:from-gray-800/80 dark:to-gray-900/70 text-gray-700 dark:text-gray-200 hover:from-cyan-50/90 hover:to-blue-50/80 dark:hover:from-cyan-950/40 dark:hover:to-blue-950/30 hover:text-cyan-700 dark:hover:text-cyan-300 shadow-md hover:shadow-lg backdrop-blur-md border border-gray-200/60 dark:border-gray-600/40 hover:border-cyan-200/60 dark:hover:border-cyan-400/30"}
                                hover:scale-102 active:scale-98 hover:-translate-y-0.5 active:translate-y-0`,onClick:()=>W(H.id,Q.id),children:Q.name},Q.id))})]},H.id))})]})]}),i.jsxs(K,{size:"sm",className:`rounded-2xl bg-gradient-to-r from-green-600/90 to-emerald-600/90 dark:from-green-500/90 dark:to-emerald-500/90 \r
                          text-white shadow-lg ring-2 ring-green-200/50 dark:ring-green-400/30 backdrop-blur-sm border-0\r
                          hover:from-green-700/95 hover:to-emerald-700/95 dark:hover:from-green-400/95 dark:hover:to-emerald-400/95\r
                          transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0 \r
                          font-medium tracking-wide`,onClick:fe,children:[i.jsx(cn,{className:"h-4 w-4 mr-1"}),"Add Task"]}),i.jsxs(K,{size:"sm",variant:T?"default":"outline",className:`rounded-2xl transition-all duration-200 hover:scale-105 active:scale-95 hover:-translate-y-0.5 active:translate-y-0 
                          font-medium tracking-wide ${T?"bg-gradient-to-r from-blue-600/90 to-indigo-600/90 dark:from-blue-500/90 dark:to-indigo-500/90 text-white shadow-lg ring-2 ring-blue-200/50 dark:ring-blue-400/30 backdrop-blur-sm border-0 hover:from-blue-700/95 hover:to-indigo-700/95 dark:hover:from-blue-400/95 dark:hover:to-indigo-400/95":"bg-gradient-to-r from-white/95 to-white/85 dark:from-neutral-800/80 dark:to-neutral-900/70 text-gray-700 dark:text-gray-200 hover:from-blue-50/90 hover:to-indigo-50/80 dark:hover:from-blue-950/40 dark:hover:to-indigo-950/30 hover:text-blue-700 dark:hover:text-blue-300 shadow-md hover:shadow-lg backdrop-blur-sm border border-gray-200/60 dark:border-gray-600/40 hover:border-blue-200/60 dark:hover:border-blue-400/30"}`,onClick:()=>C(!T),title:T?"Disable deadline sorting":"Sort by closest deadline",children:[i.jsx(Rc,{className:"h-4 w-4 mr-1"}),T?"Sorted by Deadline":"Sort by Deadline"]})]})]}),i.jsx(je,{className:"p-6",children:i.jsx("div",{className:`w-full overflow-x-auto rounded-2xl bg-gradient-to-r from-white/60 to-gray-50/40 dark:from-neutral-800/60 dark:to-neutral-900/40 \r
                          backdrop-blur-md border border-gray-200/60 dark:border-gray-600/40 shadow-lg`,children:i.jsxs("table",{className:"w-full text-xs",children:[i.jsx("thead",{className:`sticky top-0 bg-gradient-to-r from-white/80 to-gray-50/60 dark:from-neutral-800/80 dark:to-neutral-900/60 \r
                                backdrop-blur-md border-b border-gray-200/60 dark:border-gray-600/40`,children:i.jsxs("tr",{className:"text-left",children:[i.jsx("th",{className:"px-3 py-2 w-[120px] font-semibold text-gray-700 dark:text-gray-200",children:"Course"}),i.jsx("th",{className:"px-3 py-2 w-[420px] font-semibold text-gray-700 dark:text-gray-200",children:"Assignment / Todo"}),i.jsx("th",{className:"px-3 py-2 w-[150px] font-semibold text-gray-700 dark:text-gray-200",children:"Status"}),i.jsx("th",{className:"px-3 py-2 w-[140px] font-semibold text-gray-700 dark:text-gray-200",children:"Due Date"}),i.jsx("th",{className:"px-3 py-2 w-[110px] font-semibold text-gray-700 dark:text-gray-200",children:"Due Time"}),i.jsx("th",{className:"px-3 py-2 w-[110px] font-semibold text-gray-700 dark:text-gray-200",children:"Days Left"}),i.jsx("th",{className:"px-3 py-2 w-[90px] font-semibold text-gray-700 dark:text-gray-200",children:"Grade"}),i.jsx("th",{className:"px-3 py-2 w-[50px] font-semibold text-gray-700 dark:text-gray-200"})]})}),i.jsx("tbody",{children:ae.map(H=>i.jsxs("tr",{className:"border-t border-gray-200/40 dark:border-gray-600/30 hover:bg-white/30 dark:hover:bg-neutral-700/20 transition-colors duration-200",children:[i.jsx("td",{className:"px-2 py-2 w-[120px] max-w-[120px] overflow-hidden",children:i.jsxs(yt,{value:p(H.courseId)?.id||"",onValueChange:Q=>{typeof H.id=="string"&&H.id.startsWith("ph:")?I(H.id,{courseId:Q}):k(H.id,{courseId:Q})},children:[i.jsx(gt,{className:`h-8 w-full rounded-lg bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40 \r
                                                   focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
                                                   transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs overflow-hidden`,children:i.jsx(vt,{placeholder:"Select course",children:p(H.courseId)?i.jsx("span",{className:"block truncate text-left overflow-hidden",children:x(p(H.courseId))}):i.jsx("span",{className:"block truncate text-left text-gray-500 dark:text-gray-400",children:"Select course"})})}),i.jsxs(xt,{className:`rounded-2xl bg-white/95 dark:bg-neutral-900/95 backdrop-blur-xl border-0 shadow-2xl \r
                                                   ring-1 ring-gray-200/50 dark:ring-gray-600/50`,children:[m.length===0&&i.jsx(Oe,{value:"__no_courses__",disabled:!0,children:"No courses"}),m.map(Q=>i.jsx(Oe,{value:Q.id,className:`rounded-xl mx-1 my-0.5 focus:bg-cyan-50/90 dark:focus:bg-cyan-950/30 \r
                                          focus:text-cyan-700 dark:focus:text-cyan-300 cursor-pointer\r
                                          transition-all duration-200 hover:bg-cyan-50/50 dark:hover:bg-cyan-950/20`,children:i.jsx("span",{className:"block truncate",children:x(Q)})},Q.id))]})]})}),i.jsx("td",{className:"px-2 py-2",children:i.jsx(Ee,{className:`h-8 rounded-lg bg-white/80 dark:bg-neutral-900/60 border-gray-200/60 dark:border-gray-600/40 \r
                                    focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
                                    transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs`,value:H.title,onChange:Q=>{const ue=Q.target.value;typeof H.id=="string"&&H.id.startsWith("ph:")?I(H.id,{title:ue}):k(H.id,{title:ue})},placeholder:"Assignment title"})}),i.jsx("td",{className:"px-2 py-2",children:i.jsxs(yt,{value:H.status,onValueChange:Q=>{const ue=Q;typeof H.id=="string"&&H.id.startsWith("ph:")?I(H.id,{status:ue}):k(H.id,{status:ue})},children:[i.jsx(gt,{className:`h-8 rounded-lg bg-white/80 dark:bg-neutral-800/80 border-gray-200/60 dark:border-gray-600/40 \r
                                                   focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
                                                   transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs`,children:i.jsx(vt,{placeholder:"Status"})}),i.jsxs(xt,{className:`rounded-2xl bg-white/95 dark:bg-neutral-900/95 backdrop-blur-xl border-0 shadow-2xl \r
                                                   ring-1 ring-gray-200/50 dark:ring-gray-600/50`,children:[i.jsx(Oe,{value:"Not Started",className:`rounded-xl mx-1 my-0.5 focus:bg-cyan-50/90 dark:focus:bg-cyan-950/30 \r
                                                                      focus:text-cyan-700 dark:focus:text-cyan-300 cursor-pointer\r
                                                                      transition-all duration-200 hover:bg-cyan-50/50 dark:hover:bg-cyan-950/20`,children:"Not Started"}),i.jsx(Oe,{value:"In Progress",className:`rounded-xl mx-1 my-0.5 focus:bg-cyan-50/90 dark:focus:bg-cyan-950/30 \r
                                                                     focus:text-cyan-700 dark:focus:text-cyan-300 cursor-pointer\r
                                                                     transition-all duration-200 hover:bg-cyan-50/50 dark:hover:bg-cyan-950/20`,children:"In Progress"}),i.jsx(Oe,{value:"Completed",className:`rounded-xl mx-1 my-0.5 focus:bg-cyan-50/90 dark:focus:bg-cyan-950/30 \r
                                                                    focus:text-cyan-700 dark:focus:text-cyan-300 cursor-pointer\r
                                                                    transition-all duration-200 hover:bg-cyan-50/50 dark:hover:bg-cyan-950/20`,children:"Completed"})]})]})}),i.jsx("td",{className:"px-2 py-2",children:i.jsx(Ee,{className:`h-8 rounded-lg bg-white/80 dark:bg-neutral-900/60 border-gray-200/60 dark:border-gray-600/40 \r
                                    focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
                                    transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs`,type:"date",value:H.dueDate||"",onChange:Q=>{const ue=Q.target.value;typeof H.id=="string"&&H.id.startsWith("ph:")?I(H.id,{dueDate:ue}):k(H.id,{dueDate:ue})}})}),i.jsx("td",{className:"px-2 py-2",children:i.jsx(Ee,{className:`h-8 rounded-lg bg-white/80 dark:bg-neutral-900/60 border-gray-200/60 dark:border-gray-600/40 \r
                                    focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
                                    transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs`,type:"time",value:H.dueTime||"",onChange:Q=>{const ue=Q.target.value;typeof H.id=="string"&&H.id.startsWith("ph:")?I(H.id,{dueTime:ue}):k(H.id,{dueTime:ue})}})}),i.jsx("td",{className:"px-2 py-2",children:(()=>{const Q=L(H.dueDate);if(Q===void 0)return i.jsx("span",{className:"text-gray-400 dark:text-gray-500 text-xs",children:""});const ue=Q<0?"text-red-500 font-semibold":Q===0?"text-amber-600 font-semibold":"text-gray-600 dark:text-gray-300";return i.jsxs("span",{className:`${ue} text-xs`,children:[Q,"d"]})})()}),i.jsx("td",{className:"px-2 py-2",children:i.jsx(Ee,{className:`h-8 rounded-lg bg-white/80 dark:bg-neutral-900/60 border-gray-200/60 dark:border-gray-600/40 \r
                                    focus:border-blue-400/60 dark:focus:border-blue-400/60 focus:ring-2 focus:ring-blue-200/50 dark:focus:ring-blue-400/20\r
                                    transition-all duration-200 backdrop-blur-sm text-gray-700 dark:text-gray-200 text-xs`,value:H.grade||"",onChange:Q=>{const ue=Q.target.value;typeof H.id=="string"&&H.id.startsWith("ph:")?I(H.id,{grade:ue}):k(H.id,{grade:ue})}})}),i.jsx("td",{className:"px-2 py-2",children:typeof H.id=="string"&&!H.id.startsWith("ph:")&&(H.title?.trim()||H.courseId)?i.jsx(K,{variant:"outline",size:"sm",className:`h-6 w-6 p-0 rounded-lg \r
                                      text-gray-600 dark:text-gray-400 hover:text-red-500 dark:hover:text-red-400\r
                                      hover:bg-red-50/50 dark:hover:bg-red-950/20 transition-all duration-200\r
                                      focus:text-red-500 dark:focus:text-red-400`,onClick:()=>w(H.id),title:"Delete task",children:i.jsx(Un,{className:"h-3 w-3"})}):null})]},H.id))})]})})})]})]})})}const IB=i3([{path:"/",element:i.jsx(e4,{}),children:[{path:"",element:i.jsx(Ia,{children:i.jsx(ND,{})})},{path:"planner",element:i.jsx(Ia,{children:i.jsx(ED,{})})},{path:"tasks",element:i.jsx(Ia,{children:i.jsx(BB,{})})},{path:"schedule",element:i.jsx(Ia,{children:i.jsx(PD,{})})},{path:"course-planner",element:i.jsx(Ia,{children:i.jsx(V1,{})})},{path:"courses",element:i.jsx(Ia,{children:i.jsx(V1,{})})},{path:"gpa",element:i.jsx(Dk,{to:"/",replace:!0})},{path:"gpa-calculator",element:i.jsx(Dk,{to:"/",replace:!0})},{path:"scholarships",element:i.jsx(Ia,{children:i.jsx(nB,{})})},{path:"textbooks",element:i.jsx(Ia,{children:i.jsx(sB,{})})},{path:"settings",element:i.jsx(Ia,{children:i.jsx(DB,{})})}]}]);y3.createRoot(document.getElementById("root")).render(i.jsx(P.StrictMode,{children:i.jsx(c3,{router:IB})}));
//# sourceMappingURL=index-D9jjOnbI.js.map
